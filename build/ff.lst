ARM GAS  /tmp/ccVdKYyy.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 2
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"ff.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.chk_lock,"ax",%progbits
  18              		.align	1
  19              		.p2align 2,,3
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	chk_lock:
  26              	.LFB130:
  27              		.file 1 "Middlewares/Third_Party/FatFs/src/ff.c"
   1:Middlewares/Third_Party/FatFs/src/ff.c **** /*----------------------------------------------------------------------------/
   2:Middlewares/Third_Party/FatFs/src/ff.c **** /  FatFs - FAT file system module  R0.11                 (C)ChaN, 2015
   3:Middlewares/Third_Party/FatFs/src/ff.c **** /-----------------------------------------------------------------------------/
   4:Middlewares/Third_Party/FatFs/src/ff.c **** / FatFs module is a free software that opened under license policy of
   5:Middlewares/Third_Party/FatFs/src/ff.c **** / following conditions.
   6:Middlewares/Third_Party/FatFs/src/ff.c **** /
   7:Middlewares/Third_Party/FatFs/src/ff.c **** / Copyright (C) 2015, ChaN, all right reserved.
   8:Middlewares/Third_Party/FatFs/src/ff.c **** /
   9:Middlewares/Third_Party/FatFs/src/ff.c **** / 1. Redistributions of source code must retain the above copyright notice,
  10:Middlewares/Third_Party/FatFs/src/ff.c **** /    this condition and the following disclaimer.
  11:Middlewares/Third_Party/FatFs/src/ff.c **** /
  12:Middlewares/Third_Party/FatFs/src/ff.c **** / This software is provided by the copyright holder and contributors "AS IS"
  13:Middlewares/Third_Party/FatFs/src/ff.c **** / and any warranties related to this software are DISCLAIMED.
  14:Middlewares/Third_Party/FatFs/src/ff.c **** / The copyright owner or contributors be NOT LIABLE for any damages caused
  15:Middlewares/Third_Party/FatFs/src/ff.c **** / by use of this software.
  16:Middlewares/Third_Party/FatFs/src/ff.c **** /-----------------------------------------------------------------------------/
  17:Middlewares/Third_Party/FatFs/src/ff.c **** / Feb 26,'06 R0.00  Prototype.
  18:Middlewares/Third_Party/FatFs/src/ff.c **** /
  19:Middlewares/Third_Party/FatFs/src/ff.c **** / Apr 29,'06 R0.01  First stable version.
  20:Middlewares/Third_Party/FatFs/src/ff.c **** /
  21:Middlewares/Third_Party/FatFs/src/ff.c **** / Jun 01,'06 R0.02  Added FAT12 support.
  22:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Removed unbuffered mode.
  23:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed a problem on small (<32M) partition.
  24:Middlewares/Third_Party/FatFs/src/ff.c **** / Jun 10,'06 R0.02a Added a configuration option (_FS_MINIMUM).
  25:Middlewares/Third_Party/FatFs/src/ff.c **** /
  26:Middlewares/Third_Party/FatFs/src/ff.c **** / Sep 22,'06 R0.03  Added f_rename().
  27:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed option _FS_MINIMUM to _FS_MINIMIZE.
  28:Middlewares/Third_Party/FatFs/src/ff.c **** / Dec 11,'06 R0.03a Improved cluster scan algorithm to write files fast.
  29:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_mkdir() creates incorrect directory on FAT32.
  30:Middlewares/Third_Party/FatFs/src/ff.c **** /
  31:Middlewares/Third_Party/FatFs/src/ff.c **** / Feb 04,'07 R0.04  Supported multiple drive system.
ARM GAS  /tmp/ccVdKYyy.s 			page 2


  32:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed some interfaces for multiple drive system.
  33:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed f_mountdrv() to f_mount().
  34:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added f_mkfs().
  35:Middlewares/Third_Party/FatFs/src/ff.c **** / Apr 01,'07 R0.04a Supported multiple partitions on a physical drive.
  36:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added a capability of extending file size to f_lseek().
  37:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added minimization level 3.
  38:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed an endian sensitive code in f_mkfs().
  39:Middlewares/Third_Party/FatFs/src/ff.c **** / May 05,'07 R0.04b Added a configuration option _USE_NTFLAG.
  40:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added FSINFO support.
  41:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed DBCS name can result FR_INVALID_NAME.
  42:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed short seek (<= csize) collapses the file object.
  43:Middlewares/Third_Party/FatFs/src/ff.c **** /
  44:Middlewares/Third_Party/FatFs/src/ff.c **** / Aug 25,'07 R0.05  Changed arguments of f_read(), f_write() and f_mkfs().
  45:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_mkfs() on FAT32 creates incorrect FSINFO.
  46:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_mkdir() on FAT32 creates incorrect directory.
  47:Middlewares/Third_Party/FatFs/src/ff.c **** / Feb 03,'08 R0.05a Added f_truncate() and f_utime().
  48:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed off by one error at FAT sub-type determination.
  49:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed btr in f_read() can be mistruncated.
  50:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed cached sector is not flushed when create and close without write.
  51:Middlewares/Third_Party/FatFs/src/ff.c **** /
  52:Middlewares/Third_Party/FatFs/src/ff.c **** / Apr 01,'08 R0.06  Added fputc(), fputs(), fprintf() and fgets().
  53:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Improved performance of f_lseek() on moving to the same or following cluster.
  54:Middlewares/Third_Party/FatFs/src/ff.c **** /
  55:Middlewares/Third_Party/FatFs/src/ff.c **** / Apr 01,'09 R0.07  Merged Tiny-FatFs as a configuration option. (_FS_TINY)
  56:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added long file name feature.
  57:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added multiple code page feature.
  58:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added re-entrancy for multitask operation.
  59:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added auto cluster size selection to f_mkfs().
  60:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added rewind option to f_readdir().
  61:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed result code of critical errors.
  62:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Renamed string functions to avoid name collision.
  63:Middlewares/Third_Party/FatFs/src/ff.c **** / Apr 14,'09 R0.07a Separated out OS dependent code on reentrant cfg.
  64:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added multiple sector size feature.
  65:Middlewares/Third_Party/FatFs/src/ff.c **** / Jun 21,'09 R0.07c Fixed f_unlink() can return FR_OK on error.
  66:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed wrong cache control in f_lseek().
  67:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added relative path feature.
  68:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added f_chdir() and f_chdrive().
  69:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added proper case conversion to extended character.
  70:Middlewares/Third_Party/FatFs/src/ff.c **** / Nov 03,'09 R0.07e Separated out configuration options from ff.h to ffconf.h.
  71:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_unlink() fails to remove a sub-directory on _FS_RPATH.
  72:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed name matching error on the 13 character boundary.
  73:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added a configuration option, _LFN_UNICODE.
  74:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed f_readdir() to return the SFN with always upper case on non-LFN cfg.
  75:Middlewares/Third_Party/FatFs/src/ff.c **** /
  76:Middlewares/Third_Party/FatFs/src/ff.c **** / May 15,'10 R0.08  Added a memory configuration option. (_USE_LFN = 3)
  77:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added file lock feature. (_FS_SHARE)
  78:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added fast seek feature. (_USE_FASTSEEK)
  79:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed some types on the API, XCHAR->TCHAR.
  80:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed .fname in the FILINFO structure on Unicode cfg.
  81:Middlewares/Third_Party/FatFs/src/ff.c **** /                   String functions support UTF-8 encoding files on Unicode cfg.
  82:Middlewares/Third_Party/FatFs/src/ff.c **** / Aug 16,'10 R0.08a Added f_getcwd().
  83:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added sector erase feature. (_USE_ERASE)
  84:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Moved file lock semaphore table from fs object to the bss.
  85:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed a wrong directory entry is created on non-LFN cfg when the given name con
  86:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_mkfs() creates wrong FAT32 volume.
  87:Middlewares/Third_Party/FatFs/src/ff.c **** / Jan 15,'11 R0.08b Fast seek feature is also applied to f_read() and f_write().
  88:Middlewares/Third_Party/FatFs/src/ff.c **** /                   f_lseek() reports required table size on creating CLMP.
ARM GAS  /tmp/ccVdKYyy.s 			page 3


  89:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Extended format syntax of f_printf().
  90:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Ignores duplicated directory separators in given path name.
  91:Middlewares/Third_Party/FatFs/src/ff.c **** /
  92:Middlewares/Third_Party/FatFs/src/ff.c **** / Sep 06,'11 R0.09  f_mkfs() supports multiple partition to complete the multiple partition feature
  93:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added f_fdisk().
  94:Middlewares/Third_Party/FatFs/src/ff.c **** / Aug 27,'12 R0.09a Changed f_open() and f_opendir() reject null object pointer to avoid crash.
  95:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed option name _FS_SHARE to _FS_LOCK.
  96:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed assertion failure due to OS/2 EA on FAT12/16 volume.
  97:Middlewares/Third_Party/FatFs/src/ff.c **** / Jan 24,'13 R0.09b Added f_setlabel() and f_getlabel().
  98:Middlewares/Third_Party/FatFs/src/ff.c **** /
  99:Middlewares/Third_Party/FatFs/src/ff.c **** / Oct 02,'13 R0.10  Added selection of character encoding on the file. (_STRF_ENCODE)
 100:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added f_closedir().
 101:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added forced full FAT scan for f_getfree(). (_FS_NOFSINFO)
 102:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added forced mount feature with changes of f_mount().
 103:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Improved behavior of volume auto detection.
 104:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Improved write throughput of f_puts() and f_printf().
 105:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Changed argument of f_chdrive(), f_mkfs(), disk_read() and disk_write().
 106:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_write() can be truncated when the file size is close to 4GB.
 107:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_open(), f_mkdir() and f_setlabel() can return incorrect error code.
 108:Middlewares/Third_Party/FatFs/src/ff.c **** / Jan 15,'14 R0.10a Added arbitrary strings as drive number in the path name. (_STR_VOLUME_ID)
 109:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Added a configuration option of minimum sector size. (_MIN_SS)
 110:Middlewares/Third_Party/FatFs/src/ff.c **** /                   2nd argument of f_rename() can have a drive number and it will be ignored.
 111:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_mount() with forced mount fails when drive number is >= 1.
 112:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_close() invalidates the file object without volume lock.
 113:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_closedir() returns but the volume lock is left acquired.
 114:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed creation of an entry with LFN fails on too many SFN collisions.
 115:Middlewares/Third_Party/FatFs/src/ff.c **** / May 19,'14 R0.10b Fixed a hard error in the disk I/O layer can collapse the directory entry.
 116:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed LFN entry is not deleted on delete/rename an object with lossy converted 
 117:Middlewares/Third_Party/FatFs/src/ff.c **** / Nov  9,'14 R0.10c Added a configuration option for the platforms without RTC. (_FS_NORTC)
 118:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed volume label created by Mac OS X cannot be retrieved with f_getlabel(). (
 119:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed a potential problem of FAT access that can appear on disk error.
 120:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed null pointer dereference on attempting to delete the root direcotry. (app
 121:Middlewares/Third_Party/FatFs/src/ff.c **** / Feb 02,'15 R0.11  Added f_findfirst() and f_findnext(). (_USE_FIND)
 122:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed f_unlink() does not remove cluster chain of the file. (appeared at R0.10c
 123:Middlewares/Third_Party/FatFs/src/ff.c **** /                   Fixed _FS_NORTC option does not work properly. (appeared at R0.10c)
 124:Middlewares/Third_Party/FatFs/src/ff.c **** /---------------------------------------------------------------------------*/
 125:Middlewares/Third_Party/FatFs/src/ff.c **** 
 126:Middlewares/Third_Party/FatFs/src/ff.c **** #include "ff.h"			/* Declarations of FatFs API */
 127:Middlewares/Third_Party/FatFs/src/ff.c **** #include "diskio.h"		/* Declarations of disk I/O functions */
 128:Middlewares/Third_Party/FatFs/src/ff.c **** 
 129:Middlewares/Third_Party/FatFs/src/ff.c **** 
 130:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------------------------
 131:Middlewares/Third_Party/FatFs/src/ff.c **** 
 132:Middlewares/Third_Party/FatFs/src/ff.c ****    Module Private Definitions
 133:Middlewares/Third_Party/FatFs/src/ff.c **** 
 134:Middlewares/Third_Party/FatFs/src/ff.c **** ---------------------------------------------------------------------------*/
 135:Middlewares/Third_Party/FatFs/src/ff.c **** 
 136:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FATFS != 32020	/* Revision ID */
 137:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong include file (ff.h).
 138:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 139:Middlewares/Third_Party/FatFs/src/ff.c **** 
 140:Middlewares/Third_Party/FatFs/src/ff.c **** 
 141:Middlewares/Third_Party/FatFs/src/ff.c **** /* Reentrancy related */
 142:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 143:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1
 144:Middlewares/Third_Party/FatFs/src/ff.c **** #error Static LFN work area cannot be used at thread-safe configuration
 145:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  /tmp/ccVdKYyy.s 			page 4


 146:Middlewares/Third_Party/FatFs/src/ff.c **** #define	ENTER_FF(fs)		{ if (!lock_fs(fs)) return FR_TIMEOUT; }
 147:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LEAVE_FF(fs, res)	{ unlock_fs(fs, res); return res; }
 148:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 149:Middlewares/Third_Party/FatFs/src/ff.c **** #define	ENTER_FF(fs)
 150:Middlewares/Third_Party/FatFs/src/ff.c **** #define LEAVE_FF(fs, res)	return res
 151:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 152:Middlewares/Third_Party/FatFs/src/ff.c **** 
 153:Middlewares/Third_Party/FatFs/src/ff.c **** #define	ABORT(fs, res)		{ fp->err = (BYTE)(res); LEAVE_FF(fs, res); }
 154:Middlewares/Third_Party/FatFs/src/ff.c **** 
 155:Middlewares/Third_Party/FatFs/src/ff.c **** 
 156:Middlewares/Third_Party/FatFs/src/ff.c **** /* Definitions of sector size */
 157:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_MAX_SS < _MIN_SS) || (_MAX_SS != 512 && _MAX_SS != 1024 && _MAX_SS != 2048 && _MAX_SS != 4096
 158:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong sector size configuration
 159:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 160:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS == _MIN_SS
 161:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SS(fs)	((UINT)_MAX_SS)	/* Fixed sector size */
 162:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 163:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SS(fs)	((fs)->ssize)	/* Variable sector size */
 164:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 165:Middlewares/Third_Party/FatFs/src/ff.c **** 
 166:Middlewares/Third_Party/FatFs/src/ff.c **** 
 167:Middlewares/Third_Party/FatFs/src/ff.c **** /* Timestamp feature */
 168:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_NORTC == 1
 169:Middlewares/Third_Party/FatFs/src/ff.c **** #if _NORTC_YEAR < 1980 || _NORTC_YEAR > 2107 || _NORTC_MON < 1 || _NORTC_MON > 12 || _NORTC_MDAY < 
 170:Middlewares/Third_Party/FatFs/src/ff.c **** #error Invalid _FS_NORTC settings
 171:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 172:Middlewares/Third_Party/FatFs/src/ff.c **** #define GET_FATTIME()	((DWORD)(_NORTC_YEAR - 1980) << 25 | (DWORD)_NORTC_MON << 21 | (DWORD)_NORTC_
 173:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 174:Middlewares/Third_Party/FatFs/src/ff.c **** #define GET_FATTIME()	get_fattime()
 175:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 176:Middlewares/Third_Party/FatFs/src/ff.c **** 
 177:Middlewares/Third_Party/FatFs/src/ff.c **** 
 178:Middlewares/Third_Party/FatFs/src/ff.c **** /* File access control feature */
 179:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
 180:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_READONLY
 181:Middlewares/Third_Party/FatFs/src/ff.c **** #error _FS_LOCK must be 0 at read-only configuration
 182:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 183:Middlewares/Third_Party/FatFs/src/ff.c **** typedef struct {
 184:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;		/* Object ID 1, volume (NULL:blank entry) */
 185:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clu;		/* Object ID 2, directory (0:root) */
 186:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD idx;		/* Object ID 3, directory index */
 187:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD ctr;		/* Object open counter, 0:none, 0x01..0xFF:read mode open count, 0x100:write mode */
 188:Middlewares/Third_Party/FatFs/src/ff.c **** } FILESEM;
 189:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 190:Middlewares/Third_Party/FatFs/src/ff.c **** 
 191:Middlewares/Third_Party/FatFs/src/ff.c **** 
 192:Middlewares/Third_Party/FatFs/src/ff.c **** 
 193:Middlewares/Third_Party/FatFs/src/ff.c **** /* DBCS code ranges and SBCS extend character conversion table */
 194:Middlewares/Third_Party/FatFs/src/ff.c **** 
 195:Middlewares/Third_Party/FatFs/src/ff.c **** #if _CODE_PAGE == 932	/* Japanese Shift-JIS */
 196:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81	/* DBC 1st byte range 1 start */
 197:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0x9F	/* DBC 1st byte range 1 end */
 198:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF2S	0xE0	/* DBC 1st byte range 2 start */
 199:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF2E	0xFC	/* DBC 1st byte range 2 end */
 200:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x40	/* DBC 2nd byte range 1 start */
 201:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x7E	/* DBC 2nd byte range 1 end */
 202:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0x80	/* DBC 2nd byte range 2 start */
ARM GAS  /tmp/ccVdKYyy.s 			page 5


 203:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0xFC	/* DBC 2nd byte range 2 end */
 204:Middlewares/Third_Party/FatFs/src/ff.c **** 
 205:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 936	/* Simplified Chinese GBK */
 206:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81
 207:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0xFE
 208:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x40
 209:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x7E
 210:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0x80
 211:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0xFE
 212:Middlewares/Third_Party/FatFs/src/ff.c **** 
 213:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 949	/* Korean */
 214:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81
 215:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0xFE
 216:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x41
 217:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x5A
 218:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0x61
 219:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0x7A
 220:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS3S	0x81
 221:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS3E	0xFE
 222:Middlewares/Third_Party/FatFs/src/ff.c **** 
 223:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 950	/* Traditional Chinese Big5 */
 224:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81
 225:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0xFE
 226:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x40
 227:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x7E
 228:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0xA1
 229:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0xFE
 230:Middlewares/Third_Party/FatFs/src/ff.c **** 
 231:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 437	/* U.S. (OEM) */
 232:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 233:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F,0x9
 234:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 235:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 236:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 237:Middlewares/Third_Party/FatFs/src/ff.c **** 
 238:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 720	/* Arabic (OEM) */
 239:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 240:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x45,0x41,0x84,0x41,0x86,0x43,0x45,0x45,0x45,0x49,0x49,0x8D,0x8E,0x8F,0x9
 241:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 242:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 243:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 244:Middlewares/Third_Party/FatFs/src/ff.c **** 
 245:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 737	/* Greek (OEM) */
 246:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 247:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 248:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0xAA,0x92,0x93,0x94,0x95,0x96,0xB0,0xB1,0xB2,
 249:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 250:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x97,0xEA,0xEB,0xEC,0xE4,0xED,0xEE,0xE7,0xE8,0xF1,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 251:Middlewares/Third_Party/FatFs/src/ff.c **** 
 252:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 775	/* Baltic (OEM) */
 253:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 254:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x91,0xA0,0x8E,0x95,0x8F,0x80,0xAD,0xED,0x8A,0x8A,0xA1,0x8D,0x8E,0x8F,0x9
 255:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xE0,0xA3,0xA3,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 256:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xB5,0xB6,0xB7,
 257:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE3,0xE8,0xE8,0xEA,0xEA,0xEE,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 258:Middlewares/Third_Party/FatFs/src/ff.c **** 
 259:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 850	/* Multilingual Latin 1 (OEM) */
ARM GAS  /tmp/ccVdKYyy.s 			page 6


 260:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 261:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0xDE,0x8E,0x8F,0x9
 262:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 263:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 264:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE7,0xE9,0xEA,0xEB,0xED,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 265:Middlewares/Third_Party/FatFs/src/ff.c **** 
 266:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 852	/* Latin 2 (OEM) */
 267:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 268:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xDE,0x8F,0x80,0x9D,0xD3,0x8A,0x8A,0xD7,0x8D,0x8E,0x8F,0x9
 269:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA4,0xA4,0xA6,0xA6,0xA8,0xA8,0xAA,0x8D,0xAC,0xB8,0xAE,0xAF,0xB0,0xB1,0xB2,
 270:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC6,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD2,
 271:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE3,0xD5,0xE6,0xE6,0xE8,0xE9,0xE8,0xEB,0xED,0xED,0xDD,0xEF,0xF0,0xF1,0xF2,
 272:Middlewares/Third_Party/FatFs/src/ff.c **** 
 273:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 855	/* Cyrillic (OEM) */
 274:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 275:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x81,0x81,0x83,0x83,0x85,0x85,0x87,0x87,0x89,0x89,0x8B,0x8B,0x8D,0x8D,0x8F,0x8F,0x9
 276:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA1,0xA1,0xA3,0xA3,0xA5,0xA5,0xA7,0xA7,0xA9,0xA9,0xAB,0xAB,0xAD,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 277:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD3,
 278:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE2,0xE2,0xE4,0xE4,0xE6,0xE6,0xE8,0xE8,0xEA,0xEA,0xEC,0xEC,0xEE,0xEE,0xEF,0xF0,0xF2,0xF2,
 279:Middlewares/Third_Party/FatFs/src/ff.c **** 
 280:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 857	/* Turkish (OEM) */
 281:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 282:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0x98,0x8E,0x8F,0x9
 283:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA6,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 284:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 285:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xDE,0x59,0xEE,0xEF,0xF0,0xF1,0xF2,
 286:Middlewares/Third_Party/FatFs/src/ff.c **** 
 287:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 858	/* Multilingual Latin 1 + Euro (OEM) */
 288:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 289:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0xDE,0x8E,0x8F,0x9
 290:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 291:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD1,0xD1,0xD2,
 292:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE7,0xE9,0xEA,0xEB,0xED,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 293:Middlewares/Third_Party/FatFs/src/ff.c **** 
 294:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 862	/* Hebrew (OEM) */
 295:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 296:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 297:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0x21,0xAE,0xAF,0xB0,0xB1,0xB2,
 298:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 299:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 300:Middlewares/Third_Party/FatFs/src/ff.c **** 
 301:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 866	/* Russian (OEM) */
 302:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 303:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 304:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0xB0,0xB1,0xB2,
 305:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 306:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x9d,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F,0xF0,0xF0,0xF2,
 307:Middlewares/Third_Party/FatFs/src/ff.c **** 
 308:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 874	/* Thai (OEM, Windows) */
 309:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 310:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 311:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 312:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 313:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 314:Middlewares/Third_Party/FatFs/src/ff.c **** 
 315:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1250 /* Central Europe (Windows) */
 316:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
ARM GAS  /tmp/ccVdKYyy.s 			page 7


 317:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 318:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 319:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 320:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 321:Middlewares/Third_Party/FatFs/src/ff.c **** 
 322:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1251 /* Cyrillic (Windows) */
 323:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 324:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x82,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x8
 325:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA2,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 326:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 327:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 328:Middlewares/Third_Party/FatFs/src/ff.c **** 
 329:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1252 /* Latin 1 (Windows) */
 330:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 331:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 332:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 333:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 334:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 335:Middlewares/Third_Party/FatFs/src/ff.c **** 
 336:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1253 /* Greek (Windows) */
 337:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 338:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 339:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 340:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 341:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xF2,
 342:Middlewares/Third_Party/FatFs/src/ff.c **** 
 343:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1254 /* Turkish (Windows) */
 344:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 345:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 346:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 347:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 348:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 349:Middlewares/Third_Party/FatFs/src/ff.c **** 
 350:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1255 /* Hebrew (Windows) */
 351:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 352:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 353:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 354:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 355:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF,0xF0,0xF1,0xF2,
 356:Middlewares/Third_Party/FatFs/src/ff.c **** 
 357:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1256 /* Arabic (Windows) */
 358:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 359:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 360:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 361:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 362:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0xE1,0x41,0xE3,0xE4,0xE5,0xE6,0x43,0x45,0x45,0x45,0x45,0xEC,0xED,0x49,0x49,0xF0,0xF1,0xF2,
 363:Middlewares/Third_Party/FatFs/src/ff.c **** 
 364:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1257 /* Baltic (Windows) */
 365:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 366:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
 367:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 368:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 369:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 370:Middlewares/Third_Party/FatFs/src/ff.c **** 
 371:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1258 /* Vietnam (OEM, Windows) */
 372:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 373:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x9
ARM GAS  /tmp/ccVdKYyy.s 			page 8


 374:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0x21,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF,0xB0,0xB1,0xB2,
 375:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF,0xD0,0xD1,0xD2,
 376:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xEC,0xCD,0xCE,0xCF,0xD0,0xD1,0xF2,
 377:Middlewares/Third_Party/FatFs/src/ff.c **** 
 378:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1	/* ASCII (for only non-LFN cfg) */
 379:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
 380:Middlewares/Third_Party/FatFs/src/ff.c **** #error Cannot use LFN feature without valid code page.
 381:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 382:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 383:Middlewares/Third_Party/FatFs/src/ff.c **** 
 384:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 385:Middlewares/Third_Party/FatFs/src/ff.c **** #error Unknown code page
 386:Middlewares/Third_Party/FatFs/src/ff.c **** 
 387:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 388:Middlewares/Third_Party/FatFs/src/ff.c **** 
 389:Middlewares/Third_Party/FatFs/src/ff.c **** 
 390:Middlewares/Third_Party/FatFs/src/ff.c **** /* Character code support macros */
 391:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsUpper(c)	(((c)>='A')&&((c)<='Z'))
 392:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsLower(c)	(((c)>='a')&&((c)<='z'))
 393:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDigit(c)	(((c)>='0')&&((c)<='9'))
 394:Middlewares/Third_Party/FatFs/src/ff.c **** 
 395:Middlewares/Third_Party/FatFs/src/ff.c **** #if _DF1S		/* Code page is DBCS */
 396:Middlewares/Third_Party/FatFs/src/ff.c **** 
 397:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _DF2S	/* Two 1st byte areas */
 398:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS1(c)	(((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E) || ((BYTE)(c) >= _DF2S && (BYTE)(c) 
 399:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* One 1st byte area */
 400:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS1(c)	((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E)
 401:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 402:Middlewares/Third_Party/FatFs/src/ff.c **** 
 403:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _DS3S	/* Three 2nd byte areas */
 404:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) 
 405:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* Two 2nd byte areas */
 406:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) 
 407:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 408:Middlewares/Third_Party/FatFs/src/ff.c **** 
 409:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* Code page is SBCS */
 410:Middlewares/Third_Party/FatFs/src/ff.c **** 
 411:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS1(c)	0
 412:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS2(c)	0
 413:Middlewares/Third_Party/FatFs/src/ff.c **** 
 414:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _DF1S */
 415:Middlewares/Third_Party/FatFs/src/ff.c **** 
 416:Middlewares/Third_Party/FatFs/src/ff.c **** 
 417:Middlewares/Third_Party/FatFs/src/ff.c **** /* Name status flags */
 418:Middlewares/Third_Party/FatFs/src/ff.c **** #define NSFLAG		11		/* Index of name status byte in fn[] */
 419:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_LOSS		0x01	/* Out of 8.3 format */
 420:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_LFN		0x02	/* Force to create LFN entry */
 421:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_LAST		0x04	/* Last segment */
 422:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_BODY		0x08	/* Lower case flag (body) */
 423:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_EXT		0x10	/* Lower case flag (ext) */
 424:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_DOT		0x20	/* Dot entry */
 425:Middlewares/Third_Party/FatFs/src/ff.c **** 
 426:Middlewares/Third_Party/FatFs/src/ff.c **** 
 427:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT sub-type boundaries (Differ from specs but correct for real DOS/Windows) */
 428:Middlewares/Third_Party/FatFs/src/ff.c **** #define MIN_FAT16	4086U	/* Minimum number of clusters as FAT16 */
 429:Middlewares/Third_Party/FatFs/src/ff.c **** #define	MIN_FAT32	65526U	/* Minimum number of clusters as FAT32 */
 430:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccVdKYyy.s 			page 9


 431:Middlewares/Third_Party/FatFs/src/ff.c **** 
 432:Middlewares/Third_Party/FatFs/src/ff.c **** /* FatFs refers the members in the FAT structures as byte array instead of
 433:Middlewares/Third_Party/FatFs/src/ff.c **** / structure member because the structure is not binary compatible between
 434:Middlewares/Third_Party/FatFs/src/ff.c **** / different platforms */
 435:Middlewares/Third_Party/FatFs/src/ff.c **** 
 436:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_jmpBoot			0		/* x86 jump instruction (3) */
 437:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_OEMName			3		/* OEM name (8) */
 438:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_BytsPerSec		11		/* Sector size [byte] (2) */
 439:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_SecPerClus		13		/* Cluster size [sector] (1) */
 440:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RsvdSecCnt		14		/* Size of reserved area [sector] (2) */
 441:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_NumFATs			16		/* Number of FAT copies (1) */
 442:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RootEntCnt		17		/* Number of root directory entries for FAT12/16 (2) */
 443:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_TotSec16		19		/* Volume size [sector] (2) */
 444:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_Media			21		/* Media descriptor (1) */
 445:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FATSz16			22		/* FAT size [sector] (2) */
 446:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_SecPerTrk		24		/* Track size [sector] (2) */
 447:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_NumHeads		26		/* Number of heads (2) */
 448:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_HiddSec			28		/* Number of special hidden sectors (4) */
 449:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_TotSec32		32		/* Volume size [sector] (4) */
 450:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_DrvNum			36		/* Physical drive number (2) */
 451:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootSig			38		/* Extended boot signature (1) */
 452:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolID			39		/* Volume serial number (4) */
 453:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolLab			43		/* Volume label (8) */
 454:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_FilSysType		54		/* File system type (1) */
 455:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FATSz32			36		/* FAT size [sector] (4) */
 456:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_ExtFlags		40		/* Extended flags (2) */
 457:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FSVer			42		/* File system version (2) */
 458:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RootClus		44		/* Root directory first cluster (4) */
 459:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FSInfo			48		/* Offset of FSINFO sector (2) */
 460:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_BkBootSec		50		/* Offset of backup boot sector (2) */
 461:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_DrvNum32			64		/* Physical drive number (2) */
 462:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootSig32		66		/* Extended boot signature (1) */
 463:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolID32			67		/* Volume serial number (4) */
 464:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolLab32			71		/* Volume label (8) */
 465:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_FilSysType32		82		/* File system type (1) */
 466:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_LeadSig			0		/* FSI: Leading signature (4) */
 467:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_StrucSig		484		/* FSI: Structure signature (4) */
 468:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_Free_Count		488		/* FSI: Number of free clusters (4) */
 469:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_Nxt_Free		492		/* FSI: Last allocated cluster (4) */
 470:Middlewares/Third_Party/FatFs/src/ff.c **** #define MBR_Table			446		/* MBR: Partition table offset (2) */
 471:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SZ_PTE				16		/* MBR: Size of a partition table entry */
 472:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_55AA				510		/* Signature word (2) */
 473:Middlewares/Third_Party/FatFs/src/ff.c **** 
 474:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_Name			0		/* Short file name (11) */
 475:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_Attr			11		/* Attribute (1) */
 476:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_NTres			12		/* Lower case flag (1) */
 477:Middlewares/Third_Party/FatFs/src/ff.c **** #define DIR_CrtTimeTenth	13		/* Created time sub-second (1) */
 478:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_CrtTime			14		/* Created time (2) */
 479:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_CrtDate			16		/* Created date (2) */
 480:Middlewares/Third_Party/FatFs/src/ff.c **** #define DIR_LstAccDate		18		/* Last accessed date (2) */
 481:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_FstClusHI		20		/* Higher 16-bit of first cluster (2) */
 482:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_WrtTime			22		/* Modified time (2) */
 483:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_WrtDate			24		/* Modified date (2) */
 484:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_FstClusLO		26		/* Lower 16-bit of first cluster (2) */
 485:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_FileSize		28		/* File size (4) */
 486:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Ord			0		/* LFN entry order and LLE flag (1) */
 487:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Attr			11		/* LFN attribute (1) */
ARM GAS  /tmp/ccVdKYyy.s 			page 10


 488:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Type			12		/* LFN type (1) */
 489:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Chksum			13		/* Sum of corresponding SFN entry */
 490:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_FstClusLO		26		/* Must be zero (0) */
 491:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SZ_DIRE				32		/* Size of a directory entry */
 492:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LLEF				0x40	/* Last long entry flag in LDIR_Ord */
 493:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DDEM				0xE5	/* Deleted directory entry mark at DIR_Name[0] */
 494:Middlewares/Third_Party/FatFs/src/ff.c **** #define	RDDEM				0x05	/* Replacement of the character collides with DDEM */
 495:Middlewares/Third_Party/FatFs/src/ff.c **** 
 496:Middlewares/Third_Party/FatFs/src/ff.c **** 
 497:Middlewares/Third_Party/FatFs/src/ff.c **** 
 498:Middlewares/Third_Party/FatFs/src/ff.c **** 
 499:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------------------*/
 500:Middlewares/Third_Party/FatFs/src/ff.c **** /* Module private work area                                   */
 501:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------------------*/
 502:Middlewares/Third_Party/FatFs/src/ff.c **** /* Remark: Uninitialized variables with static duration are
 503:Middlewares/Third_Party/FatFs/src/ff.c **** /  guaranteed zero/null at start-up. If not, either the linker
 504:Middlewares/Third_Party/FatFs/src/ff.c **** /  or start-up routine being used is out of ANSI-C standard.
 505:Middlewares/Third_Party/FatFs/src/ff.c **** */
 506:Middlewares/Third_Party/FatFs/src/ff.c **** 
 507:Middlewares/Third_Party/FatFs/src/ff.c **** #if _VOLUMES < 1 || _VOLUMES > 9
 508:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong _VOLUMES setting
 509:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 510:Middlewares/Third_Party/FatFs/src/ff.c **** static FATFS *FatFs[_VOLUMES];	/* Pointer to the file system objects (logical drives) */
 511:Middlewares/Third_Party/FatFs/src/ff.c **** static WORD Fsid;				/* File system mount ID */
 512:Middlewares/Third_Party/FatFs/src/ff.c **** 
 513:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH && _VOLUMES >= 2
 514:Middlewares/Third_Party/FatFs/src/ff.c **** static BYTE CurrVol;			/* Current drive */
 515:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 516:Middlewares/Third_Party/FatFs/src/ff.c **** 
 517:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
 518:Middlewares/Third_Party/FatFs/src/ff.c **** static FILESEM Files[_FS_LOCK];	/* Open object lock semaphores */
 519:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 520:Middlewares/Third_Party/FatFs/src/ff.c **** 
 521:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 0			/* Non LFN feature */
 522:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEFINE_NAMEBUF		BYTE sfn[12]
 523:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_BUF(dobj)		(dobj).fn = sfn
 524:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_BUF()
 525:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 526:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_LFN < 12 || _MAX_LFN > 255
 527:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong _MAX_LFN setting
 528:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 529:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1			/* LFN feature with static working buffer */
 530:Middlewares/Third_Party/FatFs/src/ff.c **** static WCHAR LfnBuf[_MAX_LFN + 1];
 531:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEFINE_NAMEBUF		BYTE sfn[12]
 532:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_BUF(dobj)		{ (dobj).fn = sfn; (dobj).lfn = LfnBuf; }
 533:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_BUF()
 534:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _USE_LFN == 2 		/* LFN feature with dynamic working buffer on the stack */
 535:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEFINE_NAMEBUF		BYTE sfn[12]; WCHAR lbuf[_MAX_LFN + 1]
 536:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_BUF(dobj)		{ (dobj).fn = sfn; (dobj).lfn = lbuf; }
 537:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_BUF()
 538:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _USE_LFN == 3 		/* LFN feature with dynamic working buffer on the heap */
 539:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEFINE_NAMEBUF		BYTE sfn[12]; WCHAR *lfn
 540:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_BUF(dobj)		{ lfn = ff_memalloc((_MAX_LFN + 1) * 2); if (!lfn) LEAVE_FF((dobj).fs, FR_N
 541:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_BUF()			ff_memfree(lfn)
 542:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 543:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong _USE_LFN setting
 544:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  /tmp/ccVdKYyy.s 			page 11


 545:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 546:Middlewares/Third_Party/FatFs/src/ff.c **** 
 547:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
 548:Middlewares/Third_Party/FatFs/src/ff.c **** static const BYTE ExCvt[] = _EXCVT;	/* Upper conversion table for extended characters */
 549:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 550:Middlewares/Third_Party/FatFs/src/ff.c **** 
 551:Middlewares/Third_Party/FatFs/src/ff.c **** 
 552:Middlewares/Third_Party/FatFs/src/ff.c **** 
 553:Middlewares/Third_Party/FatFs/src/ff.c **** 
 554:Middlewares/Third_Party/FatFs/src/ff.c **** 
 555:Middlewares/Third_Party/FatFs/src/ff.c **** 
 556:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------------------------
 557:Middlewares/Third_Party/FatFs/src/ff.c **** 
 558:Middlewares/Third_Party/FatFs/src/ff.c ****    Module Private Functions
 559:Middlewares/Third_Party/FatFs/src/ff.c **** 
 560:Middlewares/Third_Party/FatFs/src/ff.c **** ---------------------------------------------------------------------------*/
 561:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD clust2sect (FATFS* fs, DWORD clst);
 562:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD get_fat (FATFS* fs,	DWORD clst);
 563:Middlewares/Third_Party/FatFs/src/ff.c **** 
 564:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 565:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT put_fat (FATFS* fs,	DWORD clst,	DWORD val);
 566:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
 567:Middlewares/Third_Party/FatFs/src/ff.c **** 
 568:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
 569:Middlewares/Third_Party/FatFs/src/ff.c **** static void gen_numname (BYTE* dst, const BYTE* src, const WCHAR* lfn, UINT seq);
 570:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_USE_LFN */
 571:Middlewares/Third_Party/FatFs/src/ff.c **** 
 572:Middlewares/Third_Party/FatFs/src/ff.c **** 
 573:Middlewares/Third_Party/FatFs/src/ff.c **** 
 574:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 575:Middlewares/Third_Party/FatFs/src/ff.c **** /* String functions                                                      */
 576:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 577:Middlewares/Third_Party/FatFs/src/ff.c **** 
 578:Middlewares/Third_Party/FatFs/src/ff.c **** /* Copy memory to memory */
 579:Middlewares/Third_Party/FatFs/src/ff.c **** static
 580:Middlewares/Third_Party/FatFs/src/ff.c **** void mem_cpy (void* dst, const void* src, UINT cnt) {
 581:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *d = (BYTE*)dst;
 582:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE *s = (const BYTE*)src;
 583:Middlewares/Third_Party/FatFs/src/ff.c **** 
 584:Middlewares/Third_Party/FatFs/src/ff.c **** #if _WORD_ACCESS == 1
 585:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (cnt >= sizeof (int)) {
 586:Middlewares/Third_Party/FatFs/src/ff.c **** 		*(int*)d = *(int*)s;
 587:Middlewares/Third_Party/FatFs/src/ff.c **** 		d += sizeof (int); s += sizeof (int);
 588:Middlewares/Third_Party/FatFs/src/ff.c **** 		cnt -= sizeof (int);
 589:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 590:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (cnt--)
 592:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = *s++;
 593:Middlewares/Third_Party/FatFs/src/ff.c **** }
 594:Middlewares/Third_Party/FatFs/src/ff.c **** 
 595:Middlewares/Third_Party/FatFs/src/ff.c **** /* Fill memory */
 596:Middlewares/Third_Party/FatFs/src/ff.c **** static
 597:Middlewares/Third_Party/FatFs/src/ff.c **** void mem_set (void* dst, int val, UINT cnt) {
 598:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *d = (BYTE*)dst;
 599:Middlewares/Third_Party/FatFs/src/ff.c **** 
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (cnt--)
 601:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
ARM GAS  /tmp/ccVdKYyy.s 			page 12


 602:Middlewares/Third_Party/FatFs/src/ff.c **** }
 603:Middlewares/Third_Party/FatFs/src/ff.c **** 
 604:Middlewares/Third_Party/FatFs/src/ff.c **** /* Compare memory to memory */
 605:Middlewares/Third_Party/FatFs/src/ff.c **** static
 606:Middlewares/Third_Party/FatFs/src/ff.c **** int mem_cmp (const void* dst, const void* src, UINT cnt) {
 607:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE *d = (const BYTE *)dst, *s = (const BYTE *)src;
 608:Middlewares/Third_Party/FatFs/src/ff.c **** 	int r = 0;
 609:Middlewares/Third_Party/FatFs/src/ff.c **** 
 610:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (cnt-- && (r = *d++ - *s++) == 0) ;
 611:Middlewares/Third_Party/FatFs/src/ff.c **** 	return r;
 612:Middlewares/Third_Party/FatFs/src/ff.c **** }
 613:Middlewares/Third_Party/FatFs/src/ff.c **** 
 614:Middlewares/Third_Party/FatFs/src/ff.c **** /* Check if chr is contained in the string */
 615:Middlewares/Third_Party/FatFs/src/ff.c **** static
 616:Middlewares/Third_Party/FatFs/src/ff.c **** int chk_chr (const char* str, int chr) {
 617:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (*str && *str != chr) str++;
 618:Middlewares/Third_Party/FatFs/src/ff.c **** 	return *str;
 619:Middlewares/Third_Party/FatFs/src/ff.c **** }
 620:Middlewares/Third_Party/FatFs/src/ff.c **** 
 621:Middlewares/Third_Party/FatFs/src/ff.c **** 
 622:Middlewares/Third_Party/FatFs/src/ff.c **** 
 623:Middlewares/Third_Party/FatFs/src/ff.c **** 
 624:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 625:Middlewares/Third_Party/FatFs/src/ff.c **** /* Request/Release grant to access the volume                            */
 626:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 627:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 628:Middlewares/Third_Party/FatFs/src/ff.c **** static
 629:Middlewares/Third_Party/FatFs/src/ff.c **** int lock_fs (
 630:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs		/* File system object */
 631:Middlewares/Third_Party/FatFs/src/ff.c **** )
 632:Middlewares/Third_Party/FatFs/src/ff.c **** {
 633:Middlewares/Third_Party/FatFs/src/ff.c **** 	return ff_req_grant(fs->sobj);
 634:Middlewares/Third_Party/FatFs/src/ff.c **** }
 635:Middlewares/Third_Party/FatFs/src/ff.c **** 
 636:Middlewares/Third_Party/FatFs/src/ff.c **** 
 637:Middlewares/Third_Party/FatFs/src/ff.c **** static
 638:Middlewares/Third_Party/FatFs/src/ff.c **** void unlock_fs (
 639:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* File system object */
 640:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res		/* Result code to be returned */
 641:Middlewares/Third_Party/FatFs/src/ff.c **** )
 642:Middlewares/Third_Party/FatFs/src/ff.c **** {
 643:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs &&
 644:Middlewares/Third_Party/FatFs/src/ff.c **** 		res != FR_NOT_ENABLED &&
 645:Middlewares/Third_Party/FatFs/src/ff.c **** 		res != FR_INVALID_DRIVE &&
 646:Middlewares/Third_Party/FatFs/src/ff.c **** 		res != FR_INVALID_OBJECT &&
 647:Middlewares/Third_Party/FatFs/src/ff.c **** 		res != FR_TIMEOUT) {
 648:Middlewares/Third_Party/FatFs/src/ff.c **** 		ff_rel_grant(fs->sobj);
 649:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 650:Middlewares/Third_Party/FatFs/src/ff.c **** }
 651:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 652:Middlewares/Third_Party/FatFs/src/ff.c **** 
 653:Middlewares/Third_Party/FatFs/src/ff.c **** 
 654:Middlewares/Third_Party/FatFs/src/ff.c **** 
 655:Middlewares/Third_Party/FatFs/src/ff.c **** 
 656:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 657:Middlewares/Third_Party/FatFs/src/ff.c **** /* File lock control functions                                           */
 658:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  /tmp/ccVdKYyy.s 			page 13


 659:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
 660:Middlewares/Third_Party/FatFs/src/ff.c **** 
 661:Middlewares/Third_Party/FatFs/src/ff.c **** static
 662:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT chk_lock (	/* Check if the file can be accessed */
 663:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Directory object pointing the file to be checked */
 664:Middlewares/Third_Party/FatFs/src/ff.c **** 	int acc			/* Desired access type (0:Read, 1:Write, 2:Delete/Rename) */
 665:Middlewares/Third_Party/FatFs/src/ff.c **** )
 666:Middlewares/Third_Party/FatFs/src/ff.c **** {
  28              		.loc 1 666 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33              	.LVL0:
  34 0000 F0B4     		push	{r4, r5, r6, r7}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 16
  37              		.cfi_offset 4, -16
  38              		.cfi_offset 5, -12
  39              		.cfi_offset 6, -8
  40              		.cfi_offset 7, -4
  41 0002 1A4F     		ldr	r7, .L27
 667:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, be;
 668:Middlewares/Third_Party/FatFs/src/ff.c **** 
 669:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Search file semaphore table */
 670:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = be = 0; i < _FS_LOCK; i++) {
  42              		.loc 1 670 0
  43 0004 0026     		movs	r6, #0
  44 0006 3A46     		mov	r2, r7
  45 0008 3346     		mov	r3, r6
  46              	.LVL1:
  47              	.L4:
 671:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
  48              		.loc 1 671 0
  49 000a 1468     		ldr	r4, [r2]
  50 000c 94B1     		cbz	r4, .L9
 672:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (Files[i].fs == dp->fs &&	 	/* Check if the object matched with an open object */
  51              		.loc 1 672 0
  52 000e D0F80052 		ldr	r5, [r0, #512]
  53 0012 AC42     		cmp	r4, r5
  54 0014 10D0     		beq	.L24
  55              	.L2:
 670:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
  56              		.loc 1 670 0 discriminator 2
  57 0016 0133     		adds	r3, r3, #1
  58              	.LVL2:
  59 0018 022B     		cmp	r3, #2
  60 001a 02F10C02 		add	r2, r2, #12
  61 001e F4D1     		bne	.L4
 673:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->sclust &&
 674:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].idx == dp->index) break;
 675:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {			/* Blank entry */
 676:Middlewares/Third_Party/FatFs/src/ff.c **** 			be = 1;
 677:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 678:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 679:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i == _FS_LOCK)	/* The object is not opened */
 680:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
ARM GAS  /tmp/ccVdKYyy.s 			page 14


  62              		.loc 1 680 0
  63 0020 2EB9     		cbnz	r6, .L25
  64              		.loc 1 680 0 is_stmt 0 discriminator 2
  65 0022 0229     		cmp	r1, #2
  66 0024 0CBF     		ite	eq
  67 0026 0020     		moveq	r0, #0
  68              	.LVL3:
  69 0028 1220     		movne	r0, #18
 681:Middlewares/Third_Party/FatFs/src/ff.c **** 
 682:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* The object has been opened. Reject any open against writing file and all write mode open */
 683:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (acc || Files[i].ctr == 0x100) ? FR_LOCKED : FR_OK;
 684:Middlewares/Third_Party/FatFs/src/ff.c **** }
  70              		.loc 1 684 0 is_stmt 1 discriminator 2
  71 002a F0BC     		pop	{r4, r5, r6, r7}
  72              	.LCFI1:
  73              		.cfi_remember_state
  74              		.cfi_restore 7
  75              		.cfi_restore 6
  76              		.cfi_restore 5
  77              		.cfi_restore 4
  78              		.cfi_def_cfa_offset 0
  79 002c 7047     		bx	lr
  80              	.LVL4:
  81              	.L25:
  82              	.LCFI2:
  83              		.cfi_restore_state
 683:Middlewares/Third_Party/FatFs/src/ff.c **** }
  84              		.loc 1 683 0
  85 002e 0020     		movs	r0, #0
  86              	.LVL5:
  87              		.loc 1 684 0
  88 0030 F0BC     		pop	{r4, r5, r6, r7}
  89              	.LCFI3:
  90              		.cfi_remember_state
  91              		.cfi_restore 4
  92              		.cfi_restore 5
  93              		.cfi_restore 6
  94              		.cfi_restore 7
  95              		.cfi_def_cfa_offset 0
  96 0032 7047     		bx	lr
  97              	.LVL6:
  98              	.L9:
  99              	.LCFI4:
 100              		.cfi_restore_state
 676:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 101              		.loc 1 676 0
 102 0034 0126     		movs	r6, #1
 103 0036 EEE7     		b	.L2
 104              	.L24:
 672:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->sclust &&
 105              		.loc 1 672 0 discriminator 1
 106 0038 5568     		ldr	r5, [r2, #4]
 107 003a D0F80842 		ldr	r4, [r0, #520]
 108 003e A542     		cmp	r5, r4
 109 0040 E9D1     		bne	.L2
 673:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].idx == dp->index) break;
 110              		.loc 1 673 0
ARM GAS  /tmp/ccVdKYyy.s 			page 15


 111 0042 1589     		ldrh	r5, [r2, #8]
 112 0044 B0F80642 		ldrh	r4, [r0, #518]
 113 0048 A542     		cmp	r5, r4
 114 004a E4D1     		bne	.L2
 683:Middlewares/Third_Party/FatFs/src/ff.c **** }
 115              		.loc 1 683 0
 116 004c 11B1     		cbz	r1, .L26
 117 004e 1020     		movs	r0, #16
 118              	.LVL7:
 119              		.loc 1 684 0
 120 0050 F0BC     		pop	{r4, r5, r6, r7}
 121              	.LCFI5:
 122              		.cfi_remember_state
 123              		.cfi_restore 4
 124              		.cfi_restore 5
 125              		.cfi_restore 6
 126              		.cfi_restore 7
 127              		.cfi_def_cfa_offset 0
 128 0052 7047     		bx	lr
 129              	.LVL8:
 130              	.L26:
 131              	.LCFI6:
 132              		.cfi_restore_state
 683:Middlewares/Third_Party/FatFs/src/ff.c **** }
 133              		.loc 1 683 0 discriminator 2
 134 0054 03EB4303 		add	r3, r3, r3, lsl #1
 135              	.LVL9:
 136 0058 07EB8303 		add	r3, r7, r3, lsl #2
 137              		.loc 1 684 0 discriminator 2
 138 005c F0BC     		pop	{r4, r5, r6, r7}
 139              	.LCFI7:
 140              		.cfi_restore 4
 141              		.cfi_restore 5
 142              		.cfi_restore 6
 143              		.cfi_restore 7
 144              		.cfi_def_cfa_offset 0
 683:Middlewares/Third_Party/FatFs/src/ff.c **** }
 145              		.loc 1 683 0 discriminator 2
 146 005e 5B89     		ldrh	r3, [r3, #10]
 147 0060 B3F5807F 		cmp	r3, #256
 148 0064 14BF     		ite	ne
 149 0066 0020     		movne	r0, #0
 150              	.LVL10:
 151 0068 1020     		moveq	r0, #16
 152              		.loc 1 684 0 discriminator 2
 153 006a 7047     		bx	lr
 154              	.L28:
 155              		.align	2
 156              	.L27:
 157 006c 00000000 		.word	.LANCHOR0
 158              		.cfi_endproc
 159              	.LFE130:
 161              		.section	.text.inc_lock,"ax",%progbits
 162              		.align	1
 163              		.p2align 2,,3
 164              		.syntax unified
 165              		.thumb
ARM GAS  /tmp/ccVdKYyy.s 			page 16


 166              		.thumb_func
 167              		.fpu fpv4-sp-d16
 169              	inc_lock:
 170              	.LFB132:
 685:Middlewares/Third_Party/FatFs/src/ff.c **** 
 686:Middlewares/Third_Party/FatFs/src/ff.c **** 
 687:Middlewares/Third_Party/FatFs/src/ff.c **** static
 688:Middlewares/Third_Party/FatFs/src/ff.c **** int enq_lock (void)	/* Check if an entry is available for a new object */
 689:Middlewares/Third_Party/FatFs/src/ff.c **** {
 690:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 691:Middlewares/Third_Party/FatFs/src/ff.c **** 
 692:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 693:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (i == _FS_LOCK) ? 0 : 1;
 694:Middlewares/Third_Party/FatFs/src/ff.c **** }
 695:Middlewares/Third_Party/FatFs/src/ff.c **** 
 696:Middlewares/Third_Party/FatFs/src/ff.c **** 
 697:Middlewares/Third_Party/FatFs/src/ff.c **** static
 698:Middlewares/Third_Party/FatFs/src/ff.c **** UINT inc_lock (	/* Increment object open counter and returns its index (0:Internal error) */
 699:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,	/* Directory object pointing the file to register or increment */
 700:Middlewares/Third_Party/FatFs/src/ff.c **** 	int acc		/* Desired access (0:Read, 1:Write, 2:Delete/Rename) */
 701:Middlewares/Third_Party/FatFs/src/ff.c **** )
 702:Middlewares/Third_Party/FatFs/src/ff.c **** {
 171              		.loc 1 702 0
 172              		.cfi_startproc
 173              		@ args = 0, pretend = 0, frame = 0
 174              		@ frame_needed = 0, uses_anonymous_args = 0
 175              		@ link register save eliminated.
 176              	.LVL11:
 177 0000 F0B4     		push	{r4, r5, r6, r7}
 178              	.LCFI8:
 179              		.cfi_def_cfa_offset 16
 180              		.cfi_offset 4, -16
 181              		.cfi_offset 5, -12
 182              		.cfi_offset 6, -8
 183              		.cfi_offset 7, -4
 184 0002 2A4E     		ldr	r6, .L49
 185 0004 D0F80052 		ldr	r5, [r0, #512]
 186 0008 3246     		mov	r2, r6
 703:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 704:Middlewares/Third_Party/FatFs/src/ff.c **** 
 705:Middlewares/Third_Party/FatFs/src/ff.c **** 
 706:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < _FS_LOCK; i++) {	/* Find the object */
 187              		.loc 1 706 0
 188 000a 0023     		movs	r3, #0
 189              	.LVL12:
 190              	.L32:
 707:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == dp->fs &&
 191              		.loc 1 707 0
 192 000c 1468     		ldr	r4, [r2]
 193 000e AC42     		cmp	r4, r5
 194 0010 0DD0     		beq	.L46
 195              	.L30:
 706:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == dp->fs &&
 196              		.loc 1 706 0 discriminator 2
 197 0012 0133     		adds	r3, r3, #1
 198              	.LVL13:
 199 0014 022B     		cmp	r3, #2
ARM GAS  /tmp/ccVdKYyy.s 			page 17


 200 0016 02F10C02 		add	r2, r2, #12
 201 001a F7D1     		bne	.L32
 202              	.LVL14:
 708:Middlewares/Third_Party/FatFs/src/ff.c **** 			Files[i].clu == dp->sclust &&
 709:Middlewares/Third_Party/FatFs/src/ff.c **** 			Files[i].idx == dp->index) break;
 710:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 711:Middlewares/Third_Party/FatFs/src/ff.c **** 
 712:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i == _FS_LOCK) {				/* Not opened. Register it as new. */
 713:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 203              		.loc 1 713 0
 204 001c 3268     		ldr	r2, [r6]
 205 001e 002A     		cmp	r2, #0
 206 0020 40D0     		beq	.L47
 207              	.LVL15:
 208 0022 F268     		ldr	r2, [r6, #12]
 209 0024 3AB3     		cbz	r2, .L48
 210              	.LVL16:
 211              	.L41:
 714:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 212              		.loc 1 714 0
 213 0026 0024     		movs	r4, #0
 715:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].fs = dp->fs;
 716:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].clu = dp->sclust;
 717:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].idx = dp->index;
 718:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = 0;
 719:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 720:Middlewares/Third_Party/FatFs/src/ff.c **** 
 721:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (acc && Files[i].ctr) return 0;	/* Access violation (int err) */
 722:Middlewares/Third_Party/FatFs/src/ff.c **** 
 723:Middlewares/Third_Party/FatFs/src/ff.c **** 	Files[i].ctr = acc ? 0x100 : Files[i].ctr + 1;	/* Set semaphore value */
 724:Middlewares/Third_Party/FatFs/src/ff.c **** 
 725:Middlewares/Third_Party/FatFs/src/ff.c **** 	return i + 1;
 726:Middlewares/Third_Party/FatFs/src/ff.c **** }
 214              		.loc 1 726 0
 215 0028 2046     		mov	r0, r4
 216              	.LVL17:
 217 002a F0BC     		pop	{r4, r5, r6, r7}
 218              	.LCFI9:
 219              		.cfi_remember_state
 220              		.cfi_restore 7
 221              		.cfi_restore 6
 222              		.cfi_restore 5
 223              		.cfi_restore 4
 224              		.cfi_def_cfa_offset 0
 225 002c 7047     		bx	lr
 226              	.LVL18:
 227              	.L46:
 228              	.LCFI10:
 229              		.cfi_restore_state
 707:Middlewares/Third_Party/FatFs/src/ff.c **** 			Files[i].clu == dp->sclust &&
 230              		.loc 1 707 0 discriminator 1
 231 002e 5768     		ldr	r7, [r2, #4]
 232 0030 D0F80842 		ldr	r4, [r0, #520]
 233 0034 A742     		cmp	r7, r4
 234 0036 ECD1     		bne	.L30
 708:Middlewares/Third_Party/FatFs/src/ff.c **** 			Files[i].idx == dp->index) break;
 235              		.loc 1 708 0
ARM GAS  /tmp/ccVdKYyy.s 			page 18


 236 0038 1789     		ldrh	r7, [r2, #8]
 237 003a B0F80642 		ldrh	r4, [r0, #518]
 238 003e A742     		cmp	r7, r4
 239 0040 E7D1     		bne	.L30
 721:Middlewares/Third_Party/FatFs/src/ff.c **** 
 240              		.loc 1 721 0
 241 0042 5A00     		lsls	r2, r3, #1
 242 0044 79B1     		cbz	r1, .L36
 721:Middlewares/Third_Party/FatFs/src/ff.c **** 
 243              		.loc 1 721 0 is_stmt 0 discriminator 1
 244 0046 D118     		adds	r1, r2, r3
 245              	.LVL19:
 246 0048 06EB8101 		add	r1, r6, r1, lsl #2
 247 004c 4989     		ldrh	r1, [r1, #10]
 248 004e 0029     		cmp	r1, #0
 249 0050 E9D1     		bne	.L41
 250 0052 5C1C     		adds	r4, r3, #1
 723:Middlewares/Third_Party/FatFs/src/ff.c **** 
 251              		.loc 1 723 0 is_stmt 1
 252 0054 4FF48071 		mov	r1, #256
 253              	.LVL20:
 254              	.L37:
 723:Middlewares/Third_Party/FatFs/src/ff.c **** 
 255              		.loc 1 723 0 is_stmt 0 discriminator 4
 256 0058 1344     		add	r3, r3, r2
 257              	.LVL21:
 258 005a 06EB8303 		add	r3, r6, r3, lsl #2
 259              		.loc 1 726 0 is_stmt 1 discriminator 4
 260 005e 2046     		mov	r0, r4
 723:Middlewares/Third_Party/FatFs/src/ff.c **** 
 261              		.loc 1 723 0 discriminator 4
 262 0060 5981     		strh	r1, [r3, #10]	@ movhi
 263              		.loc 1 726 0 discriminator 4
 264 0062 F0BC     		pop	{r4, r5, r6, r7}
 265              	.LCFI11:
 266              		.cfi_remember_state
 267              		.cfi_restore 4
 268              		.cfi_restore 5
 269              		.cfi_restore 6
 270              		.cfi_restore 7
 271              		.cfi_def_cfa_offset 0
 272 0064 7047     		bx	lr
 273              	.LVL22:
 274              	.L36:
 275              	.LCFI12:
 276              		.cfi_restore_state
 277 0066 D118     		adds	r1, r2, r3
 278              	.LVL23:
 279 0068 06EB8101 		add	r1, r6, r1, lsl #2
 280 006c 5C1C     		adds	r4, r3, #1
 281 006e 4989     		ldrh	r1, [r1, #10]
 282 0070 0131     		adds	r1, r1, #1
 283 0072 89B2     		uxth	r1, r1
 284 0074 F0E7     		b	.L37
 285              	.LVL24:
 286              	.L48:
 713:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
ARM GAS  /tmp/ccVdKYyy.s 			page 19


 287              		.loc 1 713 0
 288 0076 1C46     		mov	r4, r3
 289 0078 0123     		movs	r3, #1
 290              	.LVL25:
 291              	.L35:
 715:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].clu = dp->sclust;
 292              		.loc 1 715 0
 293 007a 5A00     		lsls	r2, r3, #1
 294 007c D718     		adds	r7, r2, r3
 295 007e BF00     		lsls	r7, r7, #2
 721:Middlewares/Third_Party/FatFs/src/ff.c **** 
 296              		.loc 1 721 0
 297 0080 0029     		cmp	r1, #0
 715:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].clu = dp->sclust;
 298              		.loc 1 715 0
 299 0082 06EB0701 		add	r1, r6, r7
 300              	.LVL26:
 301 0086 F551     		str	r5, [r6, r7]
 716:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].idx = dp->index;
 302              		.loc 1 716 0
 303 0088 D0F80872 		ldr	r7, [r0, #520]
 717:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = 0;
 304              		.loc 1 717 0
 305 008c B0F80652 		ldrh	r5, [r0, #518]
 716:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].idx = dp->index;
 306              		.loc 1 716 0
 307 0090 4F60     		str	r7, [r1, #4]
 718:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 308              		.loc 1 718 0
 309 0092 4FF00000 		mov	r0, #0
 310              	.LVL27:
 717:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = 0;
 311              		.loc 1 717 0
 312 0096 0D81     		strh	r5, [r1, #8]	@ movhi
 718:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 313              		.loc 1 718 0
 314 0098 4881     		strh	r0, [r1, #10]	@ movhi
 315              	.LVL28:
 721:Middlewares/Third_Party/FatFs/src/ff.c **** 
 316              		.loc 1 721 0
 317 009a 14BF     		ite	ne
 318 009c 4FF48071 		movne	r1, #256
 319 00a0 0121     		moveq	r1, #1
 320 00a2 D9E7     		b	.L37
 321              	.LVL29:
 322              	.L47:
 713:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 323              		.loc 1 713 0
 324 00a4 1346     		mov	r3, r2
 325 00a6 0124     		movs	r4, #1
 326 00a8 E7E7     		b	.L35
 327              	.L50:
 328 00aa 00BF     		.align	2
 329              	.L49:
 330 00ac 00000000 		.word	.LANCHOR0
 331              		.cfi_endproc
 332              	.LFE132:
ARM GAS  /tmp/ccVdKYyy.s 			page 20


 334              		.section	.text.get_ldnumber,"ax",%progbits
 335              		.align	1
 336              		.p2align 2,,3
 337              		.syntax unified
 338              		.thumb
 339              		.thumb_func
 340              		.fpu fpv4-sp-d16
 342              	get_ldnumber:
 343              	.LFB156:
 727:Middlewares/Third_Party/FatFs/src/ff.c **** 
 728:Middlewares/Third_Party/FatFs/src/ff.c **** 
 729:Middlewares/Third_Party/FatFs/src/ff.c **** static
 730:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dec_lock (	/* Decrement object open counter */
 731:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i			/* Semaphore index (1..) */
 732:Middlewares/Third_Party/FatFs/src/ff.c **** )
 733:Middlewares/Third_Party/FatFs/src/ff.c **** {
 734:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD n;
 735:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 736:Middlewares/Third_Party/FatFs/src/ff.c **** 
 737:Middlewares/Third_Party/FatFs/src/ff.c **** 
 738:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (--i < _FS_LOCK) {	/* Shift index number origin from 0 */
 739:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = Files[i].ctr;
 740:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 0x100) n = 0;		/* If write mode open, delete the entry */
 741:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n) n--;					/* Decrement read mode open count */
 742:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = n;
 743:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!n) Files[i].fs = 0;	/* Delete the entry if open count gets zero */
 744:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;
 745:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 746:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;			/* Invalid index nunber */
 747:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 748:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 749:Middlewares/Third_Party/FatFs/src/ff.c **** }
 750:Middlewares/Third_Party/FatFs/src/ff.c **** 
 751:Middlewares/Third_Party/FatFs/src/ff.c **** 
 752:Middlewares/Third_Party/FatFs/src/ff.c **** static
 753:Middlewares/Third_Party/FatFs/src/ff.c **** void clear_lock (	/* Clear lock entries of the volume */
 754:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs
 755:Middlewares/Third_Party/FatFs/src/ff.c **** )
 756:Middlewares/Third_Party/FatFs/src/ff.c **** {
 757:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 758:Middlewares/Third_Party/FatFs/src/ff.c **** 
 759:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < _FS_LOCK; i++) {
 760:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 761:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 762:Middlewares/Third_Party/FatFs/src/ff.c **** }
 763:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 764:Middlewares/Third_Party/FatFs/src/ff.c **** 
 765:Middlewares/Third_Party/FatFs/src/ff.c **** 
 766:Middlewares/Third_Party/FatFs/src/ff.c **** 
 767:Middlewares/Third_Party/FatFs/src/ff.c **** 
 768:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 769:Middlewares/Third_Party/FatFs/src/ff.c **** /* Move/Flush disk access window in the file system object               */
 770:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 771:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 772:Middlewares/Third_Party/FatFs/src/ff.c **** static
 773:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT sync_window (
 774:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs		/* File system object */
ARM GAS  /tmp/ccVdKYyy.s 			page 21


 775:Middlewares/Third_Party/FatFs/src/ff.c **** )
 776:Middlewares/Third_Party/FatFs/src/ff.c **** {
 777:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD wsect;
 778:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nf;
 779:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 780:Middlewares/Third_Party/FatFs/src/ff.c **** 
 781:Middlewares/Third_Party/FatFs/src/ff.c **** 
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->wflag) {	/* Write back the sector if it is dirty */
 783:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 784:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(fs->drv, fs->win.d8, wsect, 1) != RES_OK) {
 785:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 786:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 787:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 0;
 788:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 790:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 791:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_write(fs->drv, fs->win.d8, wsect, 1);
 792:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 793:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 794:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 795:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 796:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 797:Middlewares/Third_Party/FatFs/src/ff.c **** }
 798:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 799:Middlewares/Third_Party/FatFs/src/ff.c **** 
 800:Middlewares/Third_Party/FatFs/src/ff.c **** 
 801:Middlewares/Third_Party/FatFs/src/ff.c **** static
 802:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT move_window (
 803:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* File system object */
 804:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sector	/* Sector number to make appearance in the fs->win[].d8 */
 805:Middlewares/Third_Party/FatFs/src/ff.c **** )
 806:Middlewares/Third_Party/FatFs/src/ff.c **** {
 807:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 808:Middlewares/Third_Party/FatFs/src/ff.c **** 
 809:Middlewares/Third_Party/FatFs/src/ff.c **** 
 810:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sector != fs->winsect) {	/* Window offset changed? */
 811:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 812:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = sync_window(fs);		/* Write-back changes */
 813:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 814:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {			/* Fill sector window with new data */
 815:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fs->win.d8, sector, 1) != RES_OK) {
 816:Middlewares/Third_Party/FatFs/src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
 817:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
 818:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 819:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->winsect = sector;
 820:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 821:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 822:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 823:Middlewares/Third_Party/FatFs/src/ff.c **** }
 824:Middlewares/Third_Party/FatFs/src/ff.c **** 
 825:Middlewares/Third_Party/FatFs/src/ff.c **** 
 826:Middlewares/Third_Party/FatFs/src/ff.c **** 
 827:Middlewares/Third_Party/FatFs/src/ff.c **** 
 828:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 829:Middlewares/Third_Party/FatFs/src/ff.c **** /* Synchronize file system and strage device                             */
 830:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 831:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
ARM GAS  /tmp/ccVdKYyy.s 			page 22


 832:Middlewares/Third_Party/FatFs/src/ff.c **** static
 833:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT sync_fs (	/* FR_OK: successful, FR_DISK_ERR: failed */
 834:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs		/* File system object */
 835:Middlewares/Third_Party/FatFs/src/ff.c **** )
 836:Middlewares/Third_Party/FatFs/src/ff.c **** {
 837:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 838:Middlewares/Third_Party/FatFs/src/ff.c **** 
 839:Middlewares/Third_Party/FatFs/src/ff.c **** 
 840:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = sync_window(fs);
 841:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 842:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update FSINFO sector if needed */
 843:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->fs_type == FS_FAT32 && fs->fsi_flag == 1) {
 844:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSINFO structure */
 845:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(fs->win.d8, 0, SS(fs));
 846:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_WORD(fs->win.d8 + BS_55AA, 0xAA55);
 847:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_LeadSig, 0x41615252);
 848:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_StrucSig, 0x61417272);
 849:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_Free_Count, fs->free_clust);
 850:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_Nxt_Free, fs->last_clust);
 851:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write it into the FSINFO sector */
 852:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->winsect = fs->volbase + 1;
 853:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win.d8, fs->winsect, 1);
 854:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag = 0;
 855:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 856:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Make sure that no pending write process in the physical drive */
 857:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_ioctl(fs->drv, CTRL_SYNC, 0) != RES_OK)
 858:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 859:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 860:Middlewares/Third_Party/FatFs/src/ff.c **** 
 861:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 862:Middlewares/Third_Party/FatFs/src/ff.c **** }
 863:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 864:Middlewares/Third_Party/FatFs/src/ff.c **** 
 865:Middlewares/Third_Party/FatFs/src/ff.c **** 
 866:Middlewares/Third_Party/FatFs/src/ff.c **** 
 867:Middlewares/Third_Party/FatFs/src/ff.c **** 
 868:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 869:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get sector# from cluster#                                             */
 870:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 871:Middlewares/Third_Party/FatFs/src/ff.c **** /* Hidden API for hacks and disk tools */
 872:Middlewares/Third_Party/FatFs/src/ff.c **** 
 873:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD clust2sect (	/* !=0: Sector number, 0: Failed - invalid cluster# */
 874:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* File system object */
 875:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst		/* Cluster# to be converted */
 876:Middlewares/Third_Party/FatFs/src/ff.c **** )
 877:Middlewares/Third_Party/FatFs/src/ff.c **** {
 878:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst -= 2;
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 880:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 881:Middlewares/Third_Party/FatFs/src/ff.c **** }
 882:Middlewares/Third_Party/FatFs/src/ff.c **** 
 883:Middlewares/Third_Party/FatFs/src/ff.c **** 
 884:Middlewares/Third_Party/FatFs/src/ff.c **** 
 885:Middlewares/Third_Party/FatFs/src/ff.c **** 
 886:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 887:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT access - Read value of a FAT entry                                */
 888:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  /tmp/ccVdKYyy.s 			page 23


 889:Middlewares/Third_Party/FatFs/src/ff.c **** /* Hidden API for hacks and disk tools */
 890:Middlewares/Third_Party/FatFs/src/ff.c **** 
 891:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD get_fat (	/* 0xFFFFFFFF:Disk error, 1:Internal error, 2..0x0FFFFFFF:Cluster status */
 892:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
 893:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst	/* FAT index number (cluster number) to get the value */
 894:Middlewares/Third_Party/FatFs/src/ff.c **** )
 895:Middlewares/Third_Party/FatFs/src/ff.c **** {
 896:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wc, bc;
 897:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *p;
 898:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD val;
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 
 900:Middlewares/Third_Party/FatFs/src/ff.c **** 
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 902:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 903:Middlewares/Third_Party/FatFs/src/ff.c **** 
 904:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 905:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 0xFFFFFFFF;	/* Default value falls on disk error */
 906:Middlewares/Third_Party/FatFs/src/ff.c **** 
 907:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
 908:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 909:Middlewares/Third_Party/FatFs/src/ff.c **** 			bc = (UINT)clst; bc += bc / 2;
 910:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 911:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win.d8[bc++ % SS(fs)];
 912:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 913:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win.d8[bc % SS(fs)] << 8;
 914:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = clst & 1 ? wc >> 4 : (wc & 0xFFF);
 915:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 916:Middlewares/Third_Party/FatFs/src/ff.c **** 
 917:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT16 :
 918:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2))) != FR_OK) break;
 919:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[clst * 2 % SS(fs)];
 920:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = LD_WORD(p);
 921:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 922:Middlewares/Third_Party/FatFs/src/ff.c **** 
 923:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT32 :
 924:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4))) != FR_OK) break;
 925:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[clst * 4 % SS(fs)];
 926:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = LD_DWORD(p) & 0x0FFFFFFF;
 927:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 928:Middlewares/Third_Party/FatFs/src/ff.c **** 
 929:Middlewares/Third_Party/FatFs/src/ff.c **** 		default:
 930:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = 1;	/* Internal error */
 931:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 932:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 933:Middlewares/Third_Party/FatFs/src/ff.c **** 
 934:Middlewares/Third_Party/FatFs/src/ff.c **** 	return val;
 935:Middlewares/Third_Party/FatFs/src/ff.c **** }
 936:Middlewares/Third_Party/FatFs/src/ff.c **** 
 937:Middlewares/Third_Party/FatFs/src/ff.c **** 
 938:Middlewares/Third_Party/FatFs/src/ff.c **** 
 939:Middlewares/Third_Party/FatFs/src/ff.c **** 
 940:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 941:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT access - Change value of a FAT entry                              */
 942:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 943:Middlewares/Third_Party/FatFs/src/ff.c **** /* Hidden API for hacks and disk tools */
 944:Middlewares/Third_Party/FatFs/src/ff.c **** 
 945:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
ARM GAS  /tmp/ccVdKYyy.s 			page 24


 946:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT put_fat (
 947:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
 948:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst,	/* FAT index number (cluster number) to be changed */
 949:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD val	/* New value to be set to the entry */
 950:Middlewares/Third_Party/FatFs/src/ff.c **** )
 951:Middlewares/Third_Party/FatFs/src/ff.c **** {
 952:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bc;
 953:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *p;
 954:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 955:Middlewares/Third_Party/FatFs/src/ff.c **** 
 956:Middlewares/Third_Party/FatFs/src/ff.c **** 
 957:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
 958:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 959:Middlewares/Third_Party/FatFs/src/ff.c **** 
 960:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 961:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
 962:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 963:Middlewares/Third_Party/FatFs/src/ff.c **** 			bc = (UINT)clst; bc += bc / 2;
 964:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 965:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 966:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[bc++ % SS(fs)];
 967:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 968:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 969:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 970:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 971:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[bc % SS(fs)];
 972:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 973:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 974:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 975:Middlewares/Third_Party/FatFs/src/ff.c **** 
 976:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT16 :
 977:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)));
 978:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 979:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[clst * 2 % SS(fs)];
 980:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_WORD(p, (WORD)val);
 981:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 982:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 983:Middlewares/Third_Party/FatFs/src/ff.c **** 
 984:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT32 :
 985:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)));
 986:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 987:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[clst * 4 % SS(fs)];
 988:Middlewares/Third_Party/FatFs/src/ff.c **** 			val |= LD_DWORD(p) & 0xF0000000;
 989:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(p, val);
 990:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 991:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 992:Middlewares/Third_Party/FatFs/src/ff.c **** 
 993:Middlewares/Third_Party/FatFs/src/ff.c **** 		default :
 994:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INT_ERR;
 995:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 996:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 997:Middlewares/Third_Party/FatFs/src/ff.c **** 
 998:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 999:Middlewares/Third_Party/FatFs/src/ff.c **** }
1000:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
1001:Middlewares/Third_Party/FatFs/src/ff.c **** 
1002:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccVdKYyy.s 			page 25


1003:Middlewares/Third_Party/FatFs/src/ff.c **** 
1004:Middlewares/Third_Party/FatFs/src/ff.c **** 
1005:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1006:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT handling - Remove a cluster chain                                 */
1007:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1008:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1009:Middlewares/Third_Party/FatFs/src/ff.c **** static
1010:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT remove_chain (
1011:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,			/* File system object */
1012:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst			/* Cluster# to remove a chain from */
1013:Middlewares/Third_Party/FatFs/src/ff.c **** )
1014:Middlewares/Third_Party/FatFs/src/ff.c **** {
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1016:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD nxt;
1017:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
1018:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD scl = clst, ecl = clst, rt[2];
1019:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1020:Middlewares/Third_Party/FatFs/src/ff.c **** 
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check range */
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
1023:Middlewares/Third_Party/FatFs/src/ff.c **** 
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
1025:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;
1026:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (clst < fs->n_fatent) {			/* Not a last link? */
1027:Middlewares/Third_Party/FatFs/src/ff.c **** 			nxt = get_fat(fs, clst);			/* Get cluster status */
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (nxt == 0) break;				/* Empty cluster? */
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (nxt == 1) { res = FR_INT_ERR; break; }	/* Internal error? */
1030:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
1031:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, 0);			/* Mark the cluster "empty" */
1032:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->free_clust != 0xFFFFFFFF) {	/* Update FSINFO */
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->free_clust++;
1035:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->fsi_flag |= 1;
1036:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1037:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
1038:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ecl + 1 == nxt) {	/* Is next cluster contiguous? */
1039:Middlewares/Third_Party/FatFs/src/ff.c **** 				ecl = nxt;
1040:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* End of contiguous clusters */ 
1041:Middlewares/Third_Party/FatFs/src/ff.c **** 				rt[0] = clust2sect(fs, scl);					/* Start sector */
1042:Middlewares/Third_Party/FatFs/src/ff.c **** 				rt[1] = clust2sect(fs, ecl) + fs->csize - 1;	/* End sector */
1043:Middlewares/Third_Party/FatFs/src/ff.c **** 				disk_ioctl(fs->drv, CTRL_TRIM, rt);				/* Erase the block */
1044:Middlewares/Third_Party/FatFs/src/ff.c **** 				scl = ecl = nxt;
1045:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1046:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1047:Middlewares/Third_Party/FatFs/src/ff.c **** 			clst = nxt;	/* Next cluster */
1048:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1049:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1050:Middlewares/Third_Party/FatFs/src/ff.c **** 
1051:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
1052:Middlewares/Third_Party/FatFs/src/ff.c **** }
1053:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1054:Middlewares/Third_Party/FatFs/src/ff.c **** 
1055:Middlewares/Third_Party/FatFs/src/ff.c **** 
1056:Middlewares/Third_Party/FatFs/src/ff.c **** 
1057:Middlewares/Third_Party/FatFs/src/ff.c **** 
1058:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1059:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT handling - Stretch or Create a cluster chain                      */
ARM GAS  /tmp/ccVdKYyy.s 			page 26


1060:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1061:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1062:Middlewares/Third_Party/FatFs/src/ff.c **** static
1063:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD create_chain (	/* 0:No free cluster, 1:Internal error, 0xFFFFFFFF:Disk error, >=2:New cluster
1064:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,			/* File system object */
1065:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst			/* Cluster# to stretch. 0 means create a new chain. */
1066:Middlewares/Third_Party/FatFs/src/ff.c **** )
1067:Middlewares/Third_Party/FatFs/src/ff.c **** {
1068:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cs, ncl, scl;
1069:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1070:Middlewares/Third_Party/FatFs/src/ff.c **** 
1071:Middlewares/Third_Party/FatFs/src/ff.c **** 
1072:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0) {		/* Create a new chain */
1073:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = fs->last_clust;			/* Get suggested start point */
1074:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
1075:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1076:Middlewares/Third_Party/FatFs/src/ff.c **** 	else {					/* Stretch the current chain */
1077:Middlewares/Third_Party/FatFs/src/ff.c **** 		cs = get_fat(fs, clst);			/* Check the cluster status */
1078:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < 2) return 1;			/* Invalid value */
1079:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
1080:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
1081:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = clst;
1082:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1083:Middlewares/Third_Party/FatFs/src/ff.c **** 
1084:Middlewares/Third_Party/FatFs/src/ff.c **** 	ncl = scl;				/* Start cluster */
1085:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
1086:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl++;							/* Next cluster */
1087:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ncl >= fs->n_fatent) {		/* Check wrap around */
1088:Middlewares/Third_Party/FatFs/src/ff.c **** 			ncl = 2;
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
1090:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1091:Middlewares/Third_Party/FatFs/src/ff.c **** 		cs = get_fat(fs, ncl);			/* Get the cluster status */
1092:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0) break;				/* Found a free cluster */
1093:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
1094:Middlewares/Third_Party/FatFs/src/ff.c **** 			return cs;
1095:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ncl == scl) return 0;		/* No free cluster */
1096:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1097:Middlewares/Third_Party/FatFs/src/ff.c **** 
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = put_fat(fs, ncl, 0x0FFFFFFF);	/* Mark the new cluster "last link" */
1099:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && clst != 0) {
1100:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(fs, clst, ncl);	/* Link it to the previous one if needed */
1101:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1102:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clust = ncl;			/* Update FSINFO */
1104:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
1105:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clust--;
1106:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;
1107:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1108:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
1109:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;
1110:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1111:Middlewares/Third_Party/FatFs/src/ff.c **** 
1112:Middlewares/Third_Party/FatFs/src/ff.c **** 	return ncl;		/* Return new cluster number or error code */
1113:Middlewares/Third_Party/FatFs/src/ff.c **** }
1114:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
1115:Middlewares/Third_Party/FatFs/src/ff.c **** 
1116:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccVdKYyy.s 			page 27


1117:Middlewares/Third_Party/FatFs/src/ff.c **** 
1118:Middlewares/Third_Party/FatFs/src/ff.c **** 
1119:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1120:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT handling - Convert offset into cluster with link map table        */
1121:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1122:Middlewares/Third_Party/FatFs/src/ff.c **** 
1123:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
1124:Middlewares/Third_Party/FatFs/src/ff.c **** static
1125:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD clmt_clust (	/* <2:Error, >=2:Cluster number */
1126:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,		/* Pointer to the file object */
1127:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs		/* File offset to be converted to cluster# */
1128:Middlewares/Third_Party/FatFs/src/ff.c **** )
1129:Middlewares/Third_Party/FatFs/src/ff.c **** {
1130:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl, ncl, *tbl;
1131:Middlewares/Third_Party/FatFs/src/ff.c **** 
1132:Middlewares/Third_Party/FatFs/src/ff.c **** 
1133:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl = fp->cltbl + 1;	/* Top of CLMT */
1134:Middlewares/Third_Party/FatFs/src/ff.c **** 	cl = ofs / SS(fp->fs) / fp->fs->csize;	/* Cluster order from top of the file */
1135:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
1136:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl = *tbl++;			/* Number of cluters in the fragment */
1137:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ncl) return 0;		/* End of table? (error) */
1138:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
1139:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl -= ncl; tbl++;		/* Next fragment */
1140:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1141:Middlewares/Third_Party/FatFs/src/ff.c **** 	return cl + *tbl;	/* Return the cluster number */
1142:Middlewares/Third_Party/FatFs/src/ff.c **** }
1143:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_FASTSEEK */
1144:Middlewares/Third_Party/FatFs/src/ff.c **** 
1145:Middlewares/Third_Party/FatFs/src/ff.c **** 
1146:Middlewares/Third_Party/FatFs/src/ff.c **** 
1147:Middlewares/Third_Party/FatFs/src/ff.c **** 
1148:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1149:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Set directory index                              */
1150:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1151:Middlewares/Third_Party/FatFs/src/ff.c **** 
1152:Middlewares/Third_Party/FatFs/src/ff.c **** static
1153:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_sdi (
1154:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to directory object */
1155:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT idx		/* Index of directory table */
1156:Middlewares/Third_Party/FatFs/src/ff.c **** )
1157:Middlewares/Third_Party/FatFs/src/ff.c **** {
1158:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
1159:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT ic;
1160:Middlewares/Third_Party/FatFs/src/ff.c **** 
1161:Middlewares/Third_Party/FatFs/src/ff.c **** 
1162:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->index = (WORD)idx;	/* Current index */
1163:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst = dp->sclust;		/* Table start cluster (0:root) */
1164:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 1 || clst >= dp->fs->n_fatent)	/* Check start cluster range */
1165:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INT_ERR;
1166:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!clst && dp->fs->fs_type == FS_FAT32)	/* Replace cluster# 0 with root cluster# if in FAT32 */
1167:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = dp->fs->dirbase;
1168:Middlewares/Third_Party/FatFs/src/ff.c **** 
1169:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0) {	/* Static table (root-directory in FAT12/16) */
1170:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (idx >= dp->fs->n_rootdir)	/* Is index out of range? */
1171:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_INT_ERR;
1172:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = dp->fs->dirbase;
1173:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
ARM GAS  /tmp/ccVdKYyy.s 			page 28


1174:Middlewares/Third_Party/FatFs/src/ff.c **** 	else {				/* Dynamic table (root-directory in FAT32 or sub-directory) */
1175:Middlewares/Third_Party/FatFs/src/ff.c **** 		ic = SS(dp->fs) / SZ_DIRE * dp->fs->csize;	/* Entries per cluster */
1176:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
1177:Middlewares/Third_Party/FatFs/src/ff.c **** 			clst = get_fat(dp->fs, clst);				/* Get next cluster */
1178:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
1179:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= dp->fs->n_fatent)	/* Reached to end of table or internal error */
1180:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_INT_ERR;
1181:Middlewares/Third_Party/FatFs/src/ff.c **** 			idx -= ic;
1182:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1183:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = clust2sect(dp->fs, clst);
1184:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1185:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->clust = clst;	/* Current cluster# */
1186:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!sect) return FR_INT_ERR;
1187:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect = sect + idx / (SS(dp->fs) / SZ_DIRE);					/* Sector# of the directory entry */
1188:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = dp->fs->win.d8 + (idx % (SS(dp->fs) / SZ_DIRE)) * SZ_DIRE;	/* Ptr to the entry in the se
1189:Middlewares/Third_Party/FatFs/src/ff.c **** 
1190:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1191:Middlewares/Third_Party/FatFs/src/ff.c **** }
1192:Middlewares/Third_Party/FatFs/src/ff.c **** 
1193:Middlewares/Third_Party/FatFs/src/ff.c **** 
1194:Middlewares/Third_Party/FatFs/src/ff.c **** 
1195:Middlewares/Third_Party/FatFs/src/ff.c **** 
1196:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1197:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Move directory table index next                  */
1198:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1199:Middlewares/Third_Party/FatFs/src/ff.c **** 
1200:Middlewares/Third_Party/FatFs/src/ff.c **** static
1201:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_next (	/* FR_OK:Succeeded, FR_NO_FILE:End of table, FR_DENIED:Could not stretch */
1202:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
1203:Middlewares/Third_Party/FatFs/src/ff.c **** 	int stretch		/* 0: Do not stretch table, 1: Stretch table if needed */
1204:Middlewares/Third_Party/FatFs/src/ff.c **** )
1205:Middlewares/Third_Party/FatFs/src/ff.c **** {
1206:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst;
1207:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
1208:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1209:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT c;
1210:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1211:Middlewares/Third_Party/FatFs/src/ff.c **** 
1212:Middlewares/Third_Party/FatFs/src/ff.c **** 
1213:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = dp->index + 1;
1214:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(i & 0xFFFF) || !dp->sect)	/* Report EOT when index has reached 65535 */
1215:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILE;
1216:Middlewares/Third_Party/FatFs/src/ff.c **** 
1217:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(i % (SS(dp->fs) / SZ_DIRE))) {	/* Sector changed? */
1218:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect++;					/* Next sector */
1219:Middlewares/Third_Party/FatFs/src/ff.c **** 
1220:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!dp->clust) {		/* Static table */
1221:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= dp->fs->n_rootdir)	/* Report EOT if it reached end of static table */
1222:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_NO_FILE;
1223:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1224:Middlewares/Third_Party/FatFs/src/ff.c **** 		else {					/* Dynamic table */
1225:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (((i / (SS(dp->fs) / SZ_DIRE)) & (dp->fs->csize - 1)) == 0) {	/* Cluster changed? */
1226:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = get_fat(dp->fs, dp->clust);				/* Get next cluster */
1227:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;
1228:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
1229:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= dp->fs->n_fatent) {					/* If it reached end of dynamic table, */
1230:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
ARM GAS  /tmp/ccVdKYyy.s 			page 29


1231:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!stretch) return FR_NO_FILE;			/* If do not stretch, report EOT */
1232:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(dp->fs, dp->clust);		/* Stretch cluster chain */
1233:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
1234:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) return FR_INT_ERR;
1235:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
1236:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up stretched table */
1237:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (sync_window(dp->fs)) return FR_DISK_ERR;/* Flush disk access window */
1238:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dp->fs->win.d8, 0, SS(dp->fs));		/* Clear window buffer */
1239:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->fs->winsect = clust2sect(dp->fs, clst);	/* Cluster start sector */
1240:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (c = 0; c < dp->fs->csize; c++) {		/* Fill the new cluster with 0 */
1241:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->fs->wflag = 1;
1242:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (sync_window(dp->fs)) return FR_DISK_ERR;
1243:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->fs->winsect++;
1244:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
1245:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->fs->winsect -= c;						/* Rewind window offset */
1246:Middlewares/Third_Party/FatFs/src/ff.c **** #else
1247:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!stretch) return FR_NO_FILE;			/* If do not stretch, report EOT (this is to suppress warni
1248:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_NO_FILE;							/* Report EOT */
1249:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1250:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1251:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->clust = clst;				/* Initialize data for new cluster */
1252:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = clust2sect(dp->fs, clst);
1253:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1254:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1255:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1256:Middlewares/Third_Party/FatFs/src/ff.c **** 
1257:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->index = (WORD)i;	/* Current index */
1258:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = dp->fs->win.d8 + (i % (SS(dp->fs) / SZ_DIRE)) * SZ_DIRE;	/* Current entry in the window 
1259:Middlewares/Third_Party/FatFs/src/ff.c **** 
1260:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1261:Middlewares/Third_Party/FatFs/src/ff.c **** }
1262:Middlewares/Third_Party/FatFs/src/ff.c **** 
1263:Middlewares/Third_Party/FatFs/src/ff.c **** 
1264:Middlewares/Third_Party/FatFs/src/ff.c **** 
1265:Middlewares/Third_Party/FatFs/src/ff.c **** 
1266:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1267:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Reserve directory entry                          */
1268:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1269:Middlewares/Third_Party/FatFs/src/ff.c **** 
1270:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1271:Middlewares/Third_Party/FatFs/src/ff.c **** static
1272:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_alloc (
1273:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,	/* Pointer to the directory object */
1274:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nent	/* Number of contiguous entries to allocate (1-21) */
1275:Middlewares/Third_Party/FatFs/src/ff.c **** )
1276:Middlewares/Third_Party/FatFs/src/ff.c **** {
1277:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1278:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n;
1279:Middlewares/Third_Party/FatFs/src/ff.c **** 
1280:Middlewares/Third_Party/FatFs/src/ff.c **** 
1281:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, 0);
1282:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
1283:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = 0;
1284:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
1285:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(dp->fs, dp->sect);
1286:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dp->dir[0] == DDEM || dp->dir[0] == 0) {	/* Is it a free entry? */
ARM GAS  /tmp/ccVdKYyy.s 			page 30


1288:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous free entries is found */
1289:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
1290:Middlewares/Third_Party/FatFs/src/ff.c **** 				n = 0;					/* Not a blank entry. Restart to search */
1291:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1292:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_next(dp, 1);		/* Next entry with table stretch enabled */
1293:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);
1294:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1295:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_NO_FILE) res = FR_DENIED;	/* No directory entry to allocate */
1296:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
1297:Middlewares/Third_Party/FatFs/src/ff.c **** }
1298:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1299:Middlewares/Third_Party/FatFs/src/ff.c **** 
1300:Middlewares/Third_Party/FatFs/src/ff.c **** 
1301:Middlewares/Third_Party/FatFs/src/ff.c **** 
1302:Middlewares/Third_Party/FatFs/src/ff.c **** 
1303:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1304:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Load/Store start cluster number                  */
1305:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1306:Middlewares/Third_Party/FatFs/src/ff.c **** 
1307:Middlewares/Third_Party/FatFs/src/ff.c **** static
1308:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD ld_clust (
1309:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* Pointer to the fs object */
1310:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir	/* Pointer to the directory entry */
1311:Middlewares/Third_Party/FatFs/src/ff.c **** )
1312:Middlewares/Third_Party/FatFs/src/ff.c **** {
1313:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl;
1314:Middlewares/Third_Party/FatFs/src/ff.c **** 
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	cl = LD_WORD(dir + DIR_FstClusLO);
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
1317:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
1318:Middlewares/Third_Party/FatFs/src/ff.c **** 
1319:Middlewares/Third_Party/FatFs/src/ff.c **** 	return cl;
1320:Middlewares/Third_Party/FatFs/src/ff.c **** }
1321:Middlewares/Third_Party/FatFs/src/ff.c **** 
1322:Middlewares/Third_Party/FatFs/src/ff.c **** 
1323:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1324:Middlewares/Third_Party/FatFs/src/ff.c **** static
1325:Middlewares/Third_Party/FatFs/src/ff.c **** void st_clust (
1326:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir,	/* Pointer to the directory entry */
1327:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl	/* Value to be set */
1328:Middlewares/Third_Party/FatFs/src/ff.c **** )
1329:Middlewares/Third_Party/FatFs/src/ff.c **** {
1330:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusLO, cl);
1331:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusHI, cl >> 16);
1332:Middlewares/Third_Party/FatFs/src/ff.c **** }
1333:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1334:Middlewares/Third_Party/FatFs/src/ff.c **** 
1335:Middlewares/Third_Party/FatFs/src/ff.c **** 
1336:Middlewares/Third_Party/FatFs/src/ff.c **** 
1337:Middlewares/Third_Party/FatFs/src/ff.c **** 
1338:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1339:Middlewares/Third_Party/FatFs/src/ff.c **** /* LFN handling - Test/Pick/Fit an LFN segment from/to directory entry   */
1340:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1341:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1342:Middlewares/Third_Party/FatFs/src/ff.c **** static
1343:Middlewares/Third_Party/FatFs/src/ff.c **** const BYTE LfnOfs[] = {1,3,5,7,9,14,16,18,20,22,24,28,30};	/* Offset of LFN characters in the direc
1344:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccVdKYyy.s 			page 31


1345:Middlewares/Third_Party/FatFs/src/ff.c **** 
1346:Middlewares/Third_Party/FatFs/src/ff.c **** static
1347:Middlewares/Third_Party/FatFs/src/ff.c **** int cmp_lfn (			/* 1:Matched, 0:Not matched */
1348:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR* lfnbuf,		/* Pointer to the LFN to be compared */
1349:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir			/* Pointer to the directory entry containing a part of LFN */
1350:Middlewares/Third_Party/FatFs/src/ff.c **** )
1351:Middlewares/Third_Party/FatFs/src/ff.c **** {
1352:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, s;
1353:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc, uc;
1354:Middlewares/Third_Party/FatFs/src/ff.c **** 
1355:Middlewares/Third_Party/FatFs/src/ff.c **** 
1356:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = ((dir[LDIR_Ord] & ~LLEF) - 1) * 13;	/* Get offset in the LFN buffer */
1357:Middlewares/Third_Party/FatFs/src/ff.c **** 	s = 0; wc = 1;
1358:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1359:Middlewares/Third_Party/FatFs/src/ff.c **** 		uc = LD_WORD(dir + LfnOfs[s]);	/* Pick an LFN character from the entry */
1360:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc) {	/* Last character has not been processed */
1361:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = ff_wtoupper(uc);		/* Convert it to upper case */
1362:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= _MAX_LFN || wc != ff_wtoupper(lfnbuf[i++]))	/* Compare it */
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 				return 0;				/* Not matched */
1364:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1365:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (uc != 0xFFFF) return 0;	/* Check filler */
1366:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1367:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (++s < 13);				/* Repeat until all characters in the entry are checked */
1368:Middlewares/Third_Party/FatFs/src/ff.c **** 
1369:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((dir[LDIR_Ord] & LLEF) && wc && lfnbuf[i])	/* Last segment matched but different length */
1370:Middlewares/Third_Party/FatFs/src/ff.c **** 		return 0;
1371:Middlewares/Third_Party/FatFs/src/ff.c **** 
1372:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 1;						/* The part of LFN matched */
1373:Middlewares/Third_Party/FatFs/src/ff.c **** }
1374:Middlewares/Third_Party/FatFs/src/ff.c **** 
1375:Middlewares/Third_Party/FatFs/src/ff.c **** 
1376:Middlewares/Third_Party/FatFs/src/ff.c **** 
1377:Middlewares/Third_Party/FatFs/src/ff.c **** static
1378:Middlewares/Third_Party/FatFs/src/ff.c **** int pick_lfn (			/* 1:Succeeded, 0:Buffer overflow */
1379:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR* lfnbuf,		/* Pointer to the Unicode-LFN buffer */
1380:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir			/* Pointer to the directory entry */
1381:Middlewares/Third_Party/FatFs/src/ff.c **** )
1382:Middlewares/Third_Party/FatFs/src/ff.c **** {
1383:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, s;
1384:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc, uc;
1385:Middlewares/Third_Party/FatFs/src/ff.c **** 
1386:Middlewares/Third_Party/FatFs/src/ff.c **** 
1387:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = ((dir[LDIR_Ord] & 0x3F) - 1) * 13;	/* Offset in the LFN buffer */
1388:Middlewares/Third_Party/FatFs/src/ff.c **** 
1389:Middlewares/Third_Party/FatFs/src/ff.c **** 	s = 0; wc = 1;
1390:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1391:Middlewares/Third_Party/FatFs/src/ff.c **** 		uc = LD_WORD(dir + LfnOfs[s]);		/* Pick an LFN character from the entry */
1392:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc) {	/* Last character has not been processed */
1393:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
1394:Middlewares/Third_Party/FatFs/src/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
1395:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1396:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
1397:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1398:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (++s < 13);						/* Read all character in the entry */
1399:Middlewares/Third_Party/FatFs/src/ff.c **** 
1400:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dir[LDIR_Ord] & LLEF) {				/* Put terminator if it is the last LFN part */
1401:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i >= _MAX_LFN) return 0;		/* Buffer overflow? */
ARM GAS  /tmp/ccVdKYyy.s 			page 32


1402:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfnbuf[i] = 0;
1403:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1404:Middlewares/Third_Party/FatFs/src/ff.c **** 
1405:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 1;
1406:Middlewares/Third_Party/FatFs/src/ff.c **** }
1407:Middlewares/Third_Party/FatFs/src/ff.c **** 
1408:Middlewares/Third_Party/FatFs/src/ff.c **** 
1409:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1410:Middlewares/Third_Party/FatFs/src/ff.c **** static
1411:Middlewares/Third_Party/FatFs/src/ff.c **** void fit_lfn (
1412:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* lfnbuf,	/* Pointer to the LFN buffer */
1413:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir,				/* Pointer to the directory entry */
1414:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ord,				/* LFN order (1-20) */
1415:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sum				/* SFN sum */
1416:Middlewares/Third_Party/FatFs/src/ff.c **** )
1417:Middlewares/Third_Party/FatFs/src/ff.c **** {
1418:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, s;
1419:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc;
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 
1421:Middlewares/Third_Party/FatFs/src/ff.c **** 
1422:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Chksum] = sum;			/* Set check sum */
1423:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Attr] = AM_LFN;		/* Set attribute. LFN entry */
1424:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Type] = 0;
1425:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + LDIR_FstClusLO, 0);
1426:Middlewares/Third_Party/FatFs/src/ff.c **** 
1427:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = (ord - 1) * 13;				/* Get offset in the LFN buffer */
1428:Middlewares/Third_Party/FatFs/src/ff.c **** 	s = wc = 0;
1429:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1430:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc != 0xFFFF) wc = lfnbuf[i++];	/* Get an effective character */
1431:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(dir+LfnOfs[s], wc);	/* Put it */
1432:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!wc) wc = 0xFFFF;		/* Padding characters following last character */
1433:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (++s < 13);
1434:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (wc == 0xFFFF || !lfnbuf[i]) ord |= LLEF;	/* Bottom LFN part is the start of LFN sequence */
1435:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Ord] = ord;			/* Set the LFN order */
1436:Middlewares/Third_Party/FatFs/src/ff.c **** }
1437:Middlewares/Third_Party/FatFs/src/ff.c **** 
1438:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1439:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1440:Middlewares/Third_Party/FatFs/src/ff.c **** 
1441:Middlewares/Third_Party/FatFs/src/ff.c **** 
1442:Middlewares/Third_Party/FatFs/src/ff.c **** 
1443:Middlewares/Third_Party/FatFs/src/ff.c **** 
1444:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1445:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create numbered name                                                  */
1446:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1447:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1448:Middlewares/Third_Party/FatFs/src/ff.c **** static
1449:Middlewares/Third_Party/FatFs/src/ff.c **** void gen_numname (
1450:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dst,			/* Pointer to the buffer to store numbered SFN */
1451:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE* src,	/* Pointer to SFN */
1452:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* lfn,	/* Pointer to LFN */
1453:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT seq			/* Sequence number */
1454:Middlewares/Third_Party/FatFs/src/ff.c **** )
1455:Middlewares/Third_Party/FatFs/src/ff.c **** {
1456:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ns[8], c;
1457:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j;
1458:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc;
ARM GAS  /tmp/ccVdKYyy.s 			page 33


1459:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sr;
1460:Middlewares/Third_Party/FatFs/src/ff.c **** 
1461:Middlewares/Third_Party/FatFs/src/ff.c **** 
1462:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(dst, src, 11);
1463:Middlewares/Third_Party/FatFs/src/ff.c **** 
1464:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (seq > 5) {	/* On many collisions, generate a hash number instead of sequential number */
1465:Middlewares/Third_Party/FatFs/src/ff.c **** 		sr = seq;
1466:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (*lfn) {	/* Create a CRC */
1467:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = *lfn++;
1468:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (i = 0; i < 16; i++) {
1469:Middlewares/Third_Party/FatFs/src/ff.c **** 				sr = (sr << 1) + (wc & 1);
1470:Middlewares/Third_Party/FatFs/src/ff.c **** 				wc >>= 1;
1471:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (sr & 0x10000) sr ^= 0x11021;
1472:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1473:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1474:Middlewares/Third_Party/FatFs/src/ff.c **** 		seq = (UINT)sr;
1475:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1476:Middlewares/Third_Party/FatFs/src/ff.c **** 
1477:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* itoa (hexdecimal) */
1478:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = 7;
1479:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1480:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (seq % 16) + '0';
1481:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c > '9') c += 7;
1482:Middlewares/Third_Party/FatFs/src/ff.c **** 		ns[i--] = c;
1483:Middlewares/Third_Party/FatFs/src/ff.c **** 		seq /= 16;
1484:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (seq);
1485:Middlewares/Third_Party/FatFs/src/ff.c **** 	ns[i] = '~';
1486:Middlewares/Third_Party/FatFs/src/ff.c **** 
1487:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Append the number */
1488:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (j = 0; j < i && dst[j] != ' '; j++) {
1489:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(dst[j])) {
1490:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (j == i - 1) break;
1491:Middlewares/Third_Party/FatFs/src/ff.c **** 			j++;
1492:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1493:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1494:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1495:Middlewares/Third_Party/FatFs/src/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
1496:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (j < 8);
1497:Middlewares/Third_Party/FatFs/src/ff.c **** }
1498:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1499:Middlewares/Third_Party/FatFs/src/ff.c **** 
1500:Middlewares/Third_Party/FatFs/src/ff.c **** 
1501:Middlewares/Third_Party/FatFs/src/ff.c **** 
1502:Middlewares/Third_Party/FatFs/src/ff.c **** 
1503:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1504:Middlewares/Third_Party/FatFs/src/ff.c **** /* Calculate sum of an SFN                                               */
1505:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1506:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1507:Middlewares/Third_Party/FatFs/src/ff.c **** static
1508:Middlewares/Third_Party/FatFs/src/ff.c **** BYTE sum_sfn (
1509:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE* dir		/* Pointer to the SFN entry */
1510:Middlewares/Third_Party/FatFs/src/ff.c **** )
1511:Middlewares/Third_Party/FatFs/src/ff.c **** {
1512:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sum = 0;
1513:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n = 11;
1514:Middlewares/Third_Party/FatFs/src/ff.c **** 
1515:Middlewares/Third_Party/FatFs/src/ff.c **** 	do sum = (sum >> 1) + (sum << 7) + *dir++; while (--n);
ARM GAS  /tmp/ccVdKYyy.s 			page 34


1516:Middlewares/Third_Party/FatFs/src/ff.c **** 	return sum;
1517:Middlewares/Third_Party/FatFs/src/ff.c **** }
1518:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1519:Middlewares/Third_Party/FatFs/src/ff.c **** 
1520:Middlewares/Third_Party/FatFs/src/ff.c **** 
1521:Middlewares/Third_Party/FatFs/src/ff.c **** 
1522:Middlewares/Third_Party/FatFs/src/ff.c **** 
1523:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1524:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Find an object in the directory                  */
1525:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1526:Middlewares/Third_Party/FatFs/src/ff.c **** 
1527:Middlewares/Third_Party/FatFs/src/ff.c **** static
1528:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_find (
1529:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp			/* Pointer to the directory object linked to the file name */
1530:Middlewares/Third_Party/FatFs/src/ff.c **** )
1531:Middlewares/Third_Party/FatFs/src/ff.c **** {
1532:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1533:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE c, *dir;
1534:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1535:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE a, ord, sum;
1536:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1537:Middlewares/Third_Party/FatFs/src/ff.c **** 
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, 0);			/* Rewind directory object */
1539:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
1540:Middlewares/Third_Party/FatFs/src/ff.c **** 
1541:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1542:Middlewares/Third_Party/FatFs/src/ff.c **** 	ord = sum = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
1543:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1544:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1545:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->fs, dp->sect);
1546:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
1547:Middlewares/Third_Party/FatFs/src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
1548:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dir[DIR_Name];
1549:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
1550:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN	/* LFN configuration */
1551:Middlewares/Third_Party/FatFs/src/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
1552:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == DDEM || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
1553:Middlewares/Third_Party/FatFs/src/ff.c **** 			ord = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
1554:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1555:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
1556:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dp->lfn) {
1557:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (c & LLEF) {		/* Is it start of LFN sequence? */
1558:Middlewares/Third_Party/FatFs/src/ff.c **** 						sum = dir[LDIR_Chksum];
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						c &= ~LLEF; ord = c;	/* LFN start order */
1560:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->lfn_idx = dp->index;	/* Start index of LFN */
1561:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
1562:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Check validity of the LFN entry and compare it with given name */
1563:Middlewares/Third_Party/FatFs/src/ff.c **** 					ord = (c == ord && sum == dir[LDIR_Chksum] && cmp_lfn(dp->lfn, dir)) ? ord - 1 : 0xFF;
1564:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1565:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* An SFN entry is found */
1566:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!ord && sum == sum_sfn(dir)) break;	/* LFN matched? */
1567:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !mem_cmp(dir, dp->fn, 11)) break;	/* SFN matched? */
1568:Middlewares/Third_Party/FatFs/src/ff.c **** 				ord = 0xFF; dp->lfn_idx = 0xFFFF;	/* Reset LFN sequence */
1569:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1570:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1571:Middlewares/Third_Party/FatFs/src/ff.c **** #else		/* Non LFN configuration */
1572:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(dir[DIR_Attr] & AM_VOL) && !mem_cmp(dir, dp->fn, 11)) /* Is it a valid entry? */
ARM GAS  /tmp/ccVdKYyy.s 			page 35


1573:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1574:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1575:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_next(dp, 0);		/* Next entry */
1576:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (res == FR_OK);
1577:Middlewares/Third_Party/FatFs/src/ff.c **** 
1578:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
1579:Middlewares/Third_Party/FatFs/src/ff.c **** }
1580:Middlewares/Third_Party/FatFs/src/ff.c **** 
1581:Middlewares/Third_Party/FatFs/src/ff.c **** 
1582:Middlewares/Third_Party/FatFs/src/ff.c **** 
1583:Middlewares/Third_Party/FatFs/src/ff.c **** 
1584:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1585:Middlewares/Third_Party/FatFs/src/ff.c **** /* Read an object from the directory                                     */
1586:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1587:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2
1588:Middlewares/Third_Party/FatFs/src/ff.c **** static
1589:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_read (
1590:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
1591:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol			/* Filtered by 0:file/directory or 1:volume label */
1592:Middlewares/Third_Party/FatFs/src/ff.c **** )
1593:Middlewares/Third_Party/FatFs/src/ff.c **** {
1594:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1595:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE a, c, *dir;
1596:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1597:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ord = 0xFF, sum = 0xFF;
1598:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1599:Middlewares/Third_Party/FatFs/src/ff.c **** 
1600:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = FR_NO_FILE;
1601:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (dp->sect) {
1602:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->fs, dp->sect);
1603:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
1604:Middlewares/Third_Party/FatFs/src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
1605:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dir[DIR_Name];
1606:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
1607:Middlewares/Third_Party/FatFs/src/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
1608:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN	/* LFN configuration */
1609:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == DDEM || (!_FS_RPATH && c == '.') || (int)((a & ~AM_ARC) == AM_VOL) != vol) {	/* An entry
1610:Middlewares/Third_Party/FatFs/src/ff.c **** 			ord = 0xFF;
1611:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1612:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
1613:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c & LLEF) {			/* Is it start of LFN sequence? */
1614:Middlewares/Third_Party/FatFs/src/ff.c **** 					sum = dir[LDIR_Chksum];
1615:Middlewares/Third_Party/FatFs/src/ff.c **** 					c &= ~LLEF; ord = c;
1616:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->lfn_idx = dp->index;
1617:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1618:Middlewares/Third_Party/FatFs/src/ff.c **** 				/* Check LFN validity and capture it */
1619:Middlewares/Third_Party/FatFs/src/ff.c **** 				ord = (c == ord && sum == dir[LDIR_Chksum] && pick_lfn(dp->lfn, dir)) ? ord - 1 : 0xFF;
1620:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* An SFN entry is found */
1621:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ord || sum != sum_sfn(dir))	/* Is there a valid LFN? */
1622:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->lfn_idx = 0xFFFF;		/* It has no LFN. */
1623:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
1624:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1625:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1626:Middlewares/Third_Party/FatFs/src/ff.c **** #else		/* Non LFN configuration */
1627:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c != DDEM && (_FS_RPATH || c != '.') && a != AM_LFN && (int)((a & ~AM_ARC) == AM_VOL) == vol)
1628:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1629:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  /tmp/ccVdKYyy.s 			page 36


1630:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_next(dp, 0);				/* Next entry */
1631:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
1632:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1633:Middlewares/Third_Party/FatFs/src/ff.c **** 
1634:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) dp->sect = 0;
1635:Middlewares/Third_Party/FatFs/src/ff.c **** 
1636:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
1637:Middlewares/Third_Party/FatFs/src/ff.c **** }
1638:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2 */
1639:Middlewares/Third_Party/FatFs/src/ff.c **** 
1640:Middlewares/Third_Party/FatFs/src/ff.c **** 
1641:Middlewares/Third_Party/FatFs/src/ff.c **** 
1642:Middlewares/Third_Party/FatFs/src/ff.c **** 
1643:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1644:Middlewares/Third_Party/FatFs/src/ff.c **** /* Register an object to the directory                                   */
1645:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1646:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1647:Middlewares/Third_Party/FatFs/src/ff.c **** static
1648:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_register (	/* FR_OK:Successful, FR_DENIED:No free entry or too many SFN collision, FR_D
1649:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp				/* Target directory with object name to be created */
1650:Middlewares/Third_Party/FatFs/src/ff.c **** )
1651:Middlewares/Third_Party/FatFs/src/ff.c **** {
1652:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1653:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN	/* LFN configuration */
1654:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n, nent;
1655:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sn[12], *fn, sum;
1656:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR *lfn;
1657:Middlewares/Third_Party/FatFs/src/ff.c **** 
1658:Middlewares/Third_Party/FatFs/src/ff.c **** 
1659:Middlewares/Third_Party/FatFs/src/ff.c **** 	fn = dp->fn; lfn = dp->lfn;
1660:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(sn, fn, 12);
1661:Middlewares/Third_Party/FatFs/src/ff.c **** 
1662:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_FS_RPATH && (sn[NSFLAG] & NS_DOT))		/* Cannot create dot entry */
1663:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INVALID_NAME;
1664:Middlewares/Third_Party/FatFs/src/ff.c **** 
1665:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sn[NSFLAG] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
1666:Middlewares/Third_Party/FatFs/src/ff.c **** 		fn[NSFLAG] = 0; dp->lfn = 0;			/* Find only SFN */
1667:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (n = 1; n < 100; n++) {
1668:Middlewares/Third_Party/FatFs/src/ff.c **** 			gen_numname(fn, sn, lfn, n);	/* Generate a numbered name */
1669:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_find(dp);				/* Check if the name collides with existing SFN */
1670:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1671:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1672:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 100) return FR_DENIED;		/* Abort if too many collisions */
1673:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
1674:Middlewares/Third_Party/FatFs/src/ff.c **** 		fn[NSFLAG] = sn[NSFLAG]; dp->lfn = lfn;
1675:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1676:Middlewares/Third_Party/FatFs/src/ff.c **** 
1677:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sn[NSFLAG] & NS_LFN) {			/* When LFN is to be created, allocate entries for an SFN + LFNs. */
1678:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (n = 0; lfn[n]; n++) ;
1679:Middlewares/Third_Party/FatFs/src/ff.c **** 		nent = (n + 25) / 13;
1680:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {						/* Otherwise allocate an entry for an SFN  */
1681:Middlewares/Third_Party/FatFs/src/ff.c **** 		nent = 1;
1682:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1683:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_alloc(dp, nent);		/* Allocate entries */
1684:Middlewares/Third_Party/FatFs/src/ff.c **** 
1685:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && --nent) {	/* Set LFN entry if needed */
1686:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, dp->index - nent);
ARM GAS  /tmp/ccVdKYyy.s 			page 37


1687:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
1688:Middlewares/Third_Party/FatFs/src/ff.c **** 			sum = sum_sfn(dp->fn);	/* Sum value of the SFN tied to the LFN */
1689:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {					/* Store LFN entries in bottom first */
1690:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = move_window(dp->fs, dp->sect);
1691:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
1692:Middlewares/Third_Party/FatFs/src/ff.c **** 				fit_lfn(dp->lfn, dp->dir, (BYTE)nent, sum);
1693:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->fs->wflag = 1;
1694:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(dp, 0);	/* Next entry */
1695:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (res == FR_OK && --nent);
1696:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1697:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1698:Middlewares/Third_Party/FatFs/src/ff.c **** #else	/* Non LFN configuration */
1699:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_alloc(dp, 1);		/* Allocate an entry for SFN */
1700:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1701:Middlewares/Third_Party/FatFs/src/ff.c **** 
1702:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {				/* Set SFN entry */
1703:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->fs, dp->sect);
1704:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
1705:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIRE);	/* Clean the entry */
1706:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(dp->dir, dp->fn, 11);	/* Put SFN */
1707:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1708:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->dir[DIR_NTres] = dp->fn[NSFLAG] & (NS_BODY | NS_EXT);	/* Put NT flag */
1709:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1710:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fs->wflag = 1;
1711:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1712:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1713:Middlewares/Third_Party/FatFs/src/ff.c **** 
1714:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
1715:Middlewares/Third_Party/FatFs/src/ff.c **** }
1716:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
1717:Middlewares/Third_Party/FatFs/src/ff.c **** 
1718:Middlewares/Third_Party/FatFs/src/ff.c **** 
1719:Middlewares/Third_Party/FatFs/src/ff.c **** 
1720:Middlewares/Third_Party/FatFs/src/ff.c **** 
1721:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1722:Middlewares/Third_Party/FatFs/src/ff.c **** /* Remove an object from the directory                                   */
1723:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1724:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && !_FS_MINIMIZE
1725:Middlewares/Third_Party/FatFs/src/ff.c **** static
1726:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_remove (	/* FR_OK: Successful, FR_DISK_ERR: A disk error */
1727:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp				/* Directory object pointing the entry to be removed */
1728:Middlewares/Third_Party/FatFs/src/ff.c **** )
1729:Middlewares/Third_Party/FatFs/src/ff.c **** {
1730:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1731:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN	/* LFN configuration */
1732:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
1733:Middlewares/Third_Party/FatFs/src/ff.c **** 
1734:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = dp->index;	/* SFN index */
1735:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, (dp->lfn_idx == 0xFFFF) ? i : dp->lfn_idx);	/* Goto the SFN or top of the LFN en
1736:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
1737:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
1738:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(dp->fs, dp->sect);
1739:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1740:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIRE);	/* Clear and mark the entry "deleted" */
1741:Middlewares/Third_Party/FatFs/src/ff.c **** 			*dp->dir = DDEM;
1742:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fs->wflag = 1;
1743:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dp->index >= i) break;	/* When reached SFN, all entries of the object has been deleted. */
ARM GAS  /tmp/ccVdKYyy.s 			page 38


1744:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_next(dp, 0);		/* Next entry */
1745:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);
1746:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;
1747:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1748:Middlewares/Third_Party/FatFs/src/ff.c **** 
1749:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* Non LFN configuration */
1750:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, dp->index);
1751:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
1752:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->fs, dp->sect);
1753:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
1754:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIRE);	/* Clear and mark the entry "deleted" */
1755:Middlewares/Third_Party/FatFs/src/ff.c **** 			*dp->dir = DDEM;
1756:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fs->wflag = 1;
1757:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1758:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1759:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1760:Middlewares/Third_Party/FatFs/src/ff.c **** 
1761:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
1762:Middlewares/Third_Party/FatFs/src/ff.c **** }
1763:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
1764:Middlewares/Third_Party/FatFs/src/ff.c **** 
1765:Middlewares/Third_Party/FatFs/src/ff.c **** 
1766:Middlewares/Third_Party/FatFs/src/ff.c **** 
1767:Middlewares/Third_Party/FatFs/src/ff.c **** 
1768:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1769:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get file information from directory entry                             */
1770:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1771:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2
1772:Middlewares/Third_Party/FatFs/src/ff.c **** static
1773:Middlewares/Third_Party/FatFs/src/ff.c **** void get_fileinfo (		/* No return code */
1774:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to the directory object */
1775:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno	 	/* Pointer to the file information to be filled */
1776:Middlewares/Third_Party/FatFs/src/ff.c **** )
1777:Middlewares/Third_Party/FatFs/src/ff.c **** {
1778:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
1779:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR *p, c;
1780:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
1781:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1782:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w, *lfn;
1783:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1784:Middlewares/Third_Party/FatFs/src/ff.c **** 
1785:Middlewares/Third_Party/FatFs/src/ff.c **** 	p = fno->fname;
1786:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dp->sect) {		/* Get SFN */
1787:Middlewares/Third_Party/FatFs/src/ff.c **** 		dir = dp->dir;
1788:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = 0;
1789:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (i < 11) {		/* Copy name body and extension */
1790:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = (TCHAR)dir[i++];
1791:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c == ' ') continue;				/* Skip padding spaces */
1792:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
1793:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i == 9) *p++ = '.';				/* Insert a . if extension is exist */
1794:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1795:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsUpper(c) && (dir[DIR_NTres] & (i >= 9 ? NS_EXT : NS_BODY)))
1796:Middlewares/Third_Party/FatFs/src/ff.c **** 				c += 0x20;			/* To lower */
1797:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
1798:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsDBCS1(c) && i != 8 && i != 11 && IsDBCS2(dir[i]))
1799:Middlewares/Third_Party/FatFs/src/ff.c **** 				c = c << 8 | dir[i++];
1800:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = ff_convert(c, 1);	/* OEM -> Unicode */
ARM GAS  /tmp/ccVdKYyy.s 			page 39


1801:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!c) c = '?';
1802:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1803:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1804:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p++ = c;
1805:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1806:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fattrib = dir[DIR_Attr];				/* Attribute */
1807:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fsize = LD_DWORD(dir + DIR_FileSize);	/* Size */
1808:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fdate = LD_WORD(dir + DIR_WrtDate);	/* Date */
1809:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->ftime = LD_WORD(dir + DIR_WrtTime);	/* Time */
1810:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1811:Middlewares/Third_Party/FatFs/src/ff.c **** 	*p = 0;		/* Terminate SFN string by a \0 */
1812:Middlewares/Third_Party/FatFs/src/ff.c **** 
1813:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
1814:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fno->lfname) {
1815:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = 0; p = fno->lfname;
1816:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (dp->sect && fno->lfsize && dp->lfn_idx != 0xFFFF) {	/* Get LFN if available */
1817:Middlewares/Third_Party/FatFs/src/ff.c **** 			lfn = dp->lfn;
1818:Middlewares/Third_Party/FatFs/src/ff.c **** 			while ((w = *lfn++) != 0) {		/* Get an LFN character */
1819:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
1820:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = ff_convert(w, 0);		/* Unicode -> OEM */
1821:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!w) { i = 0; break; }	/* No LFN if it could not be converted */
1822:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (_DF1S && w >= 0x100)	/* Put 1st byte if it is a DBC (always false on SBCS cfg) */
1823:Middlewares/Third_Party/FatFs/src/ff.c **** 					p[i++] = (TCHAR)(w >> 8);
1824:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1825:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i >= fno->lfsize - 1) { i = 0; break; }	/* No LFN if buffer overflow */
1826:Middlewares/Third_Party/FatFs/src/ff.c **** 				p[i++] = (TCHAR)w;
1827:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1828:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1829:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[i] = 0;	/* Terminate LFN string by a \0 */
1830:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1831:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1832:Middlewares/Third_Party/FatFs/src/ff.c **** }
1833:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE <= 1 || _FS_RPATH >= 2 */
1834:Middlewares/Third_Party/FatFs/src/ff.c **** 
1835:Middlewares/Third_Party/FatFs/src/ff.c **** 
1836:Middlewares/Third_Party/FatFs/src/ff.c **** 
1837:Middlewares/Third_Party/FatFs/src/ff.c **** 
1838:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1839:Middlewares/Third_Party/FatFs/src/ff.c **** /* Pattern matching                                                      */
1840:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1841:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FIND && _FS_MINIMIZE <= 1
1842:Middlewares/Third_Party/FatFs/src/ff.c **** static
1843:Middlewares/Third_Party/FatFs/src/ff.c **** WCHAR get_achar (		/* Get a character and advances ptr 1 or 2 */
1844:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** ptr	/* Pointer to pointer to the SBCS/DBCS/Unicode string */
1845:Middlewares/Third_Party/FatFs/src/ff.c **** )
1846:Middlewares/Third_Party/FatFs/src/ff.c **** {
1847:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR chr;
1848:Middlewares/Third_Party/FatFs/src/ff.c **** 
1849:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
1850:Middlewares/Third_Party/FatFs/src/ff.c **** 	chr = (BYTE)*(*ptr)++;					/* Get a byte */
1851:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (IsLower(chr)) chr -= 0x20;			/* To upper ASCII char */
1852:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (IsDBCS1(chr) && IsDBCS2(**ptr))		/* Get DBC 2nd byte if needed */
1853:Middlewares/Third_Party/FatFs/src/ff.c **** 		chr = chr << 8 | (BYTE)*(*ptr)++;
1854:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
1855:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (chr >= 0x80) chr = ExCvt[chr - 0x80];	/* To upper SBCS extended char */
1856:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1857:Middlewares/Third_Party/FatFs/src/ff.c **** #else
ARM GAS  /tmp/ccVdKYyy.s 			page 40


1858:Middlewares/Third_Party/FatFs/src/ff.c **** 	chr = ff_wtoupper(*(*ptr)++);			/* Get a word and to upper */
1859:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1860:Middlewares/Third_Party/FatFs/src/ff.c **** 	return chr;
1861:Middlewares/Third_Party/FatFs/src/ff.c **** }
1862:Middlewares/Third_Party/FatFs/src/ff.c **** 
1863:Middlewares/Third_Party/FatFs/src/ff.c **** 
1864:Middlewares/Third_Party/FatFs/src/ff.c **** static
1865:Middlewares/Third_Party/FatFs/src/ff.c **** int pattern_matching (	/* Return value: 0:mismatched, 1:matched */
1866:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* pat,	/* Matching pattern */
1867:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* nam,	/* String to be tested */
1868:Middlewares/Third_Party/FatFs/src/ff.c **** 	int skip,			/* Number of pre-skip chars (number of ?s) */
1869:Middlewares/Third_Party/FatFs/src/ff.c **** 	int inf				/* Infinite search (* specified) */
1870:Middlewares/Third_Party/FatFs/src/ff.c **** )
1871:Middlewares/Third_Party/FatFs/src/ff.c **** {
1872:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *pp, *np;
1873:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR pc, nc;
1874:Middlewares/Third_Party/FatFs/src/ff.c **** 	int nm, nx;
1875:Middlewares/Third_Party/FatFs/src/ff.c **** 
1876:Middlewares/Third_Party/FatFs/src/ff.c **** 
1877:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (skip--) {				/* Pre-skip name chars */
1878:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!get_achar(&nam)) return 0;	/* Branch mismatched if less name chars */
1879:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1880:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!*pat && inf) return 1;		/* (short circuit) */
1881:Middlewares/Third_Party/FatFs/src/ff.c **** 
1882:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1883:Middlewares/Third_Party/FatFs/src/ff.c **** 		pp = pat; np = nam;			/* Top of pattern and name to match */
1884:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
1885:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (*pp == '?' || *pp == '*') {	/* Wildcard? */
1886:Middlewares/Third_Party/FatFs/src/ff.c **** 				nm = nx = 0;
1887:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {				/* Analyze the wildcard chars */
1888:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (*pp++ == '?') nm++; else nx = 1;
1889:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (*pp == '?' || *pp == '*');
1890:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (pattern_matching(pp, np, nm, nx)) return 1;	/* Test new branch (recurs upto number of wildc
1891:Middlewares/Third_Party/FatFs/src/ff.c **** 				nc = *np; break;	/* Branch mismatched */
1892:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1893:Middlewares/Third_Party/FatFs/src/ff.c **** 			pc = get_achar(&pp);	/* Get a pattern char */
1894:Middlewares/Third_Party/FatFs/src/ff.c **** 			nc = get_achar(&np);	/* Get a name char */
1895:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (pc != nc) break;	/* Branch mismatched? */
1896:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!pc) return 1;		/* Branch matched? (matched at end of both strings) */
1897:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1898:Middlewares/Third_Party/FatFs/src/ff.c **** 		get_achar(&nam);			/* nam++ */
1899:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (inf && nc);			/* Retry until end of name if infinite search is specified */
1900:Middlewares/Third_Party/FatFs/src/ff.c **** 
1901:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 0;
1902:Middlewares/Third_Party/FatFs/src/ff.c **** }
1903:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_FIND && _FS_MINIMIZE <= 1 */
1904:Middlewares/Third_Party/FatFs/src/ff.c **** 
1905:Middlewares/Third_Party/FatFs/src/ff.c **** 
1906:Middlewares/Third_Party/FatFs/src/ff.c **** 
1907:Middlewares/Third_Party/FatFs/src/ff.c **** 
1908:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1909:Middlewares/Third_Party/FatFs/src/ff.c **** /* Pick a segment and create the object name in directory form           */
1910:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1911:Middlewares/Third_Party/FatFs/src/ff.c **** 
1912:Middlewares/Third_Party/FatFs/src/ff.c **** static
1913:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT create_name (
1914:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to the directory object */
ARM GAS  /tmp/ccVdKYyy.s 			page 41


1915:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** path	/* Pointer to pointer to the segment in the path string */
1916:Middlewares/Third_Party/FatFs/src/ff.c **** )
1917:Middlewares/Third_Party/FatFs/src/ff.c **** {
1918:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN	/* LFN configuration */
1919:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE b, cf;
1920:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w, *lfn;
1921:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, ni, si, di;
1922:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *p;
1923:Middlewares/Third_Party/FatFs/src/ff.c **** 
1924:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create LFN in Unicode */
1925:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (p = *path; *p == '/' || *p == '\\'; p++) ;	/* Strip duplicated separator */
1926:Middlewares/Third_Party/FatFs/src/ff.c **** 	lfn = dp->lfn;
1927:Middlewares/Third_Party/FatFs/src/ff.c **** 	si = di = 0;
1928:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
1929:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = p[si++];					/* Get a character */
1930:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w < ' ' || w == '/' || w == '\\') break;	/* Break on end of segment */
1931:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (di >= _MAX_LFN)				/* Reject too long name */
1932:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_INVALID_NAME;
1933:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
1934:Middlewares/Third_Party/FatFs/src/ff.c **** 		w &= 0xFF;
1935:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(w)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
1936:Middlewares/Third_Party/FatFs/src/ff.c **** #if _DF1S
1937:Middlewares/Third_Party/FatFs/src/ff.c **** 			b = (BYTE)p[si++];			/* Get 2nd byte */
1938:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = (w << 8) + b;			/* Create a DBC */
1939:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!IsDBCS2(b))
1940:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_INVALID_NAME;	/* Reject invalid sequence */
1941:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1942:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1943:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = ff_convert(w, 1);			/* Convert ANSI/OEM to Unicode */
1944:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!w) return FR_INVALID_NAME;	/* Reject invalid code */
1945:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1946:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w < 0x80 && chk_chr("\"*:<>\?|\x7F", w)) /* Reject illegal characters for LFN */
1947:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_INVALID_NAME;
1948:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfn[di++] = w;					/* Store the Unicode character */
1949:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1950:Middlewares/Third_Party/FatFs/src/ff.c **** 	*path = &p[si];						/* Return pointer to the next segment */
1951:Middlewares/Third_Party/FatFs/src/ff.c **** 	cf = (w < ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
1952:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
1953:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((di == 1 && lfn[di - 1] == '.') || /* Is this a dot entry? */
1954:Middlewares/Third_Party/FatFs/src/ff.c **** 		(di == 2 && lfn[di - 1] == '.' && lfn[di - 2] == '.')) {
1955:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfn[di] = 0;
1956:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 11; i++)
1957:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fn[i] = (i < di) ? '.' : ' ';
1958:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[i] = cf | NS_DOT;		/* This is a dot entry */
1959:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_OK;
1960:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1961:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1962:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (di) {						/* Strip trailing spaces and dots */
1963:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = lfn[di - 1];
1964:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w != ' ' && w != '.') break;
1965:Middlewares/Third_Party/FatFs/src/ff.c **** 		di--;
1966:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1967:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!di) return FR_INVALID_NAME;	/* Reject nul string */
1968:Middlewares/Third_Party/FatFs/src/ff.c **** 
1969:Middlewares/Third_Party/FatFs/src/ff.c **** 	lfn[di] = 0;						/* LFN is created */
1970:Middlewares/Third_Party/FatFs/src/ff.c **** 
1971:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create SFN in directory form */
ARM GAS  /tmp/ccVdKYyy.s 			page 42


1972:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(dp->fn, ' ', 11);
1973:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (si = 0; lfn[si] == ' ' || lfn[si] == '.'; si++) ;	/* Strip leading spaces and dots */
1974:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
1975:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
1976:Middlewares/Third_Party/FatFs/src/ff.c **** 
1977:Middlewares/Third_Party/FatFs/src/ff.c **** 	b = i = 0; ni = 8;
1978:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
1979:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = lfn[si++];					/* Get an LFN character */
1980:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
1981:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w == ' ' || (w == '.' && si != di)) {	/* Remove spaces and dots */
1982:Middlewares/Third_Party/FatFs/src/ff.c **** 			cf |= NS_LOSS | NS_LFN; continue;
1983:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1984:Middlewares/Third_Party/FatFs/src/ff.c **** 
1985:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i >= ni || si == di) {		/* Extension or end of SFN */
1986:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ni == 11) {				/* Long extension */
1987:Middlewares/Third_Party/FatFs/src/ff.c **** 				cf |= NS_LOSS | NS_LFN; break;
1988:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1989:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (si != di) cf |= NS_LOSS | NS_LFN;	/* Out of 8.3 format */
1990:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (si > di) break;			/* No extension */
1991:Middlewares/Third_Party/FatFs/src/ff.c **** 			si = di; i = 8; ni = 11;	/* Enter extension section */
1992:Middlewares/Third_Party/FatFs/src/ff.c **** 			b <<= 2; continue;
1993:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1994:Middlewares/Third_Party/FatFs/src/ff.c **** 
1995:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w >= 0x80) {				/* Non ASCII character */
1996:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
1997:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = ff_convert(w, 0);		/* Unicode -> OEM code */
1998:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (w) w = ExCvt[w - 0x80];	/* Convert extended character to upper (SBCS) */
1999:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2000:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = ff_convert(ff_wtoupper(w), 0);	/* Upper converted Unicode -> OEM code */
2001:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2002:Middlewares/Third_Party/FatFs/src/ff.c **** 			cf |= NS_LFN;				/* Force create LFN entry */
2003:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2004:Middlewares/Third_Party/FatFs/src/ff.c **** 
2005:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_DF1S && w >= 0x100) {		/* DBC (always false at SBCS cfg) */
2006:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= ni - 1) {
2007:Middlewares/Third_Party/FatFs/src/ff.c **** 				cf |= NS_LOSS | NS_LFN; i = ni; continue;
2008:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2009:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fn[i++] = (BYTE)(w >> 8);
2010:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {						/* SBC */
2011:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!w || chk_chr("+,;=[]", w)) {	/* Replace illegal characters for SFN */
2012:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
2013:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
2014:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (IsUpper(w)) {		/* ASCII large capital */
2015:Middlewares/Third_Party/FatFs/src/ff.c **** 					b |= 2;
2016:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
2017:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (IsLower(w)) {	/* ASCII small capital */
2018:Middlewares/Third_Party/FatFs/src/ff.c **** 						b |= 1; w -= 0x20;
2019:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2020:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2021:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2022:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2023:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[i++] = (BYTE)w;
2024:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2025:Middlewares/Third_Party/FatFs/src/ff.c **** 
2026:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dp->fn[0] == DDEM) dp->fn[0] = RDDEM;	/* If the first character collides with deleted mark, re
2027:Middlewares/Third_Party/FatFs/src/ff.c **** 
2028:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ni == 8) b <<= 2;
ARM GAS  /tmp/ccVdKYyy.s 			page 43


2029:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03)	/* Create LFN entry when there are composite capital
2030:Middlewares/Third_Party/FatFs/src/ff.c **** 		cf |= NS_LFN;
2031:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(cf & NS_LFN)) {						/* When LFN is in 8.3 format without extended character, NT flags are c
2032:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((b & 0x03) == 0x01) cf |= NS_EXT;	/* NT flag (Extension has only small capital) */
2033:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
2034:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2035:Middlewares/Third_Party/FatFs/src/ff.c **** 
2036:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->fn[NSFLAG] = cf;	/* SFN is created */
2037:Middlewares/Third_Party/FatFs/src/ff.c **** 
2038:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
2039:Middlewares/Third_Party/FatFs/src/ff.c **** 
2040:Middlewares/Third_Party/FatFs/src/ff.c **** 
2041:Middlewares/Third_Party/FatFs/src/ff.c **** #else	/* Non-LFN configuration */
2042:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE b, c, d, *sfn;
2043:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT ni, si, i;
2044:Middlewares/Third_Party/FatFs/src/ff.c **** 	const char *p;
2045:Middlewares/Third_Party/FatFs/src/ff.c **** 
2046:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create file name in directory form */
2047:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (p = *path; *p == '/' || *p == '\\'; p++) ;	/* Strip duplicated separator */
2048:Middlewares/Third_Party/FatFs/src/ff.c **** 	sfn = dp->fn;
2049:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(sfn, ' ', 11);
2050:Middlewares/Third_Party/FatFs/src/ff.c **** 	si = i = b = 0; ni = 8;
2051:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
2052:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (p[si] == '.') { /* Is this a dot entry? */
2053:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
2054:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = (BYTE)p[si++];
2055:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c != '.' || si >= 3) break;
2056:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
2057:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2058:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c != '/' && c != '\\' && c > ' ') return FR_INVALID_NAME;
2059:Middlewares/Third_Party/FatFs/src/ff.c **** 		*path = &p[si];									/* Return pointer to the next segment */
2060:Middlewares/Third_Party/FatFs/src/ff.c **** 		sfn[NSFLAG] = (c <= ' ') ? NS_LAST | NS_DOT : NS_DOT;	/* Set last segment flag if end of path */
2061:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_OK;
2062:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2063:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2064:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
2065:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (BYTE)p[si++];
2066:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c <= ' ' || c == '/' || c == '\\') break;	/* Break on end of segment */
2067:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '.' || i >= ni) {
2068:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ni != 8 || c != '.') return FR_INVALID_NAME;
2069:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;
2070:Middlewares/Third_Party/FatFs/src/ff.c **** 			b <<= 2; continue;
2071:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2072:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c >= 0x80) {				/* Extended character? */
2073:Middlewares/Third_Party/FatFs/src/ff.c **** 			b |= 3;						/* Eliminate NT flag */
2074:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
2075:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = ExCvt[c - 0x80];		/* To upper extended characters (SBCS cfg) */
2076:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2077:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_DF1S
2078:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_INVALID_NAME;		/* Reject extended characters (ASCII cfg) */
2079:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2080:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2081:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2082:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(c)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
2083:Middlewares/Third_Party/FatFs/src/ff.c **** 			d = (BYTE)p[si++];			/* Get 2nd byte */
2084:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!IsDBCS2(d) || i >= ni - 1)	/* Reject invalid DBC */
2085:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_INVALID_NAME;
ARM GAS  /tmp/ccVdKYyy.s 			page 44


2086:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
2087:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = d;
2088:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {						/* SBC */
2089:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (chk_chr("\"*+,:;<=>\?[]|\x7F", c))	/* Reject illegal chrs for SFN */
2090:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_INVALID_NAME;
2091:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsUpper(c)) {			/* ASCII large capital? */
2092:Middlewares/Third_Party/FatFs/src/ff.c **** 				b |= 2;
2093:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
2094:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (IsLower(c)) {		/* ASCII small capital? */
2095:Middlewares/Third_Party/FatFs/src/ff.c **** 					b |= 1; c -= 0x20;
2096:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2097:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2098:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
2099:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2100:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2101:Middlewares/Third_Party/FatFs/src/ff.c **** 	*path = &p[si];						/* Return pointer to the next segment */
2102:Middlewares/Third_Party/FatFs/src/ff.c **** 	c = (c <= ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
2103:Middlewares/Third_Party/FatFs/src/ff.c **** 
2104:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!i) return FR_INVALID_NAME;		/* Reject nul string */
2105:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sfn[0] == DDEM) sfn[0] = RDDEM;	/* When first character collides with DDEM, replace it with RD
2106:Middlewares/Third_Party/FatFs/src/ff.c **** 
2107:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ni == 8) b <<= 2;
2108:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x03) == 0x01) c |= NS_EXT;	/* NT flag (Name extension has only small capital) */
2109:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x0C) == 0x04) c |= NS_BODY;	/* NT flag (Name body has only small capital) */
2110:Middlewares/Third_Party/FatFs/src/ff.c **** 
2111:Middlewares/Third_Party/FatFs/src/ff.c **** 	sfn[NSFLAG] = c;		/* Store NT flag, File name is created */
2112:Middlewares/Third_Party/FatFs/src/ff.c **** 
2113:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
2114:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2115:Middlewares/Third_Party/FatFs/src/ff.c **** }
2116:Middlewares/Third_Party/FatFs/src/ff.c **** 
2117:Middlewares/Third_Party/FatFs/src/ff.c **** 
2118:Middlewares/Third_Party/FatFs/src/ff.c **** 
2119:Middlewares/Third_Party/FatFs/src/ff.c **** 
2120:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2121:Middlewares/Third_Party/FatFs/src/ff.c **** /* Follow a file path                                                    */
2122:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2123:Middlewares/Third_Party/FatFs/src/ff.c **** 
2124:Middlewares/Third_Party/FatFs/src/ff.c **** static
2125:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT follow_path (	/* FR_OK(0): successful, !=0: error code */
2126:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Directory object to return last directory and found object */
2127:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path	/* Full-path string to find a file or directory */
2128:Middlewares/Third_Party/FatFs/src/ff.c **** )
2129:Middlewares/Third_Party/FatFs/src/ff.c **** {
2130:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2131:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir, ns;
2132:Middlewares/Third_Party/FatFs/src/ff.c **** 
2133:Middlewares/Third_Party/FatFs/src/ff.c **** 
2134:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
2135:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (*path == '/' || *path == '\\') {	/* There is a heading separator */
2136:Middlewares/Third_Party/FatFs/src/ff.c **** 		path++;	dp->sclust = 0;				/* Strip it and start from the root directory */
2137:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {								/* No heading separator */
2138:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sclust = dp->fs->cdir;			/* Start from the current directory */
2139:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2140:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2141:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (*path == '/' || *path == '\\')		/* Strip heading separator if exist */
2142:Middlewares/Third_Party/FatFs/src/ff.c **** 		path++;
ARM GAS  /tmp/ccVdKYyy.s 			page 45


2143:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sclust = 0;							/* Always start from the root directory */
2144:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2145:Middlewares/Third_Party/FatFs/src/ff.c **** 
2146:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((UINT)*path < ' ') {				/* Null path name is the origin directory itself */
2147:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, 0);
2148:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->dir = 0;
2149:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {								/* Follow path */
2150:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
2151:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
2152:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
2153:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_find(dp);				/* Find an object with the sagment name */
2154:Middlewares/Third_Party/FatFs/src/ff.c **** 			ns = dp->fn[NSFLAG];
2155:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
2156:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
2157:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, */
2158:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->sclust = 0; dp->dir = 0;	/* it is the root directory and stay there */
2159:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!(ns & NS_LAST)) continue;	/* Continue to follow if not last segment */
2160:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_OK;					/* Ended at the root directroy. Function completed. */
2161:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {							/* Could not find the object */
2162:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!(ns & NS_LAST)) res = FR_NO_PATH;	/* Adjust error code if not last segment */
2163:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2164:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2165:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
2166:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2167:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ns & NS_LAST) break;			/* Last segment matched. Function completed. */
2168:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dp->dir;						/* Follow the sub-directory */
2169:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(dir[DIR_Attr] & AM_DIR)) {	/* It is not a sub-directory and cannot follow */
2170:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_PATH; break;
2171:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2172:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->sclust = ld_clust(dp->fs, dir);
2173:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2174:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2175:Middlewares/Third_Party/FatFs/src/ff.c **** 
2176:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2177:Middlewares/Third_Party/FatFs/src/ff.c **** }
2178:Middlewares/Third_Party/FatFs/src/ff.c **** 
2179:Middlewares/Third_Party/FatFs/src/ff.c **** 
2180:Middlewares/Third_Party/FatFs/src/ff.c **** 
2181:Middlewares/Third_Party/FatFs/src/ff.c **** 
2182:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2183:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get logical drive number from path name                               */
2184:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2185:Middlewares/Third_Party/FatFs/src/ff.c **** 
2186:Middlewares/Third_Party/FatFs/src/ff.c **** static
2187:Middlewares/Third_Party/FatFs/src/ff.c **** int get_ldnumber (		/* Returns logical drive number (-1:invalid drive) */
2188:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** path	/* Pointer to pointer to the path name */
2189:Middlewares/Third_Party/FatFs/src/ff.c **** )
2190:Middlewares/Third_Party/FatFs/src/ff.c **** {
 344              		.loc 1 2190 0
 345              		.cfi_startproc
 346              		@ args = 0, pretend = 0, frame = 0
 347              		@ frame_needed = 0, uses_anonymous_args = 0
 348              		@ link register save eliminated.
 349              	.LVL30:
 350 0000 30B4     		push	{r4, r5}
 351              	.LCFI13:
 352              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccVdKYyy.s 			page 46


 353              		.cfi_offset 4, -8
 354              		.cfi_offset 5, -4
2191:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *tp, *tt;
2192:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
2193:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol = -1;
2194:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
2195:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const char* const str[] = {_VOLUME_STRS};
2196:Middlewares/Third_Party/FatFs/src/ff.c **** 	const char *sp;
2197:Middlewares/Third_Party/FatFs/src/ff.c **** 	char c;
2198:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR tc;
2199:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2200:Middlewares/Third_Party/FatFs/src/ff.c **** 
2201:Middlewares/Third_Party/FatFs/src/ff.c **** 
2202:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (*path) {	/* If the pointer is not a null */
 355              		.loc 1 2202 0
 356 0002 0468     		ldr	r4, [r0]
 357 0004 DCB1     		cbz	r4, .L64
 358              	.LVL31:
2203:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (tt = *path; (UINT)*tt >= (_USE_LFN ? ' ' : '!') && *tt != ':'; tt++) ;	/* Find ':' in the pa
 359              		.loc 1 2203 0 discriminator 1
 360 0006 2578     		ldrb	r5, [r4]	@ zero_extendqisi2
 361 0008 202D     		cmp	r5, #32
 362 000a 0BD9     		bls	.L59
 363              		.loc 1 2203 0 is_stmt 0
 364 000c 3A2D     		cmp	r5, #58
 365 000e 16D0     		beq	.L64
 366              		.loc 1 2203 0 discriminator 4
 367 0010 2346     		mov	r3, r4
 368 0012 02E0     		b	.L53
 369              	.LVL32:
 370              	.L67:
 371              		.loc 1 2203 0 discriminator 3
 372 0014 3A2A     		cmp	r2, #58
 373 0016 08D0     		beq	.L66
 374 0018 0B46     		mov	r3, r1
 375              	.LVL33:
 376              	.L53:
 377              		.loc 1 2203 0 discriminator 4
 378 001a 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 379 001c 202A     		cmp	r2, #32
 380 001e 03F10101 		add	r1, r3, #1
 381              	.LVL34:
 382 0022 F7D8     		bhi	.L67
 383              	.LVL35:
 384              	.L59:
2204:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (*tt == ':') {	/* If a ':' is exist in the path name */
2205:Middlewares/Third_Party/FatFs/src/ff.c **** 			tp = *path;
2206:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = *tp++ - '0'; 
2207:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
2208:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
2209:Middlewares/Third_Party/FatFs/src/ff.c **** 					vol = (int)i;
2210:Middlewares/Third_Party/FatFs/src/ff.c **** 					*path = ++tt;
2211:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2212:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2213:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID
2214:Middlewares/Third_Party/FatFs/src/ff.c **** 			 else {	/* No numeric drive number, find string drive id */
2215:Middlewares/Third_Party/FatFs/src/ff.c **** 				i = 0; tt++;
ARM GAS  /tmp/ccVdKYyy.s 			page 47


2216:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
2217:Middlewares/Third_Party/FatFs/src/ff.c **** 					sp = str[i]; tp = *path;
2218:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {	/* Compare a string drive id with path name */
2219:Middlewares/Third_Party/FatFs/src/ff.c **** 						c = *sp++; tc = *tp++;
2220:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (IsLower(tc)) tc -= 0x20;
2221:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (c && (TCHAR)c == tc);
2222:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while ((c || tp != tt) && ++i < _VOLUMES);	/* Repeat for each id until pattern match */
2223:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
2224:Middlewares/Third_Party/FatFs/src/ff.c **** 					vol = (int)i;
2225:Middlewares/Third_Party/FatFs/src/ff.c **** 					*path = tt;
2226:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2227:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2228:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2229:Middlewares/Third_Party/FatFs/src/ff.c **** 			return vol;
2230:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2231:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH && _VOLUMES >= 2
2232:Middlewares/Third_Party/FatFs/src/ff.c **** 		vol = CurrVol;	/* Current drive */
2233:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2234:Middlewares/Third_Party/FatFs/src/ff.c **** 		vol = 0;		/* Drive 0 */
 385              		.loc 1 2234 0 is_stmt 1
 386 0024 0020     		movs	r0, #0
 387              	.LVL36:
2235:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2236:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2237:Middlewares/Third_Party/FatFs/src/ff.c **** 	return vol;
2238:Middlewares/Third_Party/FatFs/src/ff.c **** }
 388              		.loc 1 2238 0
 389 0026 30BC     		pop	{r4, r5}
 390              	.LCFI14:
 391              		.cfi_remember_state
 392              		.cfi_restore 5
 393              		.cfi_restore 4
 394              		.cfi_def_cfa_offset 0
 395 0028 7047     		bx	lr
 396              	.LVL37:
 397              	.L66:
 398              	.LCFI15:
 399              		.cfi_restore_state
2206:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
 400              		.loc 1 2206 0
 401 002a 0134     		adds	r4, r4, #1
 402              	.LVL38:
2207:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
 403              		.loc 1 2207 0
 404 002c A142     		cmp	r1, r4
 405 002e 06D1     		bne	.L64
2208:Middlewares/Third_Party/FatFs/src/ff.c **** 					vol = (int)i;
 406              		.loc 1 2208 0
 407 0030 302D     		cmp	r5, #48
 408 0032 04D1     		bne	.L64
 409              	.LVL39:
2210:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 410              		.loc 1 2210 0
 411 0034 0233     		adds	r3, r3, #2
 412              	.LVL40:
 413 0036 0360     		str	r3, [r0]
 414              		.loc 1 2238 0
ARM GAS  /tmp/ccVdKYyy.s 			page 48


 415 0038 30BC     		pop	{r4, r5}
 416              	.LCFI16:
 417              		.cfi_remember_state
 418              		.cfi_restore 4
 419              		.cfi_restore 5
 420              		.cfi_def_cfa_offset 0
 421              	.LVL41:
2206:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
 422              		.loc 1 2206 0
 423 003a 0020     		movs	r0, #0
 424              	.LVL42:
 425              		.loc 1 2238 0
 426 003c 7047     		bx	lr
 427              	.LVL43:
 428              	.L64:
 429              	.LCFI17:
 430              		.cfi_restore_state
2193:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
 431              		.loc 1 2193 0
 432 003e 4FF0FF30 		mov	r0, #-1
 433              	.LVL44:
 434              		.loc 1 2238 0
 435 0042 30BC     		pop	{r4, r5}
 436              	.LCFI18:
 437              		.cfi_restore 4
 438              		.cfi_restore 5
 439              		.cfi_def_cfa_offset 0
 440 0044 7047     		bx	lr
 441              		.cfi_endproc
 442              	.LFE156:
 444 0046 00BF     		.section	.text.validate,"ax",%progbits
 445              		.align	1
 446              		.p2align 2,,3
 447              		.syntax unified
 448              		.thumb
 449              		.thumb_func
 450              		.fpu fpv4-sp-d16
 452              	validate:
 453              	.LFB159:
2239:Middlewares/Third_Party/FatFs/src/ff.c **** 
2240:Middlewares/Third_Party/FatFs/src/ff.c **** 
2241:Middlewares/Third_Party/FatFs/src/ff.c **** 
2242:Middlewares/Third_Party/FatFs/src/ff.c **** 
2243:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2244:Middlewares/Third_Party/FatFs/src/ff.c **** /* Load a sector and check if it is an FAT boot sector                   */
2245:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2246:Middlewares/Third_Party/FatFs/src/ff.c **** 
2247:Middlewares/Third_Party/FatFs/src/ff.c **** static
2248:Middlewares/Third_Party/FatFs/src/ff.c **** BYTE check_fs (	/* 0:FAT boor sector, 1:Valid boor sector but not FAT, 2:Not a boot sector, 3:Disk 
2249:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
2250:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sect	/* Sector# (lba) to check if it is an FAT boot record or not */
2251:Middlewares/Third_Party/FatFs/src/ff.c **** )
2252:Middlewares/Third_Party/FatFs/src/ff.c **** {
2253:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->wflag = 0; fs->winsect = 0xFFFFFFFF;	/* Invaidate window */
2254:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (move_window(fs, sect) != FR_OK)			/* Load boot record */
2255:Middlewares/Third_Party/FatFs/src/ff.c **** 		return 3;
2256:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccVdKYyy.s 			page 49


2257:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (LD_WORD(&fs->win.d8[BS_55AA]) != 0xAA55)	/* Check boot record signature (always placed at offs
2258:Middlewares/Third_Party/FatFs/src/ff.c **** 		return 2;
2259:Middlewares/Third_Party/FatFs/src/ff.c **** 
2260:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((LD_DWORD(&fs->win.d8[BS_FilSysType]) & 0xFFFFFF) == 0x544146)		/* Check "FAT" string */
2261:Middlewares/Third_Party/FatFs/src/ff.c **** 		return 0;
2262:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((LD_DWORD(&fs->win.d8[BS_FilSysType32]) & 0xFFFFFF) == 0x544146)	/* Check "FAT" string */
2263:Middlewares/Third_Party/FatFs/src/ff.c **** 		return 0;
2264:Middlewares/Third_Party/FatFs/src/ff.c **** 
2265:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 1;
2266:Middlewares/Third_Party/FatFs/src/ff.c **** }
2267:Middlewares/Third_Party/FatFs/src/ff.c **** 
2268:Middlewares/Third_Party/FatFs/src/ff.c **** 
2269:Middlewares/Third_Party/FatFs/src/ff.c **** 
2270:Middlewares/Third_Party/FatFs/src/ff.c **** 
2271:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2272:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find logical drive and check if the volume is mounted                 */
2273:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2274:Middlewares/Third_Party/FatFs/src/ff.c **** 
2275:Middlewares/Third_Party/FatFs/src/ff.c **** static
2276:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT find_volume (	/* FR_OK(0): successful, !=0: any error occurred */
2277:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS** rfs,		/* Pointer to pointer to the found file system object */
2278:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** path,	/* Pointer to pointer to the path name (drive number) */
2279:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE wmode			/* !=0: Check write protection for write access */
2280:Middlewares/Third_Party/FatFs/src/ff.c **** )
2281:Middlewares/Third_Party/FatFs/src/ff.c **** {
2282:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, *pt;
2283:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
2284:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
2285:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD bsect, fasize, tsect, sysect, nclst, szbfat, br[4];
2286:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD nrsv;
2287:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
2288:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
2289:Middlewares/Third_Party/FatFs/src/ff.c **** 
2290:Middlewares/Third_Party/FatFs/src/ff.c **** 
2291:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number from the path name */
2292:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = 0;
2293:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(path);
2294:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
2295:Middlewares/Third_Party/FatFs/src/ff.c **** 
2296:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Check if the file system object is valid or not */
2297:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs = FatFs[vol];					/* Get pointer to the file system object */
2298:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
2299:Middlewares/Third_Party/FatFs/src/ff.c **** 
2300:Middlewares/Third_Party/FatFs/src/ff.c **** 	ENTER_FF(fs);						/* Lock the volume */
2301:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = fs;							/* Return pointer to the file system object */
2302:Middlewares/Third_Party/FatFs/src/ff.c **** 
2303:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type) {					/* If the volume has been mounted */
2304:Middlewares/Third_Party/FatFs/src/ff.c **** 		stat = disk_status(fs->drv);
2305:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
2306:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check write protection if needed */
2307:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_WRITE_PROTECTED;
2308:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_OK;				/* The file system object is valid */
2309:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2310:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2311:Middlewares/Third_Party/FatFs/src/ff.c **** 
2312:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* The file system object is not valid. */
2313:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Following code attempts to mount the volume. (analyze BPB and initialize the fs object) */
ARM GAS  /tmp/ccVdKYyy.s 			page 50


2314:Middlewares/Third_Party/FatFs/src/ff.c **** 
2315:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
2316:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
2317:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
2318:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
2319:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
2320:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check disk write protection if needed */
2321:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_WRITE_PROTECTED;
2322:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS						/* Get sector size (multiple sector size cfg only) */
2323:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(fs->drv, GET_SECTOR_SIZE, &SS(fs)) != RES_OK
2324:Middlewares/Third_Party/FatFs/src/ff.c **** 		|| SS(fs) < _MIN_SS || SS(fs) > _MAX_SS) return FR_DISK_ERR;
2325:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2326:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Find an FAT partition on the drive. Supports only generic partitioning, FDISK and SFD. */
2327:Middlewares/Third_Party/FatFs/src/ff.c **** 	bsect = 0;
2328:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = check_fs(fs, bsect);					/* Load sector 0 and check if it is an FAT boot sector as SFD */
2329:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 1 || (!fmt && (LD2PT(vol)))) {	/* Not an FAT boot sector or forced partition number */
2330:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 4; i++) {			/* Get partition offset */
2331:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win.d8 + MBR_Table + i * SZ_PTE;
2332:Middlewares/Third_Party/FatFs/src/ff.c **** 			br[i] = pt[4] ? LD_DWORD(&pt[8]) : 0;
2333:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2334:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = LD2PT(vol);						/* Partition number: 0:auto, 1-4:forced */
2335:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i) i--;
2336:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {								/* Find an FAT volume */
2337:Middlewares/Third_Party/FatFs/src/ff.c **** 			bsect = br[i];
2338:Middlewares/Third_Party/FatFs/src/ff.c **** 			fmt = bsect ? check_fs(fs, bsect) : 2;	/* Check the partition */
2339:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (!LD2PT(vol) && fmt && ++i < 4);
2340:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2341:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 3) return FR_DISK_ERR;		/* An error occured in the disk I/O layer */
2342:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
2343:Middlewares/Third_Party/FatFs/src/ff.c **** 
2344:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* An FAT volume is found. Following code initializes the file system object */
2345:Middlewares/Third_Party/FatFs/src/ff.c **** 
2346:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (LD_WORD(fs->win.d8 + BPB_BytsPerSec) != SS(fs))	/* (BPB_BytsPerSec must be equal to the physic
2347:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
2348:Middlewares/Third_Party/FatFs/src/ff.c **** 
2349:Middlewares/Third_Party/FatFs/src/ff.c **** 	fasize = LD_WORD(fs->win.d8 + BPB_FATSz16);			/* Number of sectors per FAT */
2350:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win.d8 + BPB_FATSz32);
2351:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fsize = fasize;
2352:Middlewares/Third_Party/FatFs/src/ff.c **** 
2353:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->n_fats = fs->win.d8[BPB_NumFATs];					/* Number of FAT copies */
2354:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->n_fats != 1 && fs->n_fats != 2)				/* (Must be 1 or 2) */
2355:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
2356:Middlewares/Third_Party/FatFs/src/ff.c **** 	fasize *= fs->n_fats;								/* Number of sectors for FAT area */
2357:Middlewares/Third_Party/FatFs/src/ff.c **** 
2358:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->csize = fs->win.d8[BPB_SecPerClus];				/* Number of sectors per cluster */
2359:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs->csize || (fs->csize & (fs->csize - 1)))	/* (Must be power of 2) */
2360:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
2361:Middlewares/Third_Party/FatFs/src/ff.c **** 
2362:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->n_rootdir = LD_WORD(fs->win.d8 + BPB_RootEntCnt);	/* Number of root directory entries */
2363:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIRE))				/* (Must be sector aligned) */
2364:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
2365:Middlewares/Third_Party/FatFs/src/ff.c **** 
2366:Middlewares/Third_Party/FatFs/src/ff.c **** 	tsect = LD_WORD(fs->win.d8 + BPB_TotSec16);			/* Number of sectors on the volume */
2367:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win.d8 + BPB_TotSec32);
2368:Middlewares/Third_Party/FatFs/src/ff.c **** 
2369:Middlewares/Third_Party/FatFs/src/ff.c **** 	nrsv = LD_WORD(fs->win.d8 + BPB_RsvdSecCnt);			/* Number of reserved sectors */
2370:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (Must not be 0) */
ARM GAS  /tmp/ccVdKYyy.s 			page 51


2371:Middlewares/Third_Party/FatFs/src/ff.c **** 
2372:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine the FAT sub type */
2373:Middlewares/Third_Party/FatFs/src/ff.c **** 	sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZ_DIRE);	/* RSV + FAT + DIR */
2374:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
2375:Middlewares/Third_Party/FatFs/src/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
2376:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
2377:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = FS_FAT12;
2378:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
2379:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
2380:Middlewares/Third_Party/FatFs/src/ff.c **** 
2381:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Boundaries and Limits */
2382:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->n_fatent = nclst + 2;							/* Number of FAT entries */
2383:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->volbase = bsect;								/* Volume start sector */
2384:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
2385:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
2386:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
2387:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_rootdir) return FR_NO_FILESYSTEM;		/* (BPB_RootEntCnt must be 0) */
2388:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->dirbase = LD_DWORD(fs->win.d8 + BPB_RootClus);	/* Root directory start cluster */
2389:Middlewares/Third_Party/FatFs/src/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Needed FAT size) */
2390:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
2391:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!fs->n_rootdir)	return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must not be 0) */
2392:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
2393:Middlewares/Third_Party/FatFs/src/ff.c **** 		szbfat = (fmt == FS_FAT16) ?					/* (Needed FAT size) */
2394:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
2395:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2396:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs))	/* (BPB_FATSz must not be less than the size nee
2397:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
2398:Middlewares/Third_Party/FatFs/src/ff.c **** 
2399:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
2400:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Initialize cluster allocation information */
2401:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->last_clust = fs->free_clust = 0xFFFFFFFF;
2402:Middlewares/Third_Party/FatFs/src/ff.c **** 
2403:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get fsinfo if available */
2404:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fsi_flag = 0x80;
2405:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
2406:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32				/* Enable FSINFO only if FAT32 and BPB_FSInfo is 1 */
2407:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& LD_WORD(fs->win.d8 + BPB_FSInfo) == 1
2408:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& move_window(fs, bsect + 1) == FR_OK)
2409:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
2410:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag = 0;
2411:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (LD_WORD(fs->win.d8 + BS_55AA) == 0xAA55	/* Load FSINFO data if available */
2412:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& LD_DWORD(fs->win.d8 + FSI_LeadSig) == 0x41615252
2413:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& LD_DWORD(fs->win.d8 + FSI_StrucSig) == 0x61417272)
2414:Middlewares/Third_Party/FatFs/src/ff.c **** 		{
2415:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 1) == 0
2416:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clust = LD_DWORD(fs->win.d8 + FSI_Free_Count);
2417:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2418:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 2) == 0
2419:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->last_clust = LD_DWORD(fs->win.d8 + FSI_Nxt_Free);
2420:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2421:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2422:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2423:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2424:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2425:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fs_type = fmt;	/* FAT sub-type */
2426:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->id = ++Fsid;	/* File system mount ID */
2427:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
ARM GAS  /tmp/ccVdKYyy.s 			page 52


2428:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->cdir = 0;		/* Set current directory to root */
2429:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2430:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK			/* Clear file lock semaphores */
2431:Middlewares/Third_Party/FatFs/src/ff.c **** 	clear_lock(fs);
2432:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2433:Middlewares/Third_Party/FatFs/src/ff.c **** 
2434:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
2435:Middlewares/Third_Party/FatFs/src/ff.c **** }
2436:Middlewares/Third_Party/FatFs/src/ff.c **** 
2437:Middlewares/Third_Party/FatFs/src/ff.c **** 
2438:Middlewares/Third_Party/FatFs/src/ff.c **** 
2439:Middlewares/Third_Party/FatFs/src/ff.c **** 
2440:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2441:Middlewares/Third_Party/FatFs/src/ff.c **** /* Check if the file/directory object is valid or not                    */
2442:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2443:Middlewares/Third_Party/FatFs/src/ff.c **** 
2444:Middlewares/Third_Party/FatFs/src/ff.c **** static
2445:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT validate (	/* FR_OK(0): The object is valid, !=0: Invalid */
2446:Middlewares/Third_Party/FatFs/src/ff.c **** 	void* obj		/* Pointer to the object FIL/DIR to check validity */
2447:Middlewares/Third_Party/FatFs/src/ff.c **** )
2448:Middlewares/Third_Party/FatFs/src/ff.c **** {
 454              		.loc 1 2448 0
 455              		.cfi_startproc
 456              		@ args = 0, pretend = 0, frame = 0
 457              		@ frame_needed = 0, uses_anonymous_args = 0
 458              	.LVL45:
2449:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL *fil = (FIL*)obj;	/* Assuming offset of .fs and .id in the FIL/DIR structure is identical */
2450:Middlewares/Third_Party/FatFs/src/ff.c **** 
2451:Middlewares/Third_Party/FatFs/src/ff.c **** 
2452:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fil || !fil->fs || !fil->fs->fs_type || fil->fs->id != fil->id || (disk_status(fil->fs->drv) 
 459              		.loc 1 2452 0
 460 0000 40B1     		cbz	r0, .L82
2448:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL *fil = (FIL*)obj;	/* Assuming offset of .fs and .id in the FIL/DIR structure is identical */
 461              		.loc 1 2448 0 discriminator 1
 462 0002 08B5     		push	{r3, lr}
 463              	.LCFI19:
 464              		.cfi_def_cfa_offset 8
 465              		.cfi_offset 3, -8
 466              		.cfi_offset 14, -4
 467              		.loc 1 2452 0 discriminator 1
 468 0004 D0F80032 		ldr	r3, [r0, #512]
 469 0008 13B1     		cbz	r3, .L69
 470              		.loc 1 2452 0 is_stmt 0 discriminator 2
 471 000a 93F80022 		ldrb	r2, [r3, #512]	@ zero_extendqisi2
 472 000e 1AB9     		cbnz	r2, .L86
 473              	.LVL46:
 474              	.L69:
2453:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INVALID_OBJECT;
 475              		.loc 1 2453 0 is_stmt 1
 476 0010 0920     		movs	r0, #9
 477              	.L70:
2454:Middlewares/Third_Party/FatFs/src/ff.c **** 
2455:Middlewares/Third_Party/FatFs/src/ff.c **** 	ENTER_FF(fil->fs);		/* Lock file system */
2456:Middlewares/Third_Party/FatFs/src/ff.c **** 
2457:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
2458:Middlewares/Third_Party/FatFs/src/ff.c **** }
 478              		.loc 1 2458 0
ARM GAS  /tmp/ccVdKYyy.s 			page 53


 479 0012 08BD     		pop	{r3, pc}
 480              	.LVL47:
 481              	.L82:
 482              	.LCFI20:
 483              		.cfi_def_cfa_offset 0
 484              		.cfi_restore 3
 485              		.cfi_restore 14
2453:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INVALID_OBJECT;
 486              		.loc 1 2453 0
 487 0014 0920     		movs	r0, #9
 488              	.LVL48:
 489 0016 7047     		bx	lr
 490              	.LVL49:
 491              	.L86:
 492              	.LCFI21:
 493              		.cfi_def_cfa_offset 8
 494              		.cfi_offset 3, -8
 495              		.cfi_offset 14, -4
2452:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INVALID_OBJECT;
 496              		.loc 1 2452 0 discriminator 3
 497 0018 B0F80422 		ldrh	r2, [r0, #516]
 498 001c B3F80612 		ldrh	r1, [r3, #518]
 499 0020 9142     		cmp	r1, r2
 500 0022 F5D1     		bne	.L69
2452:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INVALID_OBJECT;
 501              		.loc 1 2452 0 is_stmt 0 discriminator 4
 502 0024 93F80102 		ldrb	r0, [r3, #513]	@ zero_extendqisi2
 503              	.LVL50:
 504 0028 FFF7FEFF 		bl	disk_status
 505              	.LVL51:
 506 002c 10F00100 		ands	r0, r0, #1
 507 0030 EED1     		bne	.L69
 508 0032 EEE7     		b	.L70
 509              		.cfi_endproc
 510              	.LFE159:
 512              		.section	.text.get_fileinfo.isra.2,"ax",%progbits
 513              		.align	1
 514              		.p2align 2,,3
 515              		.syntax unified
 516              		.thumb
 517              		.thumb_func
 518              		.fpu fpv4-sp-d16
 520              	get_fileinfo.isra.2:
 521              	.LFB186:
1773:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to the directory object */
 522              		.loc 1 1773 0 is_stmt 1
 523              		.cfi_startproc
 524              		@ args = 0, pretend = 0, frame = 0
 525              		@ frame_needed = 0, uses_anonymous_args = 0
 526              		@ link register save eliminated.
 527              	.LVL52:
 528 0000 70B4     		push	{r4, r5, r6}
 529              	.LCFI22:
 530              		.cfi_def_cfa_offset 12
 531              		.cfi_offset 4, -12
 532              		.cfi_offset 5, -8
 533              		.cfi_offset 6, -4
ARM GAS  /tmp/ccVdKYyy.s 			page 54


1785:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dp->sect) {		/* Get SFN */
 534              		.loc 1 1785 0
 535 0002 02F10904 		add	r4, r2, #9
 536              	.LVL53:
1786:Middlewares/Third_Party/FatFs/src/ff.c **** 		dir = dp->dir;
 537              		.loc 1 1786 0
 538 0006 18B3     		cbz	r0, .L88
1787:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = 0;
 539              		.loc 1 1787 0
 540 0008 0D68     		ldr	r5, [r1]
 541              	.LVL54:
1793:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
 542              		.loc 1 1793 0
 543 000a 2E26     		movs	r6, #46
1788:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (i < 11) {		/* Copy name body and extension */
 544              		.loc 1 1788 0
 545 000c 0021     		movs	r1, #0
 546 000e 681E     		subs	r0, r5, #1
 547              	.LVL55:
 548              	.L92:
1790:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c == ' ') continue;				/* Skip padding spaces */
 549              		.loc 1 1790 0
 550 0010 10F8013F 		ldrb	r3, [r0, #1]!	@ zero_extendqisi2
1791:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
 551              		.loc 1 1791 0
 552 0014 202B     		cmp	r3, #32
1790:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c == ' ') continue;				/* Skip padding spaces */
 553              		.loc 1 1790 0
 554 0016 01F10101 		add	r1, r1, #1
 555              	.LVL56:
1791:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
 556              		.loc 1 1791 0
 557 001a 09D0     		beq	.L89
1792:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i == 9) *p++ = '.';				/* Insert a . if extension is exist */
 558              		.loc 1 1792 0
 559 001c 052B     		cmp	r3, #5
 560 001e 08BF     		it	eq
 561 0020 E523     		moveq	r3, #229
 562              	.LVL57:
1793:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
 563              		.loc 1 1793 0
 564 0022 0929     		cmp	r1, #9
 565 0024 04BF     		itt	eq
 566 0026 2670     		strbeq	r6, [r4]
 567 0028 0134     		addeq	r4, r4, #1
 568              	.LVL58:
1804:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 569              		.loc 1 1804 0
 570 002a 0134     		adds	r4, r4, #1
 571              	.LVL59:
 572 002c 04F8013C 		strb	r3, [r4, #-1]
 573              	.L89:
1789:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = (TCHAR)dir[i++];
 574              		.loc 1 1789 0
 575 0030 0B29     		cmp	r1, #11
 576 0032 EDD1     		bne	.L92
1806:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fsize = LD_DWORD(dir + DIR_FileSize);	/* Size */
ARM GAS  /tmp/ccVdKYyy.s 			page 55


 577              		.loc 1 1806 0
 578 0034 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 579              	.LVL60:
 580 0036 1372     		strb	r3, [r2, #8]
1807:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fdate = LD_WORD(dir + DIR_WrtDate);	/* Date */
 581              		.loc 1 1807 0
 582 0038 EB69     		ldr	r3, [r5, #28]	@ unaligned
 583 003a 1360     		str	r3, [r2]
1808:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->ftime = LD_WORD(dir + DIR_WrtTime);	/* Time */
 584              		.loc 1 1808 0
 585 003c 697E     		ldrb	r1, [r5, #25]	@ zero_extendqisi2
 586              	.LVL61:
 587 003e 2B7E     		ldrb	r3, [r5, #24]	@ zero_extendqisi2
 588 0040 43EA0123 		orr	r3, r3, r1, lsl #8
 589 0044 9380     		strh	r3, [r2, #4]	@ movhi
1809:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 590              		.loc 1 1809 0
 591 0046 E97D     		ldrb	r1, [r5, #23]	@ zero_extendqisi2
 592 0048 AB7D     		ldrb	r3, [r5, #22]	@ zero_extendqisi2
 593 004a 43EA0123 		orr	r3, r3, r1, lsl #8
 594 004e D380     		strh	r3, [r2, #6]	@ movhi
 595              	.LVL62:
 596              	.L88:
1811:Middlewares/Third_Party/FatFs/src/ff.c **** 
 597              		.loc 1 1811 0
 598 0050 0023     		movs	r3, #0
 599 0052 2370     		strb	r3, [r4]
1832:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE <= 1 || _FS_RPATH >= 2 */
 600              		.loc 1 1832 0
 601 0054 70BC     		pop	{r4, r5, r6}
 602              	.LCFI23:
 603              		.cfi_restore 6
 604              		.cfi_restore 5
 605              		.cfi_restore 4
 606              		.cfi_def_cfa_offset 0
 607              	.LVL63:
 608 0056 7047     		bx	lr
 609              		.cfi_endproc
 610              	.LFE186:
 612              		.section	.text.sync_window.part.4,"ax",%progbits
 613              		.align	1
 614              		.p2align 2,,3
 615              		.syntax unified
 616              		.thumb
 617              		.thumb_func
 618              		.fpu fpv4-sp-d16
 620              	sync_window.part.4:
 621              	.LFB188:
 773:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs		/* File system object */
 622              		.loc 1 773 0
 623              		.cfi_startproc
 624              		@ args = 0, pretend = 0, frame = 0
 625              		@ frame_needed = 0, uses_anonymous_args = 0
 626              	.LVL64:
 627 0000 70B5     		push	{r4, r5, r6, lr}
 628              	.LCFI24:
 629              		.cfi_def_cfa_offset 16
ARM GAS  /tmp/ccVdKYyy.s 			page 56


 630              		.cfi_offset 4, -16
 631              		.cfi_offset 5, -12
 632              		.cfi_offset 6, -8
 633              		.cfi_offset 14, -4
 783:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(fs->drv, fs->win.d8, wsect, 1) != RES_OK) {
 634              		.loc 1 783 0
 635 0002 D0F82C52 		ldr	r5, [r0, #556]
 636              	.LVL65:
 773:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs		/* File system object */
 637              		.loc 1 773 0
 638 0006 0446     		mov	r4, r0
 784:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 639              		.loc 1 784 0
 640 0008 0146     		mov	r1, r0
 641 000a 2A46     		mov	r2, r5
 642 000c 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 643              	.LVL66:
 644 0010 0123     		movs	r3, #1
 645 0012 FFF7FEFF 		bl	disk_write
 646              	.LVL67:
 647 0016 E0B9     		cbnz	r0, .L106
 788:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 648              		.loc 1 788 0
 649 0018 D4F82022 		ldr	r2, [r4, #544]
 650 001c D4F81832 		ldr	r3, [r4, #536]
 787:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
 651              		.loc 1 787 0
 652 0020 84F80402 		strb	r0, [r4, #516]
 788:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 653              		.loc 1 788 0
 654 0024 AA1A     		subs	r2, r5, r2
 655 0026 9A42     		cmp	r2, r3
 656 0028 11D2     		bcs	.L104
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 657              		.loc 1 789 0
 658 002a 94F80362 		ldrb	r6, [r4, #515]	@ zero_extendqisi2
 659              	.LVL68:
 660 002e 012E     		cmp	r6, #1
 661 0030 02D8     		bhi	.L105
 662 0032 0CE0     		b	.L104
 663              	.L111:
 664 0034 D4F81832 		ldr	r3, [r4, #536]
 665              	.L105:
 791:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 666              		.loc 1 791 0
 667 0038 94F80102 		ldrb	r0, [r4, #513]	@ zero_extendqisi2
 790:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_write(fs->drv, fs->win.d8, wsect, 1);
 668              		.loc 1 790 0
 669 003c 1D44     		add	r5, r5, r3
 670              	.LVL69:
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 671              		.loc 1 789 0
 672 003e 013E     		subs	r6, r6, #1
 673              	.LVL70:
 791:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 674              		.loc 1 791 0
 675 0040 2A46     		mov	r2, r5
ARM GAS  /tmp/ccVdKYyy.s 			page 57


 676 0042 0123     		movs	r3, #1
 677 0044 2146     		mov	r1, r4
 678 0046 FFF7FEFF 		bl	disk_write
 679              	.LVL71:
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 680              		.loc 1 789 0
 681 004a 012E     		cmp	r6, #1
 682 004c F2D1     		bne	.L111
 683              	.LVL72:
 684              	.L104:
 779:Middlewares/Third_Party/FatFs/src/ff.c **** 
 685              		.loc 1 779 0
 686 004e 0020     		movs	r0, #0
 687 0050 70BD     		pop	{r4, r5, r6, pc}
 688              	.LVL73:
 689              	.L106:
 785:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 690              		.loc 1 785 0
 691 0052 0120     		movs	r0, #1
 692              	.LVL74:
 797:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 693              		.loc 1 797 0
 694 0054 70BD     		pop	{r4, r5, r6, pc}
 695              		.cfi_endproc
 696              	.LFE188:
 698 0056 00BF     		.section	.text.move_window,"ax",%progbits
 699              		.align	1
 700              		.p2align 2,,3
 701              		.syntax unified
 702              		.thumb
 703              		.thumb_func
 704              		.fpu fpv4-sp-d16
 706              	move_window:
 707              	.LFB136:
 806:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 708              		.loc 1 806 0
 709              		.cfi_startproc
 710              		@ args = 0, pretend = 0, frame = 0
 711              		@ frame_needed = 0, uses_anonymous_args = 0
 712              	.LVL75:
 713 0000 38B5     		push	{r3, r4, r5, lr}
 714              	.LCFI25:
 715              		.cfi_def_cfa_offset 16
 716              		.cfi_offset 3, -16
 717              		.cfi_offset 4, -12
 718              		.cfi_offset 5, -8
 719              		.cfi_offset 14, -4
 810:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 720              		.loc 1 810 0
 721 0002 D0F82C32 		ldr	r3, [r0, #556]
 722 0006 8B42     		cmp	r3, r1
 723 0008 1AD0     		beq	.L117
 724              	.LVL76:
 725              	.LBB198:
 726              	.LBB199:
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 727              		.loc 1 782 0
ARM GAS  /tmp/ccVdKYyy.s 			page 58


 728 000a 90F80432 		ldrb	r3, [r0, #516]	@ zero_extendqisi2
 729 000e 0446     		mov	r4, r0
 730 0010 0D46     		mov	r5, r1
 731 0012 83B9     		cbnz	r3, .L114
 732              	.LVL77:
 733              	.L116:
 734              	.LBE199:
 735              	.LBE198:
 815:Middlewares/Third_Party/FatFs/src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
 736              		.loc 1 815 0
 737 0014 2A46     		mov	r2, r5
 738 0016 0123     		movs	r3, #1
 739 0018 2146     		mov	r1, r4
 740 001a 94F80102 		ldrb	r0, [r4, #513]	@ zero_extendqisi2
 741 001e FFF7FEFF 		bl	disk_read
 742              	.LVL78:
 817:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 743              		.loc 1 817 0
 744 0022 0028     		cmp	r0, #0
 745 0024 18BF     		it	ne
 746 0026 4FF0FF35 		movne	r5, #-1
 747              	.LVL79:
 819:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 748              		.loc 1 819 0
 749 002a C4F82C52 		str	r5, [r4, #556]
 817:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 750              		.loc 1 817 0
 751 002e 0CBF     		ite	eq
 752 0030 0020     		moveq	r0, #0
 753 0032 0120     		movne	r0, #1
 754              	.LVL80:
 755 0034 38BD     		pop	{r3, r4, r5, pc}
 756              	.LVL81:
 757              	.L114:
 758              	.LBB201:
 759              	.LBB200:
 760 0036 FFF7FEFF 		bl	sync_window.part.4
 761              	.LVL82:
 762              	.LBE200:
 763              	.LBE201:
 814:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fs->win.d8, sector, 1) != RES_OK) {
 764              		.loc 1 814 0
 765 003a 0028     		cmp	r0, #0
 766 003c EAD0     		beq	.L116
 767              	.LVL83:
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 
 768              		.loc 1 823 0
 769 003e 38BD     		pop	{r3, r4, r5, pc}
 770              	.LVL84:
 771              	.L117:
 807:Middlewares/Third_Party/FatFs/src/ff.c **** 
 772              		.loc 1 807 0
 773 0040 0020     		movs	r0, #0
 774              	.LVL85:
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 
 775              		.loc 1 823 0
 776 0042 38BD     		pop	{r3, r4, r5, pc}
ARM GAS  /tmp/ccVdKYyy.s 			page 59


 777              		.cfi_endproc
 778              	.LFE136:
 780              		.section	.text.sync_fs,"ax",%progbits
 781              		.align	1
 782              		.p2align 2,,3
 783              		.syntax unified
 784              		.thumb
 785              		.thumb_func
 786              		.fpu fpv4-sp-d16
 788              	sync_fs:
 789              	.LFB137:
 836:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 790              		.loc 1 836 0
 791              		.cfi_startproc
 792              		@ args = 0, pretend = 0, frame = 0
 793              		@ frame_needed = 0, uses_anonymous_args = 0
 794              	.LVL86:
 795 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 796              	.LCFI26:
 797              		.cfi_def_cfa_offset 24
 798              		.cfi_offset 3, -24
 799              		.cfi_offset 4, -20
 800              		.cfi_offset 5, -16
 801              		.cfi_offset 6, -12
 802              		.cfi_offset 7, -8
 803              		.cfi_offset 14, -4
 804              	.LBB202:
 805              	.LBB203:
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 806              		.loc 1 782 0
 807 0002 90F80432 		ldrb	r3, [r0, #516]	@ zero_extendqisi2
 808              	.LBE203:
 809              	.LBE202:
 836:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 810              		.loc 1 836 0
 811 0006 0546     		mov	r5, r0
 812              	.LVL87:
 813              	.LBB206:
 814              	.LBB204:
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 815              		.loc 1 782 0
 816 0008 6BB9     		cbnz	r3, .L124
 817              	.LVL88:
 818              	.L127:
 819              	.LBE204:
 820              	.LBE206:
 843:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSINFO structure */
 821              		.loc 1 843 0
 822 000a 95F80032 		ldrb	r3, [r5, #512]	@ zero_extendqisi2
 823 000e 032B     		cmp	r3, #3
 824 0010 0ED0     		beq	.L137
 825              	.L126:
 857:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 826              		.loc 1 857 0
 827 0012 0022     		movs	r2, #0
 828 0014 95F80102 		ldrb	r0, [r5, #513]	@ zero_extendqisi2
 829 0018 1146     		mov	r1, r2
ARM GAS  /tmp/ccVdKYyy.s 			page 60


 830 001a FFF7FEFF 		bl	disk_ioctl
 831              	.LVL89:
 832 001e 0030     		adds	r0, r0, #0
 833 0020 18BF     		it	ne
 834 0022 0120     		movne	r0, #1
 835              	.LVL90:
 862:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 836              		.loc 1 862 0
 837 0024 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 838              	.LVL91:
 839              	.L124:
 840              	.LBB207:
 841              	.LBB205:
 842 0026 FFF7FEFF 		bl	sync_window.part.4
 843              	.LVL92:
 844              	.LBE205:
 845              	.LBE207:
 841:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update FSINFO sector if needed */
 846              		.loc 1 841 0
 847 002a 0028     		cmp	r0, #0
 848 002c EDD0     		beq	.L127
 849              	.LVL93:
 862:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 850              		.loc 1 862 0
 851 002e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 852              	.LVL94:
 853              	.L137:
 843:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSINFO structure */
 854              		.loc 1 843 0 discriminator 1
 855 0030 95F80532 		ldrb	r3, [r5, #517]	@ zero_extendqisi2
 856 0034 012B     		cmp	r3, #1
 857 0036 ECD1     		bne	.L126
 858              	.LVL95:
 859 0038 05F50072 		add	r2, r5, #512
 860              	.LBB208:
 861              	.LBB209:
 598:Middlewares/Third_Party/FatFs/src/ff.c **** 
 862              		.loc 1 598 0
 863 003c 2B46     		mov	r3, r5
 601:Middlewares/Third_Party/FatFs/src/ff.c **** }
 864              		.loc 1 601 0
 865 003e 0024     		movs	r4, #0
 866              	.LVL96:
 867              	.L129:
 868 0040 03F8014B 		strb	r4, [r3], #1
 869              	.LVL97:
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
 870              		.loc 1 600 0
 871 0044 9342     		cmp	r3, r2
 872 0046 FBD1     		bne	.L129
 873              	.LVL98:
 874              	.LBE209:
 875              	.LBE208:
 849:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_Nxt_Free, fs->last_clust);
 876              		.loc 1 849 0
 877 0048 D5F81032 		ldr	r3, [r5, #528]
 850:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write it into the FSINFO sector */
ARM GAS  /tmp/ccVdKYyy.s 			page 61


 878              		.loc 1 850 0
 879 004c D5F80C12 		ldr	r1, [r5, #524]
 852:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win.d8, fs->winsect, 1);
 880              		.loc 1 852 0
 881 0050 D5F81C22 		ldr	r2, [r5, #540]
 849:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_Nxt_Free, fs->last_clust);
 882              		.loc 1 849 0
 883 0054 85F8E831 		strb	r3, [r5, #488]
 884 0058 C3F30720 		ubfx	r0, r3, #8, #8
 885 005c 1F0C     		lsrs	r7, r3, #16
 886 005e 1B0E     		lsrs	r3, r3, #24
 850:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write it into the FSINFO sector */
 887              		.loc 1 850 0
 888 0060 C1F30726 		ubfx	r6, r1, #8, #8
 849:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_Nxt_Free, fs->last_clust);
 889              		.loc 1 849 0
 890 0064 85F8E901 		strb	r0, [r5, #489]
 891 0068 85F8EB31 		strb	r3, [r5, #491]
 850:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write it into the FSINFO sector */
 892              		.loc 1 850 0
 893 006c 080C     		lsrs	r0, r1, #16
 846:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_LeadSig, 0x41615252);
 894              		.loc 1 846 0
 895 006e 5523     		movs	r3, #85
 850:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write it into the FSINFO sector */
 896              		.loc 1 850 0
 897 0070 4FEA116E 		lsr	lr, r1, #24
 852:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win.d8, fs->winsect, 1);
 898              		.loc 1 852 0
 899 0074 0132     		adds	r2, r2, #1
 849:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_Nxt_Free, fs->last_clust);
 900              		.loc 1 849 0
 901 0076 85F8EA71 		strb	r7, [r5, #490]
 850:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write it into the FSINFO sector */
 902              		.loc 1 850 0
 903 007a 85F8EC11 		strb	r1, [r5, #492]
 904 007e 85F8ED61 		strb	r6, [r5, #493]
 847:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_StrucSig, 0x61417272);
 905              		.loc 1 847 0
 906 0082 4121     		movs	r1, #65
 907 0084 5226     		movs	r6, #82
 850:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write it into the FSINFO sector */
 908              		.loc 1 850 0
 909 0086 85F8EE01 		strb	r0, [r5, #494]
 846:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_LeadSig, 0x41615252);
 910              		.loc 1 846 0
 911 008a 85F8FE31 		strb	r3, [r5, #510]
 847:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_StrucSig, 0x61417272);
 912              		.loc 1 847 0
 913 008e 6120     		movs	r0, #97
 848:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_Free_Count, fs->free_clust);
 914              		.loc 1 848 0
 915 0090 7223     		movs	r3, #114
 846:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_LeadSig, 0x41615252);
 916              		.loc 1 846 0
 917 0092 AA27     		movs	r7, #170
 847:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_StrucSig, 0x61417272);
ARM GAS  /tmp/ccVdKYyy.s 			page 62


 918              		.loc 1 847 0
 919 0094 A870     		strb	r0, [r5, #2]
 848:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_Free_Count, fs->free_clust);
 920              		.loc 1 848 0
 921 0096 85F8E701 		strb	r0, [r5, #487]
 847:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_StrucSig, 0x61417272);
 922              		.loc 1 847 0
 923 009a E970     		strb	r1, [r5, #3]
 848:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_Free_Count, fs->free_clust);
 924              		.loc 1 848 0
 925 009c 85F8E611 		strb	r1, [r5, #486]
 926 00a0 85F8E431 		strb	r3, [r5, #484]
 927 00a4 85F8E531 		strb	r3, [r5, #485]
 850:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write it into the FSINFO sector */
 928              		.loc 1 850 0
 929 00a8 85F8EFE1 		strb	lr, [r5, #495]
 852:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win.d8, fs->winsect, 1);
 930              		.loc 1 852 0
 931 00ac C5F82C22 		str	r2, [r5, #556]
 846:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_LeadSig, 0x41615252);
 932              		.loc 1 846 0
 933 00b0 85F8FF71 		strb	r7, [r5, #511]
 847:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(fs->win.d8 + FSI_StrucSig, 0x61417272);
 934              		.loc 1 847 0
 935 00b4 2E70     		strb	r6, [r5]
 936 00b6 6E70     		strb	r6, [r5, #1]
 853:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag = 0;
 937              		.loc 1 853 0
 938 00b8 0123     		movs	r3, #1
 939 00ba 2946     		mov	r1, r5
 940 00bc 95F80102 		ldrb	r0, [r5, #513]	@ zero_extendqisi2
 941 00c0 FFF7FEFF 		bl	disk_write
 942              	.LVL99:
 854:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 943              		.loc 1 854 0
 944 00c4 85F80542 		strb	r4, [r5, #517]
 945 00c8 A3E7     		b	.L126
 946              		.cfi_endproc
 947              	.LFE137:
 949 00ca 00BF     		.section	.text.check_fs,"ax",%progbits
 950              		.align	1
 951              		.p2align 2,,3
 952              		.syntax unified
 953              		.thumb
 954              		.thumb_func
 955              		.fpu fpv4-sp-d16
 957              	check_fs:
 958              	.LFB157:
2252:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->wflag = 0; fs->winsect = 0xFFFFFFFF;	/* Invaidate window */
 959              		.loc 1 2252 0
 960              		.cfi_startproc
 961              		@ args = 0, pretend = 0, frame = 0
 962              		@ frame_needed = 0, uses_anonymous_args = 0
 963              	.LVL100:
2253:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (move_window(fs, sect) != FR_OK)			/* Load boot record */
 964              		.loc 1 2253 0
 965 0000 0022     		movs	r2, #0
ARM GAS  /tmp/ccVdKYyy.s 			page 63


 966 0002 4FF0FF33 		mov	r3, #-1
2252:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->wflag = 0; fs->winsect = 0xFFFFFFFF;	/* Invaidate window */
 967              		.loc 1 2252 0
 968 0006 10B5     		push	{r4, lr}
 969              	.LCFI27:
 970              		.cfi_def_cfa_offset 8
 971              		.cfi_offset 4, -8
 972              		.cfi_offset 14, -4
2253:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (move_window(fs, sect) != FR_OK)			/* Load boot record */
 973              		.loc 1 2253 0
 974 0008 80F80422 		strb	r2, [r0, #516]
 975 000c C0F82C32 		str	r3, [r0, #556]
2252:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->wflag = 0; fs->winsect = 0xFFFFFFFF;	/* Invaidate window */
 976              		.loc 1 2252 0
 977 0010 0446     		mov	r4, r0
2254:Middlewares/Third_Party/FatFs/src/ff.c **** 		return 3;
 978              		.loc 1 2254 0
 979 0012 FFF7FEFF 		bl	move_window
 980              	.LVL101:
 981 0016 08B1     		cbz	r0, .L144
2255:Middlewares/Third_Party/FatFs/src/ff.c **** 
 982              		.loc 1 2255 0
 983 0018 0320     		movs	r0, #3
 984 001a 10BD     		pop	{r4, pc}
 985              	.LVL102:
 986              	.L144:
2257:Middlewares/Third_Party/FatFs/src/ff.c **** 		return 2;
 987              		.loc 1 2257 0
 988 001c 94F8FF11 		ldrb	r1, [r4, #511]	@ zero_extendqisi2
 989 0020 94F8FE31 		ldrb	r3, [r4, #510]	@ zero_extendqisi2
 990 0024 4AF65522 		movw	r2, #43605
 991 0028 43EA0123 		orr	r3, r3, r1, lsl #8
 992 002c 9342     		cmp	r3, r2
 993 002e 01D0     		beq	.L145
2258:Middlewares/Third_Party/FatFs/src/ff.c **** 
 994              		.loc 1 2258 0
 995 0030 0220     		movs	r0, #2
 996              	.L139:
2266:Middlewares/Third_Party/FatFs/src/ff.c **** 
 997              		.loc 1 2266 0
 998 0032 10BD     		pop	{r4, pc}
 999              	.LVL103:
 1000              	.L145:
2260:Middlewares/Third_Party/FatFs/src/ff.c **** 		return 0;
 1001              		.loc 1 2260 0
 1002 0034 D4F83630 		ldr	r3, [r4, #54]	@ unaligned
 1003 0038 064A     		ldr	r2, .L146
 1004 003a 23F07F43 		bic	r3, r3, #-16777216
 1005 003e 9342     		cmp	r3, r2
 1006 0040 F7D0     		beq	.L139
 1007              	.LVL104:
 1008              	.LBB212:
 1009              	.LBB213:
2262:Middlewares/Third_Party/FatFs/src/ff.c **** 		return 0;
 1010              		.loc 1 2262 0
 1011 0042 D4F85200 		ldr	r0, [r4, #82]	@ unaligned
 1012 0046 20F07F40 		bic	r0, r0, #-16777216
ARM GAS  /tmp/ccVdKYyy.s 			page 64


 1013              	.LBE213:
 1014              	.LBE212:
2255:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1015              		.loc 1 2255 0
 1016 004a 801A     		subs	r0, r0, r2
 1017 004c 18BF     		it	ne
 1018 004e 0120     		movne	r0, #1
 1019 0050 10BD     		pop	{r4, pc}
 1020              	.LVL105:
 1021              	.L147:
 1022 0052 00BF     		.align	2
 1023              	.L146:
 1024 0054 46415400 		.word	5521734
 1025              		.cfi_endproc
 1026              	.LFE157:
 1028              		.section	.text.find_volume,"ax",%progbits
 1029              		.align	1
 1030              		.p2align 2,,3
 1031              		.syntax unified
 1032              		.thumb
 1033              		.thumb_func
 1034              		.fpu fpv4-sp-d16
 1036              	find_volume:
 1037              	.LFB158:
2281:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, *pt;
 1038              		.loc 1 2281 0
 1039              		.cfi_startproc
 1040              		@ args = 0, pretend = 0, frame = 16
 1041              		@ frame_needed = 0, uses_anonymous_args = 0
 1042              	.LVL106:
 1043 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1044              	.LCFI28:
 1045              		.cfi_def_cfa_offset 20
 1046              		.cfi_offset 4, -20
 1047              		.cfi_offset 5, -16
 1048              		.cfi_offset 6, -12
 1049              		.cfi_offset 7, -8
 1050              		.cfi_offset 14, -4
 1051 0002 0746     		mov	r7, r0
2292:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(path);
 1052              		.loc 1 2292 0
 1053 0004 0023     		movs	r3, #0
2281:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, *pt;
 1054              		.loc 1 2281 0
 1055 0006 85B0     		sub	sp, sp, #20
 1056              	.LCFI29:
 1057              		.cfi_def_cfa_offset 40
2293:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 1058              		.loc 1 2293 0
 1059 0008 0846     		mov	r0, r1
 1060              	.LVL107:
2292:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(path);
 1061              		.loc 1 2292 0
 1062 000a 3B60     		str	r3, [r7]
2281:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, *pt;
 1063              		.loc 1 2281 0
 1064 000c 1446     		mov	r4, r2
ARM GAS  /tmp/ccVdKYyy.s 			page 65


2293:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 1065              		.loc 1 2293 0
 1066 000e FFF7FEFF 		bl	get_ldnumber
 1067              	.LVL108:
2294:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1068              		.loc 1 2294 0
 1069 0012 061E     		subs	r6, r0, #0
 1070 0014 1ADB     		blt	.L178
2297:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 1071              		.loc 1 2297 0
 1072 0016 AD4B     		ldr	r3, .L241
 1073 0018 53F82650 		ldr	r5, [r3, r6, lsl #2]
 1074              	.LVL109:
2298:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1075              		.loc 1 2298 0
 1076 001c CDB1     		cbz	r5, .L179
2301:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1077              		.loc 1 2301 0
 1078 001e 3D60     		str	r5, [r7]
2303:Middlewares/Third_Party/FatFs/src/ff.c **** 		stat = disk_status(fs->drv);
 1079              		.loc 1 2303 0
 1080 0020 95F80032 		ldrb	r3, [r5, #512]	@ zero_extendqisi2
 1081 0024 2BB1     		cbz	r3, .L150
2304:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 1082              		.loc 1 2304 0
 1083 0026 95F80102 		ldrb	r0, [r5, #513]	@ zero_extendqisi2
 1084              	.LVL110:
 1085 002a FFF7FEFF 		bl	disk_status
 1086              	.LVL111:
2305:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check write protection if needed */
 1087              		.loc 1 2305 0
 1088 002e C707     		lsls	r7, r0, #31
 1089              	.LVL112:
 1090 0030 12D5     		bpl	.L235
 1091              	.LVL113:
 1092              	.L150:
2316:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
 1093              		.loc 1 2316 0
 1094 0032 F0B2     		uxtb	r0, r6
2315:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 1095              		.loc 1 2315 0
 1096 0034 0023     		movs	r3, #0
2316:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
 1097              		.loc 1 2316 0
 1098 0036 85F80102 		strb	r0, [r5, #513]
2315:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 1099              		.loc 1 2315 0
 1100 003a 85F80032 		strb	r3, [r5, #512]
2317:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT)				/* Check if the initialization succeeded */
 1101              		.loc 1 2317 0
 1102 003e FFF7FEFF 		bl	disk_initialize
 1103              	.LVL114:
2318:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
 1104              		.loc 1 2318 0
 1105 0042 C107     		lsls	r1, r0, #31
 1106 0044 0ED5     		bpl	.L236
2319:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!_FS_READONLY && wmode && (stat & STA_PROTECT))	/* Check disk write protection if needed */
ARM GAS  /tmp/ccVdKYyy.s 			page 66


 1107              		.loc 1 2319 0
 1108 0046 0320     		movs	r0, #3
 1109              	.LVL115:
 1110              	.L215:
2435:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1111              		.loc 1 2435 0
 1112 0048 05B0     		add	sp, sp, #20
 1113              	.LCFI30:
 1114              		.cfi_remember_state
 1115              		.cfi_def_cfa_offset 20
 1116              		@ sp needed
 1117 004a F0BD     		pop	{r4, r5, r6, r7, pc}
 1118              	.LVL116:
 1119              	.L178:
 1120              	.LCFI31:
 1121              		.cfi_restore_state
2294:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1122              		.loc 1 2294 0
 1123 004c 0B20     		movs	r0, #11
 1124              	.LVL117:
2435:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1125              		.loc 1 2435 0
 1126 004e 05B0     		add	sp, sp, #20
 1127              	.LCFI32:
 1128              		.cfi_remember_state
 1129              		.cfi_def_cfa_offset 20
 1130              		@ sp needed
 1131 0050 F0BD     		pop	{r4, r5, r6, r7, pc}
 1132              	.LVL118:
 1133              	.L179:
 1134              	.LCFI33:
 1135              		.cfi_restore_state
2298:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1136              		.loc 1 2298 0
 1137 0052 0C20     		movs	r0, #12
 1138              	.LVL119:
2435:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1139              		.loc 1 2435 0
 1140 0054 05B0     		add	sp, sp, #20
 1141              	.LCFI34:
 1142              		.cfi_remember_state
 1143              		.cfi_def_cfa_offset 20
 1144              		@ sp needed
 1145 0056 F0BD     		pop	{r4, r5, r6, r7, pc}
 1146              	.LVL120:
 1147              	.L235:
 1148              	.LCFI35:
 1149              		.cfi_restore_state
2306:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_WRITE_PROTECTED;
 1150              		.loc 1 2306 0
 1151 0058 74B3     		cbz	r4, .L180
2306:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_WRITE_PROTECTED;
 1152              		.loc 1 2306 0 is_stmt 0 discriminator 1
 1153 005a 10F00400 		ands	r0, r0, #4
 1154              	.LVL121:
 1155 005e F3D0     		beq	.L215
 1156              	.L152:
ARM GAS  /tmp/ccVdKYyy.s 			page 67


2307:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_OK;				/* The file system object is valid */
 1157              		.loc 1 2307 0 is_stmt 1
 1158 0060 0A20     		movs	r0, #10
 1159 0062 F1E7     		b	.L215
 1160              	.LVL122:
 1161              	.L236:
2320:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_WRITE_PROTECTED;
 1162              		.loc 1 2320 0
 1163 0064 0CB1     		cbz	r4, .L151
2320:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_WRITE_PROTECTED;
 1164              		.loc 1 2320 0 is_stmt 0 discriminator 1
 1165 0066 4207     		lsls	r2, r0, #29
 1166 0068 FAD4     		bmi	.L152
 1167              	.L151:
 1168              	.LVL123:
2328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 1 || (!fmt && (LD2PT(vol)))) {	/* Not an FAT boot sector or forced partition number */
 1169              		.loc 1 2328 0 is_stmt 1
 1170 006a 0021     		movs	r1, #0
 1171 006c 2846     		mov	r0, r5
 1172              	.LVL124:
 1173 006e FFF7FEFF 		bl	check_fs
 1174              	.LVL125:
2329:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 4; i++) {			/* Get partition offset */
 1175              		.loc 1 2329 0
 1176 0072 0128     		cmp	r0, #1
 1177 0074 06D0     		beq	.L237
2341:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 1178              		.loc 1 2341 0
 1179 0076 0328     		cmp	r0, #3
 1180 0078 1CD0     		beq	.L188
2342:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1181              		.loc 1 2342 0
 1182 007a 0028     		cmp	r0, #0
 1183 007c 00F0B080 		beq	.L186
 1184              	.LVL126:
 1185              	.L160:
 1186 0080 0D20     		movs	r0, #13
 1187 0082 E1E7     		b	.L215
 1188              	.LVL127:
 1189              	.L237:
 1190 0084 6E46     		mov	r6, sp
 1191              	.LVL128:
2329:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 4; i++) {			/* Get partition offset */
 1192              		.loc 1 2329 0
 1193 0086 6946     		mov	r1, sp
 1194 0088 05F5E373 		add	r3, r5, #454
 1195 008c 05F20620 		addw	r0, r5, #518
 1196              	.LVL129:
 1197              	.L155:
2332:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1198              		.loc 1 2332 0
 1199 0090 13F8042C 		ldrb	r2, [r3, #-4]	@ zero_extendqisi2
 1200 0094 02B1     		cbz	r2, .L154
2332:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1201              		.loc 1 2332 0 is_stmt 0 discriminator 1
 1202 0096 1A68     		ldr	r2, [r3]	@ unaligned
 1203              	.L154:
ARM GAS  /tmp/ccVdKYyy.s 			page 68


2332:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1204              		.loc 1 2332 0 discriminator 4
 1205 0098 41F8042B 		str	r2, [r1], #4
 1206              	.LVL130:
 1207 009c 1033     		adds	r3, r3, #16
 1208              	.LVL131:
2330:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win.d8 + MBR_Table + i * SZ_PTE;
 1209              		.loc 1 2330 0 is_stmt 1 discriminator 4
 1210 009e 9842     		cmp	r0, r3
 1211 00a0 F6D1     		bne	.L155
 1212 00a2 04AF     		add	r7, sp, #16
 1213              	.LVL132:
 1214              	.L158:
2337:Middlewares/Third_Party/FatFs/src/ff.c **** 			fmt = bsect ? check_fs(fs, bsect) : 2;	/* Check the partition */
 1215              		.loc 1 2337 0
 1216 00a4 56F8044B 		ldr	r4, [r6], #4
 1217              	.LVL133:
2338:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (!LD2PT(vol) && fmt && ++i < 4);
 1218              		.loc 1 2338 0
 1219 00a8 44B9     		cbnz	r4, .L238
 1220 00aa 0220     		movs	r0, #2
 1221              	.L156:
2339:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1222              		.loc 1 2339 0 discriminator 1
 1223 00ac BE42     		cmp	r6, r7
 1224 00ae F9D1     		bne	.L158
 1225              	.LVL134:
2341:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt) return FR_NO_FILESYSTEM;		/* No FAT volume is found */
 1226              		.loc 1 2341 0
 1227 00b0 0328     		cmp	r0, #3
 1228 00b2 E5D1     		bne	.L160
 1229              	.LVL135:
 1230              	.L188:
 1231 00b4 0120     		movs	r0, #1
 1232              	.LVL136:
 1233 00b6 C7E7     		b	.L215
 1234              	.LVL137:
 1235              	.L180:
2308:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1236              		.loc 1 2308 0
 1237 00b8 2046     		mov	r0, r4
 1238              	.LVL138:
 1239 00ba C5E7     		b	.L215
 1240              	.LVL139:
 1241              	.L238:
2338:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (!LD2PT(vol) && fmt && ++i < 4);
 1242              		.loc 1 2338 0 discriminator 1
 1243 00bc 2146     		mov	r1, r4
 1244 00be 2846     		mov	r0, r5
 1245 00c0 FFF7FEFF 		bl	check_fs
 1246              	.LVL140:
2339:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1247              		.loc 1 2339 0 discriminator 1
 1248 00c4 0028     		cmp	r0, #0
 1249 00c6 F1D1     		bne	.L156
 1250              	.LVL141:
 1251              	.L157:
ARM GAS  /tmp/ccVdKYyy.s 			page 69


2346:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1252              		.loc 1 2346 0
 1253 00c8 2A7B     		ldrb	r2, [r5, #12]	@ zero_extendqisi2
 1254 00ca EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 1255 00cc 43EA0223 		orr	r3, r3, r2, lsl #8
 1256 00d0 B3F5007F 		cmp	r3, #512
 1257 00d4 D4D1     		bne	.L160
2349:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win.d8 + BPB_FATSz32);
 1258              		.loc 1 2349 0
 1259 00d6 EA7D     		ldrb	r2, [r5, #23]	@ zero_extendqisi2
 1260 00d8 AB7D     		ldrb	r3, [r5, #22]	@ zero_extendqisi2
 1261              	.LVL142:
2353:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->n_fats != 1 && fs->n_fats != 2)				/* (Must be 1 or 2) */
 1262              		.loc 1 2353 0
 1263 00da 287C     		ldrb	r0, [r5, #16]	@ zero_extendqisi2
 1264 00dc 85F80302 		strb	r0, [r5, #515]
2350:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fsize = fasize;
 1265              		.loc 1 2350 0
 1266 00e0 53EA0223 		orrs	r3, r3, r2, lsl #8
 1267              	.LVL143:
2349:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fasize) fasize = LD_DWORD(fs->win.d8 + BPB_FATSz32);
 1268              		.loc 1 2349 0
 1269 00e4 18BF     		it	ne
 1270 00e6 1A46     		movne	r2, r3
2354:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1271              		.loc 1 2354 0
 1272 00e8 00F1FF33 		add	r3, r0, #-1
 1273              	.LVL144:
2350:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fsize = fasize;
 1274              		.loc 1 2350 0
 1275 00ec 08BF     		it	eq
 1276 00ee 6A6A     		ldreq	r2, [r5, #36]
 1277              	.LVL145:
2351:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1278              		.loc 1 2351 0
 1279 00f0 C5F81822 		str	r2, [r5, #536]
2354:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1280              		.loc 1 2354 0
 1281 00f4 012B     		cmp	r3, #1
 1282 00f6 C3D8     		bhi	.L160
 1283              	.LVL146:
2358:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs->csize || (fs->csize & (fs->csize - 1)))	/* (Must be power of 2) */
 1284              		.loc 1 2358 0
 1285 00f8 95F80DE0 		ldrb	lr, [r5, #13]	@ zero_extendqisi2
 1286 00fc 85F802E2 		strb	lr, [r5, #514]
2359:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1287              		.loc 1 2359 0
 1288 0100 BEF1000F 		cmp	lr, #0
 1289 0104 BCD0     		beq	.L160
2359:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1290              		.loc 1 2359 0 is_stmt 0 discriminator 1
 1291 0106 0EF1FF33 		add	r3, lr, #-1
 1292 010a 13EA0E0F 		tst	r3, lr
 1293 010e B7D1     		bne	.L160
2362:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIRE))				/* (Must be sector aligned) */
 1294              		.loc 1 2362 0 is_stmt 1
 1295 0110 AB7C     		ldrb	r3, [r5, #18]	@ zero_extendqisi2
ARM GAS  /tmp/ccVdKYyy.s 			page 70


 1296 0112 6E7C     		ldrb	r6, [r5, #17]	@ zero_extendqisi2
 1297 0114 46EA0326 		orr	r6, r6, r3, lsl #8
2363:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1298              		.loc 1 2363 0
 1299 0118 3307     		lsls	r3, r6, #28
2362:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->n_rootdir % (SS(fs) / SZ_DIRE))				/* (Must be sector aligned) */
 1300              		.loc 1 2362 0
 1301 011a A5F80862 		strh	r6, [r5, #520]	@ movhi
2363:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1302              		.loc 1 2363 0
 1303 011e AFD1     		bne	.L160
2366:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!tsect) tsect = LD_DWORD(fs->win.d8 + BPB_TotSec32);
 1304              		.loc 1 2366 0
 1305 0120 297D     		ldrb	r1, [r5, #20]	@ zero_extendqisi2
 1306 0122 EB7C     		ldrb	r3, [r5, #19]	@ zero_extendqisi2
 1307              	.LVL147:
2369:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (Must not be 0) */
 1308              		.loc 1 2369 0
 1309 0124 EF7B     		ldrb	r7, [r5, #15]	@ zero_extendqisi2
2367:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1310              		.loc 1 2367 0
 1311 0126 53EA0123 		orrs	r3, r3, r1, lsl #8
 1312              	.LVL148:
2369:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!nrsv) return FR_NO_FILESYSTEM;					/* (Must not be 0) */
 1313              		.loc 1 2369 0
 1314 012a A97B     		ldrb	r1, [r5, #14]	@ zero_extendqisi2
2367:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1315              		.loc 1 2367 0
 1316 012c 08BF     		it	eq
 1317 012e 2B6A     		ldreq	r3, [r5, #32]
 1318              	.LVL149:
2370:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1319              		.loc 1 2370 0
 1320 0130 51EA0721 		orrs	r1, r1, r7, lsl #8
 1321              	.LVL150:
 1322 0134 A4D0     		beq	.L160
2356:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1323              		.loc 1 2356 0
 1324 0136 02FB00F0 		mul	r0, r2, r0
 1325              	.LVL151:
2373:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (tsect < sysect) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 1326              		.loc 1 2373 0
 1327 013a 01EB1617 		add	r7, r1, r6, lsr #4
 1328              	.LVL152:
 1329 013e 0744     		add	r7, r7, r0
 1330              	.LVL153:
2374:Middlewares/Third_Party/FatFs/src/ff.c **** 	nclst = (tsect - sysect) / fs->csize;				/* Number of clusters */
 1331              		.loc 1 2374 0
 1332 0140 BB42     		cmp	r3, r7
 1333 0142 9DD3     		bcc	.L160
2375:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!nclst) return FR_NO_FILESYSTEM;				/* (Invalid volume size) */
 1334              		.loc 1 2375 0
 1335 0144 DB1B     		subs	r3, r3, r7
 1336              	.LVL154:
 1337 0146 B3FBFEF3 		udiv	r3, r3, lr
 1338              	.LVL155:
2376:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = FS_FAT12;
ARM GAS  /tmp/ccVdKYyy.s 			page 71


 1339              		.loc 1 2376 0
 1340 014a 002B     		cmp	r3, #0
 1341 014c 98D0     		beq	.L160
 1342              	.LVL156:
2378:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (nclst >= MIN_FAT32) fmt = FS_FAT32;
 1343              		.loc 1 2378 0
 1344 014e 40F6F57E 		movw	lr, #4085
 1345 0152 7345     		cmp	r3, lr
 1346 0154 40F29180 		bls	.L164
 1347              	.LVL157:
2379:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1348              		.loc 1 2379 0
 1349 0158 4FF6F57E 		movw	lr, #65525
 1350 015c 7345     		cmp	r3, lr
 1351 015e 69D9     		bls	.L239
 1352              	.LVL158:
2382:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->volbase = bsect;								/* Volume start sector */
 1353              		.loc 1 2382 0
 1354 0160 0233     		adds	r3, r3, #2
 1355              	.LVL159:
2384:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 1356              		.loc 1 2384 0
 1357 0162 2144     		add	r1, r1, r4
2385:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
 1358              		.loc 1 2385 0
 1359 0164 2744     		add	r7, r7, r4
 1360              	.LVL160:
2382:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->volbase = bsect;								/* Volume start sector */
 1361              		.loc 1 2382 0
 1362 0166 C5F81432 		str	r3, [r5, #532]
2384:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 1363              		.loc 1 2384 0
 1364 016a C5F82012 		str	r1, [r5, #544]
2385:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
 1365              		.loc 1 2385 0
 1366 016e C5F82872 		str	r7, [r5, #552]
2383:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 1367              		.loc 1 2383 0
 1368 0172 C5F81C42 		str	r4, [r5, #540]
2387:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->dirbase = LD_DWORD(fs->win.d8 + BPB_RootClus);	/* Root directory start cluster */
 1369              		.loc 1 2387 0
 1370 0176 002E     		cmp	r6, #0
 1371 0178 82D1     		bne	.L160
2389:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 1372              		.loc 1 2389 0
 1373 017a 9B00     		lsls	r3, r3, #2
 1374              	.LVL161:
2396:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1375              		.loc 1 2396 0
 1376 017c 03F2FF13 		addw	r3, r3, #511
2388:Middlewares/Third_Party/FatFs/src/ff.c **** 		szbfat = fs->n_fatent * 4;						/* (Needed FAT size) */
 1377              		.loc 1 2388 0
 1378 0180 E96A     		ldr	r1, [r5, #44]
 1379 0182 C5F82412 		str	r1, [r5, #548]
 1380              	.LVL162:
2396:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1381              		.loc 1 2396 0
ARM GAS  /tmp/ccVdKYyy.s 			page 72


 1382 0186 B2EB532F 		cmp	r2, r3, lsr #9
 1383 018a FFF479AF 		bcc	.L160
2407:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& move_window(fs, bsect + 1) == FR_OK)
 1384              		.loc 1 2407 0
 1385 018e 95F83110 		ldrb	r1, [r5, #49]	@ zero_extendqisi2
 1386 0192 95F83030 		ldrb	r3, [r5, #48]	@ zero_extendqisi2
 1387 0196 43EA0123 		orr	r3, r3, r1, lsl #8
2401:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1388              		.loc 1 2401 0
 1389 019a 4FF0FF32 		mov	r2, #-1
 1390              	.LVL163:
2404:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
 1391              		.loc 1 2404 0
 1392 019e 8021     		movs	r1, #128
2407:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& move_window(fs, bsect + 1) == FR_OK)
 1393              		.loc 1 2407 0
 1394 01a0 012B     		cmp	r3, #1
2401:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1395              		.loc 1 2401 0
 1396 01a2 C5F81022 		str	r2, [r5, #528]
 1397 01a6 C5F80C22 		str	r2, [r5, #524]
2404:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
 1398              		.loc 1 2404 0
 1399 01aa 85F80512 		strb	r1, [r5, #517]
2407:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& move_window(fs, bsect + 1) == FR_OK)
 1400              		.loc 1 2407 0
 1401 01ae 19D0     		beq	.L240
 1402              	.LVL164:
 1403              	.L225:
2419:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 1404              		.loc 1 2419 0
 1405 01b0 0322     		movs	r2, #3
 1406              	.LVL165:
 1407              	.L168:
2426:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
 1408              		.loc 1 2426 0
 1409 01b2 4748     		ldr	r0, .L241+4
 1410              	.LBB214:
 1411              	.LBB215:
 760:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1412              		.loc 1 760 0
 1413 01b4 4749     		ldr	r1, .L241+8
 1414              	.LBE215:
 1415              	.LBE214:
2426:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
 1416              		.loc 1 2426 0
 1417 01b6 0388     		ldrh	r3, [r0]
 1418              	.LBB219:
 1419              	.LBB216:
 760:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1420              		.loc 1 760 0
 1421 01b8 0C68     		ldr	r4, [r1]
 1422              	.LBE216:
 1423              	.LBE219:
2425:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->id = ++Fsid;	/* File system mount ID */
 1424              		.loc 1 2425 0
 1425 01ba 85F80022 		strb	r2, [r5, #512]
ARM GAS  /tmp/ccVdKYyy.s 			page 73


2426:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
 1426              		.loc 1 2426 0
 1427 01be 0133     		adds	r3, r3, #1
 1428 01c0 9BB2     		uxth	r3, r3
 1429              	.LBB220:
 1430              	.LBB217:
 760:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1431              		.loc 1 760 0
 1432 01c2 A542     		cmp	r5, r4
 1433              	.LBE217:
 1434              	.LBE220:
2426:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
 1435              		.loc 1 2426 0
 1436 01c4 0380     		strh	r3, [r0]	@ movhi
 1437 01c6 A5F80632 		strh	r3, [r5, #518]	@ movhi
 1438              	.LVL166:
 1439              	.LBB221:
 1440              	.LBB218:
 760:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1441              		.loc 1 760 0
 1442 01ca 04BF     		itt	eq
 1443 01cc 0023     		moveq	r3, #0
 1444 01ce 0B60     		streq	r3, [r1]
 1445              	.LVL167:
 1446 01d0 CB68     		ldr	r3, [r1, #12]
 1447 01d2 9D42     		cmp	r5, r3
 1448 01d4 4FF00000 		mov	r0, #0
 1449 01d8 7FF436AF 		bne	.L215
 1450 01dc C860     		str	r0, [r1, #12]
 1451 01de 33E7     		b	.L215
 1452              	.LVL168:
 1453              	.L186:
 1454              	.LBE218:
 1455              	.LBE221:
2327:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = check_fs(fs, bsect);					/* Load sector 0 and check if it is an FAT boot sector as SFD */
 1456              		.loc 1 2327 0
 1457 01e0 0446     		mov	r4, r0
 1458 01e2 71E7     		b	.L157
 1459              	.LVL169:
 1460              	.L240:
2408:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
 1461              		.loc 1 2408 0
 1462 01e4 611C     		adds	r1, r4, #1
 1463 01e6 2846     		mov	r0, r5
 1464              	.LVL170:
 1465 01e8 FFF7FEFF 		bl	move_window
 1466              	.LVL171:
 1467 01ec 0028     		cmp	r0, #0
 1468 01ee DFD1     		bne	.L225
2411:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& LD_DWORD(fs->win.d8 + FSI_LeadSig) == 0x41615252
 1469              		.loc 1 2411 0
 1470 01f0 95F8FF21 		ldrb	r2, [r5, #511]	@ zero_extendqisi2
 1471 01f4 95F8FE31 		ldrb	r3, [r5, #510]	@ zero_extendqisi2
2410:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (LD_WORD(fs->win.d8 + BS_55AA) == 0xAA55	/* Load FSINFO data if available */
 1472              		.loc 1 2410 0
 1473 01f8 85F80562 		strb	r6, [r5, #517]
2411:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& LD_DWORD(fs->win.d8 + FSI_LeadSig) == 0x41615252
ARM GAS  /tmp/ccVdKYyy.s 			page 74


 1474              		.loc 1 2411 0
 1475 01fc 43EA0223 		orr	r3, r3, r2, lsl #8
 1476 0200 4AF65522 		movw	r2, #43605
 1477 0204 9342     		cmp	r3, r2
 1478 0206 D3D1     		bne	.L225
2412:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& LD_DWORD(fs->win.d8 + FSI_StrucSig) == 0x61417272)
 1479              		.loc 1 2412 0
 1480 0208 334B     		ldr	r3, .L241+12
 1481 020a 2A68     		ldr	r2, [r5]
 1482 020c 9A42     		cmp	r2, r3
 1483 020e CFD1     		bne	.L225
2413:Middlewares/Third_Party/FatFs/src/ff.c **** 		{
 1484              		.loc 1 2413 0
 1485 0210 03F1FF53 		add	r3, r3, #534773760
 1486 0214 03F50053 		add	r3, r3, #8192
 1487 0218 D5F8E421 		ldr	r2, [r5, #484]
 1488 021c 2033     		adds	r3, r3, #32
 1489 021e 9A42     		cmp	r2, r3
 1490 0220 C6D1     		bne	.L225
2416:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 1491              		.loc 1 2416 0
 1492 0222 D5F8E821 		ldr	r2, [r5, #488]
2419:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 1493              		.loc 1 2419 0
 1494 0226 D5F8EC31 		ldr	r3, [r5, #492]
2416:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 1495              		.loc 1 2416 0
 1496 022a C5F81022 		str	r2, [r5, #528]
2419:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 1497              		.loc 1 2419 0
 1498 022e C5F80C32 		str	r3, [r5, #524]
 1499 0232 BDE7     		b	.L225
 1500              	.LVL172:
 1501              	.L239:
2382:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->volbase = bsect;								/* Volume start sector */
 1502              		.loc 1 2382 0
 1503 0234 0233     		adds	r3, r3, #2
 1504              	.LVL173:
2384:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 1505              		.loc 1 2384 0
 1506 0236 2144     		add	r1, r1, r4
2385:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
 1507              		.loc 1 2385 0
 1508 0238 2744     		add	r7, r7, r4
 1509              	.LVL174:
2382:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->volbase = bsect;								/* Volume start sector */
 1510              		.loc 1 2382 0
 1511 023a C5F81432 		str	r3, [r5, #532]
2384:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 1512              		.loc 1 2384 0
 1513 023e C5F82012 		str	r1, [r5, #544]
2385:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
 1514              		.loc 1 2385 0
 1515 0242 C5F82872 		str	r7, [r5, #552]
2383:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 1516              		.loc 1 2383 0
 1517 0246 C5F81C42 		str	r4, [r5, #540]
ARM GAS  /tmp/ccVdKYyy.s 			page 75


2391:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 1518              		.loc 1 2391 0
 1519 024a 002E     		cmp	r6, #0
 1520 024c 3FF418AF 		beq	.L160
2394:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1521              		.loc 1 2394 0
 1522 0250 5B00     		lsls	r3, r3, #1
 1523              	.LVL175:
2396:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1524              		.loc 1 2396 0
 1525 0252 03F2FF13 		addw	r3, r3, #511
2392:Middlewares/Third_Party/FatFs/src/ff.c **** 		szbfat = (fmt == FS_FAT16) ?					/* (Needed FAT size) */
 1526              		.loc 1 2392 0
 1527 0256 0144     		add	r1, r1, r0
2396:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1528              		.loc 1 2396 0
 1529 0258 B2EB532F 		cmp	r2, r3, lsr #9
2392:Middlewares/Third_Party/FatFs/src/ff.c **** 		szbfat = (fmt == FS_FAT16) ?					/* (Needed FAT size) */
 1530              		.loc 1 2392 0
 1531 025c C5F82412 		str	r1, [r5, #548]
 1532              	.LVL176:
2396:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1533              		.loc 1 2396 0
 1534 0260 FFF40EAF 		bcc	.L160
2401:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1535              		.loc 1 2401 0
 1536 0264 4FF0FF33 		mov	r3, #-1
2404:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
 1537              		.loc 1 2404 0
 1538 0268 8022     		movs	r2, #128
 1539              	.LVL177:
 1540 026a 85F80522 		strb	r2, [r5, #517]
2401:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1541              		.loc 1 2401 0
 1542 026e C5F81032 		str	r3, [r5, #528]
 1543 0272 C5F80C32 		str	r3, [r5, #524]
2404:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
 1544              		.loc 1 2404 0
 1545 0276 0222     		movs	r2, #2
 1546 0278 9BE7     		b	.L168
 1547              	.LVL178:
 1548              	.L164:
2382:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->volbase = bsect;								/* Volume start sector */
 1549              		.loc 1 2382 0
 1550 027a 0233     		adds	r3, r3, #2
 1551              	.LVL179:
2384:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
 1552              		.loc 1 2384 0
 1553 027c 2144     		add	r1, r1, r4
2385:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
 1554              		.loc 1 2385 0
 1555 027e 2744     		add	r7, r7, r4
 1556              	.LVL180:
2382:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->volbase = bsect;								/* Volume start sector */
 1557              		.loc 1 2382 0
 1558 0280 C5F81432 		str	r3, [r5, #532]
2384:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->database = bsect + sysect;						/* Data start sector */
ARM GAS  /tmp/ccVdKYyy.s 			page 76


 1559              		.loc 1 2384 0
 1560 0284 C5F82012 		str	r1, [r5, #544]
2385:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
 1561              		.loc 1 2385 0
 1562 0288 C5F82872 		str	r7, [r5, #552]
2383:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fatbase = bsect + nrsv; 						/* FAT start sector */
 1563              		.loc 1 2383 0
 1564 028c C5F81C42 		str	r4, [r5, #540]
2391:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->dirbase = fs->fatbase + fasize;				/* Root directory start sector */
 1565              		.loc 1 2391 0
 1566 0290 002E     		cmp	r6, #0
 1567 0292 3FF4F5AE 		beq	.L160
2394:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1568              		.loc 1 2394 0
 1569 0296 03F00104 		and	r4, r3, #1
2396:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1570              		.loc 1 2396 0
 1571 029a 04F2FF14 		addw	r4, r4, #511
2394:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1572              		.loc 1 2394 0
 1573 029e 03EB4303 		add	r3, r3, r3, lsl #1
 1574              	.LVL181:
2396:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1575              		.loc 1 2396 0
 1576 02a2 04EB5303 		add	r3, r4, r3, lsr #1
2392:Middlewares/Third_Party/FatFs/src/ff.c **** 		szbfat = (fmt == FS_FAT16) ?					/* (Needed FAT size) */
 1577              		.loc 1 2392 0
 1578 02a6 0144     		add	r1, r1, r0
2396:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1579              		.loc 1 2396 0
 1580 02a8 B2EB532F 		cmp	r2, r3, lsr #9
2392:Middlewares/Third_Party/FatFs/src/ff.c **** 		szbfat = (fmt == FS_FAT16) ?					/* (Needed FAT size) */
 1581              		.loc 1 2392 0
 1582 02ac C5F82412 		str	r1, [r5, #548]
 1583              	.LVL182:
2396:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILESYSTEM;
 1584              		.loc 1 2396 0
 1585 02b0 FFF4E6AE 		bcc	.L160
2401:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1586              		.loc 1 2401 0
 1587 02b4 4FF0FF33 		mov	r3, #-1
2404:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
 1588              		.loc 1 2404 0
 1589 02b8 8022     		movs	r2, #128
 1590              	.LVL183:
 1591 02ba 85F80522 		strb	r2, [r5, #517]
2401:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1592              		.loc 1 2401 0
 1593 02be C5F81032 		str	r3, [r5, #528]
 1594 02c2 C5F80C32 		str	r3, [r5, #524]
2377:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (nclst >= MIN_FAT16) fmt = FS_FAT16;
 1595              		.loc 1 2377 0
 1596 02c6 0122     		movs	r2, #1
 1597 02c8 73E7     		b	.L168
 1598              	.L242:
 1599 02ca 00BF     		.align	2
 1600              	.L241:
ARM GAS  /tmp/ccVdKYyy.s 			page 77


 1601 02cc 00000000 		.word	.LANCHOR1
 1602 02d0 00000000 		.word	.LANCHOR2
 1603 02d4 00000000 		.word	.LANCHOR0
 1604 02d8 52526141 		.word	1096897106
 1605              		.cfi_endproc
 1606              	.LFE158:
 1608              		.section	.text.get_fat.part.6,"ax",%progbits
 1609              		.align	1
 1610              		.p2align 2,,3
 1611              		.syntax unified
 1612              		.thumb
 1613              		.thumb_func
 1614              		.fpu fpv4-sp-d16
 1616              	get_fat.part.6:
 1617              	.LFB190:
 891:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
 1618              		.loc 1 891 0
 1619              		.cfi_startproc
 1620              		@ args = 0, pretend = 0, frame = 0
 1621              		@ frame_needed = 0, uses_anonymous_args = 0
 1622              	.LVL184:
 1623 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1624              	.LCFI36:
 1625              		.cfi_def_cfa_offset 24
 1626              		.cfi_offset 3, -24
 1627              		.cfi_offset 4, -20
 1628              		.cfi_offset 5, -16
 1629              		.cfi_offset 6, -12
 1630              		.cfi_offset 7, -8
 1631              		.cfi_offset 14, -4
 907:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 1632              		.loc 1 907 0
 1633 0002 90F80032 		ldrb	r3, [r0, #512]	@ zero_extendqisi2
 1634 0006 022B     		cmp	r3, #2
 891:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
 1635              		.loc 1 891 0
 1636 0008 0446     		mov	r4, r0
 1637 000a 0E46     		mov	r6, r1
 907:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 1638              		.loc 1 907 0
 1639 000c 2AD0     		beq	.L245
 1640 000e 032B     		cmp	r3, #3
 1641 0010 0FD0     		beq	.L246
 1642 0012 012B     		cmp	r3, #1
 1643 0014 01D0     		beq	.L254
 930:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1644              		.loc 1 930 0
 1645 0016 0120     		movs	r0, #1
 1646              	.LVL185:
 935:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1647              		.loc 1 935 0
 1648 0018 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1649              	.LVL186:
 1650              	.L254:
 910:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win.d8[bc++ % SS(fs)];
 1651              		.loc 1 910 0
 1652 001a D0F82012 		ldr	r1, [r0, #544]
ARM GAS  /tmp/ccVdKYyy.s 			page 78


 1653              	.LVL187:
 909:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 1654              		.loc 1 909 0
 1655 001e 06EB5605 		add	r5, r6, r6, lsr #1
 1656              	.LVL188:
 910:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win.d8[bc++ % SS(fs)];
 1657              		.loc 1 910 0
 1658 0022 01EB5521 		add	r1, r1, r5, lsr #9
 1659 0026 FFF7FEFF 		bl	move_window
 1660              	.LVL189:
 1661 002a 60B3     		cbz	r0, .L248
 1662              	.LVL190:
 1663              	.L249:
 905:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1664              		.loc 1 905 0
 1665 002c 4FF0FF30 		mov	r0, #-1
 1666 0030 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1667              	.LVL191:
 1668              	.L246:
 924:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[clst * 4 % SS(fs)];
 1669              		.loc 1 924 0
 1670 0032 D0F82012 		ldr	r1, [r0, #544]
 1671              	.LVL192:
 1672 0036 01EBD611 		add	r1, r1, r6, lsr #7
 1673 003a FFF7FEFF 		bl	move_window
 1674              	.LVL193:
 1675 003e 0028     		cmp	r0, #0
 1676 0040 F4D1     		bne	.L249
 925:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = LD_DWORD(p) & 0x0FFFFFFF;
 1677              		.loc 1 925 0
 1678 0042 B600     		lsls	r6, r6, #2
 1679              	.LVL194:
 1680 0044 06F4FE76 		and	r6, r6, #508
 1681 0048 A319     		adds	r3, r4, r6
 1682              	.LVL195:
 926:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 1683              		.loc 1 926 0
 1684 004a A25D     		ldrb	r2, [r4, r6]	@ zero_extendqisi2
 1685 004c 9878     		ldrb	r0, [r3, #2]	@ zero_extendqisi2
 1686 004e D978     		ldrb	r1, [r3, #3]	@ zero_extendqisi2
 1687 0050 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1688              	.LVL196:
 1689 0052 0004     		lsls	r0, r0, #16
 1690 0054 40EA0160 		orr	r0, r0, r1, lsl #24
 1691 0058 1043     		orrs	r0, r0, r2
 1692 005a 40EA0320 		orr	r0, r0, r3, lsl #8
 1693 005e 20F07040 		bic	r0, r0, #-268435456
 1694              	.LVL197:
 1695 0062 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1696              	.LVL198:
 1697              	.L245:
 918:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[clst * 2 % SS(fs)];
 1698              		.loc 1 918 0
 1699 0064 D0F82012 		ldr	r1, [r0, #544]
 1700              	.LVL199:
 1701 0068 01EB1621 		add	r1, r1, r6, lsr #8
 1702 006c FFF7FEFF 		bl	move_window
ARM GAS  /tmp/ccVdKYyy.s 			page 79


 1703              	.LVL200:
 1704 0070 0028     		cmp	r0, #0
 1705 0072 DBD1     		bne	.L249
 919:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = LD_WORD(p);
 1706              		.loc 1 919 0
 1707 0074 7600     		lsls	r6, r6, #1
 1708              	.LVL201:
 1709 0076 06F4FF76 		and	r6, r6, #510
 1710              	.LVL202:
 920:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 1711              		.loc 1 920 0
 1712 007a A319     		adds	r3, r4, r6
 1713              	.LVL203:
 1714 007c A05D     		ldrb	r0, [r4, r6]	@ zero_extendqisi2
 1715 007e 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 1716              	.LVL204:
 1717 0080 40EA0320 		orr	r0, r0, r3, lsl #8
 1718              	.LVL205:
 1719 0084 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1720              	.LVL206:
 1721              	.L248:
 912:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win.d8[bc % SS(fs)] << 8;
 1722              		.loc 1 912 0
 1723 0086 D4F82012 		ldr	r1, [r4, #544]
 911:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 1724              		.loc 1 911 0
 1725 008a 6F1C     		adds	r7, r5, #1
 1726              	.LVL207:
 1727 008c C5F30805 		ubfx	r5, r5, #0, #9
 912:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win.d8[bc % SS(fs)] << 8;
 1728              		.loc 1 912 0
 1729 0090 01EB5721 		add	r1, r1, r7, lsr #9
 1730 0094 2046     		mov	r0, r4
 911:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 1731              		.loc 1 911 0
 1732 0096 655D     		ldrb	r5, [r4, r5]	@ zero_extendqisi2
 1733              	.LVL208:
 912:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win.d8[bc % SS(fs)] << 8;
 1734              		.loc 1 912 0
 1735 0098 FFF7FEFF 		bl	move_window
 1736              	.LVL209:
 1737 009c 0028     		cmp	r0, #0
 1738 009e C5D1     		bne	.L249
 913:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = clst & 1 ? wc >> 4 : (wc & 0xFFF);
 1739              		.loc 1 913 0
 1740 00a0 C7F30807 		ubfx	r7, r7, #0, #9
 1741              	.LVL210:
 914:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 1742              		.loc 1 914 0
 1743 00a4 F307     		lsls	r3, r6, #31
 913:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = clst & 1 ? wc >> 4 : (wc & 0xFFF);
 1744              		.loc 1 913 0
 1745 00a6 E05D     		ldrb	r0, [r4, r7]	@ zero_extendqisi2
 1746 00a8 45EA0020 		orr	r0, r5, r0, lsl #8
 1747              	.LVL211:
 914:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 1748              		.loc 1 914 0
ARM GAS  /tmp/ccVdKYyy.s 			page 80


 1749 00ac 4CBF     		ite	mi
 1750 00ae 0009     		lsrmi	r0, r0, #4
 1751              	.LVL212:
 1752 00b0 C0F30B00 		ubfxpl	r0, r0, #0, #12
 1753 00b4 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1754              		.cfi_endproc
 1755              	.LFE190:
 1757 00b6 00BF     		.section	.text.dir_sdi,"ax",%progbits
 1758              		.align	1
 1759              		.p2align 2,,3
 1760              		.syntax unified
 1761              		.thumb
 1762              		.thumb_func
 1763              		.fpu fpv4-sp-d16
 1765              	dir_sdi:
 1766              	.LFB144:
1157:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
 1767              		.loc 1 1157 0
 1768              		.cfi_startproc
 1769              		@ args = 0, pretend = 0, frame = 0
 1770              		@ frame_needed = 0, uses_anonymous_args = 0
 1771              	.LVL213:
 1772 0000 70B5     		push	{r4, r5, r6, lr}
 1773              	.LCFI37:
 1774              		.cfi_def_cfa_offset 16
 1775              		.cfi_offset 4, -16
 1776              		.cfi_offset 5, -12
 1777              		.cfi_offset 6, -8
 1778              		.cfi_offset 14, -4
1157:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
 1779              		.loc 1 1157 0
 1780 0002 0D46     		mov	r5, r1
1163:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 1 || clst >= dp->fs->n_fatent)	/* Check start cluster range */
 1781              		.loc 1 1163 0
 1782 0004 D0F80812 		ldr	r1, [r0, #520]
 1783              	.LVL214:
1162:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst = dp->sclust;		/* Table start cluster (0:root) */
 1784              		.loc 1 1162 0
 1785 0008 A0F80652 		strh	r5, [r0, #518]	@ movhi
1164:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INT_ERR;
 1786              		.loc 1 1164 0
 1787 000c 0129     		cmp	r1, #1
 1788 000e 06D0     		beq	.L273
 1789 0010 0446     		mov	r4, r0
1164:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INT_ERR;
 1790              		.loc 1 1164 0 is_stmt 0 discriminator 1
 1791 0012 D0F80002 		ldr	r0, [r0, #512]
 1792              	.LVL215:
 1793 0016 D0F81432 		ldr	r3, [r0, #532]
 1794 001a 9942     		cmp	r1, r3
 1795 001c 01D3     		bcc	.L275
 1796              	.LVL216:
 1797              	.L273:
1186:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect = sect + idx / (SS(dp->fs) / SZ_DIRE);					/* Sector# of the directory entry */
 1798              		.loc 1 1186 0 is_stmt 1
 1799 001e 0220     		movs	r0, #2
1191:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccVdKYyy.s 			page 81


 1800              		.loc 1 1191 0
 1801 0020 70BD     		pop	{r4, r5, r6, pc}
 1802              	.LVL217:
 1803              	.L275:
1166:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = dp->fs->dirbase;
 1804              		.loc 1 1166 0
 1805 0022 F1B9     		cbnz	r1, .L259
1166:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = dp->fs->dirbase;
 1806              		.loc 1 1166 0 is_stmt 0 discriminator 1
 1807 0024 90F80022 		ldrb	r2, [r0, #512]	@ zero_extendqisi2
 1808 0028 032A     		cmp	r2, #3
 1809 002a 15D0     		beq	.L276
 1810              	.LVL218:
 1811              	.L260:
1170:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_INT_ERR;
 1812              		.loc 1 1170 0 is_stmt 1
 1813 002c B0F80832 		ldrh	r3, [r0, #520]
 1814 0030 9D42     		cmp	r5, r3
 1815 0032 F4D2     		bcs	.L273
1172:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1816              		.loc 1 1172 0
 1817 0034 D0F82432 		ldr	r3, [r0, #548]
 1818              	.LVL219:
 1819              	.L261:
1185:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!sect) return FR_INT_ERR;
 1820              		.loc 1 1185 0
 1821 0038 C4F80C12 		str	r1, [r4, #524]
1186:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect = sect + idx / (SS(dp->fs) / SZ_DIRE);					/* Sector# of the directory entry */
 1822              		.loc 1 1186 0
 1823 003c 002B     		cmp	r3, #0
 1824 003e EED0     		beq	.L273
1188:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1825              		.loc 1 1188 0
 1826 0040 05F00F02 		and	r2, r5, #15
 1827 0044 00EB4210 		add	r0, r0, r2, lsl #5
1187:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = dp->fs->win.d8 + (idx % (SS(dp->fs) / SZ_DIRE)) * SZ_DIRE;	/* Ptr to the entry in the se
 1828              		.loc 1 1187 0
 1829 0048 03EB1515 		add	r5, r3, r5, lsr #4
 1830              	.LVL220:
1188:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1831              		.loc 1 1188 0
 1832 004c C4F81402 		str	r0, [r4, #532]
1187:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = dp->fs->win.d8 + (idx % (SS(dp->fs) / SZ_DIRE)) * SZ_DIRE;	/* Ptr to the entry in the se
 1833              		.loc 1 1187 0
 1834 0050 C4F81052 		str	r5, [r4, #528]
1190:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1835              		.loc 1 1190 0
 1836 0054 0020     		movs	r0, #0
 1837 0056 70BD     		pop	{r4, r5, r6, pc}
 1838              	.LVL221:
 1839              	.L276:
1167:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1840              		.loc 1 1167 0
 1841 0058 D0F82422 		ldr	r2, [r0, #548]
 1842              	.LVL222:
1169:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (idx >= dp->fs->n_rootdir)	/* Is index out of range? */
 1843              		.loc 1 1169 0
ARM GAS  /tmp/ccVdKYyy.s 			page 82


 1844 005c 002A     		cmp	r2, #0
 1845 005e E5D0     		beq	.L260
 1846 0060 1146     		mov	r1, r2
 1847              	.LVL223:
 1848              	.L259:
1175:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (idx >= ic) {	/* Follow cluster chain */
 1849              		.loc 1 1175 0
 1850 0062 90F80262 		ldrb	r6, [r0, #514]	@ zero_extendqisi2
 1851 0066 3601     		lsls	r6, r6, #4
 1852              	.LVL224:
1176:Middlewares/Third_Party/FatFs/src/ff.c **** 			clst = get_fat(dp->fs, clst);				/* Get next cluster */
 1853              		.loc 1 1176 0
 1854 0068 B542     		cmp	r5, r6
 1855 006a 11D2     		bcs	.L263
 1856 006c 18E0     		b	.L262
 1857              	.LVL225:
 1858              	.L277:
 1859              	.LBB222:
 1860              	.LBB223:
 1861 006e FFF7FEFF 		bl	get_fat.part.6
 1862              	.LVL226:
 1863              	.LBE223:
 1864              	.LBE222:
1178:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= dp->fs->n_fatent)	/* Reached to end of table or internal error */
 1865              		.loc 1 1178 0
 1866 0072 431C     		adds	r3, r0, #1
 1867              	.LBB226:
 1868              	.LBB224:
 1869 0074 0146     		mov	r1, r0
 1870              	.LBE224:
 1871              	.LBE226:
1181:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1872              		.loc 1 1181 0
 1873 0076 A5EB0605 		sub	r5, r5, r6
 1874              	.LVL227:
1178:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= dp->fs->n_fatent)	/* Reached to end of table or internal error */
 1875              		.loc 1 1178 0
 1876 007a 1FD0     		beq	.L266
1179:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_INT_ERR;
 1877              		.loc 1 1179 0
 1878 007c 0128     		cmp	r0, #1
 1879 007e CED9     		bls	.L273
1179:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_INT_ERR;
 1880              		.loc 1 1179 0 is_stmt 0 discriminator 1
 1881 0080 D4F80002 		ldr	r0, [r4, #512]
 1882              	.LVL228:
 1883 0084 D0F81432 		ldr	r3, [r0, #532]
 1884 0088 8B42     		cmp	r3, r1
 1885 008a C8D9     		bls	.L273
1176:Middlewares/Third_Party/FatFs/src/ff.c **** 			clst = get_fat(dp->fs, clst);				/* Get next cluster */
 1886              		.loc 1 1176 0 is_stmt 1
 1887 008c AE42     		cmp	r6, r5
 1888 008e 07D8     		bhi	.L262
 1889              	.L263:
 1890              	.LVL229:
 1891              	.LBB227:
 1892              	.LBB225:
ARM GAS  /tmp/ccVdKYyy.s 			page 83


 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 1893              		.loc 1 901 0
 1894 0090 0129     		cmp	r1, #1
 1895 0092 C4D9     		bls	.L273
 1896 0094 D0F81432 		ldr	r3, [r0, #532]
 1897 0098 8B42     		cmp	r3, r1
 1898 009a E8D8     		bhi	.L277
 1899              	.LBE225:
 1900              	.LBE227:
1186:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect = sect + idx / (SS(dp->fs) / SZ_DIRE);					/* Sector# of the directory entry */
 1901              		.loc 1 1186 0
 1902 009c 0220     		movs	r0, #2
1191:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1903              		.loc 1 1191 0
 1904 009e 70BD     		pop	{r4, r5, r6, pc}
 1905              	.LVL230:
 1906              	.L262:
 1907              	.LBB228:
 1908              	.LBB229:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 1909              		.loc 1 879 0
 1910 00a0 023B     		subs	r3, r3, #2
 878:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 1911              		.loc 1 878 0
 1912 00a2 8A1E     		subs	r2, r1, #2
 1913              	.LVL231:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 1914              		.loc 1 879 0
 1915 00a4 9A42     		cmp	r2, r3
 1916 00a6 06D2     		bcs	.L264
 880:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1917              		.loc 1 880 0
 1918 00a8 90F80232 		ldrb	r3, [r0, #514]	@ zero_extendqisi2
 1919 00ac D0F82862 		ldr	r6, [r0, #552]
 1920              	.LVL232:
 1921 00b0 02FB0363 		mla	r3, r2, r3, r6
 1922 00b4 C0E7     		b	.L261
 1923              	.LVL233:
 1924              	.L264:
 1925              	.LBE229:
 1926              	.LBE228:
1185:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!sect) return FR_INT_ERR;
 1927              		.loc 1 1185 0
 1928 00b6 C4F80C12 		str	r1, [r4, #524]
 1929 00ba B0E7     		b	.L273
 1930              	.LVL234:
 1931              	.L266:
1178:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= dp->fs->n_fatent)	/* Reached to end of table or internal error */
 1932              		.loc 1 1178 0
 1933 00bc 0120     		movs	r0, #1
 1934              	.LVL235:
 1935 00be 70BD     		pop	{r4, r5, r6, pc}
 1936              		.cfi_endproc
 1937              	.LFE144:
 1939              		.section	.text.dir_remove,"ax",%progbits
 1940              		.align	1
 1941              		.p2align 2,,3
ARM GAS  /tmp/ccVdKYyy.s 			page 84


 1942              		.syntax unified
 1943              		.thumb
 1944              		.thumb_func
 1945              		.fpu fpv4-sp-d16
 1947              	dir_remove:
 1948              	.LFB152:
1729:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 1949              		.loc 1 1729 0
 1950              		.cfi_startproc
 1951              		@ args = 0, pretend = 0, frame = 0
 1952              		@ frame_needed = 0, uses_anonymous_args = 0
 1953              	.LVL236:
 1954 0000 10B5     		push	{r4, lr}
 1955              	.LCFI38:
 1956              		.cfi_def_cfa_offset 8
 1957              		.cfi_offset 4, -8
 1958              		.cfi_offset 14, -4
1750:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 1959              		.loc 1 1750 0
 1960 0002 B0F80612 		ldrh	r1, [r0, #518]
1729:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 1961              		.loc 1 1729 0
 1962 0006 0446     		mov	r4, r0
1750:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 1963              		.loc 1 1750 0
 1964 0008 FFF7FEFF 		bl	dir_sdi
 1965              	.LVL237:
1751:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 1966              		.loc 1 1751 0
 1967 000c 00B1     		cbz	r0, .L283
 1968              	.LVL238:
 1969              	.L279:
1762:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
 1970              		.loc 1 1762 0
 1971 000e 10BD     		pop	{r4, pc}
 1972              	.LVL239:
 1973              	.L283:
 1974              	.LBB234:
 1975              	.LBB235:
1752:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 1976              		.loc 1 1752 0
 1977 0010 D4F81012 		ldr	r1, [r4, #528]
 1978 0014 D4F80002 		ldr	r0, [r4, #512]
 1979              	.LVL240:
 1980 0018 FFF7FEFF 		bl	move_window
 1981              	.LVL241:
1753:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIRE);	/* Clear and mark the entry "deleted" */
 1982              		.loc 1 1753 0
 1983 001c 0028     		cmp	r0, #0
 1984 001e F6D1     		bne	.L279
1754:Middlewares/Third_Party/FatFs/src/ff.c **** 			*dp->dir = DDEM;
 1985              		.loc 1 1754 0
 1986 0020 D4F81432 		ldr	r3, [r4, #532]
 1987              	.LVL242:
 1988              	.LBB236:
 1989              	.LBB237:
 601:Middlewares/Third_Party/FatFs/src/ff.c **** }
ARM GAS  /tmp/ccVdKYyy.s 			page 85


 1990              		.loc 1 601 0
 1991 0024 0146     		mov	r1, r0
 1992 0026 03F12002 		add	r2, r3, #32
 1993              	.LVL243:
 1994              	.L280:
 1995 002a 03F8011B 		strb	r1, [r3], #1
 1996              	.LVL244:
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
 1997              		.loc 1 600 0
 1998 002e 9342     		cmp	r3, r2
 1999 0030 FBD1     		bne	.L280
 2000              	.LVL245:
 2001              	.LBE237:
 2002              	.LBE236:
1755:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fs->wflag = 1;
 2003              		.loc 1 1755 0
 2004 0032 D4F81432 		ldr	r3, [r4, #532]
 2005 0036 E522     		movs	r2, #229
 2006 0038 1A70     		strb	r2, [r3]
1756:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2007              		.loc 1 1756 0
 2008 003a D4F80032 		ldr	r3, [r4, #512]
 2009 003e 0122     		movs	r2, #1
 2010 0040 83F80422 		strb	r2, [r3, #516]
 2011              	.LVL246:
 2012              	.LBE235:
 2013              	.LBE234:
1762:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
 2014              		.loc 1 1762 0
 2015 0044 10BD     		pop	{r4, pc}
 2016              		.cfi_endproc
 2017              	.LFE152:
 2019 0046 00BF     		.section	.text.put_fat.part.8,"ax",%progbits
 2020              		.align	1
 2021              		.p2align 2,,3
 2022              		.syntax unified
 2023              		.thumb
 2024              		.thumb_func
 2025              		.fpu fpv4-sp-d16
 2027              	put_fat.part.8:
 2028              	.LFB192:
 946:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
 2029              		.loc 1 946 0
 2030              		.cfi_startproc
 2031              		@ args = 0, pretend = 0, frame = 0
 2032              		@ frame_needed = 0, uses_anonymous_args = 0
 2033              	.LVL247:
 2034 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2035              	.LCFI39:
 2036              		.cfi_def_cfa_offset 32
 2037              		.cfi_offset 4, -32
 2038              		.cfi_offset 5, -28
 2039              		.cfi_offset 6, -24
 2040              		.cfi_offset 7, -20
 2041              		.cfi_offset 8, -16
 2042              		.cfi_offset 9, -12
 2043              		.cfi_offset 10, -8
ARM GAS  /tmp/ccVdKYyy.s 			page 86


 2044              		.cfi_offset 14, -4
 961:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 2045              		.loc 1 961 0
 2046 0004 90F80062 		ldrb	r6, [r0, #512]	@ zero_extendqisi2
 2047 0008 022E     		cmp	r6, #2
 946:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
 2048              		.loc 1 946 0
 2049 000a 0446     		mov	r4, r0
 2050 000c 0D46     		mov	r5, r1
 2051 000e 9046     		mov	r8, r2
 961:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 2052              		.loc 1 961 0
 2053 0010 51D0     		beq	.L286
 2054 0012 032E     		cmp	r6, #3
 2055 0014 2ED0     		beq	.L287
 2056 0016 012E     		cmp	r6, #1
 2057 0018 03D0     		beq	.L301
 994:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2058              		.loc 1 994 0
 2059 001a 0227     		movs	r7, #2
 2060              	.LVL248:
 2061              	.L296:
 999:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
 2062              		.loc 1 999 0
 2063 001c 3846     		mov	r0, r7
 2064 001e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2065              	.LVL249:
 2066              	.L301:
 964:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2067              		.loc 1 964 0
 2068 0022 D0F82012 		ldr	r1, [r0, #544]
 2069              	.LVL250:
 963:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2070              		.loc 1 963 0
 2071 0026 05EB5509 		add	r9, r5, r5, lsr #1
 2072              	.LVL251:
 964:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2073              		.loc 1 964 0
 2074 002a 01EB5921 		add	r1, r1, r9, lsr #9
 2075 002e FFF7FEFF 		bl	move_window
 2076              	.LVL252:
 965:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[bc++ % SS(fs)];
 2077              		.loc 1 965 0
 2078 0032 0746     		mov	r7, r0
 2079 0034 0028     		cmp	r0, #0
 2080 0036 F1D1     		bne	.L296
 967:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2081              		.loc 1 967 0
 2082 0038 EB07     		lsls	r3, r5, #31
 966:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 2083              		.loc 1 966 0
 2084 003a 09F1010A 		add	r10, r9, #1
 2085              	.LVL253:
 2086 003e C9F30809 		ubfx	r9, r9, #0, #9
 2087              	.LVL254:
 967:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2088              		.loc 1 967 0
ARM GAS  /tmp/ccVdKYyy.s 			page 87


 2089 0042 50D5     		bpl	.L289
 2090 0044 14F80930 		ldrb	r3, [r4, r9]	@ zero_extendqisi2
 2091 0048 03F00F03 		and	r3, r3, #15
 2092 004c 43EA0813 		orr	r3, r3, r8, lsl #4
 2093 0050 04F80930 		strb	r3, [r4, r9]
 969:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2094              		.loc 1 969 0
 2095 0054 D4F82012 		ldr	r1, [r4, #544]
 968:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2096              		.loc 1 968 0
 2097 0058 84F80462 		strb	r6, [r4, #516]
 969:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2098              		.loc 1 969 0
 2099 005c 01EB5A21 		add	r1, r1, r10, lsr #9
 2100 0060 2046     		mov	r0, r4
 2101              	.LVL255:
 2102 0062 FFF7FEFF 		bl	move_window
 2103              	.LVL256:
 970:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[bc % SS(fs)];
 2104              		.loc 1 970 0
 2105 0066 0028     		cmp	r0, #0
 2106 0068 49D1     		bne	.L295
 971:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 2107              		.loc 1 971 0
 2108 006a CAF3080A 		ubfx	r10, r10, #0, #9
 2109              	.LVL257:
 972:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2110              		.loc 1 972 0
 2111 006e C8F30712 		ubfx	r2, r8, #4, #8
 2112 0072 50E0     		b	.L292
 2113              	.LVL258:
 2114              	.L287:
 985:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2115              		.loc 1 985 0
 2116 0074 D0F82012 		ldr	r1, [r0, #544]
 2117              	.LVL259:
 2118 0078 01EBD511 		add	r1, r1, r5, lsr #7
 2119 007c FFF7FEFF 		bl	move_window
 2120              	.LVL260:
 986:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[clst * 4 % SS(fs)];
 2121              		.loc 1 986 0
 2122 0080 0746     		mov	r7, r0
 2123 0082 0028     		cmp	r0, #0
 2124 0084 CAD1     		bne	.L296
 987:Middlewares/Third_Party/FatFs/src/ff.c **** 			val |= LD_DWORD(p) & 0xF0000000;
 2125              		.loc 1 987 0
 2126 0086 AD00     		lsls	r5, r5, #2
 2127              	.LVL261:
 2128 0088 05F4FE75 		and	r5, r5, #508
 2129 008c 6119     		adds	r1, r4, r5
 2130              	.LVL262:
 990:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2131              		.loc 1 990 0
 2132 008e 0120     		movs	r0, #1
 2133              	.LVL263:
 988:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(p, val);
 2134              		.loc 1 988 0
ARM GAS  /tmp/ccVdKYyy.s 			page 88


 2135 0090 CB78     		ldrb	r3, [r1, #3]	@ zero_extendqisi2
 2136 0092 1B06     		lsls	r3, r3, #24
 2137 0094 03F07043 		and	r3, r3, #-268435456
 2138 0098 43EA0802 		orr	r2, r3, r8
 2139              	.LVL264:
 989:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2140              		.loc 1 989 0
 2141 009c 6255     		strb	r2, [r4, r5]
 2142 009e C2F30726 		ubfx	r6, r2, #8, #8
 2143 00a2 130C     		lsrs	r3, r2, #16
 2144 00a4 120E     		lsrs	r2, r2, #24
 2145              	.LVL265:
 2146 00a6 4E70     		strb	r6, [r1, #1]
 2147 00a8 8B70     		strb	r3, [r1, #2]
 2148 00aa CA70     		strb	r2, [r1, #3]
 2149              	.LVL266:
 990:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2150              		.loc 1 990 0
 2151 00ac 84F80402 		strb	r0, [r4, #516]
 999:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
 2152              		.loc 1 999 0
 2153 00b0 3846     		mov	r0, r7
 2154 00b2 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2155              	.LVL267:
 2156              	.L286:
 977:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2157              		.loc 1 977 0
 2158 00b6 D0F82012 		ldr	r1, [r0, #544]
 2159              	.LVL268:
 2160 00ba 01EB1521 		add	r1, r1, r5, lsr #8
 2161 00be FFF7FEFF 		bl	move_window
 2162              	.LVL269:
 978:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[clst * 2 % SS(fs)];
 2163              		.loc 1 978 0
 2164 00c2 0746     		mov	r7, r0
 2165 00c4 0028     		cmp	r0, #0
 2166 00c6 A9D1     		bne	.L296
 979:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_WORD(p, (WORD)val);
 2167              		.loc 1 979 0
 2168 00c8 6D00     		lsls	r5, r5, #1
 2169              	.LVL270:
 2170 00ca 05F4FF75 		and	r5, r5, #510
 2171              	.LVL271:
 980:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2172              		.loc 1 980 0
 2173 00ce 6219     		adds	r2, r4, r5
 2174              	.LVL272:
 2175 00d0 04F80580 		strb	r8, [r4, r5]
 2176 00d4 C8F30721 		ubfx	r1, r8, #8, #8
 981:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2177              		.loc 1 981 0
 2178 00d8 0123     		movs	r3, #1
 980:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2179              		.loc 1 980 0
 2180 00da 5170     		strb	r1, [r2, #1]
 981:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2181              		.loc 1 981 0
ARM GAS  /tmp/ccVdKYyy.s 			page 89


 2182 00dc 84F80432 		strb	r3, [r4, #516]
 999:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
 2183              		.loc 1 999 0
 2184 00e0 3846     		mov	r0, r7
 2185              	.LVL273:
 2186 00e2 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2187              	.LVL274:
 2188              	.L289:
 967:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2189              		.loc 1 967 0
 2190 00e6 04F80980 		strb	r8, [r4, r9]
 969:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2191              		.loc 1 969 0
 2192 00ea D4F82012 		ldr	r1, [r4, #544]
 968:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2193              		.loc 1 968 0
 2194 00ee 84F80462 		strb	r6, [r4, #516]
 969:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2195              		.loc 1 969 0
 2196 00f2 01EB5A21 		add	r1, r1, r10, lsr #9
 2197 00f6 2046     		mov	r0, r4
 2198              	.LVL275:
 2199 00f8 FFF7FEFF 		bl	move_window
 2200              	.LVL276:
 970:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = &fs->win.d8[bc % SS(fs)];
 2201              		.loc 1 970 0
 2202 00fc 08B1     		cbz	r0, .L299
 2203              	.LVL277:
 2204              	.L295:
 2205 00fe 0746     		mov	r7, r0
 2206 0100 8CE7     		b	.L296
 2207              	.LVL278:
 2208              	.L299:
 971:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 2209              		.loc 1 971 0
 2210 0102 CAF3080A 		ubfx	r10, r10, #0, #9
 2211              	.LVL279:
 972:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2212              		.loc 1 972 0
 2213 0106 C8F30322 		ubfx	r2, r8, #8, #4
 2214 010a 14F80A80 		ldrb	r8, [r4, r10]	@ zero_extendqisi2
 2215              	.LVL280:
 2216 010e 28F00F08 		bic	r8, r8, #15
 2217 0112 48EA0202 		orr	r2, r8, r2
 2218              	.LVL281:
 2219              	.L292:
 973:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2220              		.loc 1 973 0
 2221 0116 0123     		movs	r3, #1
 972:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2222              		.loc 1 972 0
 2223 0118 04F80A20 		strb	r2, [r4, r10]
 973:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2224              		.loc 1 973 0
 2225 011c 84F80432 		strb	r3, [r4, #516]
 2226 0120 7CE7     		b	.L296
 2227              		.cfi_endproc
ARM GAS  /tmp/ccVdKYyy.s 			page 90


 2228              	.LFE192:
 2230 0122 00BF     		.section	.text.create_chain,"ax",%progbits
 2231              		.align	1
 2232              		.p2align 2,,3
 2233              		.syntax unified
 2234              		.thumb
 2235              		.thumb_func
 2236              		.fpu fpv4-sp-d16
 2238              	create_chain:
 2239              	.LFB142:
1067:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cs, ncl, scl;
 2240              		.loc 1 1067 0
 2241              		.cfi_startproc
 2242              		@ args = 0, pretend = 0, frame = 0
 2243              		@ frame_needed = 0, uses_anonymous_args = 0
 2244              	.LVL282:
 2245 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2246              	.LCFI40:
 2247              		.cfi_def_cfa_offset 24
 2248              		.cfi_offset 3, -24
 2249              		.cfi_offset 4, -20
 2250              		.cfi_offset 5, -16
 2251              		.cfi_offset 6, -12
 2252              		.cfi_offset 7, -8
 2253              		.cfi_offset 14, -4
1067:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cs, ncl, scl;
 2254              		.loc 1 1067 0
 2255 0002 0546     		mov	r5, r0
1072:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = fs->last_clust;			/* Get suggested start point */
 2256              		.loc 1 1072 0
 2257 0004 0F46     		mov	r7, r1
 2258 0006 09BB     		cbnz	r1, .L303
1073:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!scl || scl >= fs->n_fatent) scl = 1;
 2259              		.loc 1 1073 0
 2260 0008 D0F80C62 		ldr	r6, [r0, #524]
 2261              	.LVL283:
 2262 000c D0F81432 		ldr	r3, [r0, #532]
1074:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2263              		.loc 1 1074 0
 2264 0010 7EBB     		cbnz	r6, .L304
 2265 0012 0126     		movs	r6, #1
 2266              	.LVL284:
 2267              	.L305:
 2268 0014 3446     		mov	r4, r6
 2269 0016 11E0     		b	.L314
 2270              	.LVL285:
 2271              	.L334:
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2272              		.loc 1 1089 0
 2273 0018 012E     		cmp	r6, #1
 2274 001a 2ED9     		bls	.L313
 2275              	.LBB238:
 2276              	.LBB239:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 2277              		.loc 1 901 0
 2278 001c 022B     		cmp	r3, #2
 2279 001e 12D9     		bls	.L306
ARM GAS  /tmp/ccVdKYyy.s 			page 91


 2280              	.LBE239:
 2281              	.LBE238:
1088:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
 2282              		.loc 1 1088 0
 2283 0020 0224     		movs	r4, #2
 2284              	.LVL286:
 2285              	.L320:
 2286              	.LBB242:
 2287              	.LBB240:
 2288 0022 2146     		mov	r1, r4
 2289 0024 2846     		mov	r0, r5
 2290 0026 FFF7FEFF 		bl	get_fat.part.6
 2291              	.LVL287:
 2292              	.LBE240:
 2293              	.LBE242:
1092:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF || cs == 1)/* An error occurred */
 2294              		.loc 1 1092 0
 2295 002a 78B3     		cbz	r0, .L311
1093:Middlewares/Third_Party/FatFs/src/ff.c **** 			return cs;
 2296              		.loc 1 1093 0
 2297 002c 411C     		adds	r1, r0, #1
 2298 002e 29D0     		beq	.L312
1093:Middlewares/Third_Party/FatFs/src/ff.c **** 			return cs;
 2299              		.loc 1 1093 0 is_stmt 0 discriminator 1
 2300 0030 0128     		cmp	r0, #1
 2301 0032 08D0     		beq	.L306
1095:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2302              		.loc 1 1095 0 is_stmt 1
 2303 0034 A642     		cmp	r6, r4
 2304 0036 20D0     		beq	.L313
 2305 0038 D5F81432 		ldr	r3, [r5, #532]
 2306              	.L314:
 2307              	.LVL288:
1086:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ncl >= fs->n_fatent) {		/* Check wrap around */
 2308              		.loc 1 1086 0
 2309 003c 0134     		adds	r4, r4, #1
 2310              	.LVL289:
1087:Middlewares/Third_Party/FatFs/src/ff.c **** 			ncl = 2;
 2311              		.loc 1 1087 0
 2312 003e 9C42     		cmp	r4, r3
 2313 0040 EAD2     		bcs	.L334
 2314              	.LBB243:
 2315              	.LBB241:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 2316              		.loc 1 901 0
 2317 0042 012C     		cmp	r4, #1
 2318 0044 EDD8     		bhi	.L320
 2319              	.LVL290:
 2320              	.L306:
 2321              	.LBE241:
 2322              	.LBE243:
1109:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2323              		.loc 1 1109 0 discriminator 2
 2324 0046 0124     		movs	r4, #1
 2325              	.L302:
1113:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
 2326              		.loc 1 1113 0
ARM GAS  /tmp/ccVdKYyy.s 			page 92


 2327 0048 2046     		mov	r0, r4
 2328 004a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2329              	.LVL291:
 2330              	.L303:
 2331              	.LBB244:
 2332              	.LBB245:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 2333              		.loc 1 901 0
 2334 004c 0129     		cmp	r1, #1
 2335 004e FAD9     		bls	.L306
 2336 0050 D0F81432 		ldr	r3, [r0, #532]
 2337 0054 9942     		cmp	r1, r3
 2338 0056 F6D2     		bcs	.L306
 2339 0058 FFF7FEFF 		bl	get_fat.part.6
 2340              	.LVL292:
 2341              	.LBE245:
 2342              	.LBE244:
1078:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
 2343              		.loc 1 1078 0
 2344 005c 0128     		cmp	r0, #1
 2345              	.LBB247:
 2346              	.LBB246:
 2347 005e 0446     		mov	r4, r0
 2348              	.LVL293:
 2349              	.LBE246:
 2350              	.LBE247:
 2351 0060 F1D9     		bls	.L306
1079:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 2352              		.loc 1 1079 0
 2353 0062 0130     		adds	r0, r0, #1
 2354 0064 0ED0     		beq	.L312
1080:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = clst;
 2355              		.loc 1 1080 0
 2356 0066 D5F81432 		ldr	r3, [r5, #532]
 2357 006a A342     		cmp	r3, r4
 2358 006c ECD8     		bhi	.L302
 2359 006e 3E46     		mov	r6, r7
 2360 0070 D0E7     		b	.L305
 2361              	.LVL294:
 2362              	.L304:
1074:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2363              		.loc 1 1074 0 discriminator 2
 2364 0072 9E42     		cmp	r6, r3
 2365 0074 28BF     		it	cs
 2366 0076 0126     		movcs	r6, #1
 2367              	.LVL295:
 2368 0078 CCE7     		b	.L305
 2369              	.LVL296:
 2370              	.L313:
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2371              		.loc 1 1089 0
 2372 007a 0024     		movs	r4, #0
 2373              	.LVL297:
1113:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
 2374              		.loc 1 1113 0
 2375 007c 2046     		mov	r0, r4
 2376 007e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
ARM GAS  /tmp/ccVdKYyy.s 			page 93


 2377              	.LVL298:
 2378              	.L316:
1109:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2379              		.loc 1 1109 0
 2380 0080 0128     		cmp	r0, #1
 2381 0082 E0D1     		bne	.L306
 2382              	.LVL299:
 2383              	.L312:
1088:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl > scl) return 0;	/* No free cluster */
 2384              		.loc 1 1088 0
 2385 0084 4FF0FF34 		mov	r4, #-1
1113:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
 2386              		.loc 1 1113 0
 2387 0088 2046     		mov	r0, r4
 2388 008a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2389              	.LVL300:
 2390              	.L311:
 2391              	.LBB248:
 2392              	.LBB249:
 957:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 2393              		.loc 1 957 0
 2394 008c D5F81432 		ldr	r3, [r5, #532]
 2395 0090 A342     		cmp	r3, r4
 2396 0092 D8D9     		bls	.L306
 2397 0094 6FF07042 		mvn	r2, #-268435456
 2398 0098 2146     		mov	r1, r4
 2399 009a 2846     		mov	r0, r5
 2400 009c FFF7FEFF 		bl	put_fat.part.8
 2401              	.LVL301:
 2402              	.LBE249:
 2403              	.LBE248:
1099:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(fs, clst, ncl);	/* Link it to the previous one if needed */
 2404              		.loc 1 1099 0
 2405 00a0 0028     		cmp	r0, #0
 2406 00a2 EDD1     		bne	.L316
1099:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(fs, clst, ncl);	/* Link it to the previous one if needed */
 2407              		.loc 1 1099 0 is_stmt 0 discriminator 1
 2408 00a4 67B1     		cbz	r7, .L319
 2409              	.LVL302:
 2410              	.LBB250:
 2411              	.LBB251:
 957:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 2412              		.loc 1 957 0 is_stmt 1
 2413 00a6 012F     		cmp	r7, #1
 2414 00a8 CDD9     		bls	.L306
 2415 00aa D5F81432 		ldr	r3, [r5, #532]
 2416 00ae 9F42     		cmp	r7, r3
 2417 00b0 C9D2     		bcs	.L306
 2418 00b2 3946     		mov	r1, r7
 2419 00b4 2246     		mov	r2, r4
 2420 00b6 2846     		mov	r0, r5
 2421 00b8 FFF7FEFF 		bl	put_fat.part.8
 2422              	.LVL303:
 2423              	.LBE251:
 2424              	.LBE250:
1102:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clust = ncl;			/* Update FSINFO */
 2425              		.loc 1 1102 0
ARM GAS  /tmp/ccVdKYyy.s 			page 94


 2426 00bc 0028     		cmp	r0, #0
 2427 00be DFD1     		bne	.L316
 2428              	.LVL304:
 2429              	.L319:
1104:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clust--;
 2430              		.loc 1 1104 0
 2431 00c0 D5F81032 		ldr	r3, [r5, #528]
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clust != 0xFFFFFFFF) {
 2432              		.loc 1 1103 0
 2433 00c4 C5F80C42 		str	r4, [r5, #524]
1104:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clust--;
 2434              		.loc 1 1104 0
 2435 00c8 5A1C     		adds	r2, r3, #1
 2436 00ca BDD0     		beq	.L302
1106:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2437              		.loc 1 1106 0
 2438 00cc 95F80522 		ldrb	r2, [r5, #517]	@ zero_extendqisi2
1105:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;
 2439              		.loc 1 1105 0
 2440 00d0 013B     		subs	r3, r3, #1
1106:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2441              		.loc 1 1106 0
 2442 00d2 42F00102 		orr	r2, r2, #1
1105:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;
 2443              		.loc 1 1105 0
 2444 00d6 C5F81032 		str	r3, [r5, #528]
1106:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2445              		.loc 1 1106 0
 2446 00da 85F80522 		strb	r2, [r5, #517]
 2447 00de B3E7     		b	.L302
 2448              		.cfi_endproc
 2449              	.LFE142:
 2451              		.section	.text.dir_next,"ax",%progbits
 2452              		.align	1
 2453              		.p2align 2,,3
 2454              		.syntax unified
 2455              		.thumb
 2456              		.thumb_func
 2457              		.fpu fpv4-sp-d16
 2459              	dir_next:
 2460              	.LFB145:
1205:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst;
 2461              		.loc 1 1205 0
 2462              		.cfi_startproc
 2463              		@ args = 0, pretend = 0, frame = 0
 2464              		@ frame_needed = 0, uses_anonymous_args = 0
 2465              	.LVL305:
 2466 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2467              	.LCFI41:
 2468              		.cfi_def_cfa_offset 32
 2469              		.cfi_offset 4, -32
 2470              		.cfi_offset 5, -28
 2471              		.cfi_offset 6, -24
 2472              		.cfi_offset 7, -20
 2473              		.cfi_offset 8, -16
 2474              		.cfi_offset 9, -12
 2475              		.cfi_offset 10, -8
ARM GAS  /tmp/ccVdKYyy.s 			page 95


 2476              		.cfi_offset 14, -4
1213:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(i & 0xFFFF) || !dp->sect)	/* Report EOT when index has reached 65535 */
 2477              		.loc 1 1213 0
 2478 0004 B0F80642 		ldrh	r4, [r0, #518]
 2479 0008 0134     		adds	r4, r4, #1
 2480              	.LVL306:
1214:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILE;
 2481              		.loc 1 1214 0
 2482 000a A3B2     		uxth	r3, r4
 2483 000c 13B9     		cbnz	r3, .L336
 2484              	.LVL307:
 2485              	.L338:
1215:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2486              		.loc 1 1215 0
 2487 000e 0420     		movs	r0, #4
 2488 0010 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2489              	.LVL308:
 2490              	.L336:
1214:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NO_FILE;
 2491              		.loc 1 1214 0 discriminator 1
 2492 0014 D0F81032 		ldr	r3, [r0, #528]
 2493 0018 002B     		cmp	r3, #0
 2494 001a F8D0     		beq	.L338
1217:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect++;					/* Next sector */
 2495              		.loc 1 1217 0
 2496 001c 14F00F07 		ands	r7, r4, #15
 2497 0020 0E46     		mov	r6, r1
 2498 0022 0546     		mov	r5, r0
 2499 0024 0AD0     		beq	.L339
 2500 0026 D0F80032 		ldr	r3, [r0, #512]
 2501              	.LVL309:
 2502              	.L340:
1257:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = dp->fs->win.d8 + (i % (SS(dp->fs) / SZ_DIRE)) * SZ_DIRE;	/* Current entry in the window 
 2503              		.loc 1 1257 0
 2504 002a A5F80642 		strh	r4, [r5, #518]	@ movhi
1258:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2505              		.loc 1 1258 0
 2506 002e 03EB4713 		add	r3, r3, r7, lsl #5
 2507 0032 C5F81432 		str	r3, [r5, #532]
1260:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2508              		.loc 1 1260 0
 2509 0036 0020     		movs	r0, #0
 2510 0038 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2511              	.LVL310:
 2512              	.L339:
1220:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= dp->fs->n_rootdir)	/* Report EOT if it reached end of static table */
 2513              		.loc 1 1220 0
 2514 003c D0F80C12 		ldr	r1, [r0, #524]
 2515              	.LVL311:
1218:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2516              		.loc 1 1218 0
 2517 0040 0133     		adds	r3, r3, #1
 2518 0042 C0F81032 		str	r3, [r0, #528]
1221:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_NO_FILE;
 2519              		.loc 1 1221 0
 2520 0046 D0F80032 		ldr	r3, [r0, #512]
1220:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= dp->fs->n_rootdir)	/* Report EOT if it reached end of static table */
ARM GAS  /tmp/ccVdKYyy.s 			page 96


 2521              		.loc 1 1220 0
 2522 004a 71B1     		cbz	r1, .L373
1225:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = get_fat(dp->fs, dp->clust);				/* Get next cluster */
 2523              		.loc 1 1225 0
 2524 004c 93F80222 		ldrb	r2, [r3, #514]	@ zero_extendqisi2
 2525 0050 013A     		subs	r2, r2, #1
 2526 0052 12EA1418 		ands	r8, r2, r4, lsr #4
 2527 0056 E8D1     		bne	.L340
 2528              	.LVL312:
 2529              	.LBB252:
 2530              	.LBB253:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 2531              		.loc 1 901 0
 2532 0058 0129     		cmp	r1, #1
 2533 005a 03D9     		bls	.L343
 2534 005c D3F81422 		ldr	r2, [r3, #532]
 2535 0060 9142     		cmp	r1, r2
 2536 0062 07D3     		bcc	.L374
 2537              	.LVL313:
 2538              	.L343:
 2539              	.LBE253:
 2540              	.LBE252:
1227:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 2541              		.loc 1 1227 0
 2542 0064 0220     		movs	r0, #2
 2543 0066 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2544              	.LVL314:
 2545              	.L373:
1221:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_NO_FILE;
 2546              		.loc 1 1221 0
 2547 006a B3F80822 		ldrh	r2, [r3, #520]
 2548 006e 9442     		cmp	r4, r2
 2549 0070 CDD2     		bcs	.L338
 2550 0072 DAE7     		b	.L340
 2551              	.LVL315:
 2552              	.L374:
 2553              	.LBB256:
 2554              	.LBB254:
 2555 0074 1846     		mov	r0, r3
 2556              	.LVL316:
 2557 0076 FFF7FEFF 		bl	get_fat.part.6
 2558              	.LVL317:
 2559              	.LBE254:
 2560              	.LBE256:
1227:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 2561              		.loc 1 1227 0
 2562 007a 0128     		cmp	r0, #1
 2563              	.LBB257:
 2564              	.LBB255:
 2565 007c 8146     		mov	r9, r0
 2566              	.LBE255:
 2567              	.LBE257:
 2568 007e F1D9     		bls	.L343
1228:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= dp->fs->n_fatent) {					/* If it reached end of dynamic table, */
 2569              		.loc 1 1228 0
 2570 0080 B0F1FF3F 		cmp	r0, #-1
 2571 0084 21D0     		beq	.L346
ARM GAS  /tmp/ccVdKYyy.s 			page 97


1229:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 2572              		.loc 1 1229 0
 2573 0086 D5F80032 		ldr	r3, [r5, #512]
 2574 008a D3F81422 		ldr	r2, [r3, #532]
 2575 008e 8242     		cmp	r2, r0
 2576 0090 0FD9     		bls	.L371
 2577 0092 861E     		subs	r6, r0, #2
 2578              	.LVL318:
 2579              	.L345:
 2580              	.LBB258:
 2581              	.LBB259:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 2582              		.loc 1 879 0
 2583 0094 023A     		subs	r2, r2, #2
 2584 0096 9642     		cmp	r6, r2
 2585              	.LBE259:
 2586              	.LBE258:
1251:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = clust2sect(dp->fs, clst);
 2587              		.loc 1 1251 0
 2588 0098 C5F80C92 		str	r9, [r5, #524]
 2589              	.LVL319:
 2590              	.LBB261:
 2591              	.LBB260:
 880:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2592              		.loc 1 880 0
 2593 009c 3BBF     		ittet	cc
 2594 009e 93F80222 		ldrbcc	r2, [r3, #514]	@ zero_extendqisi2
 2595 00a2 D3F82812 		ldrcc	r1, [r3, #552]
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 2596              		.loc 1 879 0
 2597 00a6 0026     		movcs	r6, #0
 2598              	.LVL320:
 880:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2599              		.loc 1 880 0
 2600 00a8 06FB0216 		mlacc	r6, r6, r2, r1
 2601              	.LBE260:
 2602              	.LBE261:
1252:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 2603              		.loc 1 1252 0
 2604 00ac C5F81062 		str	r6, [r5, #528]
 2605 00b0 BBE7     		b	.L340
 2606              	.LVL321:
 2607              	.L371:
1231:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(dp->fs, dp->clust);		/* Stretch cluster chain */
 2608              		.loc 1 1231 0
 2609 00b2 002E     		cmp	r6, #0
 2610 00b4 ABD0     		beq	.L338
1232:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 2611              		.loc 1 1232 0
 2612 00b6 1846     		mov	r0, r3
 2613 00b8 D5F80C12 		ldr	r1, [r5, #524]
 2614 00bc FFF7FEFF 		bl	create_chain
 2615              	.LVL322:
1233:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) return FR_INT_ERR;
 2616              		.loc 1 1233 0
 2617 00c0 8146     		mov	r9, r0
 2618 00c2 28B9     		cbnz	r0, .L375
ARM GAS  /tmp/ccVdKYyy.s 			page 98


 2619 00c4 0720     		movs	r0, #7
 2620              	.LVL323:
1261:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2621              		.loc 1 1261 0
 2622 00c6 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2623              	.LVL324:
 2624              	.L346:
1228:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= dp->fs->n_fatent) {					/* If it reached end of dynamic table, */
 2625              		.loc 1 1228 0
 2626 00ca 0120     		movs	r0, #1
 2627 00cc BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2628              	.LVL325:
 2629              	.L375:
1234:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;
 2630              		.loc 1 1234 0
 2631 00d0 0128     		cmp	r0, #1
 2632 00d2 C7D0     		beq	.L343
1235:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up stretched table */
 2633              		.loc 1 1235 0
 2634 00d4 B0F1FF3F 		cmp	r0, #-1
 2635 00d8 F7D0     		beq	.L346
1237:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dp->fs->win.d8, 0, SS(dp->fs));		/* Clear window buffer */
 2636              		.loc 1 1237 0
 2637 00da D5F80022 		ldr	r2, [r5, #512]
 2638              	.LVL326:
 2639              	.LBB262:
 2640              	.LBB263:
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 2641              		.loc 1 782 0
 2642 00de 92F80432 		ldrb	r3, [r2, #516]	@ zero_extendqisi2
 2643 00e2 CBBB     		cbnz	r3, .L347
 2644              	.LVL327:
 2645              	.L349:
 2646 00e4 02F50071 		add	r1, r2, #512
 2647              	.LBE263:
 2648              	.LBE262:
 2649              	.LBB265:
 2650              	.LBB266:
 601:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2651              		.loc 1 601 0
 2652 00e8 0023     		movs	r3, #0
 2653              	.LVL328:
 2654              	.L348:
 2655 00ea 02F8013B 		strb	r3, [r2], #1
 2656              	.LVL329:
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
 2657              		.loc 1 600 0
 2658 00ee 8A42     		cmp	r2, r1
 2659 00f0 FBD1     		bne	.L348
 2660              	.LVL330:
 2661              	.LBE266:
 2662              	.LBE265:
1239:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (c = 0; c < dp->fs->csize; c++) {		/* Fill the new cluster with 0 */
 2663              		.loc 1 1239 0
 2664 00f2 D5F80022 		ldr	r2, [r5, #512]
 2665              	.LVL331:
 2666              	.LBB267:
ARM GAS  /tmp/ccVdKYyy.s 			page 99


 2667              	.LBB268:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 2668              		.loc 1 879 0
 2669 00f6 D2F81432 		ldr	r3, [r2, #532]
 878:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 2670              		.loc 1 878 0
 2671 00fa A9F10206 		sub	r6, r9, #2
 2672              	.LVL332:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 2673              		.loc 1 879 0
 2674 00fe 023B     		subs	r3, r3, #2
 2675 0100 9E42     		cmp	r6, r3
 880:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2676              		.loc 1 880 0
 2677 0102 3BBF     		ittet	cc
 2678 0104 D2F82832 		ldrcc	r3, [r2, #552]
 2679 0108 92F80212 		ldrbcc	r1, [r2, #514]	@ zero_extendqisi2
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 2680              		.loc 1 879 0
 2681 010c 0023     		movcs	r3, #0
 2682              	.LVL333:
 880:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2683              		.loc 1 880 0
 2684 010e 06FB0133 		mlacc	r3, r6, r1, r3
 2685              	.LBE268:
 2686              	.LBE267:
1239:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (c = 0; c < dp->fs->csize; c++) {		/* Fill the new cluster with 0 */
 2687              		.loc 1 1239 0
 2688 0112 C2F82C32 		str	r3, [r2, #556]
 2689              	.LVL334:
1241:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (sync_window(dp->fs)) return FR_DISK_ERR;
 2690              		.loc 1 1241 0
 2691 0116 4FF0010A 		mov	r10, #1
1240:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->fs->wflag = 1;
 2692              		.loc 1 1240 0
 2693 011a 0EE0     		b	.L351
 2694              	.LVL335:
 2695              	.L352:
1241:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (sync_window(dp->fs)) return FR_DISK_ERR;
 2696              		.loc 1 1241 0
 2697 011c 82F804A2 		strb	r10, [r2, #516]
 2698              	.LVL336:
 2699              	.LBB269:
 2700              	.LBB270:
 2701 0120 FFF7FEFF 		bl	sync_window.part.4
 2702              	.LVL337:
 2703              	.LBE270:
 2704              	.LBE269:
1242:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->fs->winsect++;
 2705              		.loc 1 1242 0
 2706 0124 0028     		cmp	r0, #0
 2707 0126 D0D1     		bne	.L346
1243:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 2708              		.loc 1 1243 0 discriminator 2
 2709 0128 D5F80022 		ldr	r2, [r5, #512]
 2710 012c D2F82C32 		ldr	r3, [r2, #556]
 2711 0130 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccVdKYyy.s 			page 100


1240:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->fs->wflag = 1;
 2712              		.loc 1 1240 0 discriminator 2
 2713 0132 08F10108 		add	r8, r8, #1
 2714              	.LVL338:
1243:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 2715              		.loc 1 1243 0 discriminator 2
 2716 0136 C2F82C32 		str	r3, [r2, #556]
 2717              	.LVL339:
 2718              	.L351:
1240:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->fs->wflag = 1;
 2719              		.loc 1 1240 0 discriminator 1
 2720 013a 92F80212 		ldrb	r1, [r2, #514]	@ zero_extendqisi2
 2721 013e 8845     		cmp	r8, r1
 2722              	.LBB272:
 2723              	.LBB271:
 2724 0140 1046     		mov	r0, r2
 2725              	.LBE271:
 2726              	.LBE272:
 2727 0142 1346     		mov	r3, r2
 2728 0144 EAD3     		bcc	.L352
1245:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 2729              		.loc 1 1245 0
 2730 0146 D2F82C12 		ldr	r1, [r2, #556]
 2731 014a D2F81422 		ldr	r2, [r2, #532]
 2732 014e A1EB0801 		sub	r1, r1, r8
 2733 0152 C0F82C12 		str	r1, [r0, #556]
 2734 0156 9DE7     		b	.L345
 2735              	.LVL340:
 2736              	.L347:
 2737              	.LBB273:
 2738              	.LBB264:
 2739 0158 1046     		mov	r0, r2
 2740              	.LVL341:
 2741 015a FFF7FEFF 		bl	sync_window.part.4
 2742              	.LVL342:
 2743              	.LBE264:
 2744              	.LBE273:
1237:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dp->fs->win.d8, 0, SS(dp->fs));		/* Clear window buffer */
 2745              		.loc 1 1237 0
 2746 015e 0028     		cmp	r0, #0
 2747 0160 B3D1     		bne	.L346
 2748 0162 D5F80022 		ldr	r2, [r5, #512]
 2749 0166 BDE7     		b	.L349
 2750              		.cfi_endproc
 2751              	.LFE145:
 2753              		.section	.text.follow_path,"ax",%progbits
 2754              		.align	1
 2755              		.p2align 2,,3
 2756              		.syntax unified
 2757              		.thumb
 2758              		.thumb_func
 2759              		.fpu fpv4-sp-d16
 2761              	follow_path:
 2762              	.LFB155:
2129:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 2763              		.loc 1 2129 0
 2764              		.cfi_startproc
ARM GAS  /tmp/ccVdKYyy.s 			page 101


 2765              		@ args = 0, pretend = 0, frame = 0
 2766              		@ frame_needed = 0, uses_anonymous_args = 0
 2767              	.LVL343:
 2768 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2769              	.LCFI42:
 2770              		.cfi_def_cfa_offset 32
 2771              		.cfi_offset 4, -32
 2772              		.cfi_offset 5, -28
 2773              		.cfi_offset 6, -24
 2774              		.cfi_offset 7, -20
 2775              		.cfi_offset 8, -16
 2776              		.cfi_offset 9, -12
 2777              		.cfi_offset 10, -8
 2778              		.cfi_offset 14, -4
2141:Middlewares/Third_Party/FatFs/src/ff.c **** 		path++;
 2779              		.loc 1 2141 0
 2780 0004 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 2781 0006 2F2B     		cmp	r3, #47
2129:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 2782              		.loc 1 2129 0
 2783 0008 8846     		mov	r8, r1
 2784 000a 0646     		mov	r6, r0
2141:Middlewares/Third_Party/FatFs/src/ff.c **** 		path++;
 2785              		.loc 1 2141 0
 2786 000c 70D0     		beq	.L377
2141:Middlewares/Third_Party/FatFs/src/ff.c **** 		path++;
 2787              		.loc 1 2141 0 is_stmt 0 discriminator 1
 2788 000e 5C2B     		cmp	r3, #92
 2789 0010 6ED0     		beq	.L377
2143:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2790              		.loc 1 2143 0 is_stmt 1
 2791 0012 0024     		movs	r4, #0
 2792 0014 C6F80842 		str	r4, [r6, #520]
2146:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, 0);
 2793              		.loc 1 2146 0
 2794 0018 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
 2795 001c 1F2B     		cmp	r3, #31
 2796 001e 70D9     		bls	.L455
 2797              	.LVL344:
 2798              	.L379:
 2799 0020 D6F81872 		ldr	r7, [r6, #536]
 2800              	.LBB286:
 2801              	.LBB287:
2075:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 2802              		.loc 1 2075 0
 2803 0024 DFF8E0A1 		ldr	r10, .L463+4
 2804 0028 07F10B05 		add	r5, r7, #11
 2805 002c 01E0     		b	.L381
 2806              	.LVL345:
 2807              	.L382:
 2808 002e 18F8013F 		ldrb	r3, [r8, #1]!	@ zero_extendqisi2
 2809              	.LVL346:
 2810              	.L381:
2047:Middlewares/Third_Party/FatFs/src/ff.c **** 	sfn = dp->fn;
 2811              		.loc 1 2047 0
 2812 0032 2F2B     		cmp	r3, #47
 2813 0034 FBD0     		beq	.L382
ARM GAS  /tmp/ccVdKYyy.s 			page 102


 2814 0036 5C2B     		cmp	r3, #92
 2815 0038 F9D0     		beq	.L382
 2816 003a 3B46     		mov	r3, r7
 2817              	.LBB288:
 2818              	.LBB289:
 601:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2819              		.loc 1 601 0
 2820 003c 2022     		movs	r2, #32
 2821              	.L383:
 2822              	.LVL347:
 2823 003e 03F8012B 		strb	r2, [r3], #1
 2824              	.LVL348:
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
 2825              		.loc 1 600 0
 2826 0042 AB42     		cmp	r3, r5
 2827 0044 FBD1     		bne	.L383
 2828 0046 0020     		movs	r0, #0
 2829 0048 0446     		mov	r4, r0
 2830 004a 8646     		mov	lr, r0
 2831 004c 08F1FF35 		add	r5, r8, #-1
 2832 0050 4FF00809 		mov	r9, #8
 2833              	.LVL349:
 2834              	.L384:
 2835              	.LBE289:
 2836              	.LBE288:
2065:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c <= ' ' || c == '/' || c == '\\') break;	/* Break on end of segment */
 2837              		.loc 1 2065 0
 2838 0054 15F8013F 		ldrb	r3, [r5, #1]!	@ zero_extendqisi2
2066:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '.' || i >= ni) {
 2839              		.loc 1 2066 0
 2840 0058 202B     		cmp	r3, #32
2065:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c <= ' ' || c == '/' || c == '\\') break;	/* Break on end of segment */
 2841              		.loc 1 2065 0
 2842 005a 04F10104 		add	r4, r4, #1
 2843              	.LVL350:
2066:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '.' || i >= ni) {
 2844              		.loc 1 2066 0
 2845 005e 22D9     		bls	.L385
 2846              	.L458:
 2847 0060 2F2B     		cmp	r3, #47
 2848 0062 40D0     		beq	.L386
 2849 0064 5C2B     		cmp	r3, #92
 2850 0066 3ED0     		beq	.L386
2067:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ni != 8 || c != '.') return FR_INVALID_NAME;
 2851              		.loc 1 2067 0
 2852 0068 2E2B     		cmp	r3, #46
 2853 006a 22D0     		beq	.L387
 2854 006c 8145     		cmp	r9, r0
 2855 006e 1DD9     		bls	.L420
2072:Middlewares/Third_Party/FatFs/src/ff.c **** 			b |= 3;						/* Eliminate NT flag */
 2856              		.loc 1 2072 0
 2857 0070 1906     		lsls	r1, r3, #24
 2858 0072 32D4     		bmi	.L456
 2859              	.L390:
 2860              	.LVL351:
 2861              	.LBB290:
 2862              	.LBB291:
ARM GAS  /tmp/ccVdKYyy.s 			page 103


 617:Middlewares/Third_Party/FatFs/src/ff.c **** 	return *str;
 2863              		.loc 1 617 0
 2864 0074 222B     		cmp	r3, #34
 2865 0076 19D0     		beq	.L420
 2866 0078 6249     		ldr	r1, .L463
 2867 007a 2A22     		movs	r2, #42
 2868              	.LVL352:
 2869              	.L392:
 2870 007c 9342     		cmp	r3, r2
 2871 007e 15D0     		beq	.L420
 2872 0080 11F8012F 		ldrb	r2, [r1, #1]!	@ zero_extendqisi2
 2873              	.LVL353:
 2874 0084 002A     		cmp	r2, #0
 2875 0086 F9D1     		bne	.L392
 2876              	.LVL354:
 2877              	.LBE291:
 2878              	.LBE290:
2091:Middlewares/Third_Party/FatFs/src/ff.c **** 				b |= 2;
 2879              		.loc 1 2091 0
 2880 0088 A3F14102 		sub	r2, r3, #65
 2881 008c 192A     		cmp	r2, #25
 2882 008e 1BD8     		bhi	.L457
2092:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 2883              		.loc 1 2092 0
 2884 0090 4EF0020E 		orr	lr, lr, #2
 2885              	.LVL355:
 2886              	.L395:
2098:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2887              		.loc 1 2098 0
 2888 0094 3B54     		strb	r3, [r7, r0]
2065:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c <= ' ' || c == '/' || c == '\\') break;	/* Break on end of segment */
 2889              		.loc 1 2065 0
 2890 0096 15F8013F 		ldrb	r3, [r5, #1]!	@ zero_extendqisi2
 2891              	.LVL356:
2066:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '.' || i >= ni) {
 2892              		.loc 1 2066 0
 2893 009a 202B     		cmp	r3, #32
2098:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2894              		.loc 1 2098 0
 2895 009c 00F10100 		add	r0, r0, #1
 2896              	.LVL357:
2065:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c <= ' ' || c == '/' || c == '\\') break;	/* Break on end of segment */
 2897              		.loc 1 2065 0
 2898 00a0 04F10104 		add	r4, r4, #1
 2899              	.LVL358:
2066:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '.' || i >= ni) {
 2900              		.loc 1 2066 0
 2901 00a4 DCD8     		bhi	.L458
 2902              	.L385:
2101:Middlewares/Third_Party/FatFs/src/ff.c **** 	c = (c <= ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
 2903              		.loc 1 2101 0
 2904 00a6 A044     		add	r8, r8, r4
 2905              	.LVL359:
2102:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2906              		.loc 1 2102 0
 2907 00a8 0423     		movs	r3, #4
 2908              	.LVL360:
ARM GAS  /tmp/ccVdKYyy.s 			page 104


2104:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sfn[0] == DDEM) sfn[0] = RDDEM;	/* When first character collides with DDEM, replace it with RD
 2909              		.loc 1 2104 0
 2910 00aa 90BB     		cbnz	r0, .L459
 2911              	.LVL361:
 2912              	.L420:
2068:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;
 2913              		.loc 1 2068 0
 2914 00ac 0620     		movs	r0, #6
 2915              	.LVL362:
 2916 00ae BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2917              	.LVL363:
 2918              	.L387:
 2919 00b2 B9F1080F 		cmp	r9, #8
 2920 00b6 F9D1     		bne	.L420
 2921              	.LVL364:
2070:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2922              		.loc 1 2070 0
 2923 00b8 4FEA8E0E 		lsl	lr, lr, #2
 2924              	.LVL365:
2069:Middlewares/Third_Party/FatFs/src/ff.c **** 			b <<= 2; continue;
 2925              		.loc 1 2069 0
 2926 00bc 4846     		mov	r0, r9
2070:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2927              		.loc 1 2070 0
 2928 00be 5FFA8EFE 		uxtb	lr, lr
 2929              	.LVL366:
2069:Middlewares/Third_Party/FatFs/src/ff.c **** 			b <<= 2; continue;
 2930              		.loc 1 2069 0
 2931 00c2 4FF00B09 		mov	r9, #11
 2932 00c6 C5E7     		b	.L384
 2933              	.LVL367:
 2934              	.L457:
2094:Middlewares/Third_Party/FatFs/src/ff.c **** 					b |= 1; c -= 0x20;
 2935              		.loc 1 2094 0
 2936 00c8 A3F16102 		sub	r2, r3, #97
 2937 00cc 192A     		cmp	r2, #25
 2938 00ce E1D8     		bhi	.L395
2095:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 2939              		.loc 1 2095 0
 2940 00d0 203B     		subs	r3, r3, #32
 2941              	.LVL368:
 2942 00d2 DBB2     		uxtb	r3, r3
 2943 00d4 4EF0010E 		orr	lr, lr, #1
 2944              	.LVL369:
 2945 00d8 DCE7     		b	.L395
 2946              	.L456:
2075:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 2947              		.loc 1 2075 0
 2948 00da 803B     		subs	r3, r3, #128
 2949              	.LVL370:
2073:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
 2950              		.loc 1 2073 0
 2951 00dc 4EF0030E 		orr	lr, lr, #3
 2952              	.LVL371:
2075:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 2953              		.loc 1 2075 0
 2954 00e0 1AF80330 		ldrb	r3, [r10, r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccVdKYyy.s 			page 105


 2955              	.LVL372:
 2956 00e4 C6E7     		b	.L390
 2957              	.L386:
2101:Middlewares/Third_Party/FatFs/src/ff.c **** 	c = (c <= ' ') ? NS_LAST : 0;		/* Set last segment flag if end of path */
 2958              		.loc 1 2101 0
 2959 00e6 A044     		add	r8, r8, r4
 2960              	.LVL373:
2102:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2961              		.loc 1 2102 0
 2962 00e8 0023     		movs	r3, #0
 2963              	.LVL374:
2104:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sfn[0] == DDEM) sfn[0] = RDDEM;	/* When first character collides with DDEM, replace it with RD
 2964              		.loc 1 2104 0
 2965 00ea 0028     		cmp	r0, #0
 2966 00ec DED0     		beq	.L420
 2967 00ee 10E0     		b	.L459
 2968              	.LVL375:
 2969              	.L377:
 2970              	.LBE287:
 2971              	.LBE286:
2142:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sclust = 0;							/* Always start from the root directory */
 2972              		.loc 1 2142 0
 2973 00f0 08F10108 		add	r8, r8, #1
 2974              	.LVL376:
2143:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2975              		.loc 1 2143 0
 2976 00f4 0024     		movs	r4, #0
 2977 00f6 C6F80842 		str	r4, [r6, #520]
2146:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, 0);
 2978              		.loc 1 2146 0
 2979 00fa 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
 2980 00fe 1F2B     		cmp	r3, #31
 2981 0100 8ED8     		bhi	.L379
 2982              	.L455:
2147:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->dir = 0;
 2983              		.loc 1 2147 0
 2984 0102 2146     		mov	r1, r4
 2985 0104 3046     		mov	r0, r6
 2986              	.LVL377:
 2987 0106 FFF7FEFF 		bl	dir_sdi
 2988              	.LVL378:
2148:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {								/* Follow path */
 2989              		.loc 1 2148 0
 2990 010a C6F81442 		str	r4, [r6, #532]
 2991 010e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2992              	.LVL379:
 2993              	.L459:
 2994              	.LBB293:
 2995              	.LBB292:
2105:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2996              		.loc 1 2105 0
 2997 0112 3A78     		ldrb	r2, [r7]	@ zero_extendqisi2
 2998 0114 E52A     		cmp	r2, #229
 2999 0116 04BF     		itt	eq
 3000 0118 0522     		moveq	r2, #5
 3001 011a 3A70     		strbeq	r2, [r7]
2107:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x03) == 0x01) c |= NS_EXT;	/* NT flag (Name extension has only small capital) */
ARM GAS  /tmp/ccVdKYyy.s 			page 106


 3002              		.loc 1 2107 0
 3003 011c B9F1080F 		cmp	r9, #8
 3004 0120 04BF     		itt	eq
 3005 0122 4FEA8E0E 		lsleq	lr, lr, #2
 3006              	.LVL380:
 3007 0126 5FFA8EFE 		uxtbeq	lr, lr
 3008              	.LVL381:
2108:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x0C) == 0x04) c |= NS_BODY;	/* NT flag (Name body has only small capital) */
 3009              		.loc 1 2108 0
 3010 012a 0EF00302 		and	r2, lr, #3
 3011 012e 012A     		cmp	r2, #1
2109:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3012              		.loc 1 2109 0
 3013 0130 0EF00C0E 		and	lr, lr, #12
 3014              	.LVL382:
2108:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x0C) == 0x04) c |= NS_BODY;	/* NT flag (Name body has only small capital) */
 3015              		.loc 1 2108 0
 3016 0134 08BF     		it	eq
 3017 0136 43F01003 		orreq	r3, r3, #16
 3018              	.LVL383:
2109:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3019              		.loc 1 2109 0
 3020 013a BEF1040F 		cmp	lr, #4
 3021 013e 08BF     		it	eq
 3022 0140 43F00803 		orreq	r3, r3, #8
 3023              	.LVL384:
2111:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3024              		.loc 1 2111 0
 3025 0144 FB72     		strb	r3, [r7, #11]
 3026              	.LVL385:
 3027              	.LBE292:
 3028              	.LBE293:
 3029              	.LBB294:
 3030              	.LBB295:
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
 3031              		.loc 1 1538 0
 3032 0146 0021     		movs	r1, #0
 3033 0148 3046     		mov	r0, r6
 3034 014a FFF7FEFF 		bl	dir_sdi
 3035              	.LVL386:
1539:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3036              		.loc 1 1539 0
 3037 014e 0028     		cmp	r0, #0
 3038 0150 3DD1     		bne	.L400
 3039              	.L406:
1545:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 3040              		.loc 1 1545 0
 3041 0152 D6F81012 		ldr	r1, [r6, #528]
 3042 0156 D6F80002 		ldr	r0, [r6, #512]
 3043              	.LVL387:
 3044 015a FFF7FEFF 		bl	move_window
 3045              	.LVL388:
1546:Middlewares/Third_Party/FatFs/src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
 3046              		.loc 1 1546 0
 3047 015e B0BB     		cbnz	r0, .L400
1547:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dir[DIR_Name];
 3048              		.loc 1 1547 0
ARM GAS  /tmp/ccVdKYyy.s 			page 107


 3049 0160 D6F814E2 		ldr	lr, [r6, #532]
 3050              	.LVL389:
1548:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 3051              		.loc 1 1548 0
 3052 0164 9EF80020 		ldrb	r2, [lr]	@ zero_extendqisi2
 3053              	.LVL390:
1549:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN	/* LFN configuration */
 3054              		.loc 1 1549 0
 3055 0168 AAB3     		cbz	r2, .L414
1572:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3056              		.loc 1 1572 0
 3057 016a 9EF80B90 		ldrb	r9, [lr, #11]	@ zero_extendqisi2
 3058 016e 19F0080F 		tst	r9, #8
 3059 0172 26D1     		bne	.L402
 3060 0174 D6F81872 		ldr	r7, [r6, #536]
 3061              	.LVL391:
 3062 0178 0EF10104 		add	r4, lr, #1
 3063 017c 07F10B05 		add	r5, r7, #11
 3064 0180 3B46     		mov	r3, r7
 3065 0182 01E0     		b	.L403
 3066              	.LVL392:
 3067              	.L460:
 3068 0184 14F8012B 		ldrb	r2, [r4], #1	@ zero_extendqisi2
 3069              	.LVL393:
 3070              	.L403:
 3071              	.LBB296:
 3072              	.LBB297:
 610:Middlewares/Third_Party/FatFs/src/ff.c **** 	return r;
 3073              		.loc 1 610 0
 3074 0188 13F8011B 		ldrb	r1, [r3], #1	@ zero_extendqisi2
 3075              	.LVL394:
 3076 018c 9142     		cmp	r1, r2
 3077 018e 18D1     		bne	.L402
 3078 0190 AB42     		cmp	r3, r5
 3079 0192 F7D1     		bne	.L460
 3080              	.LVL395:
 3081              	.LBE297:
 3082              	.LBE296:
 3083              	.LBE295:
 3084              	.LBE294:
2167:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dp->dir;						/* Follow the sub-directory */
 3085              		.loc 1 2167 0
 3086 0194 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 3087 0196 5A07     		lsls	r2, r3, #29
 3088 0198 2ED4     		bmi	.L461
 3089              	.LVL396:
2169:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_PATH; break;
 3090              		.loc 1 2169 0
 3091 019a 19F0100F 		tst	r9, #16
 3092 019e 1FD0     		beq	.L408
 3093              	.LVL397:
 3094              	.LBB299:
 3095              	.LBB300:
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 3096              		.loc 1 1316 0
 3097 01a0 D6F80032 		ldr	r3, [r6, #512]
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
ARM GAS  /tmp/ccVdKYyy.s 			page 108


 3098              		.loc 1 1315 0
 3099 01a4 9EF81B10 		ldrb	r1, [lr, #27]	@ zero_extendqisi2
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 3100              		.loc 1 1316 0
 3101 01a8 93F80022 		ldrb	r2, [r3, #512]	@ zero_extendqisi2
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 3102              		.loc 1 1315 0
 3103 01ac 9EF81A30 		ldrb	r3, [lr, #26]	@ zero_extendqisi2
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 3104              		.loc 1 1316 0
 3105 01b0 032A     		cmp	r2, #3
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 3106              		.loc 1 1315 0
 3107 01b2 43EA0123 		orr	r3, r3, r1, lsl #8
 3108              	.LVL398:
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 3109              		.loc 1 1316 0
 3110 01b6 16D0     		beq	.L462
 3111              	.L409:
 3112              	.LVL399:
 3113              	.LBE300:
 3114              	.LBE299:
2172:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3115              		.loc 1 2172 0
 3116 01b8 C6F80832 		str	r3, [r6, #520]
 3117              	.LVL400:
 3118 01bc 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
 3119              	.LVL401:
2151:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 3120              		.loc 1 2151 0
 3121 01c0 37E7     		b	.L381
 3122              	.LVL402:
 3123              	.L402:
 3124              	.LBB302:
 3125              	.LBB298:
1575:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (res == FR_OK);
 3126              		.loc 1 1575 0
 3127 01c2 0021     		movs	r1, #0
 3128 01c4 3046     		mov	r0, r6
 3129              	.LVL403:
 3130 01c6 FFF7FEFF 		bl	dir_next
 3131              	.LVL404:
1576:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3132              		.loc 1 1576 0
 3133 01ca 0028     		cmp	r0, #0
 3134 01cc C1D0     		beq	.L406
 3135              	.L400:
 3136              	.LVL405:
 3137              	.LBE298:
 3138              	.LBE302:
2156:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, */
 3139              		.loc 1 2156 0
 3140 01ce 0428     		cmp	r0, #4
 3141 01d0 01D0     		beq	.L414
2177:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3142              		.loc 1 2177 0
 3143 01d2 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
ARM GAS  /tmp/ccVdKYyy.s 			page 109


 3144              	.LVL406:
 3145              	.L414:
2154:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
 3146              		.loc 1 2154 0
 3147 01d6 D6F81832 		ldr	r3, [r6, #536]
 3148 01da DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
2162:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 3149              		.loc 1 2162 0
 3150 01dc 5B07     		lsls	r3, r3, #29
 3151 01de 0DD4     		bmi	.L419
 3152              	.L408:
 3153              	.LVL407:
2162:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 3154              		.loc 1 2162 0 is_stmt 0 discriminator 1
 3155 01e0 0520     		movs	r0, #5
 3156 01e2 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 3157              	.LVL408:
 3158              	.L462:
 3159              	.LBB303:
 3160              	.LBB301:
1317:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3161              		.loc 1 1317 0 is_stmt 1
 3162 01e6 9EF81510 		ldrb	r1, [lr, #21]	@ zero_extendqisi2
 3163 01ea 9EF81420 		ldrb	r2, [lr, #20]	@ zero_extendqisi2
 3164 01ee 42EA0122 		orr	r2, r2, r1, lsl #8
 3165 01f2 43EA0243 		orr	r3, r3, r2, lsl #16
 3166              	.LVL409:
 3167 01f6 DFE7     		b	.L409
 3168              	.LVL410:
 3169              	.L461:
 3170              	.LBE301:
 3171              	.LBE303:
 3172 01f8 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 3173              	.LVL411:
 3174              	.L419:
 3175 01fc 0420     		movs	r0, #4
 3176 01fe BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 3177              	.LVL412:
 3178              	.L464:
 3179 0202 00BF     		.align	2
 3180              	.L463:
 3181 0204 01000000 		.word	.LC0+1
 3182 0208 00000000 		.word	.LANCHOR3
 3183              		.cfi_endproc
 3184              	.LFE155:
 3186              		.section	.text.remove_chain.part.10,"ax",%progbits
 3187              		.align	1
 3188              		.p2align 2,,3
 3189              		.syntax unified
 3190              		.thumb
 3191              		.thumb_func
 3192              		.fpu fpv4-sp-d16
 3194              	remove_chain.part.10:
 3195              	.LFB194:
1010:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,			/* File system object */
 3196              		.loc 1 1010 0
 3197              		.cfi_startproc
ARM GAS  /tmp/ccVdKYyy.s 			page 110


 3198              		@ args = 0, pretend = 0, frame = 0
 3199              		@ frame_needed = 0, uses_anonymous_args = 0
 3200              	.LVL413:
 3201 0000 70B5     		push	{r4, r5, r6, lr}
 3202              	.LCFI43:
 3203              		.cfi_def_cfa_offset 16
 3204              		.cfi_offset 4, -16
 3205              		.cfi_offset 5, -12
 3206              		.cfi_offset 6, -8
 3207              		.cfi_offset 14, -4
1010:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,			/* File system object */
 3208              		.loc 1 1010 0
 3209 0002 0446     		mov	r4, r0
 3210 0004 0D46     		mov	r5, r1
 3211              	.LVL414:
1026:Middlewares/Third_Party/FatFs/src/ff.c **** 			nxt = get_fat(fs, clst);			/* Get cluster status */
 3212              		.loc 1 1026 0
 3213 0006 D4F81432 		ldr	r3, [r4, #532]
 3214 000a 9D42     		cmp	r5, r3
 3215              	.LBB304:
 3216              	.LBB305:
 3217 000c 2946     		mov	r1, r5
 3218 000e 2046     		mov	r0, r4
 3219              	.LBE305:
 3220              	.LBE304:
 3221 0010 29D2     		bcs	.L473
 3222              	.L472:
 3223              	.LBB308:
 3224              	.LBB306:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 3225              		.loc 1 901 0
 3226 0012 012D     		cmp	r5, #1
 3227 0014 0BD9     		bls	.L470
 3228 0016 FFF7FEFF 		bl	get_fat.part.6
 3229              	.LVL415:
 3230              	.LBE306:
 3231              	.LBE308:
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (nxt == 1) { res = FR_INT_ERR; break; }	/* Internal error? */
 3232              		.loc 1 1028 0
 3233 001a 0646     		mov	r6, r0
 3234 001c 18B3     		cbz	r0, .L473
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
 3235              		.loc 1 1029 0
 3236 001e 0128     		cmp	r0, #1
 3237 0020 05D0     		beq	.L470
1030:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, 0);			/* Mark the cluster "empty" */
 3238              		.loc 1 1030 0
 3239 0022 411C     		adds	r1, r0, #1
 3240 0024 21D0     		beq	.L474
 3241              	.LBB309:
 3242              	.LBB310:
 957:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 3243              		.loc 1 957 0
 3244 0026 D4F81432 		ldr	r3, [r4, #532]
 3245 002a 9D42     		cmp	r5, r3
 3246 002c 01D3     		bcc	.L482
 3247              	.LVL416:
ARM GAS  /tmp/ccVdKYyy.s 			page 111


 3248              	.L470:
 3249              	.LBE310:
 3250              	.LBE309:
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (nxt == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }	/* Disk error? */
 3251              		.loc 1 1029 0
 3252 002e 0220     		movs	r0, #2
 3253 0030 70BD     		pop	{r4, r5, r6, pc}
 3254              	.LVL417:
 3255              	.L482:
 3256              	.LBB312:
 3257              	.LBB311:
 3258 0032 2946     		mov	r1, r5
 3259 0034 0022     		movs	r2, #0
 3260 0036 2046     		mov	r0, r4
 3261 0038 FFF7FEFF 		bl	put_fat.part.8
 3262              	.LVL418:
 3263              	.LBE311:
 3264              	.LBE312:
1032:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->free_clust != 0xFFFFFFFF) {	/* Update FSINFO */
 3265              		.loc 1 1032 0
 3266 003c B0B9     		cbnz	r0, .L468
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->free_clust++;
 3267              		.loc 1 1033 0
 3268 003e D4F81032 		ldr	r3, [r4, #528]
 3269 0042 5A1C     		adds	r2, r3, #1
 3270 0044 08D0     		beq	.L471
1035:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3271              		.loc 1 1035 0
 3272 0046 94F80522 		ldrb	r2, [r4, #517]	@ zero_extendqisi2
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->fsi_flag |= 1;
 3273              		.loc 1 1034 0
 3274 004a 0133     		adds	r3, r3, #1
1035:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3275              		.loc 1 1035 0
 3276 004c 42F00102 		orr	r2, r2, #1
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->fsi_flag |= 1;
 3277              		.loc 1 1034 0
 3278 0050 C4F81032 		str	r3, [r4, #528]
1035:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3279              		.loc 1 1035 0
 3280 0054 84F80522 		strb	r2, [r4, #517]
 3281              	.L471:
1026:Middlewares/Third_Party/FatFs/src/ff.c **** 			nxt = get_fat(fs, clst);			/* Get cluster status */
 3282              		.loc 1 1026 0
 3283 0058 D4F81432 		ldr	r3, [r4, #532]
1010:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,			/* File system object */
 3284              		.loc 1 1010 0
 3285 005c 3546     		mov	r5, r6
 3286              	.LVL419:
1026:Middlewares/Third_Party/FatFs/src/ff.c **** 			nxt = get_fat(fs, clst);			/* Get cluster status */
 3287              		.loc 1 1026 0
 3288 005e 9D42     		cmp	r5, r3
 3289              	.LBB313:
 3290              	.LBB307:
 3291 0060 2946     		mov	r1, r5
 3292 0062 2046     		mov	r0, r4
 3293              	.LBE307:
ARM GAS  /tmp/ccVdKYyy.s 			page 112


 3294              	.LBE313:
 3295 0064 D5D3     		bcc	.L472
 3296              	.LVL420:
 3297              	.L473:
1010:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,			/* File system object */
 3298              		.loc 1 1010 0
 3299 0066 0020     		movs	r0, #0
 3300 0068 70BD     		pop	{r4, r5, r6, pc}
 3301              	.LVL421:
 3302              	.L474:
1030:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, 0);			/* Mark the cluster "empty" */
 3303              		.loc 1 1030 0
 3304 006a 0120     		movs	r0, #1
 3305              	.LVL422:
 3306              	.L468:
1052:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 3307              		.loc 1 1052 0
 3308 006c 70BD     		pop	{r4, r5, r6, pc}
 3309              		.cfi_endproc
 3310              	.LFE194:
 3312 006e 00BF     		.section	.text.dir_read.constprop.14,"ax",%progbits
 3313              		.align	1
 3314              		.p2align 2,,3
 3315              		.syntax unified
 3316              		.thumb
 3317              		.thumb_func
 3318              		.fpu fpv4-sp-d16
 3320              	dir_read.constprop.14:
 3321              	.LFB199:
1589:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
 3322              		.loc 1 1589 0
 3323              		.cfi_startproc
 3324              		@ args = 0, pretend = 0, frame = 0
 3325              		@ frame_needed = 0, uses_anonymous_args = 0
 3326              	.LVL423:
 3327 0000 10B5     		push	{r4, lr}
 3328              	.LCFI44:
 3329              		.cfi_def_cfa_offset 8
 3330              		.cfi_offset 4, -8
 3331              		.cfi_offset 14, -4
1589:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
 3332              		.loc 1 1589 0
 3333 0002 0446     		mov	r4, r0
1600:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (dp->sect) {
 3334              		.loc 1 1600 0
 3335 0004 0420     		movs	r0, #4
 3336              	.LVL424:
 3337 0006 1AE0     		b	.L484
 3338              	.L488:
1602:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 3339              		.loc 1 1602 0
 3340 0008 D4F80002 		ldr	r0, [r4, #512]
 3341 000c FFF7FEFF 		bl	move_window
 3342              	.LVL425:
1630:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 3343              		.loc 1 1630 0
 3344 0010 0021     		movs	r1, #0
ARM GAS  /tmp/ccVdKYyy.s 			page 113


1603:Middlewares/Third_Party/FatFs/src/ff.c **** 		dir = dp->dir;					/* Ptr to the directory entry of current index */
 3345              		.loc 1 1603 0
 3346 0012 E8B9     		cbnz	r0, .L485
1604:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dir[DIR_Name];
 3347              		.loc 1 1604 0
 3348 0014 D4F81422 		ldr	r2, [r4, #532]
 3349              	.LVL426:
1605:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 3350              		.loc 1 1605 0
 3351 0018 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 3352              	.LVL427:
1630:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 3353              		.loc 1 1630 0
 3354 001a 2046     		mov	r0, r4
 3355              	.LVL428:
1606:Middlewares/Third_Party/FatFs/src/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
 3356              		.loc 1 1606 0
 3357 001c BBB1     		cbz	r3, .L490
 3358              	.LVL429:
1627:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3359              		.loc 1 1627 0
 3360 001e E52B     		cmp	r3, #229
 3361 0020 0AD0     		beq	.L486
 3362 0022 2E2B     		cmp	r3, #46
 3363 0024 08D0     		beq	.L486
1607:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN	/* LFN configuration */
 3364              		.loc 1 1607 0
 3365 0026 D37A     		ldrb	r3, [r2, #11]	@ zero_extendqisi2
 3366              	.LVL430:
 3367 0028 03F03F03 		and	r3, r3, #63
1627:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3368              		.loc 1 1627 0
 3369 002c 0F2B     		cmp	r3, #15
 3370 002e 23F02002 		bic	r2, r3, #32
 3371              	.LVL431:
 3372 0032 01D0     		beq	.L486
 3373 0034 082A     		cmp	r2, #8
 3374 0036 08D1     		bne	.L489
 3375              	.L486:
1630:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 3376              		.loc 1 1630 0
 3377 0038 FFF7FEFF 		bl	dir_next
 3378              	.LVL432:
1631:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3379              		.loc 1 1631 0
 3380 003c 40B9     		cbnz	r0, .L485
 3381              	.LVL433:
 3382              	.L484:
1601:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 3383              		.loc 1 1601 0
 3384 003e D4F81032 		ldr	r3, [r4, #528]
1602:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 3385              		.loc 1 1602 0
 3386 0042 1946     		mov	r1, r3
1601:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->fs, dp->sect);
 3387              		.loc 1 1601 0
 3388 0044 002B     		cmp	r3, #0
ARM GAS  /tmp/ccVdKYyy.s 			page 114


 3389 0046 DFD1     		bne	.L488
 3390              	.LVL434:
1634:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3391              		.loc 1 1634 0
 3392 0048 10B9     		cbnz	r0, .L485
 3393              	.LVL435:
 3394              	.L489:
1606:Middlewares/Third_Party/FatFs/src/ff.c **** 		a = dir[DIR_Attr] & AM_MASK;
 3395              		.loc 1 1606 0
 3396 004a 0020     		movs	r0, #0
 3397 004c 10BD     		pop	{r4, pc}
 3398              	.LVL436:
 3399              	.L490:
 3400 004e 0420     		movs	r0, #4
 3401              	.LVL437:
 3402              	.L485:
1634:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3403              		.loc 1 1634 0
 3404 0050 0023     		movs	r3, #0
 3405 0052 C4F81032 		str	r3, [r4, #528]
1637:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2 */
 3406              		.loc 1 1637 0
 3407 0056 10BD     		pop	{r4, pc}
 3408              		.cfi_endproc
 3409              	.LFE199:
 3411              		.section	.text.dir_register,"ax",%progbits
 3412              		.align	1
 3413              		.p2align 2,,3
 3414              		.syntax unified
 3415              		.thumb
 3416              		.thumb_func
 3417              		.fpu fpv4-sp-d16
 3419              	dir_register:
 3420              	.LFB151:
1651:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 3421              		.loc 1 1651 0
 3422              		.cfi_startproc
 3423              		@ args = 0, pretend = 0, frame = 0
 3424              		@ frame_needed = 0, uses_anonymous_args = 0
 3425              	.LVL438:
 3426 0000 38B5     		push	{r3, r4, r5, lr}
 3427              	.LCFI45:
 3428              		.cfi_def_cfa_offset 16
 3429              		.cfi_offset 3, -16
 3430              		.cfi_offset 4, -12
 3431              		.cfi_offset 5, -8
 3432              		.cfi_offset 14, -4
 3433              	.LBB322:
 3434              	.LBB323:
1281:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 3435              		.loc 1 1281 0
 3436 0002 0021     		movs	r1, #0
 3437              	.LBE323:
 3438              	.LBE322:
1651:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 3439              		.loc 1 1651 0
 3440 0004 0446     		mov	r4, r0
ARM GAS  /tmp/ccVdKYyy.s 			page 115


 3441              	.LVL439:
 3442              	.LBB326:
 3443              	.LBB324:
1281:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 3444              		.loc 1 1281 0
 3445 0006 FFF7FEFF 		bl	dir_sdi
 3446              	.LVL440:
1282:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = 0;
 3447              		.loc 1 1282 0
 3448 000a 38B1     		cbz	r0, .L513
 3449              	.L508:
1295:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 3450              		.loc 1 1295 0
 3451 000c 0428     		cmp	r0, #4
 3452 000e 08BF     		it	eq
 3453 0010 0720     		moveq	r0, #7
 3454              	.LVL441:
 3455              	.LBE324:
 3456              	.LBE326:
1715:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
 3457              		.loc 1 1715 0
 3458 0012 38BD     		pop	{r3, r4, r5, pc}
 3459              	.LVL442:
 3460              	.L525:
 3461              	.LBB327:
 3462              	.LBB325:
1292:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);
 3463              		.loc 1 1292 0
 3464 0014 FFF7FEFF 		bl	dir_next
 3465              	.LVL443:
1293:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3466              		.loc 1 1293 0
 3467 0018 0028     		cmp	r0, #0
 3468 001a F7D1     		bne	.L508
 3469              	.LVL444:
 3470              	.L513:
1285:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 3471              		.loc 1 1285 0
 3472 001c D4F81012 		ldr	r1, [r4, #528]
 3473 0020 D4F80002 		ldr	r0, [r4, #512]
 3474              	.LVL445:
 3475 0024 FFF7FEFF 		bl	move_window
 3476              	.LVL446:
1286:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dp->dir[0] == DDEM || dp->dir[0] == 0) {	/* Is it a free entry? */
 3477              		.loc 1 1286 0
 3478 0028 0028     		cmp	r0, #0
 3479 002a EFD1     		bne	.L508
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous free entries is found */
 3480              		.loc 1 1287 0
 3481 002c D4F81432 		ldr	r3, [r4, #532]
 3482 0030 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3483 0032 E52B     		cmp	r3, #229
 3484 0034 03D0     		beq	.L512
1292:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);
 3485              		.loc 1 1292 0
 3486 0036 0121     		movs	r1, #1
 3487 0038 2046     		mov	r0, r4
ARM GAS  /tmp/ccVdKYyy.s 			page 116


 3488              	.LVL447:
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous free entries is found */
 3489              		.loc 1 1287 0
 3490 003a 002B     		cmp	r3, #0
 3491 003c EAD1     		bne	.L525
 3492              	.L512:
 3493              	.LVL448:
 3494              	.LBE325:
 3495              	.LBE327:
 3496              	.LBB328:
 3497              	.LBB329:
1703:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 3498              		.loc 1 1703 0
 3499 003e D4F81012 		ldr	r1, [r4, #528]
 3500 0042 D4F80002 		ldr	r0, [r4, #512]
 3501 0046 FFF7FEFF 		bl	move_window
 3502              	.LVL449:
1704:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZ_DIRE);	/* Clean the entry */
 3503              		.loc 1 1704 0
 3504 004a D8B9     		cbnz	r0, .L526
1705:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(dp->dir, dp->fn, 11);	/* Put SFN */
 3505              		.loc 1 1705 0
 3506 004c D4F81432 		ldr	r3, [r4, #532]
 3507              	.LVL450:
 3508              	.LBB330:
 3509              	.LBB331:
 601:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3510              		.loc 1 601 0
 3511 0050 0146     		mov	r1, r0
 3512 0052 03F12002 		add	r2, r3, #32
 3513              	.LVL451:
 3514              	.L514:
 3515 0056 03F8011B 		strb	r1, [r3], #1
 3516              	.LVL452:
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
 3517              		.loc 1 600 0
 3518 005a 9342     		cmp	r3, r2
 3519 005c FBD1     		bne	.L514
 3520              	.LVL453:
 3521              	.LBE331:
 3522              	.LBE330:
1706:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
 3523              		.loc 1 1706 0
 3524 005e D4F81832 		ldr	r3, [r4, #536]
 3525              	.LVL454:
 3526 0062 D4F81422 		ldr	r2, [r4, #532]
 3527 0066 03F10B05 		add	r5, r3, #11
 3528 006a 013A     		subs	r2, r2, #1
 3529              	.LVL455:
 3530              	.L515:
 3531              	.LBB332:
 3532              	.LBB333:
 592:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3533              		.loc 1 592 0
 3534 006c 13F8011B 		ldrb	r1, [r3], #1	@ zero_extendqisi2
 3535              	.LVL456:
 3536 0070 02F8011F 		strb	r1, [r2, #1]!
ARM GAS  /tmp/ccVdKYyy.s 			page 117


 3537              	.LVL457:
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = *s++;
 3538              		.loc 1 591 0
 3539 0074 9D42     		cmp	r5, r3
 3540 0076 F9D1     		bne	.L515
 3541              	.LVL458:
 3542              	.LBE333:
 3543              	.LBE332:
1710:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3544              		.loc 1 1710 0
 3545 0078 D4F80032 		ldr	r3, [r4, #512]
 3546 007c 0122     		movs	r2, #1
 3547 007e 83F80422 		strb	r2, [r3, #516]
 3548 0082 38BD     		pop	{r3, r4, r5, pc}
 3549              	.LVL459:
 3550              	.L526:
 3551 0084 38BD     		pop	{r3, r4, r5, pc}
 3552              	.LBE329:
 3553              	.LBE328:
 3554              		.cfi_endproc
 3555              	.LFE151:
 3557 0086 00BF     		.section	.text.clust2sect,"ax",%progbits
 3558              		.align	1
 3559              		.p2align 2,,3
 3560              		.global	clust2sect
 3561              		.syntax unified
 3562              		.thumb
 3563              		.thumb_func
 3564              		.fpu fpv4-sp-d16
 3566              	clust2sect:
 3567              	.LFB138:
 877:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst -= 2;
 3568              		.loc 1 877 0
 3569              		.cfi_startproc
 3570              		@ args = 0, pretend = 0, frame = 0
 3571              		@ frame_needed = 0, uses_anonymous_args = 0
 3572              		@ link register save eliminated.
 3573              	.LVL460:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 3574              		.loc 1 879 0
 3575 0000 D0F81432 		ldr	r3, [r0, #532]
 878:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 3576              		.loc 1 878 0
 3577 0004 0239     		subs	r1, r1, #2
 3578              	.LVL461:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 3579              		.loc 1 879 0
 3580 0006 023B     		subs	r3, r3, #2
 3581 0008 9942     		cmp	r1, r3
 880:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3582              		.loc 1 880 0
 3583 000a 3DBF     		ittte	cc
 3584 000c 90F80232 		ldrbcc	r3, [r0, #514]	@ zero_extendqisi2
 3585 0010 D0F82802 		ldrcc	r0, [r0, #552]
 3586              	.LVL462:
 3587 0014 01FB0300 		mlacc	r0, r1, r3, r0
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
ARM GAS  /tmp/ccVdKYyy.s 			page 118


 3588              		.loc 1 879 0
 3589 0018 0020     		movcs	r0, #0
 881:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3590              		.loc 1 881 0
 3591 001a 7047     		bx	lr
 3592              		.cfi_endproc
 3593              	.LFE138:
 3595              		.section	.text.get_fat,"ax",%progbits
 3596              		.align	1
 3597              		.p2align 2,,3
 3598              		.global	get_fat
 3599              		.syntax unified
 3600              		.thumb
 3601              		.thumb_func
 3602              		.fpu fpv4-sp-d16
 3604              	get_fat:
 3605              	.LFB139:
 895:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wc, bc;
 3606              		.loc 1 895 0
 3607              		.cfi_startproc
 3608              		@ args = 0, pretend = 0, frame = 0
 3609              		@ frame_needed = 0, uses_anonymous_args = 0
 3610              		@ link register save eliminated.
 3611              	.LVL463:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 3612              		.loc 1 901 0
 3613 0000 0129     		cmp	r1, #1
 3614 0002 05D9     		bls	.L530
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 3615              		.loc 1 901 0 is_stmt 0 discriminator 1
 3616 0004 D0F81422 		ldr	r2, [r0, #532]
 3617 0008 9142     		cmp	r1, r2
 3618 000a 01D2     		bcs	.L530
 3619 000c FFF7FEBF 		b	get_fat.part.6
 3620              	.LVL464:
 3621              	.L530:
 935:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3622              		.loc 1 935 0 is_stmt 1
 3623 0010 0120     		movs	r0, #1
 3624              	.LVL465:
 3625 0012 7047     		bx	lr
 3626              		.cfi_endproc
 3627              	.LFE139:
 3629              		.section	.text.put_fat,"ax",%progbits
 3630              		.align	1
 3631              		.p2align 2,,3
 3632              		.global	put_fat
 3633              		.syntax unified
 3634              		.thumb
 3635              		.thumb_func
 3636              		.fpu fpv4-sp-d16
 3638              	put_fat:
 3639              	.LFB140:
 951:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bc;
 3640              		.loc 1 951 0
 3641              		.cfi_startproc
 3642              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccVdKYyy.s 			page 119


 3643              		@ frame_needed = 0, uses_anonymous_args = 0
 3644              		@ link register save eliminated.
 3645              	.LVL466:
 957:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 3646              		.loc 1 957 0
 3647 0000 0129     		cmp	r1, #1
 3648 0002 08D9     		bls	.L539
 951:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bc;
 3649              		.loc 1 951 0 discriminator 1
 3650 0004 10B4     		push	{r4}
 3651              	.LCFI46:
 3652              		.cfi_def_cfa_offset 4
 3653              		.cfi_offset 4, -4
 957:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 3654              		.loc 1 957 0 discriminator 1
 3655 0006 D0F81442 		ldr	r4, [r0, #532]
 3656 000a A142     		cmp	r1, r4
 3657 000c 05D3     		bcc	.L542
 999:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
 3658              		.loc 1 999 0
 3659 000e 0220     		movs	r0, #2
 3660              	.LVL467:
 3661 0010 5DF8044B 		ldr	r4, [sp], #4
 3662              	.LCFI47:
 3663              		.cfi_restore 4
 3664              		.cfi_def_cfa_offset 0
 3665 0014 7047     		bx	lr
 3666              	.LVL468:
 3667              	.L539:
 3668 0016 0220     		movs	r0, #2
 3669              	.LVL469:
 3670 0018 7047     		bx	lr
 3671              	.LVL470:
 3672              	.L542:
 3673              	.LCFI48:
 3674              		.cfi_def_cfa_offset 4
 3675              		.cfi_offset 4, -4
 3676 001a 5DF8044B 		ldr	r4, [sp], #4
 3677              	.LCFI49:
 3678              		.cfi_restore 4
 3679              		.cfi_def_cfa_offset 0
 3680 001e FFF7FEBF 		b	put_fat.part.8
 3681              	.LVL471:
 3682              		.cfi_endproc
 3683              	.LFE140:
 3685 0022 00BF     		.section	.text.f_mount,"ax",%progbits
 3686              		.align	1
 3687              		.p2align 2,,3
 3688              		.global	f_mount
 3689              		.syntax unified
 3690              		.thumb
 3691              		.thumb_func
 3692              		.fpu fpv4-sp-d16
 3694              	f_mount:
 3695              	.LFB160:
2459:Middlewares/Third_Party/FatFs/src/ff.c **** 
2460:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccVdKYyy.s 			page 120


2461:Middlewares/Third_Party/FatFs/src/ff.c **** 
2462:Middlewares/Third_Party/FatFs/src/ff.c **** 
2463:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------------------------
2464:Middlewares/Third_Party/FatFs/src/ff.c **** 
2465:Middlewares/Third_Party/FatFs/src/ff.c ****    Public Functions
2466:Middlewares/Third_Party/FatFs/src/ff.c **** 
2467:Middlewares/Third_Party/FatFs/src/ff.c **** --------------------------------------------------------------------------*/
2468:Middlewares/Third_Party/FatFs/src/ff.c **** 
2469:Middlewares/Third_Party/FatFs/src/ff.c **** 
2470:Middlewares/Third_Party/FatFs/src/ff.c **** 
2471:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2472:Middlewares/Third_Party/FatFs/src/ff.c **** /* Mount/Unmount a Logical Drive                                         */
2473:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2474:Middlewares/Third_Party/FatFs/src/ff.c **** 
2475:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_mount (
2476:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,			/* Pointer to the file system object (NULL:unmount)*/
2477:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Logical drive number to be mounted/unmounted */
2478:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE opt			/* 0:Do not mount (delayed mount), 1:Mount immediately */
2479:Middlewares/Third_Party/FatFs/src/ff.c **** )
2480:Middlewares/Third_Party/FatFs/src/ff.c **** {
 3696              		.loc 1 2480 0
 3697              		.cfi_startproc
 3698              		@ args = 0, pretend = 0, frame = 16
 3699              		@ frame_needed = 0, uses_anonymous_args = 0
 3700              	.LVL472:
 3701 0000 30B5     		push	{r4, r5, lr}
 3702              	.LCFI50:
 3703              		.cfi_def_cfa_offset 12
 3704              		.cfi_offset 4, -12
 3705              		.cfi_offset 5, -8
 3706              		.cfi_offset 14, -4
 3707 0002 85B0     		sub	sp, sp, #20
 3708              	.LCFI51:
 3709              		.cfi_def_cfa_offset 32
2481:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *cfs;
2482:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
2483:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2484:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *rp = path;
 3710              		.loc 1 2484 0
 3711 0004 04AB     		add	r3, sp, #16
2480:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *cfs;
 3712              		.loc 1 2480 0
 3713 0006 0190     		str	r0, [sp, #4]
 3714              		.loc 1 2484 0
 3715 0008 43F8041D 		str	r1, [r3, #-4]!
2485:Middlewares/Third_Party/FatFs/src/ff.c **** 
2486:Middlewares/Third_Party/FatFs/src/ff.c **** 
2487:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&rp);
 3716              		.loc 1 2487 0
 3717 000c 1846     		mov	r0, r3
 3718              	.LVL473:
2480:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *cfs;
 3719              		.loc 1 2480 0
 3720 000e 0091     		str	r1, [sp]
 3721 0010 1546     		mov	r5, r2
 3722              		.loc 1 2487 0
 3723 0012 FFF7FEFF 		bl	get_ldnumber
ARM GAS  /tmp/ccVdKYyy.s 			page 121


 3724              	.LVL474:
2488:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 3725              		.loc 1 2488 0
 3726 0016 011E     		subs	r1, r0, #0
 3727 0018 1CDB     		blt	.L549
2489:Middlewares/Third_Party/FatFs/src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
 3728              		.loc 1 2489 0
 3729 001a 154C     		ldr	r4, .L557
 3730 001c 54F82130 		ldr	r3, [r4, r1, lsl #2]
 3731              	.LVL475:
2490:Middlewares/Third_Party/FatFs/src/ff.c **** 
2491:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (cfs) {
 3732              		.loc 1 2491 0
 3733 0020 6BB1     		cbz	r3, .L545
 3734              	.LVL476:
 3735              	.LBB334:
 3736              	.LBB335:
 760:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3737              		.loc 1 760 0
 3738 0022 144A     		ldr	r2, .L557+4
 3739 0024 1068     		ldr	r0, [r2]
 3740              	.LVL477:
 3741 0026 8342     		cmp	r3, r0
 3742 0028 04BF     		itt	eq
 3743 002a 0020     		moveq	r0, #0
 3744 002c 1060     		streq	r0, [r2]
 3745              	.LVL478:
 3746 002e D068     		ldr	r0, [r2, #12]
 3747 0030 8342     		cmp	r3, r0
 3748 0032 04BF     		itt	eq
 3749 0034 0020     		moveq	r0, #0
 3750 0036 D060     		streq	r0, [r2, #12]
 3751              	.LVL479:
 3752              	.LBE335:
 3753              	.LBE334:
2492:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
2493:Middlewares/Third_Party/FatFs/src/ff.c **** 		clear_lock(cfs);
2494:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2495:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT						/* Discard sync object of the current volume */
2496:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ff_del_syncobj(cfs->sobj)) return FR_INT_ERR;
2497:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2498:Middlewares/Third_Party/FatFs/src/ff.c **** 		cfs->fs_type = 0;				/* Clear old fs object */
 3754              		.loc 1 2498 0
 3755 0038 0022     		movs	r2, #0
 3756 003a 83F80022 		strb	r2, [r3, #512]
 3757              	.L545:
2499:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2500:Middlewares/Third_Party/FatFs/src/ff.c **** 
2501:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs) {
 3758              		.loc 1 2501 0
 3759 003e 019A     		ldr	r2, [sp, #4]
 3760 0040 92B1     		cbz	r2, .L548
2502:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fs_type = 0;				/* Clear new fs object */
 3761              		.loc 1 2502 0
 3762 0042 0020     		movs	r0, #0
2503:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT						/* Create sync object for the new volume */
2504:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ff_cre_syncobj((BYTE)vol, &fs->sobj)) return FR_INT_ERR;
ARM GAS  /tmp/ccVdKYyy.s 			page 122


2505:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2506:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2507:Middlewares/Third_Party/FatFs/src/ff.c **** 	FatFs[vol] = fs;					/* Register new fs object */
2508:Middlewares/Third_Party/FatFs/src/ff.c **** 
2509:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs || opt != 1) return FR_OK;	/* Do not mount now, it will be mounted later */
 3763              		.loc 1 2509 0
 3764 0044 012D     		cmp	r5, #1
2507:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3765              		.loc 1 2507 0
 3766 0046 44F82120 		str	r2, [r4, r1, lsl #2]
2502:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fs_type = 0;				/* Clear new fs object */
 3767              		.loc 1 2502 0
 3768 004a 82F80002 		strb	r0, [r2, #512]
 3769              		.loc 1 2509 0
 3770 004e 04D0     		beq	.L556
 3771              	.L554:
2510:Middlewares/Third_Party/FatFs/src/ff.c **** 
2511:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&fs, &path, 0);	/* Force mounted the volume */
2512:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
2513:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3772              		.loc 1 2513 0
 3773 0050 05B0     		add	sp, sp, #20
 3774              	.LCFI52:
 3775              		.cfi_remember_state
 3776              		.cfi_def_cfa_offset 12
 3777              		@ sp needed
 3778 0052 30BD     		pop	{r4, r5, pc}
 3779              	.LVL480:
 3780              	.L549:
 3781              	.LCFI53:
 3782              		.cfi_restore_state
2488:Middlewares/Third_Party/FatFs/src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
 3783              		.loc 1 2488 0
 3784 0054 0B20     		movs	r0, #11
 3785              	.LVL481:
 3786              		.loc 1 2513 0
 3787 0056 05B0     		add	sp, sp, #20
 3788              	.LCFI54:
 3789              		.cfi_remember_state
 3790              		.cfi_def_cfa_offset 12
 3791              		@ sp needed
 3792 0058 30BD     		pop	{r4, r5, pc}
 3793              	.LVL482:
 3794              	.L556:
 3795              	.LCFI55:
 3796              		.cfi_restore_state
2511:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
 3797              		.loc 1 2511 0
 3798 005a 0246     		mov	r2, r0
 3799 005c 6946     		mov	r1, sp
 3800              	.LVL483:
 3801 005e 01A8     		add	r0, sp, #4
 3802 0060 FFF7FEFF 		bl	find_volume
 3803              	.LVL484:
 3804              		.loc 1 2513 0
 3805 0064 05B0     		add	sp, sp, #20
 3806              	.LCFI56:
ARM GAS  /tmp/ccVdKYyy.s 			page 123


 3807              		.cfi_remember_state
 3808              		.cfi_def_cfa_offset 12
 3809              		@ sp needed
 3810 0066 30BD     		pop	{r4, r5, pc}
 3811              	.LVL485:
 3812              	.L548:
 3813              	.LCFI57:
 3814              		.cfi_restore_state
2507:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3815              		.loc 1 2507 0
 3816 0068 44F82120 		str	r2, [r4, r1, lsl #2]
2509:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3817              		.loc 1 2509 0
 3818 006c 1046     		mov	r0, r2
 3819 006e EFE7     		b	.L554
 3820              	.L558:
 3821              		.align	2
 3822              	.L557:
 3823 0070 00000000 		.word	.LANCHOR1
 3824 0074 00000000 		.word	.LANCHOR0
 3825              		.cfi_endproc
 3826              	.LFE160:
 3828              		.section	.text.f_open,"ax",%progbits
 3829              		.align	1
 3830              		.p2align 2,,3
 3831              		.global	f_open
 3832              		.syntax unified
 3833              		.thumb
 3834              		.thumb_func
 3835              		.fpu fpv4-sp-d16
 3837              	f_open:
 3838              	.LFB161:
2514:Middlewares/Third_Party/FatFs/src/ff.c **** 
2515:Middlewares/Third_Party/FatFs/src/ff.c **** 
2516:Middlewares/Third_Party/FatFs/src/ff.c **** 
2517:Middlewares/Third_Party/FatFs/src/ff.c **** 
2518:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2519:Middlewares/Third_Party/FatFs/src/ff.c **** /* Open or Create a File                                                 */
2520:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2521:Middlewares/Third_Party/FatFs/src/ff.c **** 
2522:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_open (
2523:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,			/* Pointer to the blank file object */
2524:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file name */
2525:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE mode			/* Access mode and file open mode flags */
2526:Middlewares/Third_Party/FatFs/src/ff.c **** )
2527:Middlewares/Third_Party/FatFs/src/ff.c **** {
 3839              		.loc 1 2527 0
 3840              		.cfi_startproc
 3841              		@ args = 0, pretend = 0, frame = 568
 3842              		@ frame_needed = 0, uses_anonymous_args = 0
 3843              	.LVL486:
 3844 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 3845              	.LCFI58:
 3846              		.cfi_def_cfa_offset 28
 3847              		.cfi_offset 4, -28
 3848              		.cfi_offset 5, -24
 3849              		.cfi_offset 6, -20
ARM GAS  /tmp/ccVdKYyy.s 			page 124


 3850              		.cfi_offset 7, -16
 3851              		.cfi_offset 8, -12
 3852              		.cfi_offset 9, -8
 3853              		.cfi_offset 14, -4
 3854 0004 ADF50F7D 		sub	sp, sp, #572
 3855              	.LCFI59:
 3856              		.cfi_def_cfa_offset 600
 3857              		.loc 1 2527 0
 3858 0008 0191     		str	r1, [sp, #4]
2528:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2529:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
2530:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
2531:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
2532:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
2533:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dw, cl;
2534:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2535:Middlewares/Third_Party/FatFs/src/ff.c **** 
2536:Middlewares/Third_Party/FatFs/src/ff.c **** 
2537:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fp) return FR_INVALID_OBJECT;
 3859              		.loc 1 2537 0
 3860 000a 0028     		cmp	r0, #0
 3861 000c 32D0     		beq	.L583
2538:Middlewares/Third_Party/FatFs/src/ff.c **** 	fp->fs = 0;			/* Clear file object */
 3862              		.loc 1 2538 0
 3863 000e 0023     		movs	r3, #0
 3864 0010 C0F80032 		str	r3, [r0, #512]
 3865              	.LVL487:
 3866 0014 0546     		mov	r5, r0
 3867 0016 1446     		mov	r4, r2
2539:Middlewares/Third_Party/FatFs/src/ff.c **** 
2540:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
2541:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
2542:Middlewares/Third_Party/FatFs/src/ff.c **** 	mode &= FA_READ | FA_WRITE | FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW;
2543:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, (BYTE)(mode & ~FA_READ));
 3868              		.loc 1 2543 0
 3869 0018 01A9     		add	r1, sp, #4
 3870              	.LVL488:
 3871 001a 02F01E02 		and	r2, r2, #30
 3872              	.LVL489:
 3873 001e 86A8     		add	r0, sp, #536
 3874              	.LVL490:
 3875 0020 FFF7FEFF 		bl	find_volume
 3876              	.LVL491:
2544:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2545:Middlewares/Third_Party/FatFs/src/ff.c **** 	mode &= FA_READ;
2546:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, 0);
2547:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2548:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 3877              		.loc 1 2548 0
 3878 0024 0646     		mov	r6, r0
 3879 0026 20B1     		cbz	r0, .L617
 3880              	.LVL492:
 3881              	.L593:
2549:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
2550:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
2551:Middlewares/Third_Party/FatFs/src/ff.c **** 		dir = dj.dir;
2552:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
ARM GAS  /tmp/ccVdKYyy.s 			page 125


2553:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
2554:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir)	/* Default directory itself */
2555:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
2556:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
2557:Middlewares/Third_Party/FatFs/src/ff.c **** 			else
2558:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = chk_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
2559:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2560:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2561:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create or Open a file */
2562:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (mode & (FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW)) {
2563:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
2564:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE)			/* There is no file to open, create a new entry */
2565:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
2566:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = enq_lock() ? dir_register(&dj) : FR_TOO_MANY_OPEN_FILES;
2567:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2568:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&dj);
2569:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2570:Middlewares/Third_Party/FatFs/src/ff.c **** 				mode |= FA_CREATE_ALWAYS;		/* File is created */
2571:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = dj.dir;					/* New entry */
2572:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2573:Middlewares/Third_Party/FatFs/src/ff.c **** 			else {								/* Any object is already existing */
2574:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dir[DIR_Attr] & (AM_RDO | AM_DIR)) {	/* Cannot overwrite it (R/O or DIR) */
2575:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;
2576:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
2577:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (mode & FA_CREATE_NEW)	/* Cannot create as new file */
2578:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_EXIST;
2579:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2580:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2581:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && (mode & FA_CREATE_ALWAYS)) {	/* Truncate it if overwrite mode */
2582:Middlewares/Third_Party/FatFs/src/ff.c **** 				dw = GET_FATTIME();				/* Created time */
2583:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_CrtTime, dw);
2584:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] = 0;				/* Reset attribute */
2585:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_FileSize, 0);/* size = 0 */
2586:Middlewares/Third_Party/FatFs/src/ff.c **** 				cl = ld_clust(dj.fs, dir);		/* Get start cluster */
2587:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, 0);				/* cluster = 0 */
2588:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.fs->wflag = 1;
2589:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (cl) {						/* Remove the cluster chain if exist */
2590:Middlewares/Third_Party/FatFs/src/ff.c **** 					dw = dj.fs->winsect;
2591:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = remove_chain(dj.fs, cl);
2592:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
2593:Middlewares/Third_Party/FatFs/src/ff.c **** 						dj.fs->last_clust = cl - 1;	/* Reuse the cluster hole */
2594:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = move_window(dj.fs, dw);
2595:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2596:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2597:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2598:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2599:Middlewares/Third_Party/FatFs/src/ff.c **** 		else {	/* Open an existing file */
2600:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {					/* Follow succeeded */
2601:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dir[DIR_Attr] & AM_DIR) {	/* It is a directory */
2602:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
2603:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
2604:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((mode & FA_WRITE) && (dir[DIR_Attr] & AM_RDO)) /* R/O violation */
2605:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
2606:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2607:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2608:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2609:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
ARM GAS  /tmp/ccVdKYyy.s 			page 126


2610:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
2611:Middlewares/Third_Party/FatFs/src/ff.c **** 				mode |= FA__WRITTEN;
2612:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_sect = dj.fs->winsect;		/* Pointer to the directory entry */
2613:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_ptr = dir;
2614:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
2615:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->lockid = inc_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
2616:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!fp->lockid) res = FR_INT_ERR;
2617:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2618:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2619:Middlewares/Third_Party/FatFs/src/ff.c **** 
2620:Middlewares/Third_Party/FatFs/src/ff.c **** #else				/* R/O configuration */
2621:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {					/* Follow succeeded */
2622:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dj.dir;
2623:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir) {						/* Current directory itself */
2624:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
2625:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
2626:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dir[DIR_Attr] & AM_DIR)	/* It is a directory */
2627:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
2628:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2629:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2630:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2631:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
2632:Middlewares/Third_Party/FatFs/src/ff.c **** 
2633:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
2634:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag = mode;					/* File access mode */
2635:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->err = 0;						/* Clear error flag */
2636:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sclust = ld_clust(dj.fs, dir);	/* File start cluster */
2637:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fsize = LD_DWORD(dir + DIR_FileSize);	/* File size */
2638:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = 0;						/* File pointer */
2639:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dsect = 0;
2640:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
2641:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->cltbl = 0;						/* Normal seek mode */
2642:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2643:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fs = dj.fs;	 					/* Validate file object */
2644:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->id = fp->fs->id;
2645:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2646:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2647:Middlewares/Third_Party/FatFs/src/ff.c **** 
2648:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
2649:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3882              		.loc 1 2649 0
 3883 0028 3046     		mov	r0, r6
 3884 002a 0DF50F7D 		add	sp, sp, #572
 3885              	.LCFI60:
 3886              		.cfi_remember_state
 3887              		.cfi_def_cfa_offset 28
 3888              		@ sp needed
 3889 002e BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 3890              	.LVL493:
 3891              	.L617:
 3892              	.LCFI61:
 3893              		.cfi_restore_state
2549:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
 3894              		.loc 1 2549 0
 3895 0032 03AB     		add	r3, sp, #12
2550:Middlewares/Third_Party/FatFs/src/ff.c **** 		dir = dj.dir;
 3896              		.loc 1 2550 0
ARM GAS  /tmp/ccVdKYyy.s 			page 127


 3897 0034 0199     		ldr	r1, [sp, #4]
2549:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
 3898              		.loc 1 2549 0
 3899 0036 8C93     		str	r3, [sp, #560]
2550:Middlewares/Third_Party/FatFs/src/ff.c **** 		dir = dj.dir;
 3900              		.loc 1 2550 0
 3901 0038 06A8     		add	r0, sp, #24
 3902              	.LVL494:
 3903 003a FFF7FEFF 		bl	follow_path
 3904              	.LVL495:
2542:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, (BYTE)(mode & ~FA_READ));
 3905              		.loc 1 2542 0
 3906 003e 04F01F08 		and	r8, r4, #31
2551:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
 3907              		.loc 1 2551 0
 3908 0042 8B9F     		ldr	r7, [sp, #556]
 3909              	.LVL496:
2553:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir)	/* Default directory itself */
 3910              		.loc 1 2553 0
 3911 0044 E0B9     		cbnz	r0, .L561
2554:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 3912              		.loc 1 2554 0
 3913 0046 002F     		cmp	r7, #0
 3914 0048 00F08980 		beq	.L562
2558:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 3915              		.loc 1 2558 0
 3916 004c 38F00109 		bics	r9, r8, #1
 3917 0050 14BF     		ite	ne
 3918 0052 0121     		movne	r1, #1
 3919 0054 0021     		moveq	r1, #0
 3920 0056 06A8     		add	r0, sp, #24
 3921              	.LVL497:
 3922 0058 FFF7FEFF 		bl	chk_lock
 3923              	.LVL498:
2562:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
 3924              		.loc 1 2562 0
 3925 005c 14F01C0F 		tst	r4, #28
 3926 0060 15D0     		beq	.L563
2563:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE)			/* There is no file to open, create a new entry */
 3927              		.loc 1 2563 0
 3928 0062 80B9     		cbnz	r0, .L582
2574:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;
 3929              		.loc 1 2574 0
 3930 0064 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 3931 0066 13F0110F 		tst	r3, #17
 3932 006a 32D1     		bne	.L591
2577:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_EXIST;
 3933              		.loc 1 2577 0
 3934 006c 6107     		lsls	r1, r4, #29
 3935 006e 68D5     		bpl	.L577
2578:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 3936              		.loc 1 2578 0
 3937 0070 0826     		movs	r6, #8
 3938 0072 D9E7     		b	.L593
 3939              	.LVL499:
 3940              	.L583:
2537:Middlewares/Third_Party/FatFs/src/ff.c **** 	fp->fs = 0;			/* Clear file object */
ARM GAS  /tmp/ccVdKYyy.s 			page 128


 3941              		.loc 1 2537 0
 3942 0074 0926     		movs	r6, #9
 3943              		.loc 1 2649 0
 3944 0076 3046     		mov	r0, r6
 3945              	.LVL500:
 3946 0078 0DF50F7D 		add	sp, sp, #572
 3947              	.LCFI62:
 3948              		.cfi_remember_state
 3949              		.cfi_def_cfa_offset 28
 3950              		@ sp needed
 3951 007c BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 3952              	.LVL501:
 3953              	.L561:
 3954              	.LCFI63:
 3955              		.cfi_restore_state
2562:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
 3956              		.loc 1 2562 0
 3957 0080 14F01C0F 		tst	r4, #28
 3958 0084 01D0     		beq	.L566
 3959              	.L582:
2564:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
 3960              		.loc 1 2564 0
 3961 0086 0428     		cmp	r0, #4
 3962 0088 27D0     		beq	.L618
 3963              	.LVL502:
 3964              	.L566:
2575:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 3965              		.loc 1 2575 0
 3966 008a 0646     		mov	r6, r0
 3967 008c CCE7     		b	.L593
 3968              	.LVL503:
 3969              	.L563:
2600:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dir[DIR_Attr] & AM_DIR) {	/* It is a directory */
 3970              		.loc 1 2600 0
 3971 008e 0028     		cmp	r0, #0
 3972 0090 FBD1     		bne	.L566
2601:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
 3973              		.loc 1 2601 0
 3974 0092 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 3975 0094 DA06     		lsls	r2, r3, #27
 3976 0096 1ED4     		bmi	.L590
2604:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
 3977              		.loc 1 2604 0
 3978 0098 A007     		lsls	r0, r4, #30
 3979              	.LVL504:
 3980 009a 01D5     		bpl	.L574
2604:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
 3981              		.loc 1 2604 0 is_stmt 0 discriminator 1
 3982 009c D907     		lsls	r1, r3, #31
 3983 009e 18D4     		bmi	.L591
 3984              	.L574:
2610:Middlewares/Third_Party/FatFs/src/ff.c **** 				mode |= FA__WRITTEN;
 3985              		.loc 1 2610 0 is_stmt 1
 3986 00a0 2207     		lsls	r2, r4, #28
 3987 00a2 869B     		ldr	r3, [sp, #536]
 3988 00a4 03D5     		bpl	.L569
 3989              	.LVL505:
ARM GAS  /tmp/ccVdKYyy.s 			page 129


 3990              	.L581:
2611:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_sect = dj.fs->winsect;		/* Pointer to the directory entry */
 3991              		.loc 1 2611 0
 3992 00a6 48F02008 		orr	r8, r8, #32
 3993              	.LVL506:
 3994 00aa 28F00109 		bic	r9, r8, #1
 3995              	.LVL507:
 3996              	.L569:
2612:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_ptr = dir;
 3997              		.loc 1 2612 0
 3998 00ae D3F82C32 		ldr	r3, [r3, #556]
 3999 00b2 C5F81C32 		str	r3, [r5, #540]
2615:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!fp->lockid) res = FR_INT_ERR;
 4000              		.loc 1 2615 0
 4001 00b6 19F10001 		adds	r1, r9, #0
2613:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
 4002              		.loc 1 2613 0
 4003 00ba C5F82072 		str	r7, [r5, #544]
2615:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!fp->lockid) res = FR_INT_ERR;
 4004              		.loc 1 2615 0
 4005 00be 18BF     		it	ne
 4006 00c0 0121     		movne	r1, #1
 4007 00c2 06A8     		add	r0, sp, #24
 4008 00c4 FFF7FEFF 		bl	inc_lock
 4009              	.LVL508:
 4010 00c8 C5F82802 		str	r0, [r5, #552]
2616:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4011              		.loc 1 2616 0
 4012 00cc 60B9     		cbnz	r0, .L619
 4013              	.L573:
 4014 00ce 0226     		movs	r6, #2
 4015 00d0 AAE7     		b	.L593
 4016              	.LVL509:
 4017              	.L591:
2575:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 4018              		.loc 1 2575 0
 4019 00d2 0726     		movs	r6, #7
 4020 00d4 A8E7     		b	.L593
 4021              	.LVL510:
 4022              	.L590:
2602:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 4023              		.loc 1 2602 0
 4024 00d6 0426     		movs	r6, #4
 4025 00d8 A6E7     		b	.L593
 4026              	.L618:
 4027              	.LVL511:
 4028              	.LBB336:
 4029              	.LBB337:
 692:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (i == _FS_LOCK) ? 0 : 1;
 4030              		.loc 1 692 0
 4031 00da 484B     		ldr	r3, .L622
 4032 00dc 1A68     		ldr	r2, [r3]
 4033 00de 42B3     		cbz	r2, .L567
 4034              	.LVL512:
 4035 00e0 DB68     		ldr	r3, [r3, #12]
 4036 00e2 33B3     		cbz	r3, .L567
 4037              	.LBE337:
ARM GAS  /tmp/ccVdKYyy.s 			page 130


 4038              	.LBE336:
2566:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 4039              		.loc 1 2566 0
 4040 00e4 1226     		movs	r6, #18
 4041 00e6 9FE7     		b	.L593
 4042              	.LVL513:
 4043              	.L619:
2635:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sclust = ld_clust(dj.fs, dir);	/* File start cluster */
 4044              		.loc 1 2635 0
 4045 00e8 0023     		movs	r3, #0
2636:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fsize = LD_DWORD(dir + DIR_FileSize);	/* File size */
 4046              		.loc 1 2636 0
 4047 00ea 869A     		ldr	r2, [sp, #536]
 4048              	.LVL514:
2634:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->err = 0;						/* Clear error flag */
 4049              		.loc 1 2634 0
 4050 00ec 85F80682 		strb	r8, [r5, #518]
2635:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sclust = ld_clust(dj.fs, dir);	/* File start cluster */
 4051              		.loc 1 2635 0
 4052 00f0 85F80732 		strb	r3, [r5, #519]
 4053              	.LBB338:
 4054              	.LBB339:
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 4055              		.loc 1 1316 0
 4056 00f4 92F80012 		ldrb	r1, [r2, #512]	@ zero_extendqisi2
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 4057              		.loc 1 1315 0
 4058 00f8 F87E     		ldrb	r0, [r7, #27]	@ zero_extendqisi2
 4059 00fa BB7E     		ldrb	r3, [r7, #26]	@ zero_extendqisi2
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 4060              		.loc 1 1316 0
 4061 00fc 0329     		cmp	r1, #3
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 4062              		.loc 1 1315 0
 4063 00fe 43EA0023 		orr	r3, r3, r0, lsl #8
 4064              	.LVL515:
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 4065              		.loc 1 1316 0
 4066 0102 25D0     		beq	.L620
 4067              	.L579:
 4068              	.LVL516:
 4069              	.LBE339:
 4070              	.LBE338:
2636:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fsize = LD_DWORD(dir + DIR_FileSize);	/* File size */
 4071              		.loc 1 2636 0
 4072 0104 C5F81032 		str	r3, [r5, #528]
2637:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = 0;						/* File pointer */
 4073              		.loc 1 2637 0
 4074 0108 FB69     		ldr	r3, [r7, #28]	@ unaligned
2644:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4075              		.loc 1 2644 0
 4076 010a B2F80612 		ldrh	r1, [r2, #518]
2637:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = 0;						/* File pointer */
 4077              		.loc 1 2637 0
 4078 010e C5F80C32 		str	r3, [r5, #524]
 4079              		.loc 1 2649 0
 4080 0112 3046     		mov	r0, r6
ARM GAS  /tmp/ccVdKYyy.s 			page 131


2638:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dsect = 0;
 4081              		.loc 1 2638 0
 4082 0114 0023     		movs	r3, #0
2643:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->id = fp->fs->id;
 4083              		.loc 1 2643 0
 4084 0116 C5F80022 		str	r2, [r5, #512]
2644:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4085              		.loc 1 2644 0
 4086 011a A5F80412 		strh	r1, [r5, #516]	@ movhi
2638:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dsect = 0;
 4087              		.loc 1 2638 0
 4088 011e C5F80832 		str	r3, [r5, #520]
2639:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
 4089              		.loc 1 2639 0
 4090 0122 C5F81832 		str	r3, [r5, #536]
2641:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4091              		.loc 1 2641 0
 4092 0126 C5F82432 		str	r3, [r5, #548]
 4093              		.loc 1 2649 0
 4094 012a 0DF50F7D 		add	sp, sp, #572
 4095              	.LCFI64:
 4096              		.cfi_remember_state
 4097              		.cfi_def_cfa_offset 28
 4098              		@ sp needed
 4099 012e BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 4100              	.LVL517:
 4101              	.L567:
 4102              	.LCFI65:
 4103              		.cfi_restore_state
2566:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 4104              		.loc 1 2566 0
 4105 0132 06A8     		add	r0, sp, #24
 4106              	.LVL518:
 4107 0134 FFF7FEFF 		bl	dir_register
 4108              	.LVL519:
2570:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = dj.dir;					/* New entry */
 4109              		.loc 1 2570 0
 4110 0138 48F00808 		orr	r8, r8, #8
 4111 013c 8B9F     		ldr	r7, [sp, #556]
 4112              	.LVL520:
2581:Middlewares/Third_Party/FatFs/src/ff.c **** 				dw = GET_FATTIME();				/* Created time */
 4113              		.loc 1 2581 0
 4114 013e 0028     		cmp	r0, #0
 4115 0140 A3D1     		bne	.L566
 4116              	.LVL521:
 4117              	.L577:
2581:Middlewares/Third_Party/FatFs/src/ff.c **** 				dw = GET_FATTIME();				/* Created time */
 4118              		.loc 1 2581 0 is_stmt 0 discriminator 1
 4119 0142 18F0080F 		tst	r8, #8
 4120 0146 10D1     		bne	.L568
 4121 0148 869B     		ldr	r3, [sp, #536]
 4122 014a 28F00109 		bic	r9, r8, #1
 4123 014e AEE7     		b	.L569
 4124              	.LVL522:
 4125              	.L620:
 4126              	.LBB341:
 4127              	.LBB340:
ARM GAS  /tmp/ccVdKYyy.s 			page 132


1317:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4128              		.loc 1 1317 0 is_stmt 1
 4129 0150 787D     		ldrb	r0, [r7, #21]	@ zero_extendqisi2
 4130 0152 397D     		ldrb	r1, [r7, #20]	@ zero_extendqisi2
 4131 0154 41EA0021 		orr	r1, r1, r0, lsl #8
 4132 0158 43EA0143 		orr	r3, r3, r1, lsl #16
 4133              	.LVL523:
 4134 015c D2E7     		b	.L579
 4135              	.LVL524:
 4136              	.L562:
 4137              	.LBE340:
 4138              	.LBE341:
2562:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
 4139              		.loc 1 2562 0
 4140 015e 14F01C0F 		tst	r4, #28
 4141 0162 49D0     		beq	.L592
2555:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
 4142              		.loc 1 2555 0
 4143 0164 0620     		movs	r0, #6
 4144              	.LVL525:
2575:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 4145              		.loc 1 2575 0
 4146 0166 0646     		mov	r6, r0
 4147 0168 5EE7     		b	.L593
 4148              	.LVL526:
 4149              	.L568:
2582:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_CrtTime, dw);
 4150              		.loc 1 2582 0
 4151 016a FFF7FEFF 		bl	get_fattime
 4152              	.LVL527:
2584:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_FileSize, 0);/* size = 0 */
 4153              		.loc 1 2584 0
 4154 016e 0023     		movs	r3, #0
2583:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] = 0;				/* Reset attribute */
 4155              		.loc 1 2583 0
 4156 0170 C0F30724 		ubfx	r4, r0, #8, #8
 4157 0174 020E     		lsrs	r2, r0, #24
 4158 0176 010C     		lsrs	r1, r0, #16
 4159 0178 FC73     		strb	r4, [r7, #15]
 4160 017a 7A74     		strb	r2, [r7, #17]
 4161 017c B873     		strb	r0, [r7, #14]
 4162 017e 3974     		strb	r1, [r7, #16]
2584:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_FileSize, 0);/* size = 0 */
 4163              		.loc 1 2584 0
 4164 0180 FB72     		strb	r3, [r7, #11]
2585:Middlewares/Third_Party/FatFs/src/ff.c **** 				cl = ld_clust(dj.fs, dir);		/* Get start cluster */
 4165              		.loc 1 2585 0
 4166 0182 3B77     		strb	r3, [r7, #28]
 4167 0184 7B77     		strb	r3, [r7, #29]
 4168 0186 BB77     		strb	r3, [r7, #30]
 4169 0188 FB77     		strb	r3, [r7, #31]
 4170              	.LVL528:
 4171              	.LBB342:
 4172              	.LBB343:
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 4173              		.loc 1 1316 0
 4174 018a 869B     		ldr	r3, [sp, #536]
ARM GAS  /tmp/ccVdKYyy.s 			page 133


1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 4175              		.loc 1 1315 0
 4176 018c FA7E     		ldrb	r2, [r7, #27]	@ zero_extendqisi2
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 4177              		.loc 1 1316 0
 4178 018e 93F80032 		ldrb	r3, [r3, #512]	@ zero_extendqisi2
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 4179              		.loc 1 1315 0
 4180 0192 BC7E     		ldrb	r4, [r7, #26]	@ zero_extendqisi2
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 4181              		.loc 1 1316 0
 4182 0194 032B     		cmp	r3, #3
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 4183              		.loc 1 1315 0
 4184 0196 44EA0224 		orr	r4, r4, r2, lsl #8
 4185              	.LVL529:
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 4186              		.loc 1 1316 0
 4187 019a 26D0     		beq	.L621
 4188              	.L570:
 4189              	.LVL530:
 4190              	.LBE343:
 4191              	.LBE342:
 4192              	.LBB345:
 4193              	.LBB346:
1330:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusHI, cl >> 16);
 4194              		.loc 1 1330 0
 4195 019c 0023     		movs	r3, #0
 4196 019e BB76     		strb	r3, [r7, #26]
 4197              	.LVL531:
 4198 01a0 FB76     		strb	r3, [r7, #27]
1331:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4199              		.loc 1 1331 0
 4200 01a2 3B75     		strb	r3, [r7, #20]
 4201 01a4 7B75     		strb	r3, [r7, #21]
 4202              	.LVL532:
 4203              	.LBE346:
 4204              	.LBE345:
2588:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (cl) {						/* Remove the cluster chain if exist */
 4205              		.loc 1 2588 0
 4206 01a6 869B     		ldr	r3, [sp, #536]
 4207 01a8 0122     		movs	r2, #1
 4208 01aa 83F80422 		strb	r2, [r3, #516]
2589:Middlewares/Third_Party/FatFs/src/ff.c **** 					dw = dj.fs->winsect;
 4209              		.loc 1 2589 0
 4210 01ae 002C     		cmp	r4, #0
 4211 01b0 3FF479AF 		beq	.L581
 4212              	.LVL533:
 4213              	.LBB347:
 4214              	.LBB348:
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 4215              		.loc 1 1021 0
 4216 01b4 9442     		cmp	r4, r2
 4217 01b6 8AD0     		beq	.L573
 4218 01b8 D3F81422 		ldr	r2, [r3, #532]
 4219 01bc 9442     		cmp	r4, r2
 4220 01be 86D2     		bcs	.L573
ARM GAS  /tmp/ccVdKYyy.s 			page 134


 4221 01c0 2146     		mov	r1, r4
 4222 01c2 1846     		mov	r0, r3
 4223              	.LBE348:
 4224              	.LBE347:
2590:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = remove_chain(dj.fs, cl);
 4225              		.loc 1 2590 0
 4226 01c4 D3F82C92 		ldr	r9, [r3, #556]
 4227              	.LBB350:
 4228              	.LBB349:
 4229 01c8 FFF7FEFF 		bl	remove_chain.part.10
 4230              	.LVL534:
 4231              	.LBE349:
 4232              	.LBE350:
2592:Middlewares/Third_Party/FatFs/src/ff.c **** 						dj.fs->last_clust = cl - 1;	/* Reuse the cluster hole */
 4233              		.loc 1 2592 0
 4234 01cc 0028     		cmp	r0, #0
 4235 01ce 7FF45CAF 		bne	.L566
2593:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = move_window(dj.fs, dw);
 4236              		.loc 1 2593 0
 4237 01d2 8698     		ldr	r0, [sp, #536]
 4238 01d4 013C     		subs	r4, r4, #1
2594:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4239              		.loc 1 2594 0
 4240 01d6 4946     		mov	r1, r9
2593:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = move_window(dj.fs, dw);
 4241              		.loc 1 2593 0
 4242 01d8 C0F80C42 		str	r4, [r0, #524]
2594:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4243              		.loc 1 2594 0
 4244 01dc FFF7FEFF 		bl	move_window
 4245              	.LVL535:
2609:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
 4246              		.loc 1 2609 0
 4247 01e0 0028     		cmp	r0, #0
 4248 01e2 7FF452AF 		bne	.L566
 4249 01e6 869B     		ldr	r3, [sp, #536]
 4250 01e8 5DE7     		b	.L581
 4251              	.LVL536:
 4252              	.L621:
 4253              	.LBB351:
 4254              	.LBB344:
1317:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4255              		.loc 1 1317 0
 4256 01ea 7A7D     		ldrb	r2, [r7, #21]	@ zero_extendqisi2
 4257 01ec 3B7D     		ldrb	r3, [r7, #20]	@ zero_extendqisi2
 4258 01ee 43EA0223 		orr	r3, r3, r2, lsl #8
 4259 01f2 44EA0344 		orr	r4, r4, r3, lsl #16
 4260              	.LVL537:
 4261 01f6 D1E7     		b	.L570
 4262              	.LVL538:
 4263              	.L592:
 4264              	.LBE344:
 4265              	.LBE351:
2555:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
 4266              		.loc 1 2555 0
 4267 01f8 0626     		movs	r6, #6
 4268 01fa 15E7     		b	.L593
ARM GAS  /tmp/ccVdKYyy.s 			page 135


 4269              	.L623:
 4270              		.align	2
 4271              	.L622:
 4272 01fc 00000000 		.word	.LANCHOR0
 4273              		.cfi_endproc
 4274              	.LFE161:
 4276              		.section	.text.f_read,"ax",%progbits
 4277              		.align	1
 4278              		.p2align 2,,3
 4279              		.global	f_read
 4280              		.syntax unified
 4281              		.thumb
 4282              		.thumb_func
 4283              		.fpu fpv4-sp-d16
 4285              	f_read:
 4286              	.LFB162:
2650:Middlewares/Third_Party/FatFs/src/ff.c **** 
2651:Middlewares/Third_Party/FatFs/src/ff.c **** 
2652:Middlewares/Third_Party/FatFs/src/ff.c **** 
2653:Middlewares/Third_Party/FatFs/src/ff.c **** 
2654:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2655:Middlewares/Third_Party/FatFs/src/ff.c **** /* Read File                                                             */
2656:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2657:Middlewares/Third_Party/FatFs/src/ff.c **** 
2658:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_read (
2659:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp, 		/* Pointer to the file object */
2660:Middlewares/Third_Party/FatFs/src/ff.c **** 	void* buff,		/* Pointer to data buffer */
2661:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT btr,		/* Number of bytes to read */
2662:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT* br		/* Pointer to number of bytes read */
2663:Middlewares/Third_Party/FatFs/src/ff.c **** )
2664:Middlewares/Third_Party/FatFs/src/ff.c **** {
 4287              		.loc 1 2664 0
 4288              		.cfi_startproc
 4289              		@ args = 0, pretend = 0, frame = 8
 4290              		@ frame_needed = 0, uses_anonymous_args = 0
 4291              	.LVL539:
 4292 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4293              	.LCFI66:
 4294              		.cfi_def_cfa_offset 36
 4295              		.cfi_offset 4, -36
 4296              		.cfi_offset 5, -32
 4297              		.cfi_offset 6, -28
 4298              		.cfi_offset 7, -24
 4299              		.cfi_offset 8, -20
 4300              		.cfi_offset 9, -16
 4301              		.cfi_offset 10, -12
 4302              		.cfi_offset 11, -8
 4303              		.cfi_offset 14, -4
 4304 0004 9846     		mov	r8, r3
2665:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2666:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect, remain;
2667:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rcnt, cc;
2668:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE csect, *rbuff = (BYTE*)buff;
2669:Middlewares/Third_Party/FatFs/src/ff.c **** 
2670:Middlewares/Third_Party/FatFs/src/ff.c **** 
2671:Middlewares/Third_Party/FatFs/src/ff.c **** 	*br = 0;	/* Clear read byte counter */
 4305              		.loc 1 2671 0
ARM GAS  /tmp/ccVdKYyy.s 			page 136


 4306 0006 0023     		movs	r3, #0
 4307              	.LVL540:
2664:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4308              		.loc 1 2664 0
 4309 0008 83B0     		sub	sp, sp, #12
 4310              	.LCFI67:
 4311              		.cfi_def_cfa_offset 48
 4312              		.loc 1 2671 0
 4313 000a C8F80030 		str	r3, [r8]
2664:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4314              		.loc 1 2664 0
 4315 000e 0F46     		mov	r7, r1
 4316              	.LVL541:
 4317 0010 9146     		mov	r9, r2
 4318 0012 0446     		mov	r4, r0
2672:Middlewares/Third_Party/FatFs/src/ff.c **** 
2673:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(fp);							/* Check validity */
 4319              		.loc 1 2673 0
 4320 0014 FFF7FEFF 		bl	validate
 4321              	.LVL542:
2674:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
 4322              		.loc 1 2674 0
 4323 0018 0646     		mov	r6, r0
 4324 001a 38B9     		cbnz	r0, .L657
2675:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->err)								/* Check error */
 4325              		.loc 1 2675 0
 4326 001c 94F80732 		ldrb	r3, [r4, #519]	@ zero_extendqisi2
 4327 0020 43B9     		cbnz	r3, .L654
2676:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
2677:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) 					/* Check access mode */
 4328              		.loc 1 2677 0
 4329 0022 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4330 0026 D807     		lsls	r0, r3, #31
 4331              	.LVL543:
 4332 0028 09D4     		bmi	.L671
2678:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
 4333              		.loc 1 2678 0
 4334 002a 0726     		movs	r6, #7
 4335              	.LVL544:
 4336              	.L657:
2679:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->fsize - fp->fptr;
2680:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
2681:Middlewares/Third_Party/FatFs/src/ff.c **** 
2682:Middlewares/Third_Party/FatFs/src/ff.c **** 	for ( ;  btr;								/* Repeat until all data read */
2683:Middlewares/Third_Party/FatFs/src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
2684:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
2685:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
2686:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!csect) {						/* On the cluster boundary? */
2687:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
2688:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->sclust;			/* Follow from the origin */
2689:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {						/* Middle or end of the file */
2690:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
2691:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->cltbl)
2692:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
2693:Middlewares/Third_Party/FatFs/src/ff.c **** 					else
2694:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2695:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = get_fat(fp->fs, fp->clust);	/* Follow cluster chain on the FAT */
ARM GAS  /tmp/ccVdKYyy.s 			page 137


2696:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2697:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst < 2) ABORT(fp->fs, FR_INT_ERR);
2698:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
2699:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
2700:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2701:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect = clust2sect(fp->fs, fp->clust);	/* Get current sector */
2702:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
2703:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
2704:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btr / SS(fp->fs);				/* When remaining bytes >= sector size, */
2705:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {							/* Read maximum contiguous sectors directly */
2706:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
2707:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fp->fs->csize - csect;
2708:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_read(fp->fs->drv, rbuff, sect, cc) != RES_OK)
2709:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
2710:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
2711:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
2712:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fs->wflag && fp->fs->winsect - sect < cc)
2713:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->fs->winsect - sect) * SS(fp->fs)), fp->fs->win.d8, SS(fp->fs));
2714:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2715:Middlewares/Third_Party/FatFs/src/ff.c **** 				if ((fp->flag & FA__DIRTY) && fp->dsect - sect < cc)
2716:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->dsect - sect) * SS(fp->fs)), fp->buf.d8, SS(fp->fs));
2717:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2718:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2719:Middlewares/Third_Party/FatFs/src/ff.c **** 				rcnt = SS(fp->fs) * cc;			/* Number of bytes transferred */
2720:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
2721:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2722:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
2723:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->dsect != sect) {			/* Load data sector if not in cache */
2724:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
2725:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
2726:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
2727:Middlewares/Third_Party/FatFs/src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
2728:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= ~FA__DIRTY;
2729:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2730:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2731:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_read(fp->fs->drv, fp->buf.d8, sect, 1) != RES_OK)	/* Fill sector cache */
2732:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
2733:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2734:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2735:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dsect = sect;
2736:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2737:Middlewares/Third_Party/FatFs/src/ff.c **** 		rcnt = SS(fp->fs) - ((UINT)fp->fptr % SS(fp->fs));	/* Get partial sector data from sector buffer 
2738:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btr) rcnt = btr;
2739:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
2740:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fp->fs, fp->dsect) != FR_OK)		/* Move sector window */
2741:Middlewares/Third_Party/FatFs/src/ff.c **** 			ABORT(fp->fs, FR_DISK_ERR);
2742:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(rbuff, &fp->fs->win.d8[fp->fptr % SS(fp->fs)], rcnt);	/* Pick partial sector */
2743:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2744:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(rbuff, &fp->buf.d8[fp->fptr % SS(fp->fs)], rcnt);	/* Pick partial sector */
2745:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2746:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2747:Middlewares/Third_Party/FatFs/src/ff.c **** 
2748:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fp->fs, FR_OK);
2749:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4337              		.loc 1 2749 0
 4338 002c 3046     		mov	r0, r6
 4339 002e 03B0     		add	sp, sp, #12
ARM GAS  /tmp/ccVdKYyy.s 			page 138


 4340              	.LCFI68:
 4341              		.cfi_remember_state
 4342              		.cfi_def_cfa_offset 36
 4343              		@ sp needed
 4344 0030 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4345              	.LVL545:
 4346              	.L654:
 4347              	.LCFI69:
 4348              		.cfi_restore_state
 4349 0034 1E46     		mov	r6, r3
 4350 0036 3046     		mov	r0, r6
 4351              	.LVL546:
 4352 0038 03B0     		add	sp, sp, #12
 4353              	.LCFI70:
 4354              		.cfi_remember_state
 4355              		.cfi_def_cfa_offset 36
 4356              		@ sp needed
 4357 003a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4358              	.LVL547:
 4359              	.L671:
 4360              	.LCFI71:
 4361              		.cfi_restore_state
 4362              	.LBB364:
 4363              	.LBB365:
2679:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->fsize - fp->fptr;
 4364              		.loc 1 2679 0
 4365 003e D4F80812 		ldr	r1, [r4, #520]
 4366              	.LVL548:
 4367 0042 D4F80C52 		ldr	r5, [r4, #524]
 4368 0046 6D1A     		subs	r5, r5, r1
 4369              	.LVL549:
 4370 0048 4D45     		cmp	r5, r9
 4371 004a 28BF     		it	cs
 4372 004c 4D46     		movcs	r5, r9
 4373              	.LVL550:
2682:Middlewares/Third_Party/FatFs/src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
 4374              		.loc 1 2682 0
 4375 004e 002D     		cmp	r5, #0
 4376 0050 ECD0     		beq	.L657
2684:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 4377              		.loc 1 2684 0
 4378 0052 C1F30803 		ubfx	r3, r1, #0, #9
 4379 0056 04F50079 		add	r9, r4, #512
 4380              	.LVL551:
 4381 005a 002B     		cmp	r3, #0
 4382 005c 66D1     		bne	.L627
 4383              	.LVL552:
 4384              	.L672:
2685:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!csect) {						/* On the cluster boundary? */
 4385              		.loc 1 2685 0
 4386 005e D4F80002 		ldr	r0, [r4, #512]
 4387 0062 90F802C2 		ldrb	ip, [r0, #514]	@ zero_extendqisi2
 4388 0066 4B0A     		lsrs	r3, r1, #9
 4389 0068 0CF1FF32 		add	r2, ip, #-1
 4390 006c 1A40     		ands	r2, r2, r3
 4391              	.LVL553:
2686:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
ARM GAS  /tmp/ccVdKYyy.s 			page 139


 4392              		.loc 1 2686 0
 4393 006e 12F0FF02 		ands	r2, r2, #255
 4394              	.LVL554:
 4395 0072 6DD1     		bne	.L628
2687:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->sclust;			/* Follow from the origin */
 4396              		.loc 1 2687 0
 4397 0074 0029     		cmp	r1, #0
 4398 0076 40F09480 		bne	.L629
2688:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {						/* Middle or end of the file */
 4399              		.loc 1 2688 0
 4400 007a D4F81032 		ldr	r3, [r4, #528]
 4401              	.LVL555:
 4402              	.L630:
2697:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 4403              		.loc 1 2697 0
 4404 007e 012B     		cmp	r3, #1
 4405 0080 40F2A580 		bls	.L636
2698:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 4406              		.loc 1 2698 0
 4407 0084 591C     		adds	r1, r3, #1
 4408 0086 00F0A680 		beq	.L642
 4409 008a D4F80002 		ldr	r0, [r4, #512]
2699:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4410              		.loc 1 2699 0
 4411 008e C4F81432 		str	r3, [r4, #532]
 4412              	.LVL556:
 4413              	.L639:
 4414              	.LBB366:
 4415              	.LBB367:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 4416              		.loc 1 879 0
 4417 0092 D0F81412 		ldr	r1, [r0, #532]
 878:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 4418              		.loc 1 878 0
 4419 0096 023B     		subs	r3, r3, #2
 4420              	.LVL557:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 4421              		.loc 1 879 0
 4422 0098 0239     		subs	r1, r1, #2
 4423 009a 8B42     		cmp	r3, r1
 4424 009c 80F09780 		bcs	.L636
 880:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4425              		.loc 1 880 0
 4426 00a0 90F802E2 		ldrb	lr, [r0, #514]	@ zero_extendqisi2
 4427 00a4 D0F82812 		ldr	r1, [r0, #552]
 4428 00a8 03FB0E13 		mla	r3, r3, lr, r1
 4429              	.LVL558:
 4430              	.LBE367:
 4431              	.LBE366:
2702:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 4432              		.loc 1 2702 0
 4433 00ac 002B     		cmp	r3, #0
 4434 00ae 00F08E80 		beq	.L636
2705:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
 4435              		.loc 1 2705 0
 4436 00b2 5FEA552B 		lsrs	fp, r5, #9
2703:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btr / SS(fp->fs);				/* When remaining bytes >= sector size, */
ARM GAS  /tmp/ccVdKYyy.s 			page 140


 4437              		.loc 1 2703 0
 4438 00b6 03EB020A 		add	r10, r3, r2
 4439              	.LVL559:
2705:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
 4440              		.loc 1 2705 0
 4441 00ba 4CD0     		beq	.L640
2706:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fp->fs->csize - csect;
 4442              		.loc 1 2706 0
 4443 00bc 02EB0B03 		add	r3, r2, fp
 4444 00c0 9E45     		cmp	lr, r3
2707:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_read(fp->fs->drv, rbuff, sect, cc) != RES_OK)
 4445              		.loc 1 2707 0
 4446 00c2 38BF     		it	cc
 4447 00c4 AEEB020B 		subcc	fp, lr, r2
 4448              	.LVL560:
2708:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 4449              		.loc 1 2708 0
 4450 00c8 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 4451 00cc 5B46     		mov	r3, fp
 4452 00ce 5246     		mov	r2, r10
 4453 00d0 3946     		mov	r1, r7
 4454 00d2 FFF7FEFF 		bl	disk_read
 4455              	.LVL561:
 4456 00d6 0028     		cmp	r0, #0
 4457 00d8 7DD1     		bne	.L642
2715:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->dsect - sect) * SS(fp->fs)), fp->buf.d8, SS(fp->fs));
 4458              		.loc 1 2715 0
 4459 00da 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4460 00de 5A06     		lsls	r2, r3, #25
 4461 00e0 10D5     		bpl	.L645
 4462 00e2 D4F81832 		ldr	r3, [r4, #536]
 4463 00e6 A3EB0A0A 		sub	r10, r3, r10
 4464              	.LVL562:
 4465 00ea D345     		cmp	fp, r10
 4466 00ec 0AD9     		bls	.L645
 4467              	.LVL563:
 4468 00ee 07EB4A2A 		add	r10, r7, r10, lsl #9
 4469              	.LVL564:
 4470 00f2 0AF1FF32 		add	r2, r10, #-1
 4471              	.LBB368:
 4472              	.LBB369:
 582:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4473              		.loc 1 582 0
 4474 00f6 2346     		mov	r3, r4
 4475              	.LVL565:
 4476              	.L646:
 592:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4477              		.loc 1 592 0
 4478 00f8 13F8011B 		ldrb	r1, [r3], #1	@ zero_extendqisi2
 4479              	.LVL566:
 4480 00fc 02F8011F 		strb	r1, [r2, #1]!
 4481              	.LVL567:
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = *s++;
 4482              		.loc 1 591 0
 4483 0100 4B45     		cmp	r3, r9
 4484 0102 F9D1     		bne	.L646
 4485              	.LVL568:
ARM GAS  /tmp/ccVdKYyy.s 			page 141


 4486              	.L645:
 4487 0104 D4F80812 		ldr	r1, [r4, #520]
 4488              	.LBE369:
 4489              	.LBE368:
2719:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
 4490              		.loc 1 2719 0
 4491 0108 4FEA4B2B 		lsl	fp, fp, #9
 4492              	.LVL569:
 4493              	.L644:
2683:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
 4494              		.loc 1 2683 0
 4495 010c D8F80030 		ldr	r3, [r8]
 4496 0110 5944     		add	r1, r1, fp
 4497 0112 5B44     		add	r3, r3, fp
2682:Middlewares/Third_Party/FatFs/src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
 4498              		.loc 1 2682 0
 4499 0114 B5EB0B05 		subs	r5, r5, fp
 4500              	.LVL570:
2683:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {		/* On the sector boundary? */
 4501              		.loc 1 2683 0
 4502 0118 C4F80812 		str	r1, [r4, #520]
 4503 011c 5F44     		add	r7, r7, fp
 4504              	.LVL571:
 4505 011e C8F80030 		str	r3, [r8]
2682:Middlewares/Third_Party/FatFs/src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
 4506              		.loc 1 2682 0
 4507 0122 83D0     		beq	.L657
 4508              	.LVL572:
2684:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 4509              		.loc 1 2684 0
 4510 0124 C1F30803 		ubfx	r3, r1, #0, #9
 4511 0128 002B     		cmp	r3, #0
 4512 012a 98D0     		beq	.L672
 4513              	.LVL573:
 4514              	.L627:
2737:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btr) rcnt = btr;
 4515              		.loc 1 2737 0
 4516 012c C3F5007B 		rsb	fp, r3, #512
 4517              	.LVL574:
 4518 0130 AB45     		cmp	fp, r5
 4519 0132 28BF     		it	cs
 4520 0134 AB46     		movcs	fp, r5
 4521              	.LVL575:
2744:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4522              		.loc 1 2744 0
 4523 0136 2344     		add	r3, r3, r4
 4524              	.LVL576:
 4525 0138 03EB0B00 		add	r0, r3, fp
 4526 013c 7A1E     		subs	r2, r7, #1
 4527              	.LVL577:
 4528              	.L650:
 4529              	.LBB370:
 4530              	.LBB371:
 592:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4531              		.loc 1 592 0
 4532 013e 13F8011B 		ldrb	r1, [r3], #1	@ zero_extendqisi2
 4533              	.LVL578:
ARM GAS  /tmp/ccVdKYyy.s 			page 142


 4534 0142 02F8011F 		strb	r1, [r2, #1]!
 4535              	.LVL579:
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = *s++;
 4536              		.loc 1 591 0
 4537 0146 8342     		cmp	r3, r0
 4538 0148 F9D1     		bne	.L650
 4539 014a D4F80812 		ldr	r1, [r4, #520]
 4540 014e DDE7     		b	.L644
 4541              	.LVL580:
 4542              	.L628:
 4543 0150 D4F81432 		ldr	r3, [r4, #532]
 4544              	.LVL581:
 4545 0154 9DE7     		b	.L639
 4546              	.LVL582:
 4547              	.L640:
 4548              	.LBE371:
 4549              	.LBE370:
2723:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 4550              		.loc 1 2723 0
 4551 0156 D4F81822 		ldr	r2, [r4, #536]
 4552 015a 9245     		cmp	r10, r2
 4553 015c 1AD0     		beq	.L647
2725:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 4554              		.loc 1 2725 0
 4555 015e 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4556 0162 5B06     		lsls	r3, r3, #25
 4557 0164 0ED5     		bpl	.L649
2726:Middlewares/Third_Party/FatFs/src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 4558              		.loc 1 2726 0
 4559 0166 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 4560 016a 0123     		movs	r3, #1
 4561 016c 2146     		mov	r1, r4
 4562 016e FFF7FEFF 		bl	disk_write
 4563              	.LVL583:
 4564 0172 80BB     		cbnz	r0, .L642
2728:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 4565              		.loc 1 2728 0
 4566 0174 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 4567 0178 D4F80002 		ldr	r0, [r4, #512]
 4568 017c 23F04003 		bic	r3, r3, #64
 4569 0180 84F80632 		strb	r3, [r4, #518]
 4570              	.L649:
2731:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 4571              		.loc 1 2731 0
 4572 0184 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 4573 0188 0123     		movs	r3, #1
 4574 018a 5246     		mov	r2, r10
 4575 018c 2146     		mov	r1, r4
 4576 018e FFF7FEFF 		bl	disk_read
 4577              	.LVL584:
 4578 0192 00BB     		cbnz	r0, .L642
 4579              	.L647:
 4580 0194 D4F80832 		ldr	r3, [r4, #520]
2735:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4581              		.loc 1 2735 0
 4582 0198 C4F818A2 		str	r10, [r4, #536]
 4583 019c C3F30803 		ubfx	r3, r3, #0, #9
ARM GAS  /tmp/ccVdKYyy.s 			page 143


 4584 01a0 C4E7     		b	.L627
 4585              	.LVL585:
 4586              	.L629:
2691:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 4587              		.loc 1 2691 0
 4588 01a2 D4F824E2 		ldr	lr, [r4, #548]
 4589 01a6 BEF1000F 		cmp	lr, #0
 4590 01aa 1BD0     		beq	.L631
 4591              	.LVL586:
 4592              	.LBB372:
 4593              	.LBB373:
1136:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ncl) return 0;		/* End of table? (error) */
 4594              		.loc 1 1136 0
 4595 01ac DEF80410 		ldr	r1, [lr, #4]
1134:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
 4596              		.loc 1 1134 0
 4597 01b0 B3FBFCF3 		udiv	r3, r3, ip
 4598              	.LVL587:
1133:Middlewares/Third_Party/FatFs/src/ff.c **** 	cl = ofs / SS(fp->fs) / fp->fs->csize;	/* Cluster order from top of the file */
 4599              		.loc 1 1133 0
 4600 01b4 0EF10400 		add	r0, lr, #4
 4601              	.LVL588:
1137:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
 4602              		.loc 1 1137 0
 4603 01b8 49B1     		cbz	r1, .L636
1138:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl -= ncl; tbl++;		/* Next fragment */
 4604              		.loc 1 1138 0
 4605 01ba 8B42     		cmp	r3, r1
 4606 01bc 02D2     		bcs	.L635
 4607 01be 0EE0     		b	.L633
 4608              	.LVL589:
 4609              	.L667:
 4610 01c0 9942     		cmp	r1, r3
 4611 01c2 0CD8     		bhi	.L633
 4612              	.LVL590:
 4613              	.L635:
1139:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4614              		.loc 1 1139 0
 4615 01c4 5B1A     		subs	r3, r3, r1
 4616              	.LVL591:
1136:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ncl) return 0;		/* End of table? (error) */
 4617              		.loc 1 1136 0
 4618 01c6 50F8081F 		ldr	r1, [r0, #8]!
 4619              	.LVL592:
1137:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
 4620              		.loc 1 1137 0
 4621 01ca 0029     		cmp	r1, #0
 4622 01cc F8D1     		bne	.L667
 4623              	.LVL593:
 4624              	.L636:
 4625              	.LBE373:
 4626              	.LBE372:
2697:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 4627              		.loc 1 2697 0
 4628 01ce 0226     		movs	r6, #2
 4629 01d0 84F80762 		strb	r6, [r4, #519]
 4630 01d4 2AE7     		b	.L657
ARM GAS  /tmp/ccVdKYyy.s 			page 144


 4631              	.L642:
2698:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 4632              		.loc 1 2698 0
 4633 01d6 0126     		movs	r6, #1
 4634 01d8 84F80762 		strb	r6, [r4, #519]
 4635 01dc 26E7     		b	.L657
 4636              	.LVL594:
 4637              	.L633:
 4638              	.LBB375:
 4639              	.LBB374:
1141:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4640              		.loc 1 1141 0
 4641 01de 4168     		ldr	r1, [r0, #4]
 4642              	.LVL595:
 4643 01e0 0B44     		add	r3, r3, r1
 4644              	.LVL596:
 4645 01e2 4CE7     		b	.L630
 4646              	.LVL597:
 4647              	.L631:
 4648              	.LBE374:
 4649              	.LBE375:
2695:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 4650              		.loc 1 2695 0
 4651 01e4 D4F81412 		ldr	r1, [r4, #532]
 4652              	.LVL598:
 4653              	.LBB376:
 4654              	.LBB377:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 4655              		.loc 1 901 0
 4656 01e8 0129     		cmp	r1, #1
 4657 01ea F0D9     		bls	.L636
 4658 01ec D0F81432 		ldr	r3, [r0, #532]
 4659              	.LVL599:
 4660 01f0 9942     		cmp	r1, r3
 4661 01f2 ECD2     		bcs	.L636
 4662 01f4 0192     		str	r2, [sp, #4]
 4663 01f6 FFF7FEFF 		bl	get_fat.part.6
 4664              	.LVL600:
 4665 01fa 019A     		ldr	r2, [sp, #4]
 4666 01fc 0346     		mov	r3, r0
 4667 01fe 3EE7     		b	.L630
 4668              	.LBE377:
 4669              	.LBE376:
 4670              	.LBE365:
 4671              	.LBE364:
 4672              		.cfi_endproc
 4673              	.LFE162:
 4675              		.section	.text.f_write,"ax",%progbits
 4676              		.align	1
 4677              		.p2align 2,,3
 4678              		.global	f_write
 4679              		.syntax unified
 4680              		.thumb
 4681              		.thumb_func
 4682              		.fpu fpv4-sp-d16
 4684              	f_write:
 4685              	.LFB163:
ARM GAS  /tmp/ccVdKYyy.s 			page 145


2750:Middlewares/Third_Party/FatFs/src/ff.c **** 
2751:Middlewares/Third_Party/FatFs/src/ff.c **** 
2752:Middlewares/Third_Party/FatFs/src/ff.c **** 
2753:Middlewares/Third_Party/FatFs/src/ff.c **** 
2754:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
2755:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2756:Middlewares/Third_Party/FatFs/src/ff.c **** /* Write File                                                            */
2757:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2758:Middlewares/Third_Party/FatFs/src/ff.c **** 
2759:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_write (
2760:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,			/* Pointer to the file object */
2761:Middlewares/Third_Party/FatFs/src/ff.c **** 	const void *buff,	/* Pointer to the data to be written */
2762:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT btw,			/* Number of bytes to write */
2763:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT* bw			/* Pointer to number of bytes written */
2764:Middlewares/Third_Party/FatFs/src/ff.c **** )
2765:Middlewares/Third_Party/FatFs/src/ff.c **** {
 4686              		.loc 1 2765 0
 4687              		.cfi_startproc
 4688              		@ args = 0, pretend = 0, frame = 0
 4689              		@ frame_needed = 0, uses_anonymous_args = 0
 4690              	.LVL601:
 4691 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 4692              	.LCFI72:
 4693              		.cfi_def_cfa_offset 40
 4694              		.cfi_offset 3, -40
 4695              		.cfi_offset 4, -36
 4696              		.cfi_offset 5, -32
 4697              		.cfi_offset 6, -28
 4698              		.cfi_offset 7, -24
 4699              		.cfi_offset 8, -20
 4700              		.cfi_offset 9, -16
 4701              		.cfi_offset 10, -12
 4702              		.cfi_offset 11, -8
 4703              		.cfi_offset 14, -4
 4704              		.loc 1 2765 0
 4705 0004 9846     		mov	r8, r3
2766:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2767:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
2768:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wcnt, cc;
2769:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE *wbuff = (const BYTE*)buff;
2770:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE csect;
2771:Middlewares/Third_Party/FatFs/src/ff.c **** 
2772:Middlewares/Third_Party/FatFs/src/ff.c **** 
2773:Middlewares/Third_Party/FatFs/src/ff.c **** 	*bw = 0;	/* Clear write byte counter */
 4706              		.loc 1 2773 0
 4707 0006 0023     		movs	r3, #0
 4708              	.LVL602:
 4709 0008 C8F80030 		str	r3, [r8]
2765:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4710              		.loc 1 2765 0
 4711 000c 0C46     		mov	r4, r1
 4712              	.LVL603:
 4713 000e 1646     		mov	r6, r2
 4714 0010 0546     		mov	r5, r0
2774:Middlewares/Third_Party/FatFs/src/ff.c **** 
2775:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(fp);						/* Check validity */
 4715              		.loc 1 2775 0
ARM GAS  /tmp/ccVdKYyy.s 			page 146


 4716 0012 FFF7FEFF 		bl	validate
 4717              	.LVL604:
2776:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
 4718              		.loc 1 2776 0
 4719 0016 0746     		mov	r7, r0
 4720 0018 38B9     		cbnz	r0, .L707
2777:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->err)							/* Check error */
 4721              		.loc 1 2777 0
 4722 001a 95F80732 		ldrb	r3, [r5, #519]	@ zero_extendqisi2
 4723 001e 3BB9     		cbnz	r3, .L704
2778:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
2779:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE))				/* Check access mode */
 4724              		.loc 1 2779 0
 4725 0020 95F80632 		ldrb	r3, [r5, #518]	@ zero_extendqisi2
 4726 0024 9907     		lsls	r1, r3, #30
 4727 0026 07D4     		bmi	.L723
2780:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
 4728              		.loc 1 2780 0
 4729 0028 0727     		movs	r7, #7
 4730              	.LVL605:
 4731              	.L707:
2781:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->fptr + btw < fp->fptr) btw = 0;	/* File size cannot reach 4GB */
2782:Middlewares/Third_Party/FatFs/src/ff.c **** 
2783:Middlewares/Third_Party/FatFs/src/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
2784:Middlewares/Third_Party/FatFs/src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
2785:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
2786:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
2787:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
2788:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
2789:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
2790:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
2792:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {					/* Middle or end of the file */
2793:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
2794:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->cltbl)
2795:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
2796:Middlewares/Third_Party/FatFs/src/ff.c **** 					else
2797:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2798:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(fp->fs, fp->clust);	/* Follow or stretch cluster chain on the FAT */
2799:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2800:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
2801:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
2802:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
2803:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
2804:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->sclust == 0) fp->sclust = clst;	/* Set start cluster if the first write */
2805:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2806:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
2807:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->fs->winsect == fp->dsect && sync_window(fp->fs))	/* Write-back sector cache */
2808:Middlewares/Third_Party/FatFs/src/ff.c **** 				ABORT(fp->fs, FR_DISK_ERR);
2809:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2810:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA__DIRTY) {		/* Write-back sector cache */
2811:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
2812:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
2813:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= ~FA__DIRTY;
2814:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2815:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2816:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect = clust2sect(fp->fs, fp->clust);	/* Get current sector */
ARM GAS  /tmp/ccVdKYyy.s 			page 147


2817:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fp->fs, FR_INT_ERR);
2818:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
2819:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btw / SS(fp->fs);			/* When remaining bytes >= sector size, */
2820:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {						/* Write maximum contiguous sectors directly */
2821:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
2822:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fp->fs->csize - csect;
2823:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, wbuff, sect, cc) != RES_OK)
2824:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
2825:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
2826:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
2827:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fs->winsect - sect < cc) {	/* Refill sector cache if it gets invalidated by the direct 
2828:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->fs->win.d8, wbuff + ((fp->fs->winsect - sect) * SS(fp->fs)), SS(fp->fs));
2829:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->fs->wflag = 0;
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2831:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2832:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->dsect - sect < cc) { /* Refill sector cache if it gets invalidated by the direct write 
2833:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->buf.d8, wbuff + ((fp->dsect - sect) * SS(fp->fs)), SS(fp->fs));
2834:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= ~FA__DIRTY;
2835:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2836:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2837:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2838:Middlewares/Third_Party/FatFs/src/ff.c **** 				wcnt = SS(fp->fs) * cc;		/* Number of bytes transferred */
2839:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
2840:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2841:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
2842:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->fptr >= fp->fsize) {	/* Avoid silly cache filling at growing edge */
2843:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (sync_window(fp->fs)) ABORT(fp->fs, FR_DISK_ERR);
2844:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fs->winsect = sect;
2845:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2846:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2847:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->dsect != sect) {		/* Fill sector cache with file data */
2848:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr < fp->fsize &&
2849:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_read(fp->fs->drv, fp->buf.d8, sect, 1) != RES_OK)
2850:Middlewares/Third_Party/FatFs/src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
2851:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2852:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2853:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dsect = sect;
2854:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2855:Middlewares/Third_Party/FatFs/src/ff.c **** 		wcnt = SS(fp->fs) - ((UINT)fp->fptr % SS(fp->fs));/* Put partial sector into file I/O buffer */
2856:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wcnt > btw) wcnt = btw;
2857:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
2858:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fp->fs, fp->dsect) != FR_OK)	/* Move sector window */
2859:Middlewares/Third_Party/FatFs/src/ff.c **** 			ABORT(fp->fs, FR_DISK_ERR);
2860:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(&fp->fs->win.d8[fp->fptr % SS(fp->fs)], wbuff, wcnt);	/* Fit partial sector */
2861:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fs->wflag = 1;
2862:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2863:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(&fp->buf.d8[fp->fptr % SS(fp->fs)], wbuff, wcnt);	/* Fit partial sector */
2864:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA__DIRTY;
2865:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2866:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2867:Middlewares/Third_Party/FatFs/src/ff.c **** 
2868:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->fptr > fp->fsize) fp->fsize = fp->fptr;	/* Update file size if needed */
2869:Middlewares/Third_Party/FatFs/src/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
2870:Middlewares/Third_Party/FatFs/src/ff.c **** 
2871:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fp->fs, FR_OK);
2872:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4732              		.loc 1 2872 0
ARM GAS  /tmp/ccVdKYyy.s 			page 148


 4733 002a 3846     		mov	r0, r7
 4734 002c BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4735              	.LVL606:
 4736              	.L704:
 4737 0030 1F46     		mov	r7, r3
 4738 0032 3846     		mov	r0, r7
 4739              	.LVL607:
 4740 0034 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4741              	.LVL608:
 4742              	.L723:
 4743              	.LBB388:
 4744              	.LBB389:
2781:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->fptr + btw < fp->fptr) btw = 0;	/* File size cannot reach 4GB */
 4745              		.loc 1 2781 0
 4746 0038 D5F80822 		ldr	r2, [r5, #520]
 4747 003c D642     		cmn	r6, r2
 4748 003e 0AD3     		bcc	.L724
 4749              	.LVL609:
 4750              	.L675:
2868:Middlewares/Third_Party/FatFs/src/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 4751              		.loc 1 2868 0
 4752 0040 D5F80C12 		ldr	r1, [r5, #524]
2869:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4753              		.loc 1 2869 0
 4754 0044 43F02003 		orr	r3, r3, #32
2868:Middlewares/Third_Party/FatFs/src/ff.c **** 	fp->flag |= FA__WRITTEN;						/* Set file change flag */
 4755              		.loc 1 2868 0
 4756 0048 9142     		cmp	r1, r2
 4757 004a 38BF     		it	cc
 4758 004c C5F80C22 		strcc	r2, [r5, #524]
2869:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4759              		.loc 1 2869 0
 4760 0050 85F80632 		strb	r3, [r5, #518]
 4761 0054 E9E7     		b	.L707
 4762              	.LVL610:
 4763              	.L724:
2783:Middlewares/Third_Party/FatFs/src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 4764              		.loc 1 2783 0
 4765 0056 002E     		cmp	r6, #0
 4766 0058 F2D0     		beq	.L675
 4767              	.LVL611:
 4768              	.L701:
2785:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
 4769              		.loc 1 2785 0
 4770 005a C2F30803 		ubfx	r3, r2, #0, #9
 4771 005e 002B     		cmp	r3, #0
 4772 0060 40F08780 		bne	.L676
2786:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!csect) {					/* On the cluster boundary? */
 4773              		.loc 1 2786 0
 4774 0064 D5F80002 		ldr	r0, [r5, #512]
 4775 0068 90F80212 		ldrb	r1, [r0, #514]	@ zero_extendqisi2
 4776 006c 530A     		lsrs	r3, r2, #9
 4777 006e 01F1FF3B 		add	fp, r1, #-1
 4778 0072 0BEA030B 		and	fp, fp, r3
 4779              	.LVL612:
2787:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 4780              		.loc 1 2787 0
ARM GAS  /tmp/ccVdKYyy.s 			page 149


 4781 0076 1BF0FF0B 		ands	fp, fp, #255
 4782              	.LVL613:
 4783 007a 16D1     		bne	.L677
2788:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->sclust;		/* Follow from the origin */
 4784              		.loc 1 2788 0
 4785 007c 002A     		cmp	r2, #0
 4786 007e 40F0A380 		bne	.L678
2789:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0)			/* When no cluster is allocated, */
 4787              		.loc 1 2789 0
 4788 0082 D5F81032 		ldr	r3, [r5, #528]
 4789              	.LVL614:
2790:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(fp->fs, 0);	/* Create a new cluster chain */
 4790              		.loc 1 2790 0
 4791 0086 002B     		cmp	r3, #0
 4792 0088 00F0D080 		beq	.L725
 4793              	.LVL615:
 4794              	.L679:
2801:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 4795              		.loc 1 2801 0
 4796 008c 012B     		cmp	r3, #1
 4797 008e 00F0D580 		beq	.L692
2802:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 4798              		.loc 1 2802 0
 4799 0092 5A1C     		adds	r2, r3, #1
 4800 0094 00F0B080 		beq	.L691
2804:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4801              		.loc 1 2804 0
 4802 0098 D5F81022 		ldr	r2, [r5, #528]
2803:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->sclust == 0) fp->sclust = clst;	/* Set start cluster if the first write */
 4803              		.loc 1 2803 0
 4804 009c C5F81432 		str	r3, [r5, #532]
 4805 00a0 D5F80002 		ldr	r0, [r5, #512]
2804:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4806              		.loc 1 2804 0
 4807 00a4 0AB9     		cbnz	r2, .L677
 4808 00a6 C5F81032 		str	r3, [r5, #528]
 4809              	.LVL616:
 4810              	.L677:
2810:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 4811              		.loc 1 2810 0
 4812 00aa 95F80632 		ldrb	r3, [r5, #518]	@ zero_extendqisi2
 4813 00ae 5B06     		lsls	r3, r3, #25
 4814 00b0 78D4     		bmi	.L726
 4815              	.L690:
 4816              	.LVL617:
 4817              	.LBB390:
 4818              	.LBB391:
 878:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 4819              		.loc 1 878 0
 4820 00b2 D5F81432 		ldr	r3, [r5, #532]
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 4821              		.loc 1 879 0
 4822 00b6 D0F81422 		ldr	r2, [r0, #532]
 878:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 4823              		.loc 1 878 0
 4824 00ba 023B     		subs	r3, r3, #2
 4825              	.LVL618:
ARM GAS  /tmp/ccVdKYyy.s 			page 150


 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 4826              		.loc 1 879 0
 4827 00bc 023A     		subs	r2, r2, #2
 4828 00be 9342     		cmp	r3, r2
 4829 00c0 80F0BC80 		bcs	.L692
 880:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4830              		.loc 1 880 0
 4831 00c4 90F80222 		ldrb	r2, [r0, #514]	@ zero_extendqisi2
 4832 00c8 D0F82812 		ldr	r1, [r0, #552]
 4833 00cc 03FB0213 		mla	r3, r3, r2, r1
 4834              	.LVL619:
 4835              	.LBE391:
 4836              	.LBE390:
2817:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 4837              		.loc 1 2817 0
 4838 00d0 002B     		cmp	r3, #0
 4839 00d2 00F0B380 		beq	.L692
2820:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
 4840              		.loc 1 2820 0
 4841 00d6 5FEA5629 		lsrs	r9, r6, #9
2818:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btw / SS(fp->fs);			/* When remaining bytes >= sector size, */
 4842              		.loc 1 2818 0
 4843 00da 03EB0B0A 		add	r10, r3, fp
 4844              	.LVL620:
2820:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fp->fs->csize)	/* Clip at cluster boundary */
 4845              		.loc 1 2820 0
 4846 00de 3AD0     		beq	.L693
2821:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fp->fs->csize - csect;
 4847              		.loc 1 2821 0
 4848 00e0 0BEB0903 		add	r3, fp, r9
 4849 00e4 9A42     		cmp	r2, r3
2822:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, wbuff, sect, cc) != RES_OK)
 4850              		.loc 1 2822 0
 4851 00e6 38BF     		it	cc
 4852 00e8 A2EB0B09 		subcc	r9, r2, fp
 4853              	.LVL621:
2823:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 4854              		.loc 1 2823 0
 4855 00ec 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 4856 00f0 4B46     		mov	r3, r9
 4857 00f2 5246     		mov	r2, r10
 4858 00f4 2146     		mov	r1, r4
 4859 00f6 FFF7FEFF 		bl	disk_write
 4860              	.LVL622:
 4861 00fa 0028     		cmp	r0, #0
 4862 00fc 7CD1     		bne	.L691
2832:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->buf.d8, wbuff + ((fp->dsect - sect) * SS(fp->fs)), SS(fp->fs));
 4863              		.loc 1 2832 0
 4864 00fe D5F81832 		ldr	r3, [r5, #536]
 4865 0102 A3EB0A03 		sub	r3, r3, r10
 4866 0106 9945     		cmp	r9, r3
 4867 0108 10D9     		bls	.L695
2833:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= ~FA__DIRTY;
 4868              		.loc 1 2833 0
 4869 010a 04EB4323 		add	r3, r4, r3, lsl #9
 4870              	.LVL623:
 4871 010e 03F50070 		add	r0, r3, #512
ARM GAS  /tmp/ccVdKYyy.s 			page 151


 4872 0112 6A1E     		subs	r2, r5, #1
 4873              	.LVL624:
 4874              	.L696:
 4875              	.LBB392:
 4876              	.LBB393:
 592:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4877              		.loc 1 592 0
 4878 0114 13F8011B 		ldrb	r1, [r3], #1	@ zero_extendqisi2
 4879              	.LVL625:
 4880 0118 02F8011F 		strb	r1, [r2, #1]!
 4881              	.LVL626:
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = *s++;
 4882              		.loc 1 591 0
 4883 011c 8342     		cmp	r3, r0
 4884 011e F9D1     		bne	.L696
 4885              	.LVL627:
 4886              	.LBE393:
 4887              	.LBE392:
2834:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 4888              		.loc 1 2834 0
 4889 0120 95F80632 		ldrb	r3, [r5, #518]	@ zero_extendqisi2
 4890 0124 23F04003 		bic	r3, r3, #64
 4891 0128 85F80632 		strb	r3, [r5, #518]
 4892              	.L695:
2838:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
 4893              		.loc 1 2838 0
 4894 012c 4FEA4929 		lsl	r9, r9, #9
 4895              	.LVL628:
 4896 0130 D5F80822 		ldr	r2, [r5, #520]
 4897 0134 04EB0900 		add	r0, r4, r9
 4898              	.LVL629:
 4899              	.L697:
2784:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 4900              		.loc 1 2784 0
 4901 0138 D8F80030 		ldr	r3, [r8]
 4902 013c 4A44     		add	r2, r2, r9
 4903 013e 4B44     		add	r3, r3, r9
2783:Middlewares/Third_Party/FatFs/src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 4904              		.loc 1 2783 0
 4905 0140 B6EB0906 		subs	r6, r6, r9
 4906              	.LVL630:
2784:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {	/* On the sector boundary? */
 4907              		.loc 1 2784 0
 4908 0144 C5F80822 		str	r2, [r5, #520]
 4909 0148 0446     		mov	r4, r0
 4910 014a C8F80030 		str	r3, [r8]
2783:Middlewares/Third_Party/FatFs/src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, *bw += wcnt, btw -= wcnt) {
 4911              		.loc 1 2783 0
 4912 014e 84D1     		bne	.L701
 4913              	.LVL631:
 4914              	.L722:
 4915 0150 95F80632 		ldrb	r3, [r5, #518]	@ zero_extendqisi2
 4916 0154 74E7     		b	.L675
 4917              	.LVL632:
 4918              	.L693:
2847:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr < fp->fsize &&
 4919              		.loc 1 2847 0
ARM GAS  /tmp/ccVdKYyy.s 			page 152


 4920 0156 D5F81832 		ldr	r3, [r5, #536]
 4921 015a 9A45     		cmp	r10, r3
2848:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_read(fp->fs->drv, fp->buf.d8, sect, 1) != RES_OK)
 4922              		.loc 1 2848 0
 4923 015c D5F80832 		ldr	r3, [r5, #520]
2847:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr < fp->fsize &&
 4924              		.loc 1 2847 0
 4925 0160 03D0     		beq	.L699
2848:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_read(fp->fs->drv, fp->buf.d8, sect, 1) != RES_OK)
 4926              		.loc 1 2848 0
 4927 0162 D5F80C22 		ldr	r2, [r5, #524]
 4928 0166 9342     		cmp	r3, r2
 4929 0168 54D3     		bcc	.L727
 4930              	.L699:
2853:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4931              		.loc 1 2853 0
 4932 016a C5F818A2 		str	r10, [r5, #536]
 4933 016e C3F30803 		ubfx	r3, r3, #0, #9
 4934              	.LVL633:
 4935              	.L676:
2855:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wcnt > btw) wcnt = btw;
 4936              		.loc 1 2855 0
 4937 0172 C3F50079 		rsb	r9, r3, #512
 4938              	.LVL634:
 4939 0176 B145     		cmp	r9, r6
 4940 0178 28BF     		it	cs
 4941 017a B146     		movcs	r9, r6
 4942              	.LVL635:
 4943 017c 013B     		subs	r3, r3, #1
 4944              	.LVL636:
 4945 017e 2B44     		add	r3, r3, r5
 4946              	.LVL637:
 4947 0180 04EB0900 		add	r0, r4, r9
 4948 0184 2146     		mov	r1, r4
 4949              	.LVL638:
 4950              	.L700:
 4951              	.LBB394:
 4952              	.LBB395:
 592:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4953              		.loc 1 592 0
 4954 0186 11F8012B 		ldrb	r2, [r1], #1	@ zero_extendqisi2
 4955              	.LVL639:
 4956 018a 03F8012F 		strb	r2, [r3, #1]!
 4957              	.LVL640:
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = *s++;
 4958              		.loc 1 591 0
 4959 018e 8142     		cmp	r1, r0
 4960 0190 F9D1     		bne	.L700
 4961              	.LBE395:
 4962              	.LBE394:
2864:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4963              		.loc 1 2864 0
 4964 0192 95F80632 		ldrb	r3, [r5, #518]	@ zero_extendqisi2
 4965 0196 D5F80822 		ldr	r2, [r5, #520]
 4966              	.LVL641:
 4967 019a 43F04003 		orr	r3, r3, #64
 4968 019e 85F80632 		strb	r3, [r5, #518]
ARM GAS  /tmp/ccVdKYyy.s 			page 153


 4969 01a2 C9E7     		b	.L697
 4970              	.LVL642:
 4971              	.L726:
2811:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 4972              		.loc 1 2811 0
 4973 01a4 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 4974 01a8 D5F81822 		ldr	r2, [r5, #536]
 4975 01ac 0123     		movs	r3, #1
 4976 01ae 2946     		mov	r1, r5
 4977 01b0 FFF7FEFF 		bl	disk_write
 4978              	.LVL643:
 4979 01b4 00BB     		cbnz	r0, .L691
2813:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4980              		.loc 1 2813 0
 4981 01b6 95F80632 		ldrb	r3, [r5, #518]	@ zero_extendqisi2
 4982 01ba D5F80002 		ldr	r0, [r5, #512]
 4983 01be 23F04003 		bic	r3, r3, #64
 4984 01c2 85F80632 		strb	r3, [r5, #518]
 4985 01c6 74E7     		b	.L690
 4986              	.LVL644:
 4987              	.L678:
2794:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 4988              		.loc 1 2794 0
 4989 01c8 D5F824E2 		ldr	lr, [r5, #548]
 4990 01cc BEF1000F 		cmp	lr, #0
 4991 01d0 38D0     		beq	.L681
 4992              	.LVL645:
 4993              	.LBB396:
 4994              	.LBB397:
1134:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
 4995              		.loc 1 1134 0
 4996 01d2 B3FBF1F3 		udiv	r3, r3, r1
 4997              	.LVL646:
1136:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ncl) return 0;		/* End of table? (error) */
 4998              		.loc 1 1136 0
 4999 01d6 DEF80410 		ldr	r1, [lr, #4]
 5000              	.LVL647:
1133:Middlewares/Third_Party/FatFs/src/ff.c **** 	cl = ofs / SS(fp->fs) / fp->fs->csize;	/* Cluster order from top of the file */
 5001              		.loc 1 1133 0
 5002 01da 0EF10400 		add	r0, lr, #4
 5003              	.LVL648:
1137:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
 5004              		.loc 1 1137 0
 5005 01de 0029     		cmp	r1, #0
 5006 01e0 B6D0     		beq	.L722
1138:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl -= ncl; tbl++;		/* Next fragment */
 5007              		.loc 1 1138 0
 5008 01e2 8B42     		cmp	r3, r1
 5009 01e4 02D2     		bcs	.L685
 5010 01e6 0BE0     		b	.L683
 5011              	.LVL649:
 5012              	.L686:
 5013 01e8 9942     		cmp	r1, r3
 5014 01ea 09D8     		bhi	.L683
 5015              	.LVL650:
 5016              	.L685:
1139:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
ARM GAS  /tmp/ccVdKYyy.s 			page 154


 5017              		.loc 1 1139 0
 5018 01ec 5B1A     		subs	r3, r3, r1
 5019              	.LVL651:
1136:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ncl) return 0;		/* End of table? (error) */
 5020              		.loc 1 1136 0
 5021 01ee 50F8081F 		ldr	r1, [r0, #8]!
 5022              	.LVL652:
1137:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
 5023              		.loc 1 1137 0
 5024 01f2 0029     		cmp	r1, #0
 5025 01f4 F8D1     		bne	.L686
 5026 01f6 ABE7     		b	.L722
 5027              	.LVL653:
 5028              	.L691:
 5029              	.LBE397:
 5030              	.LBE396:
2802:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 5031              		.loc 1 2802 0
 5032 01f8 0127     		movs	r7, #1
 5033 01fa 85F80772 		strb	r7, [r5, #519]
 5034 01fe 14E7     		b	.L707
 5035              	.LVL654:
 5036              	.L683:
 5037              	.LBB399:
 5038              	.LBB398:
1141:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5039              		.loc 1 1141 0
 5040 0200 4268     		ldr	r2, [r0, #4]
 5041              	.LVL655:
 5042 0202 1344     		add	r3, r3, r2
 5043              	.LVL656:
 5044              	.LBE398:
 5045              	.LBE399:
2800:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 5046              		.loc 1 2800 0
 5047 0204 002B     		cmp	r3, #0
 5048 0206 7FF441AF 		bne	.L679
 5049              	.LVL657:
 5050              	.L728:
 5051 020a D5F80822 		ldr	r2, [r5, #520]
 5052 020e 95F80632 		ldrb	r3, [r5, #518]	@ zero_extendqisi2
 5053              	.LVL658:
 5054 0212 15E7     		b	.L675
 5055              	.LVL659:
 5056              	.L727:
2849:Middlewares/Third_Party/FatFs/src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 5057              		.loc 1 2849 0
 5058 0214 90F80102 		ldrb	r0, [r0, #513]	@ zero_extendqisi2
 5059 0218 0123     		movs	r3, #1
 5060 021a 5246     		mov	r2, r10
 5061 021c 2946     		mov	r1, r5
 5062 021e FFF7FEFF 		bl	disk_read
 5063              	.LVL660:
2848:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_read(fp->fs->drv, fp->buf.d8, sect, 1) != RES_OK)
 5064              		.loc 1 2848 0
 5065 0222 0028     		cmp	r0, #0
 5066 0224 E8D1     		bne	.L691
ARM GAS  /tmp/ccVdKYyy.s 			page 155


 5067 0226 D5F80832 		ldr	r3, [r5, #520]
 5068 022a 9EE7     		b	.L699
 5069              	.LVL661:
 5070              	.L725:
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {					/* Middle or end of the file */
 5071              		.loc 1 2791 0
 5072 022c 5946     		mov	r1, fp
 5073              	.LVL662:
 5074 022e FFF7FEFF 		bl	create_chain
 5075              	.LVL663:
 5076 0232 0346     		mov	r3, r0
 5077              	.LVL664:
2800:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 5078              		.loc 1 2800 0
 5079 0234 002B     		cmp	r3, #0
 5080 0236 7FF429AF 		bne	.L679
 5081 023a E6E7     		b	.L728
 5082              	.LVL665:
 5083              	.L692:
2801:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 5084              		.loc 1 2801 0
 5085 023c 0227     		movs	r7, #2
 5086 023e 85F80772 		strb	r7, [r5, #519]
 5087 0242 F2E6     		b	.L707
 5088              	.LVL666:
 5089              	.L681:
2798:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5090              		.loc 1 2798 0
 5091 0244 D5F81412 		ldr	r1, [r5, #532]
 5092              	.LVL667:
 5093 0248 FFF7FEFF 		bl	create_chain
 5094              	.LVL668:
 5095 024c 0346     		mov	r3, r0
 5096              	.LVL669:
2800:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 5097              		.loc 1 2800 0
 5098 024e 002B     		cmp	r3, #0
 5099 0250 7FF41CAF 		bne	.L679
 5100 0254 D9E7     		b	.L728
 5101              	.LBE389:
 5102              	.LBE388:
 5103              		.cfi_endproc
 5104              	.LFE163:
 5106 0256 00BF     		.section	.text.putc_bfd,"ax",%progbits
 5107              		.align	1
 5108              		.p2align 2,,3
 5109              		.syntax unified
 5110              		.thumb
 5111              		.thumb_func
 5112              		.fpu fpv4-sp-d16
 5114              	putc_bfd:
 5115              	.LFB180:
2873:Middlewares/Third_Party/FatFs/src/ff.c **** 
2874:Middlewares/Third_Party/FatFs/src/ff.c **** 
2875:Middlewares/Third_Party/FatFs/src/ff.c **** 
2876:Middlewares/Third_Party/FatFs/src/ff.c **** 
2877:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  /tmp/ccVdKYyy.s 			page 156


2878:Middlewares/Third_Party/FatFs/src/ff.c **** /* Synchronize the File                                                  */
2879:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2880:Middlewares/Third_Party/FatFs/src/ff.c **** 
2881:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_sync (
2882:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object */
2883:Middlewares/Third_Party/FatFs/src/ff.c **** )
2884:Middlewares/Third_Party/FatFs/src/ff.c **** {
2885:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2886:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD tm;
2887:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 
2889:Middlewares/Third_Party/FatFs/src/ff.c **** 
2890:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(fp);					/* Check validity of the object */
2891:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
2892:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->flag & FA__WRITTEN) {	/* Has the file been written? */
2893:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write-back dirty buffer */
2894:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
2895:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA__DIRTY) {
2896:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
2897:Middlewares/Third_Party/FatFs/src/ff.c **** 					LEAVE_FF(fp->fs, FR_DISK_ERR);
2898:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= ~FA__DIRTY;
2899:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2900:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2901:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Update the directory entry */
2902:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fp->fs, fp->dir_sect);
2903:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
2904:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = fp->dir_ptr;
2905:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] |= AM_ARC;					/* Set archive bit */
2906:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_FileSize, fp->fsize);	/* Update file size */
2907:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, fp->sclust);					/* Update start cluster */
2908:Middlewares/Third_Party/FatFs/src/ff.c **** 				tm = GET_FATTIME();							/* Update updated time */
2909:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);
2910:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_WORD(dir + DIR_LstAccDate, 0);
2911:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= ~FA__WRITTEN;
2912:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fs->wflag = 1;
2913:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(fp->fs);
2914:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2915:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2916:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2917:Middlewares/Third_Party/FatFs/src/ff.c **** 
2918:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fp->fs, res);
2919:Middlewares/Third_Party/FatFs/src/ff.c **** }
2920:Middlewares/Third_Party/FatFs/src/ff.c **** 
2921:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
2922:Middlewares/Third_Party/FatFs/src/ff.c **** 
2923:Middlewares/Third_Party/FatFs/src/ff.c **** 
2924:Middlewares/Third_Party/FatFs/src/ff.c **** 
2925:Middlewares/Third_Party/FatFs/src/ff.c **** 
2926:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2927:Middlewares/Third_Party/FatFs/src/ff.c **** /* Close File                                                            */
2928:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2929:Middlewares/Third_Party/FatFs/src/ff.c **** 
2930:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_close (
2931:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL *fp		/* Pointer to the file object to be closed */
2932:Middlewares/Third_Party/FatFs/src/ff.c **** )
2933:Middlewares/Third_Party/FatFs/src/ff.c **** {
2934:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
ARM GAS  /tmp/ccVdKYyy.s 			page 157


2935:Middlewares/Third_Party/FatFs/src/ff.c **** 
2936:Middlewares/Third_Party/FatFs/src/ff.c **** 
2937:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
2938:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = f_sync(fp);					/* Flush cached data */
2939:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK)
2940:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2941:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
2942:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = validate(fp);				/* Lock volume */
2943:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
2944:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
2945:Middlewares/Third_Party/FatFs/src/ff.c **** 			FATFS *fs = fp->fs;
2946:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2947:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
2948:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(fp->lockid);	/* Decrement file open counter */
2949:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)
2950:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2951:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fs = 0;				/* Invalidate file object */
2952:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
2953:Middlewares/Third_Party/FatFs/src/ff.c **** 			unlock_fs(fs, FR_OK);		/* Unlock volume */
2954:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2955:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2956:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2957:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2958:Middlewares/Third_Party/FatFs/src/ff.c **** }
2959:Middlewares/Third_Party/FatFs/src/ff.c **** 
2960:Middlewares/Third_Party/FatFs/src/ff.c **** 
2961:Middlewares/Third_Party/FatFs/src/ff.c **** 
2962:Middlewares/Third_Party/FatFs/src/ff.c **** 
2963:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2964:Middlewares/Third_Party/FatFs/src/ff.c **** /* Change Current Directory or Current Drive, Get Current Directory      */
2965:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2966:Middlewares/Third_Party/FatFs/src/ff.c **** 
2967:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH >= 1
2968:Middlewares/Third_Party/FatFs/src/ff.c **** #if _VOLUMES >= 2
2969:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_chdrive (
2970:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path		/* Drive number */
2971:Middlewares/Third_Party/FatFs/src/ff.c **** )
2972:Middlewares/Third_Party/FatFs/src/ff.c **** {
2973:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
2974:Middlewares/Third_Party/FatFs/src/ff.c **** 
2975:Middlewares/Third_Party/FatFs/src/ff.c **** 
2976:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&path);
2977:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
2978:Middlewares/Third_Party/FatFs/src/ff.c **** 
2979:Middlewares/Third_Party/FatFs/src/ff.c **** 	CurrVol = (BYTE)vol;
2980:Middlewares/Third_Party/FatFs/src/ff.c **** 
2981:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
2982:Middlewares/Third_Party/FatFs/src/ff.c **** }
2983:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2984:Middlewares/Third_Party/FatFs/src/ff.c **** 
2985:Middlewares/Third_Party/FatFs/src/ff.c **** 
2986:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_chdir (
2987:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
2988:Middlewares/Third_Party/FatFs/src/ff.c **** )
2989:Middlewares/Third_Party/FatFs/src/ff.c **** {
2990:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2991:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
ARM GAS  /tmp/ccVdKYyy.s 			page 158


2992:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
2993:Middlewares/Third_Party/FatFs/src/ff.c **** 
2994:Middlewares/Third_Party/FatFs/src/ff.c **** 
2995:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
2996:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, 0);
2997:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
2998:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
2999:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the path */
3000:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3001:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {					/* Follow completed */
3002:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dj.dir) {
3003:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.fs->cdir = dj.sclust;	/* Start directory itself */
3004:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
3005:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.dir[DIR_Attr] & AM_DIR)	/* Reached to the directory */
3006:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.fs->cdir = ld_clust(dj.fs, dj.dir);
3007:Middlewares/Third_Party/FatFs/src/ff.c **** 				else
3008:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_PATH;		/* Reached but a file */
3009:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3010:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3011:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
3012:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3013:Middlewares/Third_Party/FatFs/src/ff.c **** 
3014:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
3015:Middlewares/Third_Party/FatFs/src/ff.c **** }
3016:Middlewares/Third_Party/FatFs/src/ff.c **** 
3017:Middlewares/Third_Party/FatFs/src/ff.c **** 
3018:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH >= 2
3019:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_getcwd (
3020:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR* buff,	/* Pointer to the directory path */
3021:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT len		/* Size of path */
3022:Middlewares/Third_Party/FatFs/src/ff.c **** )
3023:Middlewares/Third_Party/FatFs/src/ff.c **** {
3024:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3025:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3026:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, n;
3027:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ccl;
3028:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR *tp;
3029:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO fno;
3030:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3031:Middlewares/Third_Party/FatFs/src/ff.c **** 
3032:Middlewares/Third_Party/FatFs/src/ff.c **** 
3033:Middlewares/Third_Party/FatFs/src/ff.c **** 	*buff = 0;
3034:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3035:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, (const TCHAR**)&buff, 0);	/* Get current volume */
3036:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3037:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
3038:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = len;			/* Bottom of buffer (directory stack base) */
3039:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.sclust = dj.fs->cdir;			/* Start to follow upper directory from current directory */
3040:Middlewares/Third_Party/FatFs/src/ff.c **** 		while ((ccl = dj.sclust) != 0) {	/* Repeat while current directory is a sub-directory */
3041:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_sdi(&dj, 1);			/* Get parent directory */
3042:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
3043:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_read(&dj, 0);
3044:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
3045:Middlewares/Third_Party/FatFs/src/ff.c **** 			dj.sclust = ld_clust(dj.fs, dj.dir);	/* Goto parent directory */
3046:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_sdi(&dj, 0);
3047:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
3048:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {							/* Find the entry links to the child directory */
ARM GAS  /tmp/ccVdKYyy.s 			page 159


3049:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_read(&dj, 0);
3050:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
3051:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ccl == ld_clust(dj.fs, dj.dir)) break;	/* Found the entry */
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(&dj, 0);	
3053:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (res == FR_OK);
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) res = FR_INT_ERR;/* It cannot be 'not found'. */
3055:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
3056:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
3057:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno.lfname = buff;
3058:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno.lfsize = i;
3059:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3060:Middlewares/Third_Party/FatFs/src/ff.c **** 			get_fileinfo(&dj, &fno);		/* Get the directory name and push it to the buffer */
3061:Middlewares/Third_Party/FatFs/src/ff.c **** 			tp = fno.fname;
3062:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
3063:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (*buff) tp = buff;
3064:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3065:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (n = 0; tp[n]; n++) ;
3066:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < n + 3) {
3067:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NOT_ENOUGH_CORE; break;
3068:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3069:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (n) buff[--i] = tp[--n];
3070:Middlewares/Third_Party/FatFs/src/ff.c **** 			buff[--i] = '/';
3071:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3072:Middlewares/Third_Party/FatFs/src/ff.c **** 		tp = buff;
3073:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3074:Middlewares/Third_Party/FatFs/src/ff.c **** #if _VOLUMES >= 2
3075:Middlewares/Third_Party/FatFs/src/ff.c **** 			*tp++ = '0' + CurrVol;			/* Put drive number */
3076:Middlewares/Third_Party/FatFs/src/ff.c **** 			*tp++ = ':';
3077:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3078:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i == len) {					/* Root-directory */
3079:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tp++ = '/';
3080:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {						/* Sub-directroy */
3081:Middlewares/Third_Party/FatFs/src/ff.c **** 				do		/* Add stacked path str */
3082:Middlewares/Third_Party/FatFs/src/ff.c **** 					*tp++ = buff[i++];
3083:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (i < len);
3084:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3085:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3086:Middlewares/Third_Party/FatFs/src/ff.c **** 		*tp = 0;
3087:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3088:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3089:Middlewares/Third_Party/FatFs/src/ff.c **** 
3090:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
3091:Middlewares/Third_Party/FatFs/src/ff.c **** }
3092:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_RPATH >= 2 */
3093:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_RPATH >= 1 */
3094:Middlewares/Third_Party/FatFs/src/ff.c **** 
3095:Middlewares/Third_Party/FatFs/src/ff.c **** 
3096:Middlewares/Third_Party/FatFs/src/ff.c **** 
3097:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
3098:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3099:Middlewares/Third_Party/FatFs/src/ff.c **** /* Seek File R/W Pointer                                                 */
3100:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3101:Middlewares/Third_Party/FatFs/src/ff.c **** 
3102:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_lseek (
3103:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,		/* Pointer to the file object */
3104:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs		/* File pointer from top of file */
3105:Middlewares/Third_Party/FatFs/src/ff.c **** )
ARM GAS  /tmp/ccVdKYyy.s 			page 160


3106:Middlewares/Third_Party/FatFs/src/ff.c **** {
3107:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3108:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, bcs, nsect, ifptr;
3109:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
3110:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl, pcl, ncl, tcl, dsc, tlen, ulen, *tbl;
3111:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3112:Middlewares/Third_Party/FatFs/src/ff.c **** 
3113:Middlewares/Third_Party/FatFs/src/ff.c **** 
3114:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(fp);					/* Check validity of the object */
3115:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->err)						/* Check error */
3117:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
3118:Middlewares/Third_Party/FatFs/src/ff.c **** 
3119:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
3120:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->cltbl) {	/* Fast seek */
3121:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
3122:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl = fp->cltbl;
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 			tlen = *tbl++; ulen = 2;	/* Given table size and required table size */
3124:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->sclust;			/* Top of the chain */
3125:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cl) {
3126:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Get a fragment */
3128:Middlewares/Third_Party/FatFs/src/ff.c **** 					tcl = cl; ncl = 0; ulen += 2;	/* Top, length and used items */
3129:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
3130:Middlewares/Third_Party/FatFs/src/ff.c **** 						pcl = cl; ncl++;
3131:Middlewares/Third_Party/FatFs/src/ff.c **** 						cl = get_fat(fp->fs, cl);
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fp->fs, FR_INT_ERR);
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
3134:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
3135:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
3136:Middlewares/Third_Party/FatFs/src/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
3137:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3138:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (cl < fp->fs->n_fatent);	/* Repeat until end of chain */
3139:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3140:Middlewares/Third_Party/FatFs/src/ff.c **** 			*fp->cltbl = ulen;	/* Number of items used */
3141:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ulen <= tlen)
3142:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tbl = 0;		/* Terminate table */
3143:Middlewares/Third_Party/FatFs/src/ff.c **** 			else
3144:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NOT_ENOUGH_CORE;	/* Given table size is smaller than required */
3145:Middlewares/Third_Party/FatFs/src/ff.c **** 
3146:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {						/* Fast seek */
3147:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs > fp->fsize)		/* Clip offset at the file size */
3148:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs = fp->fsize;
3149:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = ofs;				/* Set file pointer */
3150:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs) {
3151:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
3152:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fp->fs, fp->clust);
3153:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!dsc) ABORT(fp->fs, FR_INT_ERR);
3154:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (ofs - 1) / SS(fp->fs) & (fp->fs->csize - 1);
3155:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fp->fs) && dsc != fp->dsect) {	/* Refill sector cache if needed */
3156:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3157:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3158:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->flag & FA__DIRTY) {		/* Write-back dirty sector cache */
3159:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
3160:Middlewares/Third_Party/FatFs/src/ff.c **** 							ABORT(fp->fs, FR_DISK_ERR);
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= ~FA__DIRTY;
3162:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
ARM GAS  /tmp/ccVdKYyy.s 			page 161


3163:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3164:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_read(fp->fs->drv, fp->buf.d8, dsc, 1) != RES_OK)	/* Load current sector */
3165:Middlewares/Third_Party/FatFs/src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
3166:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3167:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->dsect = dsc;
3168:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3169:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3170:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3171:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
3172:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3173:Middlewares/Third_Party/FatFs/src/ff.c **** 
3174:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Normal Seek */
3175:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
3176:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs > fp->fsize					/* In read-only mode, clip offset with the file size */
3177:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3178:Middlewares/Third_Party/FatFs/src/ff.c **** 			 && !(fp->flag & FA_WRITE)
3179:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3180:Middlewares/Third_Party/FatFs/src/ff.c **** 			) ofs = fp->fsize;
3181:Middlewares/Third_Party/FatFs/src/ff.c **** 
3182:Middlewares/Third_Party/FatFs/src/ff.c **** 		ifptr = fp->fptr;
3183:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fptr = nsect = 0;
3184:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
3185:Middlewares/Third_Party/FatFs/src/ff.c **** 			bcs = (DWORD)fp->fs->csize * SS(fp->fs);	/* Cluster size (byte) */
3186:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ifptr > 0 &&
3187:Middlewares/Third_Party/FatFs/src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
3188:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
3189:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs -= fp->fptr;
3190:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->clust;
3191:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {									/* When seek to back cluster, */
3192:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->sclust;						/* start from the first cluster */
3193:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3194:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0) {						/* If no cluster chain, create a new chain */
3195:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(fp->fs, 0);
3196:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
3197:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
3198:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->sclust = clst;
3199:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3200:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3201:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;
3202:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3203:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst != 0) {
3204:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
3205:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3206:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->flag & FA_WRITE) {			/* Check if in write mode or not */
3207:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(fp->fs, clst);	/* Force stretch if in write mode */
3208:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (clst == 0) {				/* When disk gets full, clip file size */
3209:Middlewares/Third_Party/FatFs/src/ff.c **** 							ofs = bcs; break;
3210:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
3211:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
3212:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3213:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = get_fat(fp->fs, clst);	/* Follow cluster chain if not in write mode */
3214:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
3215:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
3216:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
3217:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->fptr += bcs;
3218:Middlewares/Third_Party/FatFs/src/ff.c **** 					ofs -= bcs;
3219:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
ARM GAS  /tmp/ccVdKYyy.s 			page 162


3220:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr += ofs;
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ofs % SS(fp->fs)) {
3222:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect = clust2sect(fp->fs, clst);	/* Current sector */
3223:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!nsect) ABORT(fp->fs, FR_INT_ERR);
3224:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += ofs / SS(fp->fs);
3225:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3226:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3227:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3228:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fp->fs) && nsect != fp->dsect) {	/* Fill sector cache if needed */
3229:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3230:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3231:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA__DIRTY) {			/* Write-back dirty sector cache */
3232:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
3233:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
3234:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= ~FA__DIRTY;
3235:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3236:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3237:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fp->fs->drv, fp->buf.d8, nsect, 1) != RES_OK)	/* Fill sector cache */
3238:Middlewares/Third_Party/FatFs/src/ff.c **** 				ABORT(fp->fs, FR_DISK_ERR);
3239:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3240:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dsect = nsect;
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3242:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3243:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr > fp->fsize) {			/* Set file change flag if the file size is extended */
3244:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fsize = fp->fptr;
3245:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA__WRITTEN;
3246:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3247:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3248:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3249:Middlewares/Third_Party/FatFs/src/ff.c **** 
3250:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fp->fs, res);
3251:Middlewares/Third_Party/FatFs/src/ff.c **** }
3252:Middlewares/Third_Party/FatFs/src/ff.c **** 
3253:Middlewares/Third_Party/FatFs/src/ff.c **** 
3254:Middlewares/Third_Party/FatFs/src/ff.c **** 
3255:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1
3256:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3257:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create a Directory Object                                             */
3258:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3259:Middlewares/Third_Party/FatFs/src/ff.c **** 
3260:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_opendir (
3261:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to directory object to create */
3262:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
3263:Middlewares/Third_Party/FatFs/src/ff.c **** )
3264:Middlewares/Third_Party/FatFs/src/ff.c **** {
3265:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3266:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs;
3267:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3268:Middlewares/Third_Party/FatFs/src/ff.c **** 
3269:Middlewares/Third_Party/FatFs/src/ff.c **** 
3270:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp) return FR_INVALID_OBJECT;
3271:Middlewares/Third_Party/FatFs/src/ff.c **** 
3272:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3273:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&fs, &path, 0);
3274:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3275:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fs = fs;
3276:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(*dp);
ARM GAS  /tmp/ccVdKYyy.s 			page 163


3277:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
3278:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3279:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
3280:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dp->dir) {						/* It is not the origin directory itself */
3281:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dp->dir[DIR_Attr] & AM_DIR)	/* The object is a sub directory */
3282:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->sclust = ld_clust(fs, dp->dir);
3283:Middlewares/Third_Party/FatFs/src/ff.c **** 				else							/* The object is a file */
3284:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_PATH;
3285:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3286:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
3287:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->id = fs->id;
3288:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
3289:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
3290:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
3291:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (dp->sclust) {
3292:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
3293:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!dp->lockid)
3294:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = FR_TOO_MANY_OPEN_FILES;
3295:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
3296:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->lockid = 0;	/* Root directory need not to be locked */
3297:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3298:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3299:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3300:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3301:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3302:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
3303:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3304:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) dp->fs = 0;		/* Invalidate the directory object if function faild */
3305:Middlewares/Third_Party/FatFs/src/ff.c **** 
3306:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3307:Middlewares/Third_Party/FatFs/src/ff.c **** }
3308:Middlewares/Third_Party/FatFs/src/ff.c **** 
3309:Middlewares/Third_Party/FatFs/src/ff.c **** 
3310:Middlewares/Third_Party/FatFs/src/ff.c **** 
3311:Middlewares/Third_Party/FatFs/src/ff.c **** 
3312:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3313:Middlewares/Third_Party/FatFs/src/ff.c **** /* Close Directory                                                       */
3314:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3315:Middlewares/Third_Party/FatFs/src/ff.c **** 
3316:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_closedir (
3317:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR *dp		/* Pointer to the directory object to be closed */
3318:Middlewares/Third_Party/FatFs/src/ff.c **** )
3319:Middlewares/Third_Party/FatFs/src/ff.c **** {
3320:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3321:Middlewares/Third_Party/FatFs/src/ff.c **** 
3322:Middlewares/Third_Party/FatFs/src/ff.c **** 
3323:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(dp);
3324:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3325:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
3326:Middlewares/Third_Party/FatFs/src/ff.c **** 		FATFS *fs = dp->fs;
3327:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3328:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
3329:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (dp->lockid)				/* Decrement sub-directory open counter */
3330:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(dp->lockid);
3331:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK)
3332:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3333:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fs = 0;				/* Invalidate directory object */
ARM GAS  /tmp/ccVdKYyy.s 			page 164


3334:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
3335:Middlewares/Third_Party/FatFs/src/ff.c **** 		unlock_fs(fs, FR_OK);		/* Unlock volume */
3336:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3337:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3338:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
3339:Middlewares/Third_Party/FatFs/src/ff.c **** }
3340:Middlewares/Third_Party/FatFs/src/ff.c **** 
3341:Middlewares/Third_Party/FatFs/src/ff.c **** 
3342:Middlewares/Third_Party/FatFs/src/ff.c **** 
3343:Middlewares/Third_Party/FatFs/src/ff.c **** 
3344:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3345:Middlewares/Third_Party/FatFs/src/ff.c **** /* Read Directory Entries in Sequence                                    */
3346:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3347:Middlewares/Third_Party/FatFs/src/ff.c **** 
3348:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_readdir (
3349:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to the open directory object */
3350:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
3351:Middlewares/Third_Party/FatFs/src/ff.c **** )
3352:Middlewares/Third_Party/FatFs/src/ff.c **** {
3353:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3354:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3355:Middlewares/Third_Party/FatFs/src/ff.c **** 
3356:Middlewares/Third_Party/FatFs/src/ff.c **** 
3357:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(dp);						/* Check validity of the object */
3358:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3359:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!fno) {
3360:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_sdi(dp, 0);			/* Rewind the directory object */
3361:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
3362:Middlewares/Third_Party/FatFs/src/ff.c **** 			INIT_BUF(*dp);
3363:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
3364:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) {		/* Reached end of directory */
3365:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = 0;
3366:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
3367:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3368:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
3369:Middlewares/Third_Party/FatFs/src/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
3370:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
3371:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {
3372:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->sect = 0;
3373:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_OK;
3374:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3375:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3376:Middlewares/Third_Party/FatFs/src/ff.c **** 			FREE_BUF();
3377:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3378:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3379:Middlewares/Third_Party/FatFs/src/ff.c **** 
3380:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dp->fs, res);
3381:Middlewares/Third_Party/FatFs/src/ff.c **** }
3382:Middlewares/Third_Party/FatFs/src/ff.c **** 
3383:Middlewares/Third_Party/FatFs/src/ff.c **** 
3384:Middlewares/Third_Party/FatFs/src/ff.c **** 
3385:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FIND
3386:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3387:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find next file                                                        */
3388:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3389:Middlewares/Third_Party/FatFs/src/ff.c **** 
3390:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_findnext (
ARM GAS  /tmp/ccVdKYyy.s 			page 165


3391:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the open directory object */
3392:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno	/* Pointer to the file information structure */
3393:Middlewares/Third_Party/FatFs/src/ff.c **** )
3394:Middlewares/Third_Party/FatFs/src/ff.c **** {
3395:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3396:Middlewares/Third_Party/FatFs/src/ff.c **** 
3397:Middlewares/Third_Party/FatFs/src/ff.c **** 
3398:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
3399:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = f_readdir(dp, fno);		/* Get a directory item */
3400:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK || !fno || !fno->fname[0]) break;	/* Terminate if any error or end of directory 
3401:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
3402:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fno->lfname && pattern_matching(dp->pat, fno->lfname, 0, 0)) break;	/* Test for LFN if exist 
3403:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3404:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (pattern_matching(dp->pat, fno->fname, 0, 0)) break;	/* Test for SFN */
3405:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3406:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
3407:Middlewares/Third_Party/FatFs/src/ff.c **** 
3408:Middlewares/Third_Party/FatFs/src/ff.c **** }
3409:Middlewares/Third_Party/FatFs/src/ff.c **** 
3410:Middlewares/Third_Party/FatFs/src/ff.c **** 
3411:Middlewares/Third_Party/FatFs/src/ff.c **** 
3412:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3413:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find first file                                                       */
3414:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3415:Middlewares/Third_Party/FatFs/src/ff.c **** 
3416:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_findfirst (
3417:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,				/* Pointer to the blank directory object */
3418:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno,			/* Pointer to the file information structure */
3419:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,		/* Pointer to the directory to open */
3420:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* pattern	/* Pointer to the matching pattern */
3421:Middlewares/Third_Party/FatFs/src/ff.c **** )
3422:Middlewares/Third_Party/FatFs/src/ff.c **** {
3423:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3424:Middlewares/Third_Party/FatFs/src/ff.c **** 
3425:Middlewares/Third_Party/FatFs/src/ff.c **** 
3426:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->pat = pattern;		/* Save pointer to pattern string */
3427:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = f_opendir(dp, path);		/* Open the target directory */
3428:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK)
3429:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = f_findnext(dp, fno);	/* Find the first item */
3430:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
3431:Middlewares/Third_Party/FatFs/src/ff.c **** }
3432:Middlewares/Third_Party/FatFs/src/ff.c **** 
3433:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_FIND */
3434:Middlewares/Third_Party/FatFs/src/ff.c **** 
3435:Middlewares/Third_Party/FatFs/src/ff.c **** 
3436:Middlewares/Third_Party/FatFs/src/ff.c **** 
3437:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE == 0
3438:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3439:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get File Status                                                       */
3440:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3441:Middlewares/Third_Party/FatFs/src/ff.c **** 
3442:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_stat (
3443:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
3444:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
3445:Middlewares/Third_Party/FatFs/src/ff.c **** )
3446:Middlewares/Third_Party/FatFs/src/ff.c **** {
3447:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
ARM GAS  /tmp/ccVdKYyy.s 			page 166


3448:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3449:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3450:Middlewares/Third_Party/FatFs/src/ff.c **** 
3451:Middlewares/Third_Party/FatFs/src/ff.c **** 
3452:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3453:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, 0);
3454:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3455:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
3457:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
3458:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.dir) {		/* Found an object */
3459:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fno) get_fileinfo(&dj, fno);
3460:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {			/* It is root directory */
3461:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
3462:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3463:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3464:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3465:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3466:Middlewares/Third_Party/FatFs/src/ff.c **** 
3467:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
3468:Middlewares/Third_Party/FatFs/src/ff.c **** }
3469:Middlewares/Third_Party/FatFs/src/ff.c **** 
3470:Middlewares/Third_Party/FatFs/src/ff.c **** 
3471:Middlewares/Third_Party/FatFs/src/ff.c **** 
3472:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3473:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3474:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get Number of Free Clusters                                           */
3475:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 
3477:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_getfree (
3478:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Path name of the logical drive number */
3479:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD* nclst,		/* Pointer to a variable to return number of free clusters */
3480:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS** fatfs		/* Pointer to return pointer to corresponding file system object */
3481:Middlewares/Third_Party/FatFs/src/ff.c **** )
3482:Middlewares/Third_Party/FatFs/src/ff.c **** {
3483:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3484:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3485:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD n, clst, sect, stat;
3486:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
3487:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fat, *p;
3488:Middlewares/Third_Party/FatFs/src/ff.c **** 
3489:Middlewares/Third_Party/FatFs/src/ff.c **** 
3490:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3491:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(fatfs, &path, 0);
3492:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs = *fatfs;
3493:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3494:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* If free_clust is valid, return it without full cluster scan */
3495:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clust <= fs->n_fatent - 2) {
3496:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clust;
3497:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
3498:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Get number of free clusters */
3499:Middlewares/Third_Party/FatFs/src/ff.c **** 			fat = fs->fs_type;
3500:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = 0;
3501:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fat == FS_FAT12) {
3502:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = 2;
3503:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
3504:Middlewares/Third_Party/FatFs/src/ff.c **** 					stat = get_fat(fs, clst);
ARM GAS  /tmp/ccVdKYyy.s 			page 167


3505:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
3506:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
3507:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) n++;
3508:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
3509:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
3510:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fs->n_fatent;
3511:Middlewares/Third_Party/FatFs/src/ff.c **** 				sect = fs->fatbase;
3512:Middlewares/Third_Party/FatFs/src/ff.c **** 				i = 0; p = 0;
3513:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
3514:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!i) {
3515:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = move_window(fs, sect++);
3516:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res != FR_OK) break;
3517:Middlewares/Third_Party/FatFs/src/ff.c **** 						p = fs->win.d8;
3518:Middlewares/Third_Party/FatFs/src/ff.c **** 						i = SS(fs);
3519:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3520:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fat == FS_FAT16) {
3521:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (LD_WORD(p) == 0) n++;
3522:Middlewares/Third_Party/FatFs/src/ff.c **** 						p += 2; i -= 2;
3523:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
3524:Middlewares/Third_Party/FatFs/src/ff.c **** 						if ((LD_DWORD(p) & 0x0FFFFFFF) == 0) n++;
3525:Middlewares/Third_Party/FatFs/src/ff.c **** 						p += 4; i -= 4;
3526:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3527:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (--clst);
3528:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clust = n;
3530:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;
3531:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = n;
3532:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3533:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3534:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3535:Middlewares/Third_Party/FatFs/src/ff.c **** }
3536:Middlewares/Third_Party/FatFs/src/ff.c **** 
3537:Middlewares/Third_Party/FatFs/src/ff.c **** 
3538:Middlewares/Third_Party/FatFs/src/ff.c **** 
3539:Middlewares/Third_Party/FatFs/src/ff.c **** 
3540:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3541:Middlewares/Third_Party/FatFs/src/ff.c **** /* Truncate File                                                         */
3542:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3543:Middlewares/Third_Party/FatFs/src/ff.c **** 
3544:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_truncate (
3545:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object */
3546:Middlewares/Third_Party/FatFs/src/ff.c **** )
3547:Middlewares/Third_Party/FatFs/src/ff.c **** {
3548:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3549:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ncl;
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 
3552:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(fp);						/* Check validity of the object */
3553:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3554:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->err) {						/* Check error */
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = (FRESULT)fp->err;
3556:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
3557:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(fp->flag & FA_WRITE))		/* Check access mode */
3558:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DENIED;
3559:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3560:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3561:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
ARM GAS  /tmp/ccVdKYyy.s 			page 168


3562:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fsize > fp->fptr) {
3563:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fsize = fp->fptr;	/* Set file size to current R/W point */
3564:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA__WRITTEN;
3565:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
3566:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = remove_chain(fp->fs, fp->sclust);
3567:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->sclust = 0;
3568:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* When truncate a part of the file, remove remaining clusters */
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 				ncl = get_fat(fp->fs, fp->clust);
3570:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
3571:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
3572:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ncl == 1) res = FR_INT_ERR;
3573:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && ncl < fp->fs->n_fatent) {
3574:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
3575:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) res = remove_chain(fp->fs, ncl);
3576:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3577:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3578:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3579:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && (fp->flag & FA__DIRTY)) {
3580:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DISK_ERR;
3582:Middlewares/Third_Party/FatFs/src/ff.c **** 				else
3583:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= ~FA__DIRTY;
3584:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3585:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3586:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3587:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) fp->err = (FRESULT)res;
3588:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3589:Middlewares/Third_Party/FatFs/src/ff.c **** 
3590:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fp->fs, res);
3591:Middlewares/Third_Party/FatFs/src/ff.c **** }
3592:Middlewares/Third_Party/FatFs/src/ff.c **** 
3593:Middlewares/Third_Party/FatFs/src/ff.c **** 
3594:Middlewares/Third_Party/FatFs/src/ff.c **** 
3595:Middlewares/Third_Party/FatFs/src/ff.c **** 
3596:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3597:Middlewares/Third_Party/FatFs/src/ff.c **** /* Delete a File or Directory                                            */
3598:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3599:Middlewares/Third_Party/FatFs/src/ff.c **** 
3600:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_unlink (
3601:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path		/* Pointer to the file or directory path */
3602:Middlewares/Third_Party/FatFs/src/ff.c **** )
3603:Middlewares/Third_Party/FatFs/src/ff.c **** {
3604:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3605:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj, sdj;
3606:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
3607:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dclst = 0;
3608:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3609:Middlewares/Third_Party/FatFs/src/ff.c **** 
3610:Middlewares/Third_Party/FatFs/src/ff.c **** 
3611:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3612:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, 1);
3613:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3614:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
3615:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
3616:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT))
3617:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
3618:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
ARM GAS  /tmp/ccVdKYyy.s 			page 169


3619:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = chk_lock(&dj, 2);	/* Cannot remove open object */
3620:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3621:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {					/* The object is accessible */
3622:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dj.dir;
3623:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir) {
3624:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
3625:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
3626:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dir[DIR_Attr] & AM_RDO)
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
3628:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3629:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
3630:Middlewares/Third_Party/FatFs/src/ff.c **** 				dclst = ld_clust(dj.fs, dir);
3631:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dclst && (dir[DIR_Attr] & AM_DIR)) {	/* Is it a sub-directory ? */
3632:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
3633:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (dclst == dj.fs->cdir) {		 		/* Is it the current directory? */
3634:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
3635:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
3636:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3637:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
3638:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(&sdj, &dj, sizeof (DIR));	/* Open the sub-directory */
3639:Middlewares/Third_Party/FatFs/src/ff.c **** 						sdj.sclust = dclst;
3640:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = dir_sdi(&sdj, 2);
3641:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
3642:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = dir_read(&sdj, 0);			/* Read an item (excluding dot entries) */
3643:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? (cannot remove) */
3644:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? (can remove) */
3645:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
3646:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3647:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3648:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3649:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
3650:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&dj);		/* Remove the directory entry */
3651:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && dclst)	/* Remove the cluster chain if exist */
3652:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = remove_chain(dj.fs, dclst);
3653:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) res = sync_fs(dj.fs);
3654:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3655:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3658:Middlewares/Third_Party/FatFs/src/ff.c **** 
3659:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
3660:Middlewares/Third_Party/FatFs/src/ff.c **** }
3661:Middlewares/Third_Party/FatFs/src/ff.c **** 
3662:Middlewares/Third_Party/FatFs/src/ff.c **** 
3663:Middlewares/Third_Party/FatFs/src/ff.c **** 
3664:Middlewares/Third_Party/FatFs/src/ff.c **** 
3665:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3666:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create a Directory                                                    */
3667:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3668:Middlewares/Third_Party/FatFs/src/ff.c **** 
3669:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_mkdir (
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path		/* Pointer to the directory path */
3671:Middlewares/Third_Party/FatFs/src/ff.c **** )
3672:Middlewares/Third_Party/FatFs/src/ff.c **** {
3673:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3674:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3675:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir, n;
ARM GAS  /tmp/ccVdKYyy.s 			page 170


3676:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dsc, dcl, pcl, tm = GET_FATTIME();
3677:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3678:Middlewares/Third_Party/FatFs/src/ff.c **** 
3679:Middlewares/Third_Party/FatFs/src/ff.c **** 
3680:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3681:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, 1);
3682:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3683:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
3684:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
3685:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
3686:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT))
3687:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;
3688:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) {				/* Can create a new directory */
3689:Middlewares/Third_Party/FatFs/src/ff.c **** 			dcl = create_chain(dj.fs, 0);		/* Allocate a cluster for the new directory table */
3690:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
3691:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster */
3692:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
3693:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
3694:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)					/* Flush FAT */
3695:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_window(dj.fs);
3696:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
3697:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(dj.fs, dcl);
3698:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = dj.fs->win.d8;
3699:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(dir, 0, SS(dj.fs));
3700:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(dir + DIR_Name, ' ', 11);	/* Create "." entry */
3701:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Name] = '.';
3702:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] = AM_DIR;
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);
3704:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, dcl);
3705:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(dir + SZ_DIRE, dir, SZ_DIRE); 	/* Create ".." entry */
3706:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[SZ_DIRE + 1] = '.'; pcl = dj.sclust;
3707:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
3708:Middlewares/Third_Party/FatFs/src/ff.c **** 					pcl = 0;
3709:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir + SZ_DIRE, pcl);
3710:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (n = dj.fs->csize; n; n--) {	/* Write dot entries and clear following sectors */
3711:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.fs->winsect = dsc++;
3712:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.fs->wflag = 1;
3713:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_window(dj.fs);
3714:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res != FR_OK) break;
3715:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dir, 0, SS(dj.fs));
3716:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3717:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3718:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) res = dir_register(&dj);	/* Register the object to the directoy */
3719:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {
3720:Middlewares/Third_Party/FatFs/src/ff.c **** 				remove_chain(dj.fs, dcl);			/* Could not register, remove cluster chain */
3721:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
3722:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = dj.dir;
3723:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] = AM_DIR;				/* Attribute */
3724:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);	/* Created time */
3725:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, dcl);					/* Table start cluster */
3726:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.fs->wflag = 1;
3727:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(dj.fs);
3728:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3729:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3730:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3731:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3732:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccVdKYyy.s 			page 171


3733:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
3734:Middlewares/Third_Party/FatFs/src/ff.c **** }
3735:Middlewares/Third_Party/FatFs/src/ff.c **** 
3736:Middlewares/Third_Party/FatFs/src/ff.c **** 
3737:Middlewares/Third_Party/FatFs/src/ff.c **** 
3738:Middlewares/Third_Party/FatFs/src/ff.c **** 
3739:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3740:Middlewares/Third_Party/FatFs/src/ff.c **** /* Change Attribute                                                      */
3741:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3742:Middlewares/Third_Party/FatFs/src/ff.c **** 
3743:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_chmod (
3744:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
3745:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE attr,			/* Attribute bits */
3746:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE mask			/* Attribute mask to change */
3747:Middlewares/Third_Party/FatFs/src/ff.c **** )
3748:Middlewares/Third_Party/FatFs/src/ff.c **** {
3749:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3750:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3751:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
3752:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3753:Middlewares/Third_Party/FatFs/src/ff.c **** 
3754:Middlewares/Third_Party/FatFs/src/ff.c **** 
3755:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3756:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, 1);
3757:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3758:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
3759:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
3760:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3761:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT))
3762:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;
3763:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3764:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dj.dir;
3765:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir) {						/* Is it a root directory? */
3766:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
3767:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {						/* File or sub directory */
3768:Middlewares/Third_Party/FatFs/src/ff.c **** 				mask &= AM_RDO|AM_HID|AM_SYS|AM_ARC;	/* Valid attribute mask */
3769:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] = (attr & mask) | (dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change */
3770:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.fs->wflag = 1;
3771:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(dj.fs);
3772:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3773:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3774:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3775:Middlewares/Third_Party/FatFs/src/ff.c **** 
3776:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
3777:Middlewares/Third_Party/FatFs/src/ff.c **** }
3778:Middlewares/Third_Party/FatFs/src/ff.c **** 
3779:Middlewares/Third_Party/FatFs/src/ff.c **** 
3780:Middlewares/Third_Party/FatFs/src/ff.c **** 
3781:Middlewares/Third_Party/FatFs/src/ff.c **** 
3782:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3783:Middlewares/Third_Party/FatFs/src/ff.c **** /* Rename File/Directory                                                 */
3784:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3785:Middlewares/Third_Party/FatFs/src/ff.c **** 
3786:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_rename (
3787:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path_old,	/* Pointer to the object to be renamed */
3788:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path_new	/* Pointer to the new name */
3789:Middlewares/Third_Party/FatFs/src/ff.c **** )
ARM GAS  /tmp/ccVdKYyy.s 			page 172


3790:Middlewares/Third_Party/FatFs/src/ff.c **** {
3791:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3792:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR djo, djn;
3793:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE buf[21], *dir;
3794:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dw;
3795:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3796:Middlewares/Third_Party/FatFs/src/ff.c **** 
3797:Middlewares/Third_Party/FatFs/src/ff.c **** 
3798:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number of the source object */
3799:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&djo.fs, &path_old, 1);
3800:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3801:Middlewares/Third_Party/FatFs/src/ff.c **** 		djn.fs = djo.fs;
3802:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(djo);
3803:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
3804:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (djo.fn[NSFLAG] & NS_DOT))
3805:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;
3806:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
3807:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = chk_lock(&djo, 2);
3808:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3809:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {						/* Old object is found */
3810:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!djo.dir) {						/* Is root dir? */
3811:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_FILE;
3812:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
3813:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(buf, djo.dir + DIR_Attr, 21);	/* Save information about object except name */
3814:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
3815:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (get_ldnumber(&path_new) >= 0)		/* Snip drive number off and ignore it */
3816:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = follow_path(&djn, path_new);	/* and make sure if new object name is not conflicting */
3817:Middlewares/Third_Party/FatFs/src/ff.c **** 				else
3818:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_INVALID_DRIVE;
3819:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) res = FR_EXIST;		/* The new object name is already existing */
3820:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) { 				/* It is a valid path and no name collision */
3821:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
3822:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
3823:Middlewares/Third_Party/FatFs/src/ff.c **** /* Start of critical section where any interruption can cause a cross-link */
3824:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir = djn.dir;					/* Copy information about object except name */
3825:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(dir + 13, buf + 2, 19);
3826:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
3827:Middlewares/Third_Party/FatFs/src/ff.c **** 						djo.fs->wflag = 1;
3828:Middlewares/Third_Party/FatFs/src/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.sclust != djn.sclust) {	/* Update .. entry in the sub-dir
3829:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(djo.fs, ld_clust(djo.fs, dir));
3830:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (!dw) {
3831:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = FR_INT_ERR;
3832:Middlewares/Third_Party/FatFs/src/ff.c **** 							} else {
3833:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = move_window(djo.fs, dw);
3834:Middlewares/Third_Party/FatFs/src/ff.c **** 								dir = djo.fs->win.d8 + SZ_DIRE * 1;	/* Ptr to .. entry */
3835:Middlewares/Third_Party/FatFs/src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
3836:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(dir, djn.sclust);
3837:Middlewares/Third_Party/FatFs/src/ff.c **** 									djo.fs->wflag = 1;
3838:Middlewares/Third_Party/FatFs/src/ff.c **** 								}
3839:Middlewares/Third_Party/FatFs/src/ff.c **** 							}
3840:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
3841:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
3842:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = dir_remove(&djo);		/* Remove old entry */
3843:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK)
3844:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = sync_fs(djo.fs);
3845:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
3846:Middlewares/Third_Party/FatFs/src/ff.c **** /* End of critical section */
ARM GAS  /tmp/ccVdKYyy.s 			page 173


3847:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3848:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3849:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3850:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3851:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3852:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3853:Middlewares/Third_Party/FatFs/src/ff.c **** 
3854:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(djo.fs, res);
3855:Middlewares/Third_Party/FatFs/src/ff.c **** }
3856:Middlewares/Third_Party/FatFs/src/ff.c **** 
3857:Middlewares/Third_Party/FatFs/src/ff.c **** 
3858:Middlewares/Third_Party/FatFs/src/ff.c **** 
3859:Middlewares/Third_Party/FatFs/src/ff.c **** 
3860:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3861:Middlewares/Third_Party/FatFs/src/ff.c **** /* Change Timestamp                                                      */
3862:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3863:Middlewares/Third_Party/FatFs/src/ff.c **** 
3864:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_utime (
3865:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file/directory name */
3866:Middlewares/Third_Party/FatFs/src/ff.c **** 	const FILINFO* fno	/* Pointer to the time stamp to be set */
3867:Middlewares/Third_Party/FatFs/src/ff.c **** )
3868:Middlewares/Third_Party/FatFs/src/ff.c **** {
3869:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3870:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3871:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
3872:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
3873:Middlewares/Third_Party/FatFs/src/ff.c **** 
3874:Middlewares/Third_Party/FatFs/src/ff.c **** 
3875:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3876:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, 1);
3877:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3878:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
3879:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
3880:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
3881:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT))
3882:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;
3883:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3884:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dj.dir;
3885:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir) {					/* Root directory */
3886:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
3887:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* File or sub-directory */
3888:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_WORD(dir + DIR_WrtTime, fno->ftime);
3889:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_WORD(dir + DIR_WrtDate, fno->fdate);
3890:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.fs->wflag = 1;
3891:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(dj.fs);
3892:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3893:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3894:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3895:Middlewares/Third_Party/FatFs/src/ff.c **** 
3896:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
3897:Middlewares/Third_Party/FatFs/src/ff.c **** }
3898:Middlewares/Third_Party/FatFs/src/ff.c **** 
3899:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
3900:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE == 0 */
3901:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE <= 1 */
3902:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE <= 2 */
3903:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccVdKYyy.s 			page 174


3904:Middlewares/Third_Party/FatFs/src/ff.c **** 
3905:Middlewares/Third_Party/FatFs/src/ff.c **** 
3906:Middlewares/Third_Party/FatFs/src/ff.c **** 
3907:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LABEL
3908:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3909:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get volume label                                                      */
3910:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3911:Middlewares/Third_Party/FatFs/src/ff.c **** 
3912:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_getlabel (
3913:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Path name of the logical drive number */
3914:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR* label,		/* Pointer to a buffer to return the volume label */
3915:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD* vsn			/* Pointer to a variable to return the volume serial number */
3916:Middlewares/Third_Party/FatFs/src/ff.c **** )
3917:Middlewares/Third_Party/FatFs/src/ff.c **** {
3918:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3919:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3920:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j;
3921:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN && _LFN_UNICODE
3922:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w;
3923:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3924:Middlewares/Third_Party/FatFs/src/ff.c **** 
3925:Middlewares/Third_Party/FatFs/src/ff.c **** 
3926:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3927:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &path, 0);
3928:Middlewares/Third_Party/FatFs/src/ff.c **** 
3929:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get volume label */
3930:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && label) {
3931:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.sclust = 0;					/* Open root directory */
3932:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(&dj, 0);
3933:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3934:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_read(&dj, 1);		/* Get an entry with AM_VOL */
3935:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {			/* A volume label is exist */
3936:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN && _LFN_UNICODE
3937:Middlewares/Third_Party/FatFs/src/ff.c **** 				i = j = 0;
3938:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
3939:Middlewares/Third_Party/FatFs/src/ff.c **** 					w = (i < 11) ? dj.dir[i++] : ' ';
3940:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (IsDBCS1(w) && i < 11 && IsDBCS2(dj.dir[i]))
3941:Middlewares/Third_Party/FatFs/src/ff.c **** 						w = w << 8 | dj.dir[i++];
3942:Middlewares/Third_Party/FatFs/src/ff.c **** 					label[j++] = ff_convert(w, 1);	/* OEM -> Unicode */
3943:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (j < 11);
3944:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3945:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(label, dj.dir, 11);
3946:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3947:Middlewares/Third_Party/FatFs/src/ff.c **** 				j = 11;
3948:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
3949:Middlewares/Third_Party/FatFs/src/ff.c **** 					label[j] = 0;
3950:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!j) break;
3951:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (label[--j] == ' ');
3952:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3953:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) {	/* No label, return nul string */
3954:Middlewares/Third_Party/FatFs/src/ff.c **** 				label[0] = 0;
3955:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
3956:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3957:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3958:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3959:Middlewares/Third_Party/FatFs/src/ff.c **** 
3960:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get volume serial number */
ARM GAS  /tmp/ccVdKYyy.s 			page 175


3961:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && vsn) {
3962:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dj.fs, dj.fs->volbase);
3963:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3964:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = dj.fs->fs_type == FS_FAT32 ? BS_VolID32 : BS_VolID;
3965:Middlewares/Third_Party/FatFs/src/ff.c **** 			*vsn = LD_DWORD(&dj.fs->win.d8[i]);
3966:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3967:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3968:Middlewares/Third_Party/FatFs/src/ff.c **** 
3969:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
3970:Middlewares/Third_Party/FatFs/src/ff.c **** }
3971:Middlewares/Third_Party/FatFs/src/ff.c **** 
3972:Middlewares/Third_Party/FatFs/src/ff.c **** 
3973:Middlewares/Third_Party/FatFs/src/ff.c **** 
3974:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3975:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3976:Middlewares/Third_Party/FatFs/src/ff.c **** /* Set volume label                                                      */
3977:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3978:Middlewares/Third_Party/FatFs/src/ff.c **** 
3979:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_setlabel (
3980:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* label	/* Pointer to the volume label to set */
3981:Middlewares/Third_Party/FatFs/src/ff.c **** )
3982:Middlewares/Third_Party/FatFs/src/ff.c **** {
3983:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3984:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3985:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE vn[11];
3986:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j, sl;
3987:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w;
3988:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD tm;
3989:Middlewares/Third_Party/FatFs/src/ff.c **** 
3990:Middlewares/Third_Party/FatFs/src/ff.c **** 
3991:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3992:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&dj.fs, &label, 1);
3993:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res) LEAVE_FF(dj.fs, res);
3994:Middlewares/Third_Party/FatFs/src/ff.c **** 
3995:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create a volume label in directory form */
3996:Middlewares/Third_Party/FatFs/src/ff.c **** 	vn[0] = 0;
3997:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (sl = 0; label[sl]; sl++) ;				/* Get name length */
3998:Middlewares/Third_Party/FatFs/src/ff.c **** 	for ( ; sl && label[sl - 1] == ' '; sl--) ;	/* Remove trailing spaces */
3999:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sl) {	/* Create volume label in directory form */
4000:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = j = 0;
4001:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
4002:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN && _LFN_UNICODE
4003:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = ff_convert(ff_wtoupper(label[i++]), 0);
4004:Middlewares/Third_Party/FatFs/src/ff.c **** #else
4005:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = (BYTE)label[i++];
4006:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsDBCS1(w))
4007:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = (j < 10 && i < sl && IsDBCS2(label[i])) ? w << 8 | (BYTE)label[i++] : 0;
4008:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN
4009:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = ff_convert(ff_wtoupper(ff_convert(w, 1)), 0);
4010:Middlewares/Third_Party/FatFs/src/ff.c **** #else
4011:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsLower(w)) w -= 0x20;			/* To upper ASCII characters */
4012:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
4013:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (w >= 0x80) w = ExCvt[w - 0x80];	/* To upper extended characters (SBCS cfg) */
4014:Middlewares/Third_Party/FatFs/src/ff.c **** #else
4015:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_DF1S && w >= 0x80) w = 0;		/* Reject extended characters (ASCII cfg) */
4016:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4017:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  /tmp/ccVdKYyy.s 			page 176


4018:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4019:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!w || chk_chr("\"*+,.:;<=>\?[]|\x7F", w) || j >= (UINT)((w >= 0x100) ? 10 : 11)) /* Reject i
4020:Middlewares/Third_Party/FatFs/src/ff.c **** 				LEAVE_FF(dj.fs, FR_INVALID_NAME);
4021:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (w >= 0x100) vn[j++] = (BYTE)(w >> 8);
4022:Middlewares/Third_Party/FatFs/src/ff.c **** 			vn[j++] = (BYTE)w;
4023:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (i < sl);
4024:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (j < 11) vn[j++] = ' ';	/* Fill remaining name field */
4025:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (vn[0] == DDEM) LEAVE_FF(dj.fs, FR_INVALID_NAME);	/* Reject illegal name (heading DDEM) */
4026:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 
4028:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Set volume label */
4029:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.sclust = 0;					/* Open root directory */
4030:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(&dj, 0);
4031:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4032:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_read(&dj, 1);		/* Get an entry with AM_VOL */
4033:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {			/* A volume label is found */
4034:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (vn[0]) {
4035:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(dj.dir, vn, 11);	/* Change the volume label name */
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 				tm = GET_FATTIME();
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dj.dir + DIR_WrtTime, tm);
4038:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4039:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.dir[0] = DDEM;			/* Remove the volume label */
4040:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4041:Middlewares/Third_Party/FatFs/src/ff.c **** 			dj.fs->wflag = 1;
4042:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = sync_fs(dj.fs);
4043:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {					/* No volume label is found or error */
4044:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) {
4045:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
4046:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (vn[0]) {				/* Create volume label as new */
4047:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_alloc(&dj, 1);	/* Allocate an entry for volume label */
4048:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
4049:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_set(dj.dir, 0, SZ_DIRE);	/* Set volume label */
4050:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(dj.dir, vn, 11);
4051:Middlewares/Third_Party/FatFs/src/ff.c **** 						dj.dir[DIR_Attr] = AM_VOL;
4052:Middlewares/Third_Party/FatFs/src/ff.c **** 						tm = GET_FATTIME();
4053:Middlewares/Third_Party/FatFs/src/ff.c **** 						ST_DWORD(dj.dir + DIR_WrtTime, tm);
4054:Middlewares/Third_Party/FatFs/src/ff.c **** 						dj.fs->wflag = 1;
4055:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = sync_fs(dj.fs);
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4057:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4058:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4059:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4060:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4061:Middlewares/Third_Party/FatFs/src/ff.c **** 
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.fs, res);
4063:Middlewares/Third_Party/FatFs/src/ff.c **** }
4064:Middlewares/Third_Party/FatFs/src/ff.c **** 
4065:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_LABEL */
4067:Middlewares/Third_Party/FatFs/src/ff.c **** 
4068:Middlewares/Third_Party/FatFs/src/ff.c **** 
4069:Middlewares/Third_Party/FatFs/src/ff.c **** 
4070:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4071:Middlewares/Third_Party/FatFs/src/ff.c **** /* Forward data to the stream directly (available on only tiny cfg)      */
4072:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4073:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FORWARD && _FS_TINY
4074:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccVdKYyy.s 			page 177


4075:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_forward (
4076:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp, 						/* Pointer to the file object */
4077:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT (*func)(const BYTE*,UINT),	/* Pointer to the streaming function */
4078:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT btf,						/* Number of bytes to forward */
4079:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT* bf						/* Pointer to number of bytes forwarded */
4080:Middlewares/Third_Party/FatFs/src/ff.c **** )
4081:Middlewares/Third_Party/FatFs/src/ff.c **** {
4082:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4083:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD remain, clst, sect;
4084:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rcnt;
4085:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE csect;
4086:Middlewares/Third_Party/FatFs/src/ff.c **** 
4087:Middlewares/Third_Party/FatFs/src/ff.c **** 
4088:Middlewares/Third_Party/FatFs/src/ff.c **** 	*bf = 0;	/* Clear transfer byte counter */
4089:Middlewares/Third_Party/FatFs/src/ff.c **** 
4090:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(fp);								/* Check validity of the object */
4091:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
4092:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->err)									/* Check error */
4093:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
4094:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ))						/* Check access mode */
4095:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, FR_DENIED);
4096:Middlewares/Third_Party/FatFs/src/ff.c **** 
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->fsize - fp->fptr;
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btf > remain) btf = (UINT)remain;			/* Truncate btf by remaining bytes */
4099:Middlewares/Third_Party/FatFs/src/ff.c **** 
4100:Middlewares/Third_Party/FatFs/src/ff.c **** 	for ( ;  btf && (*func)(0, 0);					/* Repeat until all data transferred or stream becomes busy */
4101:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fptr += rcnt, *bf += rcnt, btf -= rcnt) {
4102:Middlewares/Third_Party/FatFs/src/ff.c **** 		csect = (BYTE)(fp->fptr / SS(fp->fs) & (fp->fs->csize - 1));	/* Sector offset in the cluster */
4103:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((fp->fptr % SS(fp->fs)) == 0) {			/* On the sector boundary? */
4104:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!csect) {							/* On the cluster boundary? */
4105:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = (fp->fptr == 0) ?			/* On the top of the file? */
4106:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->sclust : get_fat(fp->fs, fp->clust);
4107:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) ABORT(fp->fs, FR_INT_ERR);
4108:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
4109:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;					/* Update current cluster */
4110:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4111:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4112:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = clust2sect(fp->fs, fp->clust);		/* Get current data sector */
4113:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!sect) ABORT(fp->fs, FR_INT_ERR);
4114:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect += csect;
4115:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fp->fs, sect) != FR_OK)		/* Move sector window */
4116:Middlewares/Third_Party/FatFs/src/ff.c **** 			ABORT(fp->fs, FR_DISK_ERR);
4117:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->dsect = sect;
4118:Middlewares/Third_Party/FatFs/src/ff.c **** 		rcnt = SS(fp->fs) - (WORD)(fp->fptr % SS(fp->fs));	/* Forward data from sector window */
4119:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btf) rcnt = btf;
4120:Middlewares/Third_Party/FatFs/src/ff.c **** 		rcnt = (*func)(&fp->fs->win.d8[(WORD)fp->fptr % SS(fp->fs)], rcnt);
4121:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!rcnt) ABORT(fp->fs, FR_INT_ERR);
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 
4124:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fp->fs, FR_OK);
4125:Middlewares/Third_Party/FatFs/src/ff.c **** }
4126:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_FORWARD */
4127:Middlewares/Third_Party/FatFs/src/ff.c **** 
4128:Middlewares/Third_Party/FatFs/src/ff.c **** 
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 
4130:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_MKFS && !_FS_READONLY
4131:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  /tmp/ccVdKYyy.s 			page 178


4132:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create file system on the logical drive                               */
4133:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4134:Middlewares/Third_Party/FatFs/src/ff.c **** #define N_ROOTDIR	512		/* Number of root directory entries for FAT12/16 */
4135:Middlewares/Third_Party/FatFs/src/ff.c **** #define N_FATS		1		/* Number of FATs (1 or 2) */
4136:Middlewares/Third_Party/FatFs/src/ff.c **** 
4137:Middlewares/Third_Party/FatFs/src/ff.c **** 
4138:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_mkfs (
4139:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Logical drive number */
4140:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sfd,			/* Partitioning rule 0:FDISK, 1:SFD */
4141:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT au				/* Size of allocation unit in unit of byte or sector */
4142:Middlewares/Third_Party/FatFs/src/ff.c **** )
4143:Middlewares/Third_Party/FatFs/src/ff.c **** {
4144:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const WORD vst[] = { 1024,   512,  256,  128,   64,    32,   16,    8,    4,    2,   0};
4145:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const WORD cst[] = {32768, 16384, 8192, 4096, 2048, 16384, 8192, 4096, 2048, 1024, 512};
4146:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
4147:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, md, sys, *tbl, pdrv, part;
4148:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD n_clst, vs, n, wsect;
4149:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
4150:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD b_vol, b_fat, b_dir, b_data;	/* LBA */
4151:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD n_vol, n_rsv, n_fat, n_dir;	/* Size */
4152:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4153:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
4154:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
4155:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD eb[2];
4156:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4157:Middlewares/Third_Party/FatFs/src/ff.c **** 
4158:Middlewares/Third_Party/FatFs/src/ff.c **** 
4159:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Check mounted drive and clear work area */
4160:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sfd > 1) return FR_INVALID_PARAMETER;
4161:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&path);
4162:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
4163:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs = FatFs[vol];
4164:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;
4165:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fs_type = 0;
4166:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
4167:Middlewares/Third_Party/FatFs/src/ff.c **** 	part = LD2PT(vol);	/* Partition (0:auto detect, 1-4:get from partition table)*/
4168:Middlewares/Third_Party/FatFs/src/ff.c **** 
4169:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get disk statics */
4170:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(pdrv);
4171:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
4172:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
4173:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get disk sector size */
4174:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_SECTOR_SIZE, &SS(fs)) != RES_OK || SS(fs) > _MAX_SS || SS(fs) < _MIN_SS)
4175:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_DISK_ERR;
4176:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4177:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_MULTI_PARTITION && part) {
4178:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Get partition information from partition table in the MBR */
4179:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_read(pdrv, fs->win.d8, 0, 1) != RES_OK) return FR_DISK_ERR;
4180:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (LD_WORD(fs->win.d8 + BS_55AA) != 0xAA55) return FR_MKFS_ABORTED;
4181:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl = &fs->win.d8[MBR_Table + (part - 1) * SZ_PTE];
4182:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!tbl[4]) return FR_MKFS_ABORTED;	/* No partition? */
4183:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = LD_DWORD(tbl + 8);	/* Volume start sector */
4184:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_vol = LD_DWORD(tbl + 12);	/* Volume size */
4185:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
4186:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create a partition in this function */
4187:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &n_vol) != RES_OK || n_vol < 128)
4188:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_DISK_ERR;
ARM GAS  /tmp/ccVdKYyy.s 			page 179


4189:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (sfd) ? 0 : 63;		/* Volume start sector */
4190:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_vol -= b_vol;				/* Volume size */
4191:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4192:Middlewares/Third_Party/FatFs/src/ff.c **** 
4193:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (au & (au - 1)) au = 0;
4194:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!au) {						/* AU auto selection */
4195:Middlewares/Third_Party/FatFs/src/ff.c **** 		vs = n_vol / (2000 / (SS(fs) / 512));
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; vs < vst[i]; i++) ;
4197:Middlewares/Third_Party/FatFs/src/ff.c **** 		au = cst[i];
4198:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4199:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (au >= _MIN_SS) au /= SS(fs);	/* Number of sectors per cluster */
4200:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!au) au = 1;
4201:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (au > 128) au = 128;
4202:Middlewares/Third_Party/FatFs/src/ff.c **** 
4203:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Pre-compute number of clusters and FAT sub-type */
4204:Middlewares/Third_Party/FatFs/src/ff.c **** 	n_clst = n_vol / au;
4205:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = FS_FAT12;
4206:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_clst >= MIN_FAT16) fmt = FS_FAT16;
4207:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
4208:Middlewares/Third_Party/FatFs/src/ff.c **** 
4209:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine offset and size of FAT structure */
4210:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
4211:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_fat = ((n_clst * 4) + 8 + SS(fs) - 1) / SS(fs);
4212:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_rsv = 32;
4213:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_dir = 0;
4214:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
4215:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_fat = (fmt == FS_FAT12) ? (n_clst * 3 + 1) / 2 + 3 : (n_clst * 2) + 4;
4216:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
4217:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_rsv = 1;
4218:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_dir = (DWORD)N_ROOTDIR * SZ_DIRE / SS(fs);
4219:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4220:Middlewares/Third_Party/FatFs/src/ff.c **** 	b_fat = b_vol + n_rsv;				/* FAT area start sector */
4221:Middlewares/Third_Party/FatFs/src/ff.c **** 	b_dir = b_fat + n_fat * N_FATS;		/* Directory area start sector */
4222:Middlewares/Third_Party/FatFs/src/ff.c **** 	b_data = b_dir + n_dir;				/* Data area start sector */
4223:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_vol < b_data + au - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
4224:Middlewares/Third_Party/FatFs/src/ff.c **** 
4225:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Align data start sector to erase block boundary (for flash memory media) */
4226:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &n) != RES_OK || !n || n > 32768) n = 1;
4227:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
4228:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = (n - b_data) / N_FATS;
4229:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {		/* FAT32: Move FAT offset */
4230:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_rsv += n;
4231:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_fat += n;
4232:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {					/* FAT12/16: Expand FAT size */
4233:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_fat += n;
4234:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4235:Middlewares/Third_Party/FatFs/src/ff.c **** 
4236:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine number of clusters and final check of validity of the FAT sub-type */
4237:Middlewares/Third_Party/FatFs/src/ff.c **** 	n_clst = (n_vol - n_rsv - n_fat * N_FATS - n_dir) / au;
4238:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
4239:Middlewares/Third_Party/FatFs/src/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
4240:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_MKFS_ABORTED;
4241:Middlewares/Third_Party/FatFs/src/ff.c **** 
4242:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine system ID in the partition table */
4243:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
4244:Middlewares/Third_Party/FatFs/src/ff.c **** 		sys = 0x0C;		/* FAT32X */
4245:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
ARM GAS  /tmp/ccVdKYyy.s 			page 180


4246:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT12 && n_vol < 0x10000) {
4247:Middlewares/Third_Party/FatFs/src/ff.c **** 			sys = 0x01;	/* FAT12(<65536) */
4248:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
4249:Middlewares/Third_Party/FatFs/src/ff.c **** 			sys = (n_vol < 0x10000) ? 0x04 : 0x06;	/* FAT16(<65536) : FAT12/16(>=65536) */
4250:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4251:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4252:Middlewares/Third_Party/FatFs/src/ff.c **** 
4253:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_MULTI_PARTITION && part) {
4254:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update system ID in the partition table */
4255:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl = &fs->win.d8[MBR_Table + (part - 1) * SZ_PTE];
4256:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[4] = sys;
4257:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(pdrv, fs->win.d8, 0, 1) != RES_OK)	/* Write it to teh MBR */
4258:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_DISK_ERR;
4259:Middlewares/Third_Party/FatFs/src/ff.c **** 		md = 0xF8;
4260:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
4261:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sfd) {	/* No partition table (SFD) */
4262:Middlewares/Third_Party/FatFs/src/ff.c **** 			md = 0xF0;
4263:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {	/* Create partition table (FDISK) */
4264:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(fs->win.d8, 0, SS(fs));
4265:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl = fs->win.d8 + MBR_Table;	/* Create partition table for single partition in the drive */
4266:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[1] = 1;						/* Partition start head */
4267:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[2] = 1;						/* Partition start sector */
4268:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[3] = 0;						/* Partition start cylinder */
4269:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[4] = sys;					/* System type */
4270:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[5] = 254;					/* Partition end head */
4271:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (b_vol + n_vol) / 63 / 255;
4272:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[6] = (BYTE)(n >> 2 | 63);	/* Partition end sector */
4273:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[7] = (BYTE)n;				/* End cylinder */
4274:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 8, 63);			/* Partition start in LBA */
4275:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 12, n_vol);		/* Partition size in LBA */
4276:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_WORD(fs->win.d8 + BS_55AA, 0xAA55);	/* MBR signature */
4277:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, fs->win.d8, 0, 1) != RES_OK)	/* Write it to the MBR */
4278:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_DISK_ERR;
4279:Middlewares/Third_Party/FatFs/src/ff.c **** 			md = 0xF8;
4280:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4281:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4282:Middlewares/Third_Party/FatFs/src/ff.c **** 
4283:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create BPB in the VBR */
4284:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl = fs->win.d8;							/* Clear sector */
4285:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(tbl, 0, SS(fs));
4286:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(tbl, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code, OEM name */
4287:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = SS(fs);								/* Sector size */
4288:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_BytsPerSec, i);
4289:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl[BPB_SecPerClus] = (BYTE)au;			/* Sectors per cluster */
4290:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_RsvdSecCnt, n_rsv);	/* Reserved sectors */
4291:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl[BPB_NumFATs] = N_FATS;				/* Number of FATs */
4292:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = (fmt == FS_FAT32) ? 0 : N_ROOTDIR;	/* Number of root directory entries */
4293:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_RootEntCnt, i);
4294:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_vol < 0x10000) {					/* Number of total sectors */
4295:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_TotSec16, n_vol);
4296:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
4297:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_TotSec32, n_vol);
4298:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4299:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl[BPB_Media] = md;					/* Media descriptor */
4300:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_SecPerTrk, 63);		/* Number of sectors per track */
4301:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_NumHeads, 255);		/* Number of heads */
4302:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_DWORD(tbl + BPB_HiddSec, b_vol);		/* Hidden sectors */
ARM GAS  /tmp/ccVdKYyy.s 			page 181


4303:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = GET_FATTIME();						/* Use current time as VSN */
4304:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
4305:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BS_VolID32, n);		/* VSN */
4306:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
4307:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_RootClus, 2);	/* Root directory start cluster (2) */
4308:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_FSInfo, 1);		/* FSINFO record offset (VBR + 1) */
4309:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_BkBootSec, 6);	/* Backup boot record offset (VBR + 6) */
4310:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_DrvNum32] = 0x80;			/* Drive number */
4311:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_BootSig32] = 0x29;			/* Extended boot signature */
4312:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(tbl + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
4313:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
4314:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BS_VolID, n);		/* VSN */
4315:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_FATSz16, n_fat);	/* Number of sectors per FAT */
4316:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_DrvNum] = 0x80;				/* Drive number */
4317:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_BootSig] = 0x29;				/* Extended boot signature */
4318:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(tbl + BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
4319:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4320:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BS_55AA, 0xAA55);			/* Signature (Offset is fixed here regardless of sector size) */
4321:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_write(pdrv, tbl, b_vol, 1) != RES_OK)	/* Write it to the VBR sector */
4322:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_DISK_ERR;
4323:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32)					/* Write backup VBR if needed (VBR + 6) */
4324:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 6, 1);
4325:Middlewares/Third_Party/FatFs/src/ff.c **** 
4326:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Initialize FAT area */
4327:Middlewares/Third_Party/FatFs/src/ff.c **** 	wsect = b_fat;
4328:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < N_FATS; i++) {		/* Initialize each FAT copy */
4329:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* 1st sector of the FAT  */
4330:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = md;								/* Media descriptor byte */
4331:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt != FS_FAT32) {
4332:Middlewares/Third_Party/FatFs/src/ff.c **** 			n |= (fmt == FS_FAT12) ? 0x00FFFF00 : 0xFFFFFF00;
4333:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 0, n);			/* Reserve cluster #0-1 (FAT12/16) */
4334:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
4335:Middlewares/Third_Party/FatFs/src/ff.c **** 			n |= 0xFFFFFF00;
4336:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 0, n);			/* Reserve cluster #0-1 (FAT32) */
4337:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 4, 0xFFFFFFFF);
4338:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 8, 0x0FFFFFFF);	/* Reserve cluster #2 for root directory */
4339:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4340:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
4341:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_DISK_ERR;
4342:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_set(tbl, 0, SS(fs));			/* Fill following FAT entries with zero */
4343:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (n = 1; n < n_fat; n++) {		/* This loop may take a time on FAT32 volume due to many single se
4344:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
4345:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_DISK_ERR;
4346:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4347:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4348:Middlewares/Third_Party/FatFs/src/ff.c **** 
4349:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Initialize root directory */
4350:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = (fmt == FS_FAT32) ? au : (UINT)n_dir;
4351:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
4352:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
4353:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_DISK_ERR;
4354:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (--i);
4355:Middlewares/Third_Party/FatFs/src/ff.c **** 
4356:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM	/* Erase data area if needed */
4357:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
4358:Middlewares/Third_Party/FatFs/src/ff.c **** 		eb[0] = wsect; eb[1] = wsect + (n_clst - ((fmt == FS_FAT32) ? 1 : 0)) * au - 1;
4359:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_ioctl(pdrv, CTRL_TRIM, eb);
ARM GAS  /tmp/ccVdKYyy.s 			page 182


4360:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4361:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4362:Middlewares/Third_Party/FatFs/src/ff.c **** 
4363:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create FSINFO if needed */
4364:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
4365:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_LeadSig, 0x41615252);
4366:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_StrucSig, 0x61417272);
4367:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
4368:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
4369:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BS_55AA, 0xAA55);
4370:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR + 1) */
4371:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 7, 1);	/* Write backup (VBR + 7) */
4372:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4373:Middlewares/Third_Party/FatFs/src/ff.c **** 
4374:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (disk_ioctl(pdrv, CTRL_SYNC, 0) == RES_OK) ? FR_OK : FR_DISK_ERR;
4375:Middlewares/Third_Party/FatFs/src/ff.c **** }
4376:Middlewares/Third_Party/FatFs/src/ff.c **** 
4377:Middlewares/Third_Party/FatFs/src/ff.c **** 
4378:Middlewares/Third_Party/FatFs/src/ff.c **** 
4379:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MULTI_PARTITION
4380:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4381:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create partition table on the physical drive                          */
4382:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4383:Middlewares/Third_Party/FatFs/src/ff.c **** 
4384:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_fdisk (
4385:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE pdrv,			/* Physical drive number */
4386:Middlewares/Third_Party/FatFs/src/ff.c **** 	const DWORD szt[],	/* Pointer to the size table for each partitions */
4387:Middlewares/Third_Party/FatFs/src/ff.c **** 	void* work			/* Pointer to the working buffer */
4388:Middlewares/Third_Party/FatFs/src/ff.c **** )
4389:Middlewares/Third_Party/FatFs/src/ff.c **** {
4390:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, n, sz_cyl, tot_cyl, b_cyl, e_cyl, p_cyl;
4391:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE s_hd, e_hd, *p, *buf = (BYTE*)work;
4392:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
4393:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sz_disk, sz_part, s_part;
4394:Middlewares/Third_Party/FatFs/src/ff.c **** 
4395:Middlewares/Third_Party/FatFs/src/ff.c **** 
4396:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(pdrv);
4397:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
4398:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
4399:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &sz_disk)) return FR_DISK_ERR;
4400:Middlewares/Third_Party/FatFs/src/ff.c **** 
4401:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine CHS in the table regardless of the drive geometry */
4402:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (n = 16; n < 256 && sz_disk / n / 63 > 1024; n *= 2) ;
4403:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n == 256) n--;
4404:Middlewares/Third_Party/FatFs/src/ff.c **** 	e_hd = n - 1;
4405:Middlewares/Third_Party/FatFs/src/ff.c **** 	sz_cyl = 63 * n;
4406:Middlewares/Third_Party/FatFs/src/ff.c **** 	tot_cyl = sz_disk / sz_cyl;
4407:Middlewares/Third_Party/FatFs/src/ff.c **** 
4408:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create partition table */
4409:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(buf, 0, _MAX_SS);
4410:Middlewares/Third_Party/FatFs/src/ff.c **** 	p = buf + MBR_Table; b_cyl = 0;
4411:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < 4; i++, p += SZ_PTE) {
4412:Middlewares/Third_Party/FatFs/src/ff.c **** 		p_cyl = (szt[i] <= 100U) ? (DWORD)tot_cyl * szt[i] / 100 : szt[i] / sz_cyl;
4413:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!p_cyl) continue;
4414:Middlewares/Third_Party/FatFs/src/ff.c **** 		s_part = (DWORD)sz_cyl * b_cyl;
4415:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_part = (DWORD)sz_cyl * p_cyl;
4416:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 0) {	/* Exclude first track of cylinder 0 */
ARM GAS  /tmp/ccVdKYyy.s 			page 183


4417:Middlewares/Third_Party/FatFs/src/ff.c **** 			s_hd = 1;
4418:Middlewares/Third_Party/FatFs/src/ff.c **** 			s_part += 63; sz_part -= 63;
4419:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
4420:Middlewares/Third_Party/FatFs/src/ff.c **** 			s_hd = 0;
4421:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4422:Middlewares/Third_Party/FatFs/src/ff.c **** 		e_cyl = b_cyl + p_cyl - 1;
4423:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (e_cyl >= tot_cyl) return FR_INVALID_PARAMETER;
4424:Middlewares/Third_Party/FatFs/src/ff.c **** 
4425:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Set partition table */
4426:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[1] = s_hd;						/* Start head */
4427:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[2] = (BYTE)((b_cyl >> 2) + 1);	/* Start sector */
4428:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[3] = (BYTE)b_cyl;					/* Start cylinder */
4429:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[4] = 0x06;						/* System type (temporary setting) */
4430:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[5] = e_hd;						/* End head */
4431:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[6] = (BYTE)((e_cyl >> 2) + 63);	/* End sector */
4432:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[7] = (BYTE)e_cyl;					/* End cylinder */
4433:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(p + 8, s_part);			/* Start sector in LBA */
4434:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(p + 12, sz_part);			/* Partition size */
4435:Middlewares/Third_Party/FatFs/src/ff.c **** 
4436:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Next partition */
4437:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_cyl += p_cyl;
4438:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4439:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(p, 0xAA55);
4440:Middlewares/Third_Party/FatFs/src/ff.c **** 
4441:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Write it to the MBR */
4442:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (disk_write(pdrv, buf, 0, 1) != RES_OK || disk_ioctl(pdrv, CTRL_SYNC, 0) != RES_OK) ? FR_DI
4443:Middlewares/Third_Party/FatFs/src/ff.c **** }
4444:Middlewares/Third_Party/FatFs/src/ff.c **** 
4445:Middlewares/Third_Party/FatFs/src/ff.c **** 
4446:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _MULTI_PARTITION */
4447:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_MKFS && !_FS_READONLY */
4448:Middlewares/Third_Party/FatFs/src/ff.c **** 
4449:Middlewares/Third_Party/FatFs/src/ff.c **** 
4450:Middlewares/Third_Party/FatFs/src/ff.c **** 
4451:Middlewares/Third_Party/FatFs/src/ff.c **** 
4452:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_STRFUNC
4453:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4454:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get a string from the file                                            */
4455:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4456:Middlewares/Third_Party/FatFs/src/ff.c **** 
4457:Middlewares/Third_Party/FatFs/src/ff.c **** TCHAR* f_gets (
4458:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR* buff,	/* Pointer to the string buffer to read */
4459:Middlewares/Third_Party/FatFs/src/ff.c **** 	int len,		/* Size of string buffer (characters) */
4460:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp			/* Pointer to the file object */
4461:Middlewares/Third_Party/FatFs/src/ff.c **** )
4462:Middlewares/Third_Party/FatFs/src/ff.c **** {
4463:Middlewares/Third_Party/FatFs/src/ff.c **** 	int n = 0;
4464:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c, *p = buff;
4465:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE s[2];
4466:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rc;
4467:Middlewares/Third_Party/FatFs/src/ff.c **** 
4468:Middlewares/Third_Party/FatFs/src/ff.c **** 
4469:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (n < len - 1) {	/* Read characters until buffer gets filled */
4470:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN && _LFN_UNICODE
4471:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STRF_ENCODE == 3		/* Read a character in UTF-8 */
4472:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 1, &rc);
4473:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
ARM GAS  /tmp/ccVdKYyy.s 			page 184


4474:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
4475:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c >= 0x80) {
4476:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c < 0xC0) continue;	/* Skip stray trailer */
4477:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c < 0xE0) {			/* Two-byte sequence */
4478:Middlewares/Third_Party/FatFs/src/ff.c **** 				f_read(fp, s, 1, &rc);
4479:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (rc != 1) break;
4480:Middlewares/Third_Party/FatFs/src/ff.c **** 				c = (c & 0x1F) << 6 | (s[0] & 0x3F);
4481:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c < 0x80) c = '?';
4482:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4483:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c < 0xF0) {		/* Three-byte sequence */
4484:Middlewares/Third_Party/FatFs/src/ff.c **** 					f_read(fp, s, 2, &rc);
4485:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (rc != 2) break;
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 					c = c << 12 | (s[0] & 0x3F) << 6 | (s[1] & 0x3F);
4487:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (c < 0x800) c = '?';
4488:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {			/* Reject four-byte sequence */
4489:Middlewares/Third_Party/FatFs/src/ff.c **** 					c = '?';
4490:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4491:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4492:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4493:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 2		/* Read a character in UTF-16BE */
4494:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 2, &rc);
4495:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 2) break;
4496:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[1] + (s[0] << 8);
4497:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 1		/* Read a character in UTF-16LE */
4498:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 2, &rc);
4499:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 2) break;
4500:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0] + (s[1] << 8);
4501:Middlewares/Third_Party/FatFs/src/ff.c **** #else						/* Read a character in ANSI/OEM */
4502:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 1, &rc);
4503:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
4504:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
4505:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(c)) {
4506:Middlewares/Third_Party/FatFs/src/ff.c **** 			f_read(fp, s, 1, &rc);
4507:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (rc != 1) break;
4508:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = (c << 8) + s[0];
4509:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4510:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = ff_convert(c, 1);	/* OEM -> Unicode */
4511:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!c) c = '?';
4512:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4513:Middlewares/Third_Party/FatFs/src/ff.c **** #else						/* Read a character without conversion */
4514:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 1, &rc);
4515:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
4516:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
4517:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4518:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_USE_STRFUNC == 2 && c == '\r') continue;	/* Strip '\r' */
4519:Middlewares/Third_Party/FatFs/src/ff.c **** 		*p++ = c;
4520:Middlewares/Third_Party/FatFs/src/ff.c **** 		n++;
4521:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
4522:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4523:Middlewares/Third_Party/FatFs/src/ff.c **** 	*p = 0;
4524:Middlewares/Third_Party/FatFs/src/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
4525:Middlewares/Third_Party/FatFs/src/ff.c **** }
4526:Middlewares/Third_Party/FatFs/src/ff.c **** 
4527:Middlewares/Third_Party/FatFs/src/ff.c **** 
4528:Middlewares/Third_Party/FatFs/src/ff.c **** 
4529:Middlewares/Third_Party/FatFs/src/ff.c **** 
4530:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
ARM GAS  /tmp/ccVdKYyy.s 			page 185


4531:Middlewares/Third_Party/FatFs/src/ff.c **** #include <stdarg.h>
4532:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4533:Middlewares/Third_Party/FatFs/src/ff.c **** /* Put a character to the file                                           */
4534:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4535:Middlewares/Third_Party/FatFs/src/ff.c **** 
4536:Middlewares/Third_Party/FatFs/src/ff.c **** typedef struct {
4537:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp;
4538:Middlewares/Third_Party/FatFs/src/ff.c **** 	int idx, nchr;
4539:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE buf[64];
4540:Middlewares/Third_Party/FatFs/src/ff.c **** } putbuff;
4541:Middlewares/Third_Party/FatFs/src/ff.c **** 
4542:Middlewares/Third_Party/FatFs/src/ff.c **** 
4543:Middlewares/Third_Party/FatFs/src/ff.c **** static
4544:Middlewares/Third_Party/FatFs/src/ff.c **** void putc_bfd (
4545:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff* pb,
4546:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c
4547:Middlewares/Third_Party/FatFs/src/ff.c **** )
4548:Middlewares/Third_Party/FatFs/src/ff.c **** {
 5116              		.loc 1 4548 0
 5117              		.cfi_startproc
 5118              		@ args = 0, pretend = 0, frame = 8
 5119              		@ frame_needed = 0, uses_anonymous_args = 0
 5120              	.LVL670:
 5121 0000 70B5     		push	{r4, r5, r6, lr}
 5122              	.LCFI73:
 5123              		.cfi_def_cfa_offset 16
 5124              		.cfi_offset 4, -16
 5125              		.cfi_offset 5, -12
 5126              		.cfi_offset 6, -8
 5127              		.cfi_offset 14, -4
4549:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bw;
4550:Middlewares/Third_Party/FatFs/src/ff.c **** 	int i;
4551:Middlewares/Third_Party/FatFs/src/ff.c **** 
4552:Middlewares/Third_Party/FatFs/src/ff.c **** 
4553:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_USE_STRFUNC == 2 && c == '\n')	 /* LF -> CRLF conversion */
 5128              		.loc 1 4553 0
 5129 0002 0A29     		cmp	r1, #10
4548:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bw;
 5130              		.loc 1 4548 0
 5131 0004 82B0     		sub	sp, sp, #8
 5132              	.LCFI74:
 5133              		.cfi_def_cfa_offset 24
4548:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bw;
 5134              		.loc 1 4548 0
 5135 0006 0E46     		mov	r6, r1
 5136 0008 0546     		mov	r5, r0
 5137              		.loc 1 4553 0
 5138 000a 1AD0     		beq	.L735
 5139              	.LVL671:
 5140              	.L730:
4554:Middlewares/Third_Party/FatFs/src/ff.c **** 		putc_bfd(pb, '\r');
4555:Middlewares/Third_Party/FatFs/src/ff.c **** 
4556:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = pb->idx;	/* Buffer write index (-1:error) */
 5141              		.loc 1 4556 0
 5142 000c 6C68     		ldr	r4, [r5, #4]
 5143              	.LVL672:
4557:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i < 0) return;
ARM GAS  /tmp/ccVdKYyy.s 			page 186


 5144              		.loc 1 4557 0
 5145 000e 002C     		cmp	r4, #0
 5146 0010 08DB     		blt	.L729
4558:Middlewares/Third_Party/FatFs/src/ff.c **** 
4559:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN && _LFN_UNICODE
4560:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STRF_ENCODE == 3			/* Write a character in UTF-8 */
4561:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (c < 0x80) {				/* 7-bit */
4562:Middlewares/Third_Party/FatFs/src/ff.c **** 		pb->buf[i++] = (BYTE)c;
4563:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
4564:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c < 0x800) {		/* 11-bit */
4565:Middlewares/Third_Party/FatFs/src/ff.c **** 			pb->buf[i++] = (BYTE)(0xC0 | c >> 6);
4566:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {				/* 16-bit */
4567:Middlewares/Third_Party/FatFs/src/ff.c **** 			pb->buf[i++] = (BYTE)(0xE0 | c >> 12);
4568:Middlewares/Third_Party/FatFs/src/ff.c **** 			pb->buf[i++] = (BYTE)(0x80 | (c >> 6 & 0x3F));
4569:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4570:Middlewares/Third_Party/FatFs/src/ff.c **** 		pb->buf[i++] = (BYTE)(0x80 | (c & 0x3F));
4571:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4572:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 2			/* Write a character in UTF-16BE */
4573:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)(c >> 8);
4574:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
4575:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 1			/* Write a character in UTF-16LE */
4576:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
4577:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)(c >> 8);
4578:Middlewares/Third_Party/FatFs/src/ff.c **** #else							/* Write a character in ANSI/OEM */
4579:Middlewares/Third_Party/FatFs/src/ff.c **** 	c = ff_convert(c, 0);	/* Unicode -> OEM */
4580:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!c) c = '?';
4581:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (c >= 0x100)
4582:Middlewares/Third_Party/FatFs/src/ff.c **** 		pb->buf[i++] = (BYTE)(c >> 8);
4583:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
4584:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4585:Middlewares/Third_Party/FatFs/src/ff.c **** #else							/* Write a character without conversion */
4586:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
 5147              		.loc 1 4586 0
 5148 0012 2B19     		adds	r3, r5, r4
 5149 0014 0134     		adds	r4, r4, #1
 5150              	.LVL673:
4587:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4588:Middlewares/Third_Party/FatFs/src/ff.c **** 
4589:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i >= (int)(sizeof pb->buf) - 3) {	/* Write buffered characters to the file */
 5151              		.loc 1 4589 0
 5152 0016 3C2C     		cmp	r4, #60
4586:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5153              		.loc 1 4586 0
 5154 0018 1E73     		strb	r6, [r3, #12]
 5155              		.loc 1 4589 0
 5156 001a 05DC     		bgt	.L736
 5157              	.LVL674:
 5158              	.L732:
4590:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
4591:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = (bw == (UINT)i) ? 0 : -1;
4592:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4593:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->idx = i;
4594:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->nchr++;
 5159              		.loc 1 4594 0
 5160 001c AB68     		ldr	r3, [r5, #8]
4593:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->nchr++;
 5161              		.loc 1 4593 0
ARM GAS  /tmp/ccVdKYyy.s 			page 187


 5162 001e 6C60     		str	r4, [r5, #4]
 5163              		.loc 1 4594 0
 5164 0020 0133     		adds	r3, r3, #1
 5165 0022 AB60     		str	r3, [r5, #8]
 5166              	.L729:
4595:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5167              		.loc 1 4595 0
 5168 0024 02B0     		add	sp, sp, #8
 5169              	.LCFI75:
 5170              		.cfi_remember_state
 5171              		.cfi_def_cfa_offset 16
 5172              		@ sp needed
 5173 0026 70BD     		pop	{r4, r5, r6, pc}
 5174              	.LVL675:
 5175              	.L736:
 5176              	.LCFI76:
 5177              		.cfi_restore_state
4590:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
 5178              		.loc 1 4590 0
 5179 0028 01AB     		add	r3, sp, #4
 5180 002a 2246     		mov	r2, r4
 5181 002c 05F10C01 		add	r1, r5, #12
 5182 0030 2868     		ldr	r0, [r5]
 5183 0032 FFF7FEFF 		bl	f_write
 5184              	.LVL676:
4591:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 5185              		.loc 1 4591 0
 5186 0036 019B     		ldr	r3, [sp, #4]
 5187 0038 1C1B     		subs	r4, r3, r4
 5188              	.LVL677:
 5189 003a 18BF     		it	ne
 5190 003c 4FF0FF34 		movne	r4, #-1
 5191 0040 ECE7     		b	.L732
 5192              	.LVL678:
 5193              	.L735:
4554:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5194              		.loc 1 4554 0
 5195 0042 0D21     		movs	r1, #13
 5196              	.LVL679:
 5197 0044 FFF7DCFF 		bl	putc_bfd
 5198              	.LVL680:
 5199 0048 E0E7     		b	.L730
 5200              		.cfi_endproc
 5201              	.LFE180:
 5203 004a 00BF     		.section	.text.f_sync,"ax",%progbits
 5204              		.align	1
 5205              		.p2align 2,,3
 5206              		.global	f_sync
 5207              		.syntax unified
 5208              		.thumb
 5209              		.thumb_func
 5210              		.fpu fpv4-sp-d16
 5212              	f_sync:
 5213              	.LFB164:
2884:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5214              		.loc 1 2884 0
 5215              		.cfi_startproc
ARM GAS  /tmp/ccVdKYyy.s 			page 188


 5216              		@ args = 0, pretend = 0, frame = 0
 5217              		@ frame_needed = 0, uses_anonymous_args = 0
 5218              	.LVL681:
 5219 0000 70B5     		push	{r4, r5, r6, lr}
 5220              	.LCFI77:
 5221              		.cfi_def_cfa_offset 16
 5222              		.cfi_offset 4, -16
 5223              		.cfi_offset 5, -12
 5224              		.cfi_offset 6, -8
 5225              		.cfi_offset 14, -4
2884:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5226              		.loc 1 2884 0
 5227 0002 0446     		mov	r4, r0
2890:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 5228              		.loc 1 2890 0
 5229 0004 FFF7FEFF 		bl	validate
 5230              	.LVL682:
2891:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->flag & FA__WRITTEN) {	/* Has the file been written? */
 5231              		.loc 1 2891 0
 5232 0008 F8B9     		cbnz	r0, .L738
2892:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write-back dirty buffer */
 5233              		.loc 1 2892 0
 5234 000a 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5235 000e 9A06     		lsls	r2, r3, #26
 5236 0010 1BD5     		bpl	.L738
2895:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 5237              		.loc 1 2895 0
 5238 0012 5B06     		lsls	r3, r3, #25
 5239 0014 11D5     		bpl	.L739
2896:Middlewares/Third_Party/FatFs/src/ff.c **** 					LEAVE_FF(fp->fs, FR_DISK_ERR);
 5240              		.loc 1 2896 0
 5241 0016 D4F80032 		ldr	r3, [r4, #512]
 5242 001a D4F81822 		ldr	r2, [r4, #536]
 5243 001e 93F80102 		ldrb	r0, [r3, #513]	@ zero_extendqisi2
 5244              	.LVL683:
 5245 0022 2146     		mov	r1, r4
 5246 0024 0123     		movs	r3, #1
 5247 0026 FFF7FEFF 		bl	disk_write
 5248              	.LVL684:
 5249 002a 0028     		cmp	r0, #0
 5250 002c 47D1     		bne	.L740
2898:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5251              		.loc 1 2898 0
 5252 002e 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5253 0032 23F04003 		bic	r3, r3, #64
 5254 0036 84F80632 		strb	r3, [r4, #518]
 5255              	.L739:
2902:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
 5256              		.loc 1 2902 0
 5257 003a D4F81C12 		ldr	r1, [r4, #540]
 5258 003e D4F80002 		ldr	r0, [r4, #512]
 5259 0042 FFF7FEFF 		bl	move_window
 5260              	.LVL685:
 5261 0046 0646     		mov	r6, r0
 5262              	.LVL686:
2903:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = fp->dir_ptr;
 5263              		.loc 1 2903 0
ARM GAS  /tmp/ccVdKYyy.s 			page 189


 5264 0048 00B1     		cbz	r0, .L748
 5265              	.LVL687:
 5266              	.L738:
2919:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5267              		.loc 1 2919 0
 5268 004a 70BD     		pop	{r4, r5, r6, pc}
 5269              	.LVL688:
 5270              	.L748:
 5271              	.LBB404:
 5272              	.LBB405:
2904:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] |= AM_ARC;					/* Set archive bit */
 5273              		.loc 1 2904 0
 5274 004c D4F82052 		ldr	r5, [r4, #544]
 5275              	.LVL689:
2905:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_FileSize, fp->fsize);	/* Update file size */
 5276              		.loc 1 2905 0
 5277 0050 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 5278 0052 43F02003 		orr	r3, r3, #32
 5279 0056 EB72     		strb	r3, [r5, #11]
2906:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, fp->sclust);					/* Update start cluster */
 5280              		.loc 1 2906 0
 5281 0058 D4F80C32 		ldr	r3, [r4, #524]
 5282 005c 2B77     		strb	r3, [r5, #28]
 5283 005e B4F80C32 		ldrh	r3, [r4, #524]
 5284 0062 1B0A     		lsrs	r3, r3, #8
 5285 0064 6B77     		strb	r3, [r5, #29]
 5286 0066 B4F80E32 		ldrh	r3, [r4, #526]
 5287 006a AB77     		strb	r3, [r5, #30]
 5288 006c 94F80F32 		ldrb	r3, [r4, #527]	@ zero_extendqisi2
 5289 0070 EB77     		strb	r3, [r5, #31]
2907:Middlewares/Third_Party/FatFs/src/ff.c **** 				tm = GET_FATTIME();							/* Update updated time */
 5290              		.loc 1 2907 0
 5291 0072 D4F81032 		ldr	r3, [r4, #528]
 5292              	.LVL690:
 5293              	.LBB406:
 5294              	.LBB407:
1330:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusHI, cl >> 16);
 5295              		.loc 1 1330 0
 5296 0076 AB76     		strb	r3, [r5, #26]
1331:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5297              		.loc 1 1331 0
 5298 0078 1A0C     		lsrs	r2, r3, #16
 5299 007a 110A     		lsrs	r1, r2, #8
1330:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusHI, cl >> 16);
 5300              		.loc 1 1330 0
 5301 007c C3F30723 		ubfx	r3, r3, #8, #8
 5302              	.LVL691:
 5303 0080 EB76     		strb	r3, [r5, #27]
1331:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5304              		.loc 1 1331 0
 5305 0082 2A75     		strb	r2, [r5, #20]
 5306 0084 6975     		strb	r1, [r5, #21]
 5307              	.LVL692:
 5308              	.LBE407:
 5309              	.LBE406:
2908:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);
 5310              		.loc 1 2908 0
ARM GAS  /tmp/ccVdKYyy.s 			page 190


 5311 0086 FFF7FEFF 		bl	get_fattime
 5312              	.LVL693:
2909:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_WORD(dir + DIR_LstAccDate, 0);
 5313              		.loc 1 2909 0
 5314 008a C0F30721 		ubfx	r1, r0, #8, #8
 5315 008e 020C     		lsrs	r2, r0, #16
 5316 0090 030E     		lsrs	r3, r0, #24
 5317 0092 A875     		strb	r0, [r5, #22]
 5318 0094 E975     		strb	r1, [r5, #23]
2910:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= ~FA__WRITTEN;
 5319              		.loc 1 2910 0
 5320 0096 AE74     		strb	r6, [r5, #18]
 5321 0098 EE74     		strb	r6, [r5, #19]
2909:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_WORD(dir + DIR_LstAccDate, 0);
 5322              		.loc 1 2909 0
 5323 009a 2A76     		strb	r2, [r5, #24]
 5324 009c 6B76     		strb	r3, [r5, #25]
2911:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fs->wflag = 1;
 5325              		.loc 1 2911 0
 5326 009e 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
2912:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(fp->fs);
 5327              		.loc 1 2912 0
 5328 00a2 D4F80022 		ldr	r2, [r4, #512]
2911:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fs->wflag = 1;
 5329              		.loc 1 2911 0
 5330 00a6 23F02003 		bic	r3, r3, #32
2912:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(fp->fs);
 5331              		.loc 1 2912 0
 5332 00aa 0121     		movs	r1, #1
2911:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fs->wflag = 1;
 5333              		.loc 1 2911 0
 5334 00ac 84F80632 		strb	r3, [r4, #518]
2912:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(fp->fs);
 5335              		.loc 1 2912 0
 5336 00b0 82F80412 		strb	r1, [r2, #516]
2913:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5337              		.loc 1 2913 0
 5338 00b4 1046     		mov	r0, r2
 5339              	.LVL694:
 5340              	.LBE405:
 5341              	.LBE404:
2919:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5342              		.loc 1 2919 0
 5343 00b6 BDE87040 		pop	{r4, r5, r6, lr}
 5344              	.LCFI78:
 5345              		.cfi_remember_state
 5346              		.cfi_restore 14
 5347              		.cfi_restore 6
 5348              		.cfi_restore 5
 5349              		.cfi_restore 4
 5350              		.cfi_def_cfa_offset 0
 5351              	.LVL695:
 5352              	.LBB409:
 5353              	.LBB408:
2913:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5354              		.loc 1 2913 0
 5355 00ba FFF7FEBF 		b	sync_fs
ARM GAS  /tmp/ccVdKYyy.s 			page 191


 5356              	.LVL696:
 5357              	.L740:
 5358              	.LCFI79:
 5359              		.cfi_restore_state
 5360              	.LBE408:
 5361              	.LBE409:
2897:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= ~FA__DIRTY;
 5362              		.loc 1 2897 0
 5363 00be 0120     		movs	r0, #1
 5364 00c0 C3E7     		b	.L738
 5365              		.cfi_endproc
 5366              	.LFE164:
 5368 00c2 00BF     		.section	.text.f_close,"ax",%progbits
 5369              		.align	1
 5370              		.p2align 2,,3
 5371              		.global	f_close
 5372              		.syntax unified
 5373              		.thumb
 5374              		.thumb_func
 5375              		.fpu fpv4-sp-d16
 5377              	f_close:
 5378              	.LFB165:
2933:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5379              		.loc 1 2933 0
 5380              		.cfi_startproc
 5381              		@ args = 0, pretend = 0, frame = 0
 5382              		@ frame_needed = 0, uses_anonymous_args = 0
 5383              	.LVL697:
 5384 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 5385              	.LCFI80:
 5386              		.cfi_def_cfa_offset 24
 5387              		.cfi_offset 3, -24
 5388              		.cfi_offset 4, -20
 5389              		.cfi_offset 5, -16
 5390              		.cfi_offset 6, -12
 5391              		.cfi_offset 7, -8
 5392              		.cfi_offset 14, -4
2933:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5393              		.loc 1 2933 0
 5394 0002 0446     		mov	r4, r0
2938:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK)
 5395              		.loc 1 2938 0
 5396 0004 FFF7FEFF 		bl	f_sync
 5397              	.LVL698:
2939:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5398              		.loc 1 2939 0
 5399 0008 00B1     		cbz	r0, .L757
 5400              	.L755:
2958:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5401              		.loc 1 2958 0
 5402 000a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 5403              	.LVL699:
 5404              	.L757:
2942:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 5405              		.loc 1 2942 0
 5406 000c 2046     		mov	r0, r4
 5407              	.LVL700:
ARM GAS  /tmp/ccVdKYyy.s 			page 192


 5408 000e FFF7FEFF 		bl	validate
 5409              	.LVL701:
2943:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 5410              		.loc 1 2943 0
 5411 0012 0028     		cmp	r0, #0
 5412 0014 F9D1     		bne	.L755
 5413              	.LVL702:
 5414              	.LBB410:
 5415              	.LBB411:
 738:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = Files[i].ctr;
 5416              		.loc 1 738 0
 5417 0016 D4F82832 		ldr	r3, [r4, #552]
 5418 001a 013B     		subs	r3, r3, #1
 5419              	.LVL703:
 5420 001c 012B     		cmp	r3, #1
 5421 001e 01D9     		bls	.L758
 746:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 5422              		.loc 1 746 0
 5423 0020 0220     		movs	r0, #2
 5424              	.LVL704:
 5425 0022 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 5426              	.LVL705:
 5427              	.L758:
 739:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 0x100) n = 0;		/* If write mode open, delete the entry */
 5428              		.loc 1 739 0
 5429 0024 5D00     		lsls	r5, r3, #1
 5430 0026 0B4E     		ldr	r6, .L759
 5431 0028 EA18     		adds	r2, r5, r3
 5432 002a 06EB8202 		add	r2, r6, r2, lsl #2
 5433 002e 5189     		ldrh	r1, [r2, #10]
 5434              	.LVL706:
 741:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = n;
 5435              		.loc 1 741 0
 5436 0030 21F48077 		bic	r7, r1, #256
 5437 0034 3FB1     		cbz	r7, .L751
 5438 0036 0139     		subs	r1, r1, #1
 5439              	.LVL707:
 5440 0038 89B2     		uxth	r1, r1
 5441              	.LVL708:
 742:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!n) Files[i].fs = 0;	/* Delete the entry if open count gets zero */
 5442              		.loc 1 742 0
 5443 003a 5181     		strh	r1, [r2, #10]	@ movhi
 743:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;
 5444              		.loc 1 743 0
 5445 003c 21B1     		cbz	r1, .L753
 5446              	.LVL709:
 5447              	.L752:
 5448              	.LBE411:
 5449              	.LBE410:
2951:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 5450              		.loc 1 2951 0
 5451 003e 0023     		movs	r3, #0
 5452 0040 C4F80032 		str	r3, [r4, #512]
 5453              	.LVL710:
2958:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5454              		.loc 1 2958 0
 5455 0044 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
ARM GAS  /tmp/ccVdKYyy.s 			page 193


 5456              	.LVL711:
 5457              	.L751:
 5458              	.LBB413:
 5459              	.LBB412:
 742:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!n) Files[i].fs = 0;	/* Delete the entry if open count gets zero */
 5460              		.loc 1 742 0
 5461 0046 5081     		strh	r0, [r2, #10]	@ movhi
 5462              	.LVL712:
 5463              	.L753:
 743:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;
 5464              		.loc 1 743 0
 5465 0048 2B44     		add	r3, r3, r5
 5466              	.LVL713:
 5467 004a 9B00     		lsls	r3, r3, #2
 5468 004c 0022     		movs	r2, #0
 5469 004e F250     		str	r2, [r6, r3]
 5470 0050 F5E7     		b	.L752
 5471              	.L760:
 5472 0052 00BF     		.align	2
 5473              	.L759:
 5474 0054 00000000 		.word	.LANCHOR0
 5475              	.LBE412:
 5476              	.LBE413:
 5477              		.cfi_endproc
 5478              	.LFE165:
 5480              		.section	.text.f_lseek,"ax",%progbits
 5481              		.align	1
 5482              		.p2align 2,,3
 5483              		.global	f_lseek
 5484              		.syntax unified
 5485              		.thumb
 5486              		.thumb_func
 5487              		.fpu fpv4-sp-d16
 5489              	f_lseek:
 5490              	.LFB166:
3106:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5491              		.loc 1 3106 0
 5492              		.cfi_startproc
 5493              		@ args = 0, pretend = 0, frame = 0
 5494              		@ frame_needed = 0, uses_anonymous_args = 0
 5495              	.LVL714:
 5496 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 5497              	.LCFI81:
 5498              		.cfi_def_cfa_offset 40
 5499              		.cfi_offset 3, -40
 5500              		.cfi_offset 4, -36
 5501              		.cfi_offset 5, -32
 5502              		.cfi_offset 6, -28
 5503              		.cfi_offset 7, -24
 5504              		.cfi_offset 8, -20
 5505              		.cfi_offset 9, -16
 5506              		.cfi_offset 10, -12
 5507              		.cfi_offset 11, -8
 5508              		.cfi_offset 14, -4
3106:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5509              		.loc 1 3106 0
 5510 0004 0E46     		mov	r6, r1
ARM GAS  /tmp/ccVdKYyy.s 			page 194


 5511 0006 0446     		mov	r4, r0
3114:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fp->fs, res);
 5512              		.loc 1 3114 0
 5513 0008 FFF7FEFF 		bl	validate
 5514              	.LVL715:
3115:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->err)						/* Check error */
 5515              		.loc 1 3115 0
 5516 000c 0546     		mov	r5, r0
 5517 000e 0028     		cmp	r0, #0
 5518 0010 65D1     		bne	.L762
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 		LEAVE_FF(fp->fs, (FRESULT)fp->err);
 5519              		.loc 1 3116 0
 5520 0012 94F80732 		ldrb	r3, [r4, #519]	@ zero_extendqisi2
 5521 0016 002B     		cmp	r3, #0
 5522 0018 64D1     		bne	.L801
3120:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
 5523              		.loc 1 3120 0
 5524 001a D4F82402 		ldr	r0, [r4, #548]
 5525              	.LVL716:
 5526 001e 0028     		cmp	r0, #0
 5527 0020 00F0C780 		beq	.L763
3121:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl = fp->cltbl;
 5528              		.loc 1 3121 0
 5529 0024 711C     		adds	r1, r6, #1
 5530 0026 00F09380 		beq	.L839
 5531 002a D4F80C32 		ldr	r3, [r4, #524]
 5532 002e 9E42     		cmp	r6, r3
 5533 0030 28BF     		it	cs
 5534 0032 1E46     		movcs	r6, r3
 5535              	.LVL717:
3149:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs) {
 5536              		.loc 1 3149 0
 5537 0034 C4F80862 		str	r6, [r4, #520]
3150:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
 5538              		.loc 1 3150 0
 5539 0038 002E     		cmp	r6, #0
 5540 003a 50D0     		beq	.L762
 5541 003c D4F80012 		ldr	r1, [r4, #512]
 5542              	.LVL718:
 5543              	.LBB414:
 5544              	.LBB415:
1136:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ncl) return 0;		/* End of table? (error) */
 5545              		.loc 1 1136 0
 5546 0040 4368     		ldr	r3, [r0, #4]
1134:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
 5547              		.loc 1 1134 0
 5548 0042 91F802E2 		ldrb	lr, [r1, #514]	@ zero_extendqisi2
 5549              	.LBE415:
 5550              	.LBE414:
3151:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fp->fs, fp->clust);
 5551              		.loc 1 3151 0
 5552 0046 771E     		subs	r7, r6, #1
 5553              	.LVL719:
 5554              	.LBB418:
 5555              	.LBB416:
1134:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
 5556              		.loc 1 1134 0
ARM GAS  /tmp/ccVdKYyy.s 			page 195


 5557 0048 7F0A     		lsrs	r7, r7, #9
 5558              	.LVL720:
1133:Middlewares/Third_Party/FatFs/src/ff.c **** 	cl = ofs / SS(fp->fs) / fp->fs->csize;	/* Cluster order from top of the file */
 5559              		.loc 1 1133 0
 5560 004a 0430     		adds	r0, r0, #4
 5561              	.LVL721:
1134:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
 5562              		.loc 1 1134 0
 5563 004c B7FBFEF2 		udiv	r2, r7, lr
 5564              	.LVL722:
1137:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
 5565              		.loc 1 1137 0
 5566 0050 53B1     		cbz	r3, .L805
1138:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl -= ncl; tbl++;		/* Next fragment */
 5567              		.loc 1 1138 0
 5568 0052 9A42     		cmp	r2, r3
 5569 0054 03D2     		bcs	.L779
 5570 0056 A8E0     		b	.L777
 5571              	.LVL723:
 5572              	.L834:
 5573 0058 9342     		cmp	r3, r2
 5574 005a 00F2A680 		bhi	.L777
 5575              	.LVL724:
 5576              	.L779:
1139:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 5577              		.loc 1 1139 0
 5578 005e D21A     		subs	r2, r2, r3
 5579              	.LVL725:
1136:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ncl) return 0;		/* End of table? (error) */
 5580              		.loc 1 1136 0
 5581 0060 50F8083F 		ldr	r3, [r0, #8]!
 5582              	.LVL726:
1137:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
 5583              		.loc 1 1137 0
 5584 0064 002B     		cmp	r3, #0
 5585 0066 F7D1     		bne	.L834
 5586              	.LVL727:
 5587              	.L805:
 5588 0068 6FF00100 		mvn	r0, #1
 5589              	.L776:
 5590              	.LVL728:
 5591              	.LBE416:
 5592              	.LBE418:
 5593              	.LBB419:
 5594              	.LBB420:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 5595              		.loc 1 879 0
 5596 006c D1F81422 		ldr	r2, [r1, #532]
 5597              	.LBE420:
 5598              	.LBE419:
3151:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fp->fs, fp->clust);
 5599              		.loc 1 3151 0
 5600 0070 C4F81432 		str	r3, [r4, #532]
 5601              	.LVL729:
 5602              	.LBB422:
 5603              	.LBB421:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
ARM GAS  /tmp/ccVdKYyy.s 			page 196


 5604              		.loc 1 879 0
 5605 0074 931E     		subs	r3, r2, #2
 5606 0076 8342     		cmp	r3, r0
 5607 0078 64D9     		bls	.L767
 880:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5608              		.loc 1 880 0
 5609 007a D1F82832 		ldr	r3, [r1, #552]
 5610 007e 00FB0E30 		mla	r0, r0, lr, r3
 5611              	.LVL730:
 5612              	.LBE421:
 5613              	.LBE422:
3153:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (ofs - 1) / SS(fp->fs) & (fp->fs->csize - 1);
 5614              		.loc 1 3153 0
 5615 0082 0028     		cmp	r0, #0
 5616 0084 5ED0     		beq	.L767
 5617              	.LVL731:
3155:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 5618              		.loc 1 3155 0
 5619 0086 C6F30806 		ubfx	r6, r6, #0, #9
 5620              	.LVL732:
 5621 008a 46B3     		cbz	r6, .L762
3154:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fp->fs) && dsc != fp->dsect) {	/* Refill sector cache if needed */
 5622              		.loc 1 3154 0 discriminator 1
 5623 008c 0EF1FF36 		add	r6, lr, #-1
 5624 0090 3E40     		ands	r6, r6, r7
3155:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 5625              		.loc 1 3155 0 discriminator 1
 5626 0092 D4F81822 		ldr	r2, [r4, #536]
3154:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fp->fs) && dsc != fp->dsect) {	/* Refill sector cache if needed */
 5627              		.loc 1 3154 0 discriminator 1
 5628 0096 0644     		add	r6, r6, r0
3155:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 5629              		.loc 1 3155 0 discriminator 1
 5630 0098 9642     		cmp	r6, r2
 5631 009a 20D0     		beq	.L762
3158:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 5632              		.loc 1 3158 0
 5633 009c 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5634 00a0 5F06     		lsls	r7, r3, #25
 5635              	.LVL733:
 5636 00a2 10D5     		bpl	.L783
3159:Middlewares/Third_Party/FatFs/src/ff.c **** 							ABORT(fp->fs, FR_DISK_ERR);
 5637              		.loc 1 3159 0
 5638 00a4 91F80102 		ldrb	r0, [r1, #513]	@ zero_extendqisi2
 5639              	.LVL734:
 5640 00a8 0123     		movs	r3, #1
 5641 00aa 2146     		mov	r1, r4
 5642 00ac FFF7FEFF 		bl	disk_write
 5643              	.LVL735:
 5644 00b0 0028     		cmp	r0, #0
 5645 00b2 40F0ED80 		bne	.L784
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 5646              		.loc 1 3161 0
 5647 00b6 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5648 00ba D4F80012 		ldr	r1, [r4, #512]
 5649 00be 23F04003 		bic	r3, r3, #64
 5650 00c2 84F80632 		strb	r3, [r4, #518]
ARM GAS  /tmp/ccVdKYyy.s 			page 197


 5651              	.L783:
3164:Middlewares/Third_Party/FatFs/src/ff.c **** 						ABORT(fp->fs, FR_DISK_ERR);
 5652              		.loc 1 3164 0
 5653 00c6 91F80102 		ldrb	r0, [r1, #513]	@ zero_extendqisi2
 5654 00ca 0123     		movs	r3, #1
 5655 00cc 3246     		mov	r2, r6
 5656 00ce 2146     		mov	r1, r4
 5657 00d0 FFF7FEFF 		bl	disk_read
 5658              	.LVL736:
 5659 00d4 0028     		cmp	r0, #0
 5660 00d6 40F0DB80 		bne	.L784
3167:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5661              		.loc 1 3167 0
 5662 00da C4F81862 		str	r6, [r4, #536]
 5663              	.LVL737:
 5664              	.L762:
3251:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5665              		.loc 1 3251 0
 5666 00de 2846     		mov	r0, r5
 5667 00e0 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 5668              	.LVL738:
 5669              	.L801:
 5670 00e4 1D46     		mov	r5, r3
 5671 00e6 2846     		mov	r0, r5
 5672              	.LVL739:
 5673 00e8 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 5674              	.LVL740:
 5675              	.L789:
3204:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 5676              		.loc 1 3204 0
 5677 00ec 4645     		cmp	r6, r8
 5678 00ee 40F2FB80 		bls	.L836
 5679 00f2 D4F80002 		ldr	r0, [r4, #512]
 5680 00f6 18E0     		b	.L795
 5681              	.LVL741:
 5682              	.L841:
 5683              	.LBB423:
 5684              	.LBB424:
 5685 00f8 3946     		mov	r1, r7
 5686 00fa FFF7FEFF 		bl	get_fat.part.6
 5687              	.LVL742:
 5688 00fe 0746     		mov	r7, r0
 5689              	.LVL743:
 5690              	.L794:
 5691              	.LBE424:
 5692              	.LBE423:
3214:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fp->fs->n_fatent) ABORT(fp->fs, FR_INT_ERR);
 5693              		.loc 1 3214 0
 5694 0100 7A1C     		adds	r2, r7, #1
 5695 0102 00F0C580 		beq	.L784
3215:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 5696              		.loc 1 3215 0
 5697 0106 012F     		cmp	r7, #1
 5698 0108 1CD9     		bls	.L767
3215:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 5699              		.loc 1 3215 0 is_stmt 0 discriminator 2
 5700 010a D4F80002 		ldr	r0, [r4, #512]
ARM GAS  /tmp/ccVdKYyy.s 			page 198


 5701 010e D0F81432 		ldr	r3, [r0, #532]
 5702 0112 9F42     		cmp	r7, r3
 5703 0114 16D2     		bcs	.L767
3217:Middlewares/Third_Party/FatFs/src/ff.c **** 					ofs -= bcs;
 5704              		.loc 1 3217 0 is_stmt 1
 5705 0116 D4F80832 		ldr	r3, [r4, #520]
3216:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->fptr += bcs;
 5706              		.loc 1 3216 0
 5707 011a C4F81472 		str	r7, [r4, #532]
3217:Middlewares/Third_Party/FatFs/src/ff.c **** 					ofs -= bcs;
 5708              		.loc 1 3217 0
 5709 011e 4344     		add	r3, r3, r8
3204:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 5710              		.loc 1 3204 0
 5711 0120 B045     		cmp	r8, r6
3217:Middlewares/Third_Party/FatFs/src/ff.c **** 					ofs -= bcs;
 5712              		.loc 1 3217 0
 5713 0122 C4F80832 		str	r3, [r4, #520]
3204:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 5714              		.loc 1 3204 0
 5715 0126 80F0E180 		bcs	.L792
 5716              	.L795:
 5717              	.LVL744:
3206:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(fp->fs, clst);	/* Force stretch if in write mode */
 5718              		.loc 1 3206 0
 5719 012a 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5720 012e 9907     		lsls	r1, r3, #30
3218:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5721              		.loc 1 3218 0
 5722 0130 A6EB0806 		sub	r6, r6, r8
 5723              	.LVL745:
3206:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(fp->fs, clst);	/* Force stretch if in write mode */
 5724              		.loc 1 3206 0
 5725 0134 00F1D080 		bmi	.L840
 5726              	.LBB426:
 5727              	.LBB425:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 5728              		.loc 1 901 0
 5729 0138 012F     		cmp	r7, #1
 5730 013a 03D9     		bls	.L767
 5731 013c D0F81432 		ldr	r3, [r0, #532]
 5732 0140 BB42     		cmp	r3, r7
 5733 0142 D9D8     		bhi	.L841
 5734              	.LVL746:
 5735              	.L767:
 5736              	.LBE425:
 5737              	.LBE426:
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 5738              		.loc 1 3132 0 discriminator 1
 5739 0144 0225     		movs	r5, #2
 5740 0146 84F80752 		strb	r5, [r4, #519]
 5741              	.L843:
3251:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5742              		.loc 1 3251 0
 5743 014a 2846     		mov	r0, r5
 5744 014c BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 5745              	.LVL747:
ARM GAS  /tmp/ccVdKYyy.s 			page 199


 5746              	.L839:
3124:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cl) {
 5747              		.loc 1 3124 0
 5748 0150 D4F81072 		ldr	r7, [r4, #528]
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->sclust;			/* Top of the chain */
 5749              		.loc 1 3123 0
 5750 0154 D0F80090 		ldr	r9, [r0]
 5751 0158 00F1040A 		add	r10, r0, #4
 5752              	.LVL748:
3125:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
 5753              		.loc 1 3125 0
 5754 015c 002F     		cmp	r7, #0
 5755 015e 00F08F80 		beq	.L802
 5756 0162 D4F80002 		ldr	r0, [r4, #512]
 5757 0166 4FF00208 		mov	r8, #2
 5758              	.LVL749:
 5759              	.L774:
 5760 016a 3E46     		mov	r6, r7
3128:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 5761              		.loc 1 3128 0
 5762 016c 4FF0000B 		mov	fp, #0
 5763 0170 0FE0     		b	.L772
 5764              	.LVL750:
 5765              	.L842:
 5766              	.LBB427:
 5767              	.LBB428:
 5768 0172 3146     		mov	r1, r6
 5769 0174 FFF7FEFF 		bl	get_fat.part.6
 5770              	.LVL751:
 5771              	.LBE428:
 5772              	.LBE427:
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 5773              		.loc 1 3132 0
 5774 0178 0128     		cmp	r0, #1
 5775              	.LBB432:
 5776              	.LBB429:
 5777 017a 0346     		mov	r3, r0
 5778              	.LVL752:
 5779              	.LBE429:
 5780              	.LBE432:
3134:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
 5781              		.loc 1 3134 0
 5782 017c 06F10106 		add	r6, r6, #1
 5783              	.LVL753:
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 5784              		.loc 1 3132 0
 5785 0180 E0D9     		bls	.L767
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 5786              		.loc 1 3133 0
 5787 0182 421C     		adds	r2, r0, #1
 5788 0184 00F08480 		beq	.L784
3134:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
 5789              		.loc 1 3134 0
 5790 0188 8642     		cmp	r6, r0
 5791 018a 40F08C80 		bne	.L771
 5792 018e D4F80002 		ldr	r0, [r4, #512]
 5793              	.LVL754:
ARM GAS  /tmp/ccVdKYyy.s 			page 200


 5794              	.L772:
 5795              	.LBB433:
 5796              	.LBB430:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 5797              		.loc 1 901 0
 5798 0192 012E     		cmp	r6, #1
 5799              	.LBE430:
 5800              	.LBE433:
3130:Middlewares/Third_Party/FatFs/src/ff.c **** 						cl = get_fat(fp->fs, cl);
 5801              		.loc 1 3130 0
 5802 0194 0BF1010B 		add	fp, fp, #1
 5803              	.LVL755:
 5804              	.LBB434:
 5805              	.LBB431:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 5806              		.loc 1 901 0
 5807 0198 D4D9     		bls	.L767
 5808 019a D0F81432 		ldr	r3, [r0, #532]
 5809 019e 9E42     		cmp	r6, r3
 5810 01a0 E7D3     		bcc	.L842
 5811              	.LVL756:
 5812              	.LBE431:
 5813              	.LBE434:
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 5814              		.loc 1 3132 0
 5815 01a2 0225     		movs	r5, #2
 5816 01a4 84F80752 		strb	r5, [r4, #519]
 5817 01a8 CFE7     		b	.L843
 5818              	.LVL757:
 5819              	.L777:
 5820              	.LBB435:
 5821              	.LBB417:
1141:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5822              		.loc 1 1141 0
 5823 01aa 4368     		ldr	r3, [r0, #4]
 5824              	.LVL758:
 5825 01ac 1344     		add	r3, r3, r2
 5826              	.LVL759:
 5827 01ae 981E     		subs	r0, r3, #2
 5828 01b0 5CE7     		b	.L776
 5829              	.LVL760:
 5830              	.L763:
 5831              	.LBE417:
 5832              	.LBE435:
3176:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 5833              		.loc 1 3176 0
 5834 01b2 D4F80C32 		ldr	r3, [r4, #524]
 5835 01b6 9E42     		cmp	r6, r3
 5836 01b8 05D9     		bls	.L785
3178:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5837              		.loc 1 3178 0
 5838 01ba 94F80622 		ldrb	r2, [r4, #518]	@ zero_extendqisi2
 5839 01be 12F0020F 		tst	r2, #2
 5840 01c2 08BF     		it	eq
 5841 01c4 1E46     		moveq	r6, r3
 5842              	.LVL761:
 5843              	.L785:
ARM GAS  /tmp/ccVdKYyy.s 			page 201


3183:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
 5844              		.loc 1 3183 0
 5845 01c6 0022     		movs	r2, #0
3182:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fptr = nsect = 0;
 5846              		.loc 1 3182 0
 5847 01c8 D4F80832 		ldr	r3, [r4, #520]
 5848              	.LVL762:
3183:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
 5849              		.loc 1 3183 0
 5850 01cc C4F80822 		str	r2, [r4, #520]
3184:Middlewares/Third_Party/FatFs/src/ff.c **** 			bcs = (DWORD)fp->fs->csize * SS(fp->fs);	/* Cluster size (byte) */
 5851              		.loc 1 3184 0
 5852 01d0 002E     		cmp	r6, #0
 5853 01d2 84D0     		beq	.L762
3185:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ifptr > 0 &&
 5854              		.loc 1 3185 0
 5855 01d4 D4F80002 		ldr	r0, [r4, #512]
 5856 01d8 90F80282 		ldrb	r8, [r0, #514]	@ zero_extendqisi2
 5857 01dc 4FEA4828 		lsl	r8, r8, #9
 5858              	.LVL763:
3186:Middlewares/Third_Party/FatFs/src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 5859              		.loc 1 3186 0
 5860 01e0 002B     		cmp	r3, #0
 5861 01e2 59D0     		beq	.L786
3187:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(bcs - 1);	/* start from the current cluster */
 5862              		.loc 1 3187 0 discriminator 1
 5863 01e4 013B     		subs	r3, r3, #1
 5864              	.LVL764:
 5865 01e6 721E     		subs	r2, r6, #1
 5866 01e8 B3FBF8F1 		udiv	r1, r3, r8
 5867 01ec B2FBF8F2 		udiv	r2, r2, r8
3186:Middlewares/Third_Party/FatFs/src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 5868              		.loc 1 3186 0 discriminator 1
 5869 01f0 8A42     		cmp	r2, r1
 5870 01f2 51D3     		bcc	.L786
3188:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs -= fp->fptr;
 5871              		.loc 1 3188 0
 5872 01f4 C8F10002 		rsb	r2, r8, #0
 5873 01f8 1340     		ands	r3, r3, r2
 5874              	.LVL765:
3190:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {									/* When seek to back cluster, */
 5875              		.loc 1 3190 0
 5876 01fa D4F81472 		ldr	r7, [r4, #532]
3188:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs -= fp->fptr;
 5877              		.loc 1 3188 0
 5878 01fe C4F80832 		str	r3, [r4, #520]
3189:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->clust;
 5879              		.loc 1 3189 0
 5880 0202 F61A     		subs	r6, r6, r3
 5881              	.LVL766:
 5882              	.L787:
3203:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
 5883              		.loc 1 3203 0
 5884 0204 002F     		cmp	r7, #0
 5885 0206 7FF471AF 		bne	.L789
 5886 020a D4F80832 		ldr	r3, [r4, #520]
 5887              	.LVL767:
ARM GAS  /tmp/ccVdKYyy.s 			page 202


 5888              	.L790:
3228:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 5889              		.loc 1 3228 0
 5890 020e C3F30802 		ubfx	r2, r3, #0, #9
 5891 0212 002A     		cmp	r2, #0
 5892 0214 00F09180 		beq	.L837
3228:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 5893              		.loc 1 3228 0 is_stmt 0 discriminator 1
 5894 0218 D4F81822 		ldr	r2, [r4, #536]
 5895 021c 9742     		cmp	r7, r2
 5896 021e 00F08C80 		beq	.L837
3231:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 5897              		.loc 1 3231 0 is_stmt 1
 5898 0222 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5899 0226 5B06     		lsls	r3, r3, #25
 5900 0228 0ED5     		bpl	.L800
3232:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fp->fs, FR_DISK_ERR);
 5901              		.loc 1 3232 0
 5902 022a D4F80032 		ldr	r3, [r4, #512]
 5903 022e 2146     		mov	r1, r4
 5904 0230 93F80102 		ldrb	r0, [r3, #513]	@ zero_extendqisi2
 5905 0234 0123     		movs	r3, #1
 5906 0236 FFF7FEFF 		bl	disk_write
 5907              	.LVL768:
 5908 023a 48BB     		cbnz	r0, .L784
3234:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5909              		.loc 1 3234 0
 5910 023c 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 5911 0240 23F04003 		bic	r3, r3, #64
 5912 0244 84F80632 		strb	r3, [r4, #518]
 5913              	.L800:
3237:Middlewares/Third_Party/FatFs/src/ff.c **** 				ABORT(fp->fs, FR_DISK_ERR);
 5914              		.loc 1 3237 0
 5915 0248 D4F80022 		ldr	r2, [r4, #512]
 5916 024c 0123     		movs	r3, #1
 5917 024e 92F80102 		ldrb	r0, [r2, #513]	@ zero_extendqisi2
 5918 0252 2146     		mov	r1, r4
 5919 0254 3A46     		mov	r2, r7
 5920 0256 FFF7FEFF 		bl	disk_read
 5921              	.LVL769:
 5922 025a C8B9     		cbnz	r0, .L784
 5923 025c D4F80832 		ldr	r3, [r4, #520]
 5924 0260 D4F80C22 		ldr	r2, [r4, #524]
3240:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 5925              		.loc 1 3240 0
 5926 0264 C4F81872 		str	r7, [r4, #536]
 5927              	.L797:
3243:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fsize = fp->fptr;
 5928              		.loc 1 3243 0
 5929 0268 9A42     		cmp	r2, r3
 5930 026a BFF438AF 		bcs	.L762
3245:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 5931              		.loc 1 3245 0
 5932 026e 94F80622 		ldrb	r2, [r4, #518]	@ zero_extendqisi2
3244:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA__WRITTEN;
 5933              		.loc 1 3244 0
 5934 0272 C4F80C32 		str	r3, [r4, #524]
ARM GAS  /tmp/ccVdKYyy.s 			page 203


3245:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 5935              		.loc 1 3245 0
 5936 0276 42F02003 		orr	r3, r2, #32
 5937 027a 84F80632 		strb	r3, [r4, #518]
 5938 027e 2EE7     		b	.L762
 5939              	.LVL770:
 5940              	.L802:
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->sclust;			/* Top of the chain */
 5941              		.loc 1 3123 0
 5942 0280 4FF00208 		mov	r8, #2
 5943              	.LVL771:
 5944              	.L765:
3141:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tbl = 0;		/* Terminate table */
 5945              		.loc 1 3141 0
 5946 0284 C845     		cmp	r8, r9
3140:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ulen <= tlen)
 5947              		.loc 1 3140 0
 5948 0286 C0F80080 		str	r8, [r0]
3141:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tbl = 0;		/* Terminate table */
 5949              		.loc 1 3141 0
 5950 028a 21D9     		bls	.L844
3144:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5951              		.loc 1 3144 0
 5952 028c 1125     		movs	r5, #17
 5953 028e 26E7     		b	.L762
 5954              	.LVL772:
 5955              	.L784:
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 5956              		.loc 1 3133 0 discriminator 1
 5957 0290 0125     		movs	r5, #1
 5958 0292 84F80752 		strb	r5, [r4, #519]
 5959 0296 22E7     		b	.L762
 5960              	.LVL773:
 5961              	.L786:
3192:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 5962              		.loc 1 3192 0
 5963 0298 D4F81072 		ldr	r7, [r4, #528]
 5964              	.LVL774:
3194:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(fp->fs, 0);
 5965              		.loc 1 3194 0
 5966 029c 002F     		cmp	r7, #0
 5967 029e 40D0     		beq	.L845
 5968              	.L788:
3201:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5969              		.loc 1 3201 0
 5970 02a0 C4F81472 		str	r7, [r4, #532]
 5971 02a4 AEE7     		b	.L787
 5972              	.LVL775:
 5973              	.L771:
3128:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 5974              		.loc 1 3128 0
 5975 02a6 08F10208 		add	r8, r8, #2
 5976              	.LVL776:
3135:Middlewares/Third_Party/FatFs/src/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
 5977              		.loc 1 3135 0
 5978 02aa C145     		cmp	r9, r8
 5979 02ac 05D3     		bcc	.L773
ARM GAS  /tmp/ccVdKYyy.s 			page 204


 5980              	.LVL777:
3136:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 5981              		.loc 1 3136 0
 5982 02ae 5246     		mov	r2, r10
 5983 02b0 42F808BB 		str	fp, [r2], #8
 5984              	.LVL778:
 5985 02b4 CAF80470 		str	r7, [r10, #4]
 5986 02b8 9246     		mov	r10, r2
 5987              	.LVL779:
 5988              	.L773:
3138:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5989              		.loc 1 3138 0
 5990 02ba D4F80002 		ldr	r0, [r4, #512]
 5991 02be D0F81422 		ldr	r2, [r0, #532]
 5992 02c2 9A42     		cmp	r2, r3
 5993 02c4 1F46     		mov	r7, r3
 5994              	.LVL780:
 5995 02c6 3FF650AF 		bhi	.L774
 5996 02ca D4F82402 		ldr	r0, [r4, #548]
 5997 02ce D9E7     		b	.L765
 5998              	.LVL781:
 5999              	.L844:
3142:Middlewares/Third_Party/FatFs/src/ff.c **** 			else
 6000              		.loc 1 3142 0
 6001 02d0 0023     		movs	r3, #0
 6002 02d2 CAF80030 		str	r3, [r10]
 6003 02d6 02E7     		b	.L762
 6004              	.LVL782:
 6005              	.L840:
3207:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (clst == 0) {				/* When disk gets full, clip file size */
 6006              		.loc 1 3207 0
 6007 02d8 3946     		mov	r1, r7
 6008 02da FFF7FEFF 		bl	create_chain
 6009              	.LVL783:
3208:Middlewares/Third_Party/FatFs/src/ff.c **** 							ofs = bcs; break;
 6010              		.loc 1 3208 0
 6011 02de 0746     		mov	r7, r0
 6012              	.LVL784:
 6013 02e0 0028     		cmp	r0, #0
 6014 02e2 7FF40DAF 		bne	.L794
 6015 02e6 4646     		mov	r6, r8
 6016              	.LVL785:
 6017              	.L836:
 6018 02e8 D4F80832 		ldr	r3, [r4, #520]
 6019              	.L792:
 6020              	.LVL786:
3220:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ofs % SS(fp->fs)) {
 6021              		.loc 1 3220 0
 6022 02ec 3344     		add	r3, r3, r6
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect = clust2sect(fp->fs, clst);	/* Current sector */
 6023              		.loc 1 3221 0
 6024 02ee C6F30802 		ubfx	r2, r6, #0, #9
3220:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ofs % SS(fp->fs)) {
 6025              		.loc 1 3220 0
 6026 02f2 C4F80832 		str	r3, [r4, #520]
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect = clust2sect(fp->fs, clst);	/* Current sector */
 6027              		.loc 1 3221 0
ARM GAS  /tmp/ccVdKYyy.s 			page 205


 6028 02f6 1AB3     		cbz	r2, .L806
3222:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!nsect) ABORT(fp->fs, FR_INT_ERR);
 6029              		.loc 1 3222 0
 6030 02f8 D4F80022 		ldr	r2, [r4, #512]
 6031              	.LVL787:
 6032              	.LBB436:
 6033              	.LBB437:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 6034              		.loc 1 879 0
 6035 02fc D2F81412 		ldr	r1, [r2, #532]
 878:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 6036              		.loc 1 878 0
 6037 0300 B81E     		subs	r0, r7, #2
 6038              	.LVL788:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 6039              		.loc 1 879 0
 6040 0302 0239     		subs	r1, r1, #2
 6041 0304 8842     		cmp	r0, r1
 6042 0306 BFF41DAF 		bcs	.L767
 880:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6043              		.loc 1 880 0
 6044 030a 92F80272 		ldrb	r7, [r2, #514]	@ zero_extendqisi2
 6045              	.LVL789:
 6046 030e D2F82822 		ldr	r2, [r2, #552]
 6047              	.LVL790:
 6048 0312 00FB0727 		mla	r7, r0, r7, r2
 6049              	.LVL791:
 6050              	.LBE437:
 6051              	.LBE436:
3223:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += ofs / SS(fp->fs);
 6052              		.loc 1 3223 0
 6053 0316 002F     		cmp	r7, #0
 6054 0318 3FF414AF 		beq	.L767
3224:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6055              		.loc 1 3224 0
 6056 031c 07EB5627 		add	r7, r7, r6, lsr #9
 6057              	.LVL792:
 6058 0320 75E7     		b	.L790
 6059              	.LVL793:
 6060              	.L845:
3195:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 6061              		.loc 1 3195 0
 6062 0322 3946     		mov	r1, r7
 6063 0324 FFF7FEFF 		bl	create_chain
 6064              	.LVL794:
3196:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 6065              		.loc 1 3196 0
 6066 0328 0128     		cmp	r0, #1
3195:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) ABORT(fp->fs, FR_INT_ERR);
 6067              		.loc 1 3195 0
 6068 032a 0746     		mov	r7, r0
 6069              	.LVL795:
3196:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fp->fs, FR_DISK_ERR);
 6070              		.loc 1 3196 0
 6071 032c 3FF40AAF 		beq	.L767
3197:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->sclust = clst;
 6072              		.loc 1 3197 0
ARM GAS  /tmp/ccVdKYyy.s 			page 206


 6073 0330 0130     		adds	r0, r0, #1
 6074              	.LVL796:
 6075 0332 ADD0     		beq	.L784
3198:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6076              		.loc 1 3198 0
 6077 0334 C4F81072 		str	r7, [r4, #528]
 6078 0338 B2E7     		b	.L788
 6079              	.LVL797:
 6080              	.L837:
 6081 033a D4F80C22 		ldr	r2, [r4, #524]
 6082 033e 93E7     		b	.L797
 6083              	.LVL798:
 6084              	.L806:
3183:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
 6085              		.loc 1 3183 0
 6086 0340 1746     		mov	r7, r2
 6087              	.LVL799:
 6088 0342 64E7     		b	.L790
 6089              		.cfi_endproc
 6090              	.LFE166:
 6092              		.section	.text.f_opendir,"ax",%progbits
 6093              		.align	1
 6094              		.p2align 2,,3
 6095              		.global	f_opendir
 6096              		.syntax unified
 6097              		.thumb
 6098              		.thumb_func
 6099              		.fpu fpv4-sp-d16
 6101              	f_opendir:
 6102              	.LFB167:
3264:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6103              		.loc 1 3264 0
 6104              		.cfi_startproc
 6105              		@ args = 0, pretend = 0, frame = 24
 6106              		@ frame_needed = 0, uses_anonymous_args = 0
 6107              	.LVL800:
 6108 0000 30B5     		push	{r4, r5, lr}
 6109              	.LCFI82:
 6110              		.cfi_def_cfa_offset 12
 6111              		.cfi_offset 4, -12
 6112              		.cfi_offset 5, -8
 6113              		.cfi_offset 14, -4
 6114 0002 87B0     		sub	sp, sp, #28
 6115              	.LCFI83:
 6116              		.cfi_def_cfa_offset 40
3264:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6117              		.loc 1 3264 0
 6118 0004 0191     		str	r1, [sp, #4]
3270:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6119              		.loc 1 3270 0
 6120 0006 68B1     		cbz	r0, .L856
 6121 0008 0546     		mov	r5, r0
3273:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 6122              		.loc 1 3273 0
 6123 000a 0022     		movs	r2, #0
 6124 000c 01A9     		add	r1, sp, #4
 6125              	.LVL801:
ARM GAS  /tmp/ccVdKYyy.s 			page 207


 6126 000e 02A8     		add	r0, sp, #8
 6127              	.LVL802:
 6128 0010 FFF7FEFF 		bl	find_volume
 6129              	.LVL803:
3274:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fs = fs;
 6130              		.loc 1 3274 0
 6131 0014 0446     		mov	r4, r0
 6132 0016 48B1     		cbz	r0, .L861
 6133              	.LVL804:
 6134              	.L848:
3304:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6135              		.loc 1 3304 0 discriminator 1
 6136 0018 0023     		movs	r3, #0
 6137 001a C5F80032 		str	r3, [r5, #512]
 6138              	.LVL805:
 6139              	.L859:
3307:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6140              		.loc 1 3307 0
 6141 001e 2046     		mov	r0, r4
 6142 0020 07B0     		add	sp, sp, #28
 6143              	.LCFI84:
 6144              		.cfi_remember_state
 6145              		.cfi_def_cfa_offset 12
 6146              		@ sp needed
 6147 0022 30BD     		pop	{r4, r5, pc}
 6148              	.LVL806:
 6149              	.L856:
 6150              	.LCFI85:
 6151              		.cfi_restore_state
3270:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6152              		.loc 1 3270 0
 6153 0024 0924     		movs	r4, #9
3307:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6154              		.loc 1 3307 0
 6155 0026 2046     		mov	r0, r4
 6156              	.LVL807:
 6157 0028 07B0     		add	sp, sp, #28
 6158              	.LCFI86:
 6159              		.cfi_remember_state
 6160              		.cfi_def_cfa_offset 12
 6161              		@ sp needed
 6162 002a 30BD     		pop	{r4, r5, pc}
 6163              	.LVL808:
 6164              	.L861:
 6165              	.LCFI87:
 6166              		.cfi_restore_state
3275:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(*dp);
 6167              		.loc 1 3275 0
 6168 002c 029B     		ldr	r3, [sp, #8]
 6169 002e C5F80032 		str	r3, [r5, #512]
3276:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
 6170              		.loc 1 3276 0
 6171 0032 03AB     		add	r3, sp, #12
 6172 0034 C5F81832 		str	r3, [r5, #536]
3277:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
 6173              		.loc 1 3277 0
 6174 0038 0199     		ldr	r1, [sp, #4]
ARM GAS  /tmp/ccVdKYyy.s 			page 208


 6175 003a 2846     		mov	r0, r5
 6176              	.LVL809:
 6177 003c FFF7FEFF 		bl	follow_path
 6178              	.LVL810:
3279:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dp->dir) {						/* It is not the origin directory itself */
 6179              		.loc 1 3279 0
 6180 0040 0446     		mov	r4, r0
 6181 0042 00BB     		cbnz	r0, .L849
3280:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dp->dir[DIR_Attr] & AM_DIR)	/* The object is a sub directory */
 6182              		.loc 1 3280 0
 6183 0044 D5F81432 		ldr	r3, [r5, #532]
 6184 0048 1BB3     		cbz	r3, .L850
3281:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->sclust = ld_clust(fs, dp->dir);
 6185              		.loc 1 3281 0
 6186 004a DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
 6187 004c D206     		lsls	r2, r2, #27
 6188 004e 1ED5     		bpl	.L857
3282:Middlewares/Third_Party/FatFs/src/ff.c **** 				else							/* The object is a file */
 6189              		.loc 1 3282 0
 6190 0050 0299     		ldr	r1, [sp, #8]
 6191              	.LVL811:
 6192              	.LBB438:
 6193              	.LBB439:
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 6194              		.loc 1 1315 0
 6195 0052 DC7E     		ldrb	r4, [r3, #27]	@ zero_extendqisi2
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 6196              		.loc 1 1316 0
 6197 0054 91F80002 		ldrb	r0, [r1, #512]	@ zero_extendqisi2
 6198              	.LVL812:
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 6199              		.loc 1 1315 0
 6200 0058 9A7E     		ldrb	r2, [r3, #26]	@ zero_extendqisi2
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 6201              		.loc 1 1316 0
 6202 005a 0328     		cmp	r0, #3
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 6203              		.loc 1 1315 0
 6204 005c 42EA0422 		orr	r2, r2, r4, lsl #8
 6205              	.LVL813:
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 6206              		.loc 1 1316 0
 6207 0060 19D0     		beq	.L862
 6208              	.LVL814:
 6209              	.L851:
 6210              	.LBE439:
 6211              	.LBE438:
3282:Middlewares/Third_Party/FatFs/src/ff.c **** 				else							/* The object is a file */
 6212              		.loc 1 3282 0
 6213 0062 C5F80822 		str	r2, [r5, #520]
 6214              	.LVL815:
 6215              	.L852:
3287:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 6216              		.loc 1 3287 0
 6217 0066 B1F80632 		ldrh	r3, [r1, #518]
 6218 006a A5F80432 		strh	r3, [r5, #516]	@ movhi
3288:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK
ARM GAS  /tmp/ccVdKYyy.s 			page 209


 6219              		.loc 1 3288 0
 6220 006e 0021     		movs	r1, #0
 6221 0070 2846     		mov	r0, r5
 6222 0072 FFF7FEFF 		bl	dir_sdi
 6223              	.LVL816:
3290:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (dp->sclust) {
 6224              		.loc 1 3290 0
 6225 0076 0446     		mov	r4, r0
 6226 0078 28B9     		cbnz	r0, .L849
3291:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
 6227              		.loc 1 3291 0
 6228 007a D5F80832 		ldr	r3, [r5, #520]
 6229 007e 8BB9     		cbnz	r3, .L863
3296:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6230              		.loc 1 3296 0
 6231 0080 C5F81C42 		str	r4, [r5, #540]
 6232 0084 CBE7     		b	.L859
 6233              	.L849:
 6234              	.LVL817:
3302:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6235              		.loc 1 3302 0
 6236 0086 042C     		cmp	r4, #4
 6237 0088 08BF     		it	eq
 6238 008a 0524     		moveq	r4, #5
 6239              	.LVL818:
 6240 008c C4E7     		b	.L848
 6241              	.LVL819:
 6242              	.L857:
3284:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6243              		.loc 1 3284 0
 6244 008e 0524     		movs	r4, #5
 6245 0090 C2E7     		b	.L848
 6246              	.L850:
 6247 0092 0299     		ldr	r1, [sp, #8]
 6248 0094 E7E7     		b	.L852
 6249              	.LVL820:
 6250              	.L862:
 6251              	.LBB441:
 6252              	.LBB440:
1317:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6253              		.loc 1 1317 0
 6254 0096 587D     		ldrb	r0, [r3, #21]	@ zero_extendqisi2
 6255 0098 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 6256              	.LVL821:
 6257 009a 43EA0023 		orr	r3, r3, r0, lsl #8
 6258 009e 42EA0342 		orr	r2, r2, r3, lsl #16
 6259              	.LVL822:
 6260 00a2 DEE7     		b	.L851
 6261              	.LVL823:
 6262              	.L863:
 6263              	.LBE440:
 6264              	.LBE441:
3292:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!dp->lockid)
 6265              		.loc 1 3292 0
 6266 00a4 2146     		mov	r1, r4
 6267 00a6 2846     		mov	r0, r5
 6268              	.LVL824:
ARM GAS  /tmp/ccVdKYyy.s 			page 210


 6269 00a8 FFF7FEFF 		bl	inc_lock
 6270              	.LVL825:
 6271 00ac C5F81C02 		str	r0, [r5, #540]
3293:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = FR_TOO_MANY_OPEN_FILES;
 6272              		.loc 1 3293 0
 6273 00b0 0028     		cmp	r0, #0
 6274 00b2 B4D1     		bne	.L859
3294:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
 6275              		.loc 1 3294 0
 6276 00b4 1224     		movs	r4, #18
 6277 00b6 AFE7     		b	.L848
 6278              		.cfi_endproc
 6279              	.LFE167:
 6281              		.section	.text.f_closedir,"ax",%progbits
 6282              		.align	1
 6283              		.p2align 2,,3
 6284              		.global	f_closedir
 6285              		.syntax unified
 6286              		.thumb
 6287              		.thumb_func
 6288              		.fpu fpv4-sp-d16
 6290              	f_closedir:
 6291              	.LFB168:
3319:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6292              		.loc 1 3319 0
 6293              		.cfi_startproc
 6294              		@ args = 0, pretend = 0, frame = 0
 6295              		@ frame_needed = 0, uses_anonymous_args = 0
 6296              	.LVL826:
 6297 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 6298              	.LCFI88:
 6299              		.cfi_def_cfa_offset 24
 6300              		.cfi_offset 3, -24
 6301              		.cfi_offset 4, -20
 6302              		.cfi_offset 5, -16
 6303              		.cfi_offset 6, -12
 6304              		.cfi_offset 7, -8
 6305              		.cfi_offset 14, -4
3319:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6306              		.loc 1 3319 0
 6307 0002 0446     		mov	r4, r0
3323:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 6308              		.loc 1 3323 0
 6309 0004 FFF7FEFF 		bl	validate
 6310              	.LVL827:
3324:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 6311              		.loc 1 3324 0
 6312 0008 B8B9     		cbnz	r0, .L871
3329:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(dp->lockid);
 6313              		.loc 1 3329 0
 6314 000a D4F81C32 		ldr	r3, [r4, #540]
 6315 000e 8BB1     		cbz	r3, .L868
 6316              	.LVL828:
 6317              	.LBB442:
 6318              	.LBB443:
 738:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = Files[i].ctr;
 6319              		.loc 1 738 0
ARM GAS  /tmp/ccVdKYyy.s 			page 211


 6320 0010 013B     		subs	r3, r3, #1
 6321              	.LVL829:
 6322 0012 012B     		cmp	r3, #1
 6323 0014 01D9     		bls	.L876
 746:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6324              		.loc 1 746 0
 6325 0016 0220     		movs	r0, #2
 6326              	.LVL830:
 6327 0018 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 6328              	.LVL831:
 6329              	.L876:
 739:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 0x100) n = 0;		/* If write mode open, delete the entry */
 6330              		.loc 1 739 0
 6331 001a 5D00     		lsls	r5, r3, #1
 6332 001c 0A4E     		ldr	r6, .L877
 6333 001e EA18     		adds	r2, r5, r3
 6334 0020 06EB8202 		add	r2, r6, r2, lsl #2
 6335 0024 5189     		ldrh	r1, [r2, #10]
 6336              	.LVL832:
 741:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = n;
 6337              		.loc 1 741 0
 6338 0026 21F48077 		bic	r7, r1, #256
 6339 002a 3FB1     		cbz	r7, .L867
 6340 002c 0139     		subs	r1, r1, #1
 6341              	.LVL833:
 6342 002e 89B2     		uxth	r1, r1
 6343              	.LVL834:
 742:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!n) Files[i].fs = 0;	/* Delete the entry if open count gets zero */
 6344              		.loc 1 742 0
 6345 0030 5181     		strh	r1, [r2, #10]	@ movhi
 743:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;
 6346              		.loc 1 743 0
 6347 0032 21B1     		cbz	r1, .L869
 6348              	.LVL835:
 6349              	.L868:
 6350              	.LBE443:
 6351              	.LBE442:
3333:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 6352              		.loc 1 3333 0
 6353 0034 0023     		movs	r3, #0
 6354 0036 C4F80032 		str	r3, [r4, #512]
 6355              	.LVL836:
 6356              	.L871:
3339:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6357              		.loc 1 3339 0
 6358 003a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 6359              	.LVL837:
 6360              	.L867:
 6361              	.LBB445:
 6362              	.LBB444:
 742:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!n) Files[i].fs = 0;	/* Delete the entry if open count gets zero */
 6363              		.loc 1 742 0
 6364 003c 5081     		strh	r0, [r2, #10]	@ movhi
 6365              	.LVL838:
 6366              	.L869:
 743:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;
 6367              		.loc 1 743 0
ARM GAS  /tmp/ccVdKYyy.s 			page 212


 6368 003e 2B44     		add	r3, r3, r5
 6369              	.LVL839:
 6370 0040 9B00     		lsls	r3, r3, #2
 6371 0042 0022     		movs	r2, #0
 6372 0044 F250     		str	r2, [r6, r3]
 6373 0046 F5E7     		b	.L868
 6374              	.L878:
 6375              		.align	2
 6376              	.L877:
 6377 0048 00000000 		.word	.LANCHOR0
 6378              	.LBE444:
 6379              	.LBE445:
 6380              		.cfi_endproc
 6381              	.LFE168:
 6383              		.section	.text.f_readdir,"ax",%progbits
 6384              		.align	1
 6385              		.p2align 2,,3
 6386              		.global	f_readdir
 6387              		.syntax unified
 6388              		.thumb
 6389              		.thumb_func
 6390              		.fpu fpv4-sp-d16
 6392              	f_readdir:
 6393              	.LFB169:
3352:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6394              		.loc 1 3352 0
 6395              		.cfi_startproc
 6396              		@ args = 0, pretend = 0, frame = 16
 6397              		@ frame_needed = 0, uses_anonymous_args = 0
 6398              	.LVL840:
 6399 0000 70B5     		push	{r4, r5, r6, lr}
 6400              	.LCFI89:
 6401              		.cfi_def_cfa_offset 16
 6402              		.cfi_offset 4, -16
 6403              		.cfi_offset 5, -12
 6404              		.cfi_offset 6, -8
 6405              		.cfi_offset 14, -4
 6406 0002 84B0     		sub	sp, sp, #16
 6407              	.LCFI90:
 6408              		.cfi_def_cfa_offset 32
3352:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6409              		.loc 1 3352 0
 6410 0004 0E46     		mov	r6, r1
 6411 0006 0546     		mov	r5, r0
3357:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 6412              		.loc 1 3357 0
 6413 0008 FFF7FEFF 		bl	validate
 6414              	.LVL841:
3358:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!fno) {
 6415              		.loc 1 3358 0
 6416 000c 0446     		mov	r4, r0
 6417 000e 50B9     		cbnz	r0, .L880
3359:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_sdi(dp, 0);			/* Rewind the directory object */
 6418              		.loc 1 3359 0
 6419 0010 0EB3     		cbz	r6, .L887
3362:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
 6420              		.loc 1 3362 0
ARM GAS  /tmp/ccVdKYyy.s 			page 213


 6421 0012 01AB     		add	r3, sp, #4
 6422 0014 C5F81832 		str	r3, [r5, #536]
3363:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) {		/* Reached end of directory */
 6423              		.loc 1 3363 0
 6424 0018 2846     		mov	r0, r5
 6425              	.LVL842:
 6426 001a FFF7FEFF 		bl	dir_read.constprop.14
 6427              	.LVL843:
3364:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = 0;
 6428              		.loc 1 3364 0
 6429 001e 0428     		cmp	r0, #4
 6430 0020 04D0     		beq	.L888
3368:Middlewares/Third_Party/FatFs/src/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
 6431              		.loc 1 3368 0
 6432 0022 A8B1     		cbz	r0, .L889
 6433              	.L885:
 6434 0024 0446     		mov	r4, r0
 6435              	.LVL844:
 6436              	.L880:
3381:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6437              		.loc 1 3381 0
 6438 0026 2046     		mov	r0, r4
 6439 0028 04B0     		add	sp, sp, #16
 6440              	.LCFI91:
 6441              		.cfi_remember_state
 6442              		.cfi_def_cfa_offset 16
 6443              		@ sp needed
 6444 002a 70BD     		pop	{r4, r5, r6, pc}
 6445              	.LVL845:
 6446              	.L888:
 6447              	.LCFI92:
 6448              		.cfi_restore_state
3365:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
 6449              		.loc 1 3365 0
 6450 002c C5F81042 		str	r4, [r5, #528]
 6451              	.LVL846:
 6452 0030 2046     		mov	r0, r4
 6453              	.LVL847:
 6454              	.L883:
3369:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
 6455              		.loc 1 3369 0
 6456 0032 3246     		mov	r2, r6
 6457 0034 05F50571 		add	r1, r5, #532
 6458 0038 FFF7FEFF 		bl	get_fileinfo.isra.2
 6459              	.LVL848:
3370:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {
 6460              		.loc 1 3370 0
 6461 003c 0021     		movs	r1, #0
 6462 003e 2846     		mov	r0, r5
 6463 0040 FFF7FEFF 		bl	dir_next
 6464              	.LVL849:
3371:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->sect = 0;
 6465              		.loc 1 3371 0
 6466 0044 0428     		cmp	r0, #4
 6467 0046 EDD1     		bne	.L885
3372:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_OK;
 6468              		.loc 1 3372 0
ARM GAS  /tmp/ccVdKYyy.s 			page 214


 6469 0048 0023     		movs	r3, #0
 6470 004a C5F81032 		str	r3, [r5, #528]
 6471              	.LVL850:
 6472 004e EAE7     		b	.L880
 6473              	.LVL851:
 6474              	.L889:
 6475 0050 D5F81002 		ldr	r0, [r5, #528]
 6476              	.LVL852:
 6477 0054 EDE7     		b	.L883
 6478              	.LVL853:
 6479              	.L887:
3360:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 6480              		.loc 1 3360 0
 6481 0056 0146     		mov	r1, r0
 6482 0058 2846     		mov	r0, r5
 6483              	.LVL854:
 6484 005a FFF7FEFF 		bl	dir_sdi
 6485              	.LVL855:
 6486 005e 0446     		mov	r4, r0
 6487              	.LVL856:
 6488 0060 E1E7     		b	.L880
 6489              		.cfi_endproc
 6490              	.LFE169:
 6492 0062 00BF     		.section	.text.f_stat,"ax",%progbits
 6493              		.align	1
 6494              		.p2align 2,,3
 6495              		.global	f_stat
 6496              		.syntax unified
 6497              		.thumb
 6498              		.thumb_func
 6499              		.fpu fpv4-sp-d16
 6501              	f_stat:
 6502              	.LFB170:
3446:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6503              		.loc 1 3446 0
 6504              		.cfi_startproc
 6505              		@ args = 0, pretend = 0, frame = 568
 6506              		@ frame_needed = 0, uses_anonymous_args = 0
 6507              	.LVL857:
 6508 0000 30B5     		push	{r4, r5, lr}
 6509              	.LCFI93:
 6510              		.cfi_def_cfa_offset 12
 6511              		.cfi_offset 4, -12
 6512              		.cfi_offset 5, -8
 6513              		.cfi_offset 14, -4
 6514 0002 ADF50F7D 		sub	sp, sp, #572
 6515              	.LCFI94:
 6516              		.cfi_def_cfa_offset 584
3446:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6517              		.loc 1 3446 0
 6518 0006 0D46     		mov	r5, r1
 6519 0008 0190     		str	r0, [sp, #4]
3453:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 6520              		.loc 1 3453 0
 6521 000a 01A9     		add	r1, sp, #4
 6522              	.LVL858:
 6523 000c 0022     		movs	r2, #0
ARM GAS  /tmp/ccVdKYyy.s 			page 215


 6524 000e 86A8     		add	r0, sp, #536
 6525              	.LVL859:
 6526 0010 FFF7FEFF 		bl	find_volume
 6527              	.LVL860:
3454:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
 6528              		.loc 1 3454 0
 6529 0014 0446     		mov	r4, r0
 6530 0016 18B1     		cbz	r0, .L897
 6531              	.L891:
 6532              	.LVL861:
3468:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6533              		.loc 1 3468 0
 6534 0018 2046     		mov	r0, r4
 6535 001a 0DF50F7D 		add	sp, sp, #572
 6536              	.LCFI95:
 6537              		.cfi_remember_state
 6538              		.cfi_def_cfa_offset 12
 6539              		@ sp needed
 6540 001e 30BD     		pop	{r4, r5, pc}
 6541              	.LVL862:
 6542              	.L897:
 6543              	.LCFI96:
 6544              		.cfi_restore_state
3455:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 6545              		.loc 1 3455 0
 6546 0020 03AB     		add	r3, sp, #12
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 6547              		.loc 1 3456 0
 6548 0022 0199     		ldr	r1, [sp, #4]
3455:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 6549              		.loc 1 3455 0
 6550 0024 8C93     		str	r3, [sp, #560]
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 6551              		.loc 1 3456 0
 6552 0026 06A8     		add	r0, sp, #24
 6553              	.LVL863:
 6554 0028 FFF7FEFF 		bl	follow_path
 6555              	.LVL864:
3457:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.dir) {		/* Found an object */
 6556              		.loc 1 3457 0
 6557 002c 0446     		mov	r4, r0
 6558 002e 0028     		cmp	r0, #0
 6559 0030 F2D1     		bne	.L891
3458:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fno) get_fileinfo(&dj, fno);
 6560              		.loc 1 3458 0
 6561 0032 8B9B     		ldr	r3, [sp, #556]
 6562 0034 53B1     		cbz	r3, .L892
3459:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {			/* It is root directory */
 6563              		.loc 1 3459 0
 6564 0036 002D     		cmp	r5, #0
 6565 0038 EED0     		beq	.L891
3459:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {			/* It is root directory */
 6566              		.loc 1 3459 0 is_stmt 0 discriminator 1
 6567 003a 8A98     		ldr	r0, [sp, #552]
 6568              	.LVL865:
 6569 003c 2A46     		mov	r2, r5
 6570 003e 8BA9     		add	r1, sp, #556
ARM GAS  /tmp/ccVdKYyy.s 			page 216


 6571 0040 FFF7FEFF 		bl	get_fileinfo.isra.2
 6572              	.LVL866:
3468:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6573              		.loc 1 3468 0 is_stmt 1 discriminator 1
 6574 0044 2046     		mov	r0, r4
 6575 0046 0DF50F7D 		add	sp, sp, #572
 6576              	.LCFI97:
 6577              		.cfi_remember_state
 6578              		.cfi_def_cfa_offset 12
 6579              		@ sp needed
 6580 004a 30BD     		pop	{r4, r5, pc}
 6581              	.LVL867:
 6582              	.L892:
 6583              	.LCFI98:
 6584              		.cfi_restore_state
3461:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6585              		.loc 1 3461 0
 6586 004c 0624     		movs	r4, #6
 6587 004e E3E7     		b	.L891
 6588              		.cfi_endproc
 6589              	.LFE170:
 6591              		.section	.text.f_getfree,"ax",%progbits
 6592              		.align	1
 6593              		.p2align 2,,3
 6594              		.global	f_getfree
 6595              		.syntax unified
 6596              		.thumb
 6597              		.thumb_func
 6598              		.fpu fpv4-sp-d16
 6600              	f_getfree:
 6601              	.LFB171:
3482:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6602              		.loc 1 3482 0
 6603              		.cfi_startproc
 6604              		@ args = 0, pretend = 0, frame = 8
 6605              		@ frame_needed = 0, uses_anonymous_args = 0
 6606              	.LVL868:
 6607 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 6608              	.LCFI99:
 6609              		.cfi_def_cfa_offset 32
 6610              		.cfi_offset 4, -32
 6611              		.cfi_offset 5, -28
 6612              		.cfi_offset 6, -24
 6613              		.cfi_offset 7, -20
 6614              		.cfi_offset 8, -16
 6615              		.cfi_offset 9, -12
 6616              		.cfi_offset 10, -8
 6617              		.cfi_offset 14, -4
 6618 0004 82B0     		sub	sp, sp, #8
 6619              	.LCFI100:
 6620              		.cfi_def_cfa_offset 40
3482:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6621              		.loc 1 3482 0
 6622 0006 02AB     		add	r3, sp, #8
 6623 0008 1446     		mov	r4, r2
 6624 000a 43F8040D 		str	r0, [r3, #-4]!
 6625 000e 8846     		mov	r8, r1
ARM GAS  /tmp/ccVdKYyy.s 			page 217


3491:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs = *fatfs;
 6626              		.loc 1 3491 0
 6627 0010 1046     		mov	r0, r2
 6628              	.LVL869:
 6629 0012 1946     		mov	r1, r3
 6630              	.LVL870:
 6631 0014 0022     		movs	r2, #0
 6632              	.LVL871:
 6633 0016 FFF7FEFF 		bl	find_volume
 6634              	.LVL872:
3493:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* If free_clust is valid, return it without full cluster scan */
 6635              		.loc 1 3493 0
 6636 001a 0746     		mov	r7, r0
 6637 001c 48BB     		cbnz	r0, .L899
3492:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 6638              		.loc 1 3492 0
 6639 001e 2568     		ldr	r5, [r4]
3495:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clust;
 6640              		.loc 1 3495 0
 6641 0020 D5F81442 		ldr	r4, [r5, #532]
 6642              	.LVL873:
 6643 0024 D5F81032 		ldr	r3, [r5, #528]
 6644 0028 A21E     		subs	r2, r4, #2
 6645 002a 9342     		cmp	r3, r2
 6646 002c 25D9     		bls	.L922
3499:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = 0;
 6647              		.loc 1 3499 0
 6648 002e 95F800A2 		ldrb	r10, [r5, #512]	@ zero_extendqisi2
 6649              	.LVL874:
3501:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = 2;
 6650              		.loc 1 3501 0
 6651 0032 BAF1010F 		cmp	r10, #1
 6652 0036 3CD0     		beq	.L923
 6653              	.LVL875:
3511:Middlewares/Third_Party/FatFs/src/ff.c **** 				i = 0; p = 0;
 6654              		.loc 1 3511 0
 6655 0038 D5F82062 		ldr	r6, [r5, #544]
 6656              	.LVL876:
3512:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
 6657              		.loc 1 3512 0
 6658 003c 0346     		mov	r3, r0
 6659 003e 0246     		mov	r2, r0
3500:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fat == FS_FAT12) {
 6660              		.loc 1 3500 0
 6661 0040 8146     		mov	r9, r0
 6662              	.LVL877:
 6663              	.L912:
3514:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = move_window(fs, sect++);
 6664              		.loc 1 3514 0
 6665 0042 02B3     		cbz	r2, .L924
3520:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (LD_WORD(p) == 0) n++;
 6666              		.loc 1 3520 0
 6667 0044 BAF1020F 		cmp	r10, #2
 6668 0048 29D0     		beq	.L925
 6669              	.L908:
3524:Middlewares/Third_Party/FatFs/src/ff.c **** 						p += 4; i -= 4;
 6670              		.loc 1 3524 0
ARM GAS  /tmp/ccVdKYyy.s 			page 218


 6671 004a 1968     		ldr	r1, [r3]	@ unaligned
 6672 004c 31F07041 		bics	r1, r1, #-268435456
 6673 0050 08BF     		it	eq
 6674 0052 09F10109 		addeq	r9, r9, #1
 6675              	.LVL878:
3525:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6676              		.loc 1 3525 0
 6677 0056 0433     		adds	r3, r3, #4
 6678              	.LVL879:
 6679 0058 043A     		subs	r2, r2, #4
 6680              	.LVL880:
 6681              	.L910:
3527:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6682              		.loc 1 3527 0
 6683 005a 013C     		subs	r4, r4, #1
 6684              	.LVL881:
 6685 005c F1D1     		bne	.L912
 6686              	.LVL882:
 6687              	.L903:
3530:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = n;
 6688              		.loc 1 3530 0
 6689 005e 95F80532 		ldrb	r3, [r5, #517]	@ zero_extendqisi2
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;
 6690              		.loc 1 3529 0
 6691 0062 C5F81092 		str	r9, [r5, #528]
3530:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = n;
 6692              		.loc 1 3530 0
 6693 0066 43F00103 		orr	r3, r3, #1
 6694 006a 85F80532 		strb	r3, [r5, #517]
3531:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 6695              		.loc 1 3531 0
 6696 006e C8F80090 		str	r9, [r8]
 6697              	.LVL883:
 6698              	.L899:
3535:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6699              		.loc 1 3535 0
 6700 0072 3846     		mov	r0, r7
 6701 0074 02B0     		add	sp, sp, #8
 6702              	.LCFI101:
 6703              		.cfi_remember_state
 6704              		.cfi_def_cfa_offset 32
 6705              		@ sp needed
 6706 0076 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 6707              	.LVL884:
 6708              	.L922:
 6709              	.LCFI102:
 6710              		.cfi_restore_state
 6711 007a 3846     		mov	r0, r7
 6712              	.LVL885:
3496:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 6713              		.loc 1 3496 0
 6714 007c C8F80030 		str	r3, [r8]
 6715              	.LVL886:
3535:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6716              		.loc 1 3535 0
 6717 0080 02B0     		add	sp, sp, #8
 6718              	.LCFI103:
ARM GAS  /tmp/ccVdKYyy.s 			page 219


 6719              		.cfi_remember_state
 6720              		.cfi_def_cfa_offset 32
 6721              		@ sp needed
 6722 0082 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 6723              	.LVL887:
 6724              	.L924:
 6725              	.LCFI104:
 6726              		.cfi_restore_state
3515:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res != FR_OK) break;
 6727              		.loc 1 3515 0
 6728 0086 3146     		mov	r1, r6
 6729 0088 2846     		mov	r0, r5
 6730 008a 0136     		adds	r6, r6, #1
 6731              	.LVL888:
 6732 008c FFF7FEFF 		bl	move_window
 6733              	.LVL889:
3516:Middlewares/Third_Party/FatFs/src/ff.c **** 						p = fs->win.d8;
 6734              		.loc 1 3516 0
 6735 0090 40BB     		cbnz	r0, .L917
 6736              	.LVL890:
3520:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (LD_WORD(p) == 0) n++;
 6737              		.loc 1 3520 0
 6738 0092 BAF1020F 		cmp	r10, #2
3517:Middlewares/Third_Party/FatFs/src/ff.c **** 						i = SS(fs);
 6739              		.loc 1 3517 0
 6740 0096 2B46     		mov	r3, r5
 6741              	.LVL891:
3518:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6742              		.loc 1 3518 0
 6743 0098 4FF40072 		mov	r2, #512
 6744              	.LVL892:
3520:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (LD_WORD(p) == 0) n++;
 6745              		.loc 1 3520 0
 6746 009c D5D1     		bne	.L908
 6747              	.LVL893:
 6748              	.L925:
3521:Middlewares/Third_Party/FatFs/src/ff.c **** 						p += 2; i -= 2;
 6749              		.loc 1 3521 0
 6750 009e 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 6751 00a0 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 6752 00a2 51EA0021 		orrs	r1, r1, r0, lsl #8
 6753 00a6 08BF     		it	eq
 6754 00a8 09F10109 		addeq	r9, r9, #1
 6755              	.LVL894:
3522:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
 6756              		.loc 1 3522 0
 6757 00ac 0233     		adds	r3, r3, #2
 6758              	.LVL895:
 6759 00ae 023A     		subs	r2, r2, #2
 6760              	.LVL896:
 6761 00b0 D3E7     		b	.L910
 6762              	.LVL897:
 6763              	.L923:
 6764 00b2 0226     		movs	r6, #2
 6765 00b4 8146     		mov	r9, r0
 6766              	.LVL898:
 6767              	.L904:
ARM GAS  /tmp/ccVdKYyy.s 			page 220


 6768              	.LBB446:
 6769              	.LBB447:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 6770              		.loc 1 901 0
 6771 00b6 A642     		cmp	r6, r4
 6772 00b8 3146     		mov	r1, r6
 6773 00ba 2846     		mov	r0, r5
 6774              	.LBE447:
 6775              	.LBE446:
3508:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 6776              		.loc 1 3508 0
 6777 00bc 06F10106 		add	r6, r6, #1
 6778              	.LVL899:
 6779              	.LBB450:
 6780              	.LBB448:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 6781              		.loc 1 901 0
 6782 00c0 0ED2     		bcs	.L916
 6783              	.LVL900:
 6784 00c2 FFF7FEFF 		bl	get_fat.part.6
 6785              	.LVL901:
 6786              	.LBE448:
 6787              	.LBE450:
3505:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 6788              		.loc 1 3505 0
 6789 00c6 431C     		adds	r3, r0, #1
 6790 00c8 0ED0     		beq	.L915
3506:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) n++;
 6791              		.loc 1 3506 0
 6792 00ca 0128     		cmp	r0, #1
 6793 00cc 08D0     		beq	.L916
3507:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
 6794              		.loc 1 3507 0
 6795 00ce 08B9     		cbnz	r0, .L905
3507:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
 6796              		.loc 1 3507 0 is_stmt 0 discriminator 1
 6797 00d0 09F10109 		add	r9, r9, #1
 6798              	.LVL902:
 6799              	.L905:
3508:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 6800              		.loc 1 3508 0 is_stmt 1
 6801 00d4 D5F81442 		ldr	r4, [r5, #532]
 6802 00d8 A642     		cmp	r6, r4
 6803 00da C0D2     		bcs	.L903
 6804              	.LBB451:
 6805              	.LBB449:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 6806              		.loc 1 901 0
 6807 00dc 012E     		cmp	r6, #1
 6808 00de EAD8     		bhi	.L904
 6809              	.LVL903:
 6810              	.L916:
 6811              	.LBE449:
 6812              	.LBE451:
3506:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) n++;
 6813              		.loc 1 3506 0
 6814 00e0 0227     		movs	r7, #2
ARM GAS  /tmp/ccVdKYyy.s 			page 221


 6815 00e2 BCE7     		b	.L903
 6816              	.LVL904:
 6817              	.L917:
3515:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res != FR_OK) break;
 6818              		.loc 1 3515 0
 6819 00e4 0746     		mov	r7, r0
 6820 00e6 BAE7     		b	.L903
 6821              	.LVL905:
 6822              	.L915:
3505:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 6823              		.loc 1 3505 0
 6824 00e8 0127     		movs	r7, #1
 6825 00ea B8E7     		b	.L903
 6826              		.cfi_endproc
 6827              	.LFE171:
 6829              		.section	.text.f_truncate,"ax",%progbits
 6830              		.align	1
 6831              		.p2align 2,,3
 6832              		.global	f_truncate
 6833              		.syntax unified
 6834              		.thumb
 6835              		.thumb_func
 6836              		.fpu fpv4-sp-d16
 6838              	f_truncate:
 6839              	.LFB172:
3547:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6840              		.loc 1 3547 0
 6841              		.cfi_startproc
 6842              		@ args = 0, pretend = 0, frame = 0
 6843              		@ frame_needed = 0, uses_anonymous_args = 0
 6844              	.LVL906:
 6845 0000 70B5     		push	{r4, r5, r6, lr}
 6846              	.LCFI105:
 6847              		.cfi_def_cfa_offset 16
 6848              		.cfi_offset 4, -16
 6849              		.cfi_offset 5, -12
 6850              		.cfi_offset 6, -8
 6851              		.cfi_offset 14, -4
3547:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6852              		.loc 1 3547 0
 6853 0002 0446     		mov	r4, r0
3552:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 6854              		.loc 1 3552 0
 6855 0004 FFF7FEFF 		bl	validate
 6856              	.LVL907:
3553:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->err) {						/* Check error */
 6857              		.loc 1 3553 0
 6858 0008 0546     		mov	r5, r0
 6859 000a 18B9     		cbnz	r0, .L948
3554:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = (FRESULT)fp->err;
 6860              		.loc 1 3554 0
 6861 000c 94F80732 		ldrb	r3, [r4, #519]	@ zero_extendqisi2
 6862 0010 13B1     		cbz	r3, .L956
 6863 0012 1D46     		mov	r5, r3
 6864              	.LVL908:
 6865              	.L948:
3591:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccVdKYyy.s 			page 222


 6866              		.loc 1 3591 0
 6867 0014 2846     		mov	r0, r5
 6868 0016 70BD     		pop	{r4, r5, r6, pc}
 6869              	.LVL909:
 6870              	.L956:
3557:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DENIED;
 6871              		.loc 1 3557 0
 6872 0018 94F80622 		ldrb	r2, [r4, #518]	@ zero_extendqisi2
 6873 001c 9107     		lsls	r1, r2, #30
 6874 001e 40D5     		bpl	.L943
 6875              	.LVL910:
3562:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fsize = fp->fptr;	/* Set file size to current R/W point */
 6876              		.loc 1 3562 0
 6877 0020 D4F80832 		ldr	r3, [r4, #520]
 6878 0024 D4F80C12 		ldr	r1, [r4, #524]
 6879 0028 9942     		cmp	r1, r3
 6880 002a F3D9     		bls	.L948
3564:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 6881              		.loc 1 3564 0
 6882 002c 42F02002 		orr	r2, r2, #32
 6883 0030 84F80622 		strb	r2, [r4, #518]
3563:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA__WRITTEN;
 6884              		.loc 1 3563 0
 6885 0034 C4F80C32 		str	r3, [r4, #524]
3565:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = remove_chain(fp->fs, fp->sclust);
 6886              		.loc 1 3565 0
 6887 0038 23BB     		cbnz	r3, .L929
3566:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->sclust = 0;
 6888              		.loc 1 3566 0
 6889 003a D4F81012 		ldr	r1, [r4, #528]
 6890              	.LVL911:
 6891              	.LBB452:
 6892              	.LBB453:
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 6893              		.loc 1 1021 0
 6894 003e 0129     		cmp	r1, #1
 6895 0040 05D9     		bls	.L945
 6896              	.LBE453:
 6897              	.LBE452:
3566:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->sclust = 0;
 6898              		.loc 1 3566 0
 6899 0042 D4F80002 		ldr	r0, [r4, #512]
 6900              	.LBB456:
 6901              	.LBB454:
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 6902              		.loc 1 1021 0
 6903 0046 D0F81432 		ldr	r3, [r0, #532]
 6904 004a 9942     		cmp	r1, r3
 6905 004c 30D3     		bcc	.L957
 6906              	.L945:
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6907              		.loc 1 1022 0
 6908 004e 0220     		movs	r0, #2
 6909              	.LVL912:
 6910              	.L930:
 6911              	.LBE454:
 6912              	.LBE456:
ARM GAS  /tmp/ccVdKYyy.s 			page 223


3567:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* When truncate a part of the file, remove remaining clusters */
 6913              		.loc 1 3567 0
 6914 0050 0023     		movs	r3, #0
 6915 0052 C4F81032 		str	r3, [r4, #528]
 6916              	.L931:
 6917              	.LVL913:
3579:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fp->fs->drv, fp->buf.d8, fp->dsect, 1) != RES_OK)
 6918              		.loc 1 3579 0
 6919 0056 48BB     		cbnz	r0, .L947
 6920              	.LVL914:
 6921              	.L941:
 6922 0058 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 6923 005c 5B06     		lsls	r3, r3, #25
 6924 005e D9D5     		bpl	.L948
3580:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DISK_ERR;
 6925              		.loc 1 3580 0
 6926 0060 D4F80032 		ldr	r3, [r4, #512]
 6927 0064 D4F81822 		ldr	r2, [r4, #536]
 6928 0068 93F80102 		ldrb	r0, [r3, #513]	@ zero_extendqisi2
 6929 006c 2146     		mov	r1, r4
 6930 006e 0123     		movs	r3, #1
 6931 0070 FFF7FEFF 		bl	disk_write
 6932              	.LVL915:
 6933 0074 C0B9     		cbnz	r0, .L937
3583:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6934              		.loc 1 3583 0
 6935 0076 94F80632 		ldrb	r3, [r4, #518]	@ zero_extendqisi2
 6936 007a 23F04003 		bic	r3, r3, #64
 6937 007e 84F80632 		strb	r3, [r4, #518]
 6938 0082 C7E7     		b	.L948
 6939              	.LVL916:
 6940              	.L929:
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
 6941              		.loc 1 3569 0
 6942 0084 D4F81412 		ldr	r1, [r4, #532]
 6943              	.LVL917:
 6944              	.LBB457:
 6945              	.LBB458:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 6946              		.loc 1 901 0
 6947 0088 0129     		cmp	r1, #1
 6948 008a 05D9     		bls	.L932
 6949              	.LBE458:
 6950              	.LBE457:
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
 6951              		.loc 1 3569 0
 6952 008c D4F80002 		ldr	r0, [r4, #512]
 6953              	.LBB462:
 6954              	.LBB459:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 6955              		.loc 1 901 0
 6956 0090 D0F81432 		ldr	r3, [r0, #532]
 6957 0094 9942     		cmp	r1, r3
 6958 0096 0ED3     		bcc	.L958
 6959              	.LVL918:
 6960              	.L932:
 6961              	.LBE459:
ARM GAS  /tmp/ccVdKYyy.s 			page 224


 6962              	.LBE462:
3572:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && ncl < fp->fs->n_fatent) {
 6963              		.loc 1 3572 0
 6964 0098 0225     		movs	r5, #2
 6965              	.L934:
 6966              	.LVL919:
3587:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6967              		.loc 1 3587 0
 6968 009a 84F80752 		strb	r5, [r4, #519]
3591:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6969              		.loc 1 3591 0
 6970 009e 2846     		mov	r0, r5
 6971 00a0 70BD     		pop	{r4, r5, r6, pc}
 6972              	.LVL920:
 6973              	.L943:
3558:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 6974              		.loc 1 3558 0
 6975 00a2 0725     		movs	r5, #7
3591:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6976              		.loc 1 3591 0
 6977 00a4 2846     		mov	r0, r5
 6978              	.LVL921:
 6979 00a6 70BD     		pop	{r4, r5, r6, pc}
 6980              	.LVL922:
 6981              	.L937:
3571:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ncl == 1) res = FR_INT_ERR;
 6982              		.loc 1 3571 0
 6983 00a8 0125     		movs	r5, #1
 6984 00aa F6E7     		b	.L934
 6985              	.L947:
 6986 00ac 0546     		mov	r5, r0
 6987 00ae F4E7     		b	.L934
 6988              	.LVL923:
 6989              	.L957:
 6990              	.LBB463:
 6991              	.LBB455:
 6992 00b0 FFF7FEFF 		bl	remove_chain.part.10
 6993              	.LVL924:
 6994 00b4 CCE7     		b	.L930
 6995              	.LVL925:
 6996              	.L958:
 6997              	.LBE455:
 6998              	.LBE463:
 6999              	.LBB464:
 7000              	.LBB460:
 7001 00b6 FFF7FEFF 		bl	get_fat.part.6
 7002              	.LVL926:
 7003              	.LBE460:
 7004              	.LBE464:
 7005 00ba 421C     		adds	r2, r0, #1
 7006              	.LBB465:
 7007              	.LBB461:
 7008 00bc 0646     		mov	r6, r0
 7009              	.LBE461:
 7010              	.LBE465:
 7011 00be F3D0     		beq	.L937
3572:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && ncl < fp->fs->n_fatent) {
ARM GAS  /tmp/ccVdKYyy.s 			page 225


 7012              		.loc 1 3572 0
 7013 00c0 0128     		cmp	r0, #1
 7014 00c2 E9D0     		beq	.L932
3573:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = put_fat(fp->fs, fp->clust, 0x0FFFFFFF);
 7015              		.loc 1 3573 0
 7016 00c4 D4F80002 		ldr	r0, [r4, #512]
 7017 00c8 D0F81432 		ldr	r3, [r0, #532]
 7018 00cc B342     		cmp	r3, r6
 7019 00ce C3D9     		bls	.L941
3574:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) res = remove_chain(fp->fs, ncl);
 7020              		.loc 1 3574 0
 7021 00d0 D4F81412 		ldr	r1, [r4, #532]
 7022              	.LVL927:
 7023              	.LBB466:
 7024              	.LBB467:
 957:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 7025              		.loc 1 957 0
 7026 00d4 0129     		cmp	r1, #1
 7027 00d6 DFD9     		bls	.L932
 7028 00d8 8B42     		cmp	r3, r1
 7029 00da DDD9     		bls	.L932
 7030 00dc 6FF07042 		mvn	r2, #-268435456
 7031 00e0 FFF7FEFF 		bl	put_fat.part.8
 7032              	.LVL928:
 7033              	.LBE467:
 7034              	.LBE466:
3575:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7035              		.loc 1 3575 0
 7036 00e4 0028     		cmp	r0, #0
 7037 00e6 E1D1     		bne	.L947
 7038              	.LVL929:
 7039              	.LBB468:
 7040              	.LBB469:
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 7041              		.loc 1 1021 0 discriminator 1
 7042 00e8 012E     		cmp	r6, #1
 7043 00ea D5D9     		bls	.L932
 7044              	.LBE469:
 7045              	.LBE468:
3575:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7046              		.loc 1 3575 0
 7047 00ec D4F80002 		ldr	r0, [r4, #512]
 7048              	.LBB471:
 7049              	.LBB470:
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 7050              		.loc 1 1021 0
 7051 00f0 D0F81432 		ldr	r3, [r0, #532]
 7052 00f4 9E42     		cmp	r6, r3
 7053 00f6 CFD2     		bcs	.L932
 7054 00f8 3146     		mov	r1, r6
 7055 00fa FFF7FEFF 		bl	remove_chain.part.10
 7056              	.LVL930:
 7057 00fe AAE7     		b	.L931
 7058              	.LBE470:
 7059              	.LBE471:
 7060              		.cfi_endproc
 7061              	.LFE172:
ARM GAS  /tmp/ccVdKYyy.s 			page 226


 7063              		.section	.text.f_unlink,"ax",%progbits
 7064              		.align	1
 7065              		.p2align 2,,3
 7066              		.global	f_unlink
 7067              		.syntax unified
 7068              		.thumb
 7069              		.thumb_func
 7070              		.fpu fpv4-sp-d16
 7072              	f_unlink:
 7073              	.LFB173:
3603:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7074              		.loc 1 3603 0
 7075              		.cfi_startproc
 7076              		@ args = 0, pretend = 0, frame = 1112
 7077              		@ frame_needed = 0, uses_anonymous_args = 0
 7078              	.LVL931:
 7079 0000 30B5     		push	{r4, r5, lr}
 7080              	.LCFI106:
 7081              		.cfi_def_cfa_offset 12
 7082              		.cfi_offset 4, -12
 7083              		.cfi_offset 5, -8
 7084              		.cfi_offset 14, -4
 7085 0002 ADF25C4D 		subw	sp, sp, #1116
 7086              	.LCFI107:
 7087              		.cfi_def_cfa_offset 1128
3612:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7088              		.loc 1 3612 0
 7089 0006 01A9     		add	r1, sp, #4
3603:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7090              		.loc 1 3603 0
 7091 0008 0190     		str	r0, [sp, #4]
3612:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7092              		.loc 1 3612 0
 7093 000a 0122     		movs	r2, #1
 7094 000c 86A8     		add	r0, sp, #536
 7095              	.LVL932:
 7096 000e FFF7FEFF 		bl	find_volume
 7097              	.LVL933:
3613:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
 7098              		.loc 1 3613 0
 7099 0012 10B1     		cbz	r0, .L989
 7100              	.LVL934:
 7101              	.L973:
3660:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7102              		.loc 1 3660 0
 7103 0014 0DF25C4D 		addw	sp, sp, #1116
 7104              	.LCFI108:
 7105              		.cfi_remember_state
 7106              		.cfi_def_cfa_offset 12
 7107              		@ sp needed
 7108 0018 30BD     		pop	{r4, r5, pc}
 7109              	.LVL935:
 7110              	.L989:
 7111              	.LCFI109:
 7112              		.cfi_restore_state
3614:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 7113              		.loc 1 3614 0
ARM GAS  /tmp/ccVdKYyy.s 			page 227


 7114 001a 03AB     		add	r3, sp, #12
3615:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT))
 7115              		.loc 1 3615 0
 7116 001c 0199     		ldr	r1, [sp, #4]
3614:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 7117              		.loc 1 3614 0
 7118 001e 8C93     		str	r3, [sp, #560]
3615:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT))
 7119              		.loc 1 3615 0
 7120 0020 06A8     		add	r0, sp, #24
 7121              	.LVL936:
 7122 0022 FFF7FEFF 		bl	follow_path
 7123              	.LVL937:
3619:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7124              		.loc 1 3619 0
 7125 0026 0028     		cmp	r0, #0
 7126 0028 F4D1     		bne	.L973
3619:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7127              		.loc 1 3619 0 is_stmt 0 discriminator 1
 7128 002a 0221     		movs	r1, #2
 7129 002c 06A8     		add	r0, sp, #24
 7130              	.LVL938:
 7131 002e FFF7FEFF 		bl	chk_lock
 7132              	.LVL939:
3621:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dj.dir;
 7133              		.loc 1 3621 0 is_stmt 1 discriminator 1
 7134 0032 0028     		cmp	r0, #0
 7135 0034 EED1     		bne	.L973
3622:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir) {
 7136              		.loc 1 3622 0
 7137 0036 8B9B     		ldr	r3, [sp, #556]
 7138              	.LVL940:
3623:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
 7139              		.loc 1 3623 0
 7140 0038 002B     		cmp	r3, #0
 7141 003a 4AD0     		beq	.L970
3626:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 7142              		.loc 1 3626 0
 7143 003c DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
 7144 003e D107     		lsls	r1, r2, #31
 7145 0040 03D5     		bpl	.L961
 7146              	.LVL941:
 7147              	.L965:
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7148              		.loc 1 3627 0
 7149 0042 0720     		movs	r0, #7
 7150              	.LVL942:
3660:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7151              		.loc 1 3660 0
 7152 0044 0DF25C4D 		addw	sp, sp, #1116
 7153              	.LCFI110:
 7154              		.cfi_remember_state
 7155              		.cfi_def_cfa_offset 12
 7156              		@ sp needed
 7157 0048 30BD     		pop	{r4, r5, pc}
 7158              	.LVL943:
 7159              	.L961:
ARM GAS  /tmp/ccVdKYyy.s 			page 228


 7160              	.LCFI111:
 7161              		.cfi_restore_state
 7162              	.LBB472:
 7163              	.LBB473:
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 7164              		.loc 1 1316 0
 7165 004a 8699     		ldr	r1, [sp, #536]
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 7166              		.loc 1 1315 0
 7167 004c D87E     		ldrb	r0, [r3, #27]	@ zero_extendqisi2
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 7168              		.loc 1 1316 0
 7169 004e 91F80012 		ldrb	r1, [r1, #512]	@ zero_extendqisi2
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 7170              		.loc 1 1315 0
 7171 0052 9D7E     		ldrb	r5, [r3, #26]	@ zero_extendqisi2
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 7172              		.loc 1 1316 0
 7173 0054 0329     		cmp	r1, #3
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 7174              		.loc 1 1315 0
 7175 0056 45EA0025 		orr	r5, r5, r0, lsl #8
 7176              	.LVL944:
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 7177              		.loc 1 1316 0
 7178 005a 19D0     		beq	.L990
 7179              	.LVL945:
 7180              	.L967:
 7181              	.LBE473:
 7182              	.LBE472:
3631:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
 7183              		.loc 1 3631 0
 7184 005c 7DB1     		cbz	r5, .L962
3631:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
 7185              		.loc 1 3631 0 is_stmt 0 discriminator 1
 7186 005e D306     		lsls	r3, r2, #27
 7187 0060 1DD4     		bmi	.L991
 7188              	.LVL946:
 7189              	.L963:
3650:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && dclst)	/* Remove the cluster chain if exist */
 7190              		.loc 1 3650 0 is_stmt 1
 7191 0062 06A8     		add	r0, sp, #24
 7192 0064 FFF7FEFF 		bl	dir_remove
 7193              	.LVL947:
3651:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = remove_chain(dj.fs, dclst);
 7194              		.loc 1 3651 0
 7195 0068 0028     		cmp	r0, #0
 7196 006a D3D1     		bne	.L973
 7197              	.LVL948:
 7198              	.LBB475:
 7199              	.LBB476:
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 7200              		.loc 1 1021 0
 7201 006c 012D     		cmp	r5, #1
 7202 006e 04D0     		beq	.L972
 7203              	.LBE476:
 7204              	.LBE475:
ARM GAS  /tmp/ccVdKYyy.s 			page 229


3652:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) res = sync_fs(dj.fs);
 7205              		.loc 1 3652 0
 7206 0070 8698     		ldr	r0, [sp, #536]
 7207              	.LVL949:
 7208              	.LBB479:
 7209              	.LBB477:
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 7210              		.loc 1 1021 0
 7211 0072 D0F81432 		ldr	r3, [r0, #532]
 7212 0076 9D42     		cmp	r5, r3
 7213 0078 2DD3     		bcc	.L992
 7214              	.L972:
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7215              		.loc 1 1022 0
 7216 007a 0220     		movs	r0, #2
 7217 007c CAE7     		b	.L973
 7218              	.LVL950:
 7219              	.L962:
 7220              	.LBE477:
 7221              	.LBE479:
3650:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && dclst)	/* Remove the cluster chain if exist */
 7222              		.loc 1 3650 0
 7223 007e 06A8     		add	r0, sp, #24
 7224 0080 FFF7FEFF 		bl	dir_remove
 7225              	.LVL951:
3651:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = remove_chain(dj.fs, dclst);
 7226              		.loc 1 3651 0
 7227 0084 0028     		cmp	r0, #0
 7228 0086 C5D1     		bne	.L973
 7229              	.LVL952:
 7230              	.L969:
3653:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7231              		.loc 1 3653 0
 7232 0088 8698     		ldr	r0, [sp, #536]
 7233 008a FFF7FEFF 		bl	sync_fs
 7234              	.LVL953:
 7235 008e C1E7     		b	.L973
 7236              	.LVL954:
 7237              	.L990:
 7238              	.LBB480:
 7239              	.LBB474:
1317:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7240              		.loc 1 1317 0
 7241 0090 597D     		ldrb	r1, [r3, #21]	@ zero_extendqisi2
 7242 0092 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 7243              	.LVL955:
 7244 0094 43EA0123 		orr	r3, r3, r1, lsl #8
 7245 0098 45EA0345 		orr	r5, r5, r3, lsl #16
 7246              	.LVL956:
 7247 009c DEE7     		b	.L967
 7248              	.LVL957:
 7249              	.L991:
 7250 009e 0DF23723 		addw	r3, sp, #567
 7251              	.LBE474:
 7252              	.LBE480:
3631:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH
 7253              		.loc 1 3631 0
ARM GAS  /tmp/ccVdKYyy.s 			page 230


 7254 00a2 06AC     		add	r4, sp, #24
 7255 00a4 8EA9     		add	r1, sp, #568
 7256              	.L964:
 7257              	.LVL958:
 7258              	.LBB481:
 7259              	.LBB482:
 592:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7260              		.loc 1 592 0
 7261 00a6 14F8012B 		ldrb	r2, [r4], #1	@ zero_extendqisi2
 7262              	.LVL959:
 7263 00aa 03F8012F 		strb	r2, [r3, #1]!
 7264              	.LVL960:
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = *s++;
 7265              		.loc 1 591 0
 7266 00ae 8C42     		cmp	r4, r1
 7267 00b0 F9D1     		bne	.L964
 7268              	.LVL961:
 7269              	.LBE482:
 7270              	.LBE481:
3640:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
 7271              		.loc 1 3640 0
 7272 00b2 0221     		movs	r1, #2
 7273 00b4 2046     		mov	r0, r4
3639:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = dir_sdi(&sdj, 2);
 7274              		.loc 1 3639 0
 7275 00b6 C4F80852 		str	r5, [r4, #520]
3640:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
 7276              		.loc 1 3640 0
 7277 00ba FFF7FEFF 		bl	dir_sdi
 7278              	.LVL962:
3641:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = dir_read(&sdj, 0);			/* Read an item (excluding dot entries) */
 7279              		.loc 1 3641 0
 7280 00be 0028     		cmp	r0, #0
 7281 00c0 A8D1     		bne	.L973
3642:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? (cannot remove) */
 7282              		.loc 1 3642 0
 7283 00c2 2046     		mov	r0, r4
 7284              	.LVL963:
 7285 00c4 FFF7FEFF 		bl	dir_read.constprop.14
 7286              	.LVL964:
3643:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? (can remove) */
 7287              		.loc 1 3643 0
 7288 00c8 0028     		cmp	r0, #0
 7289 00ca BAD0     		beq	.L965
3644:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 7290              		.loc 1 3644 0
 7291 00cc 0428     		cmp	r0, #4
 7292 00ce C8D0     		beq	.L963
 7293 00d0 A0E7     		b	.L973
 7294              	.LVL965:
 7295              	.L970:
3624:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 7296              		.loc 1 3624 0
 7297 00d2 0620     		movs	r0, #6
 7298              	.LVL966:
 7299 00d4 9EE7     		b	.L973
 7300              	.LVL967:
ARM GAS  /tmp/ccVdKYyy.s 			page 231


 7301              	.L992:
 7302              	.LBB483:
 7303              	.LBB478:
 7304 00d6 2946     		mov	r1, r5
 7305 00d8 FFF7FEFF 		bl	remove_chain.part.10
 7306              	.LVL968:
 7307              	.LBE478:
 7308              	.LBE483:
3653:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7309              		.loc 1 3653 0
 7310 00dc 0028     		cmp	r0, #0
 7311 00de D3D0     		beq	.L969
 7312 00e0 98E7     		b	.L973
 7313              		.cfi_endproc
 7314              	.LFE173:
 7316 00e2 00BF     		.section	.text.f_mkdir,"ax",%progbits
 7317              		.align	1
 7318              		.p2align 2,,3
 7319              		.global	f_mkdir
 7320              		.syntax unified
 7321              		.thumb
 7322              		.thumb_func
 7323              		.fpu fpv4-sp-d16
 7325              	f_mkdir:
 7326              	.LFB174:
3672:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7327              		.loc 1 3672 0
 7328              		.cfi_startproc
 7329              		@ args = 0, pretend = 0, frame = 592
 7330              		@ frame_needed = 0, uses_anonymous_args = 0
 7331              	.LVL969:
 7332 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 7333              	.LCFI112:
 7334              		.cfi_def_cfa_offset 36
 7335              		.cfi_offset 4, -36
 7336              		.cfi_offset 5, -32
 7337              		.cfi_offset 6, -28
 7338              		.cfi_offset 7, -24
 7339              		.cfi_offset 8, -20
 7340              		.cfi_offset 9, -16
 7341              		.cfi_offset 10, -12
 7342              		.cfi_offset 11, -8
 7343              		.cfi_offset 14, -4
 7344 0004 ADF5157D 		sub	sp, sp, #596
 7345              	.LCFI113:
 7346              		.cfi_def_cfa_offset 632
3672:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7347              		.loc 1 3672 0
 7348 0008 0790     		str	r0, [sp, #28]
3676:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
 7349              		.loc 1 3676 0
 7350 000a FFF7FEFF 		bl	get_fattime
 7351              	.LVL970:
3681:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7352              		.loc 1 3681 0
 7353 000e 07A9     		add	r1, sp, #28
3676:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEFINE_NAMEBUF;
ARM GAS  /tmp/ccVdKYyy.s 			page 232


 7354              		.loc 1 3676 0
 7355 0010 0546     		mov	r5, r0
 7356              	.LVL971:
3681:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7357              		.loc 1 3681 0
 7358 0012 0122     		movs	r2, #1
 7359 0014 8CA8     		add	r0, sp, #560
 7360              	.LVL972:
 7361 0016 FFF7FEFF 		bl	find_volume
 7362              	.LVL973:
 7363 001a 0346     		mov	r3, r0
 7364              	.LVL974:
3682:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
 7365              		.loc 1 3682 0
 7366 001c 20B1     		cbz	r0, .L1032
 7367              	.LVL975:
 7368              	.L1016:
3734:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7369              		.loc 1 3734 0
 7370 001e 1846     		mov	r0, r3
 7371 0020 0DF5157D 		add	sp, sp, #596
 7372              	.LCFI114:
 7373              		.cfi_remember_state
 7374              		.cfi_def_cfa_offset 36
 7375              		@ sp needed
 7376 0024 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 7377              	.LVL976:
 7378              	.L1032:
 7379              	.LCFI115:
 7380              		.cfi_restore_state
3683:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 7381              		.loc 1 3683 0
 7382 0028 09AB     		add	r3, sp, #36
 7383 002a 0446     		mov	r4, r0
3684:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 7384              		.loc 1 3684 0
 7385 002c 0799     		ldr	r1, [sp, #28]
3683:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 7386              		.loc 1 3683 0
 7387 002e 9293     		str	r3, [sp, #584]
3684:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 7388              		.loc 1 3684 0
 7389 0030 0CA8     		add	r0, sp, #48
 7390              	.LVL977:
 7391 0032 FFF7FEFF 		bl	follow_path
 7392              	.LVL978:
3685:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT))
 7393              		.loc 1 3685 0
 7394 0036 0346     		mov	r3, r0
 7395 0038 58B1     		cbz	r0, .L1010
3688:Middlewares/Third_Party/FatFs/src/ff.c **** 			dcl = create_chain(dj.fs, 0);		/* Allocate a cluster for the new directory table */
 7396              		.loc 1 3688 0
 7397 003a 0428     		cmp	r0, #4
 7398 003c EFD1     		bne	.L1016
3689:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 7399              		.loc 1 3689 0
 7400 003e 2146     		mov	r1, r4
ARM GAS  /tmp/ccVdKYyy.s 			page 233


 7401 0040 8C98     		ldr	r0, [sp, #560]
 7402              	.LVL979:
 7403 0042 FFF7FEFF 		bl	create_chain
 7404              	.LVL980:
3691:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
 7405              		.loc 1 3691 0
 7406 0046 0746     		mov	r7, r0
 7407 0048 48B1     		cbz	r0, .L1011
3692:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 7408              		.loc 1 3692 0
 7409 004a 0128     		cmp	r0, #1
 7410 004c 09D1     		bne	.L1033
 7411 004e 0223     		movs	r3, #2
 7412 0050 E5E7     		b	.L1016
 7413              	.LVL981:
 7414              	.L1010:
3685:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT))
 7415              		.loc 1 3685 0
 7416 0052 0823     		movs	r3, #8
3734:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7417              		.loc 1 3734 0
 7418 0054 1846     		mov	r0, r3
 7419              	.LVL982:
 7420 0056 0DF5157D 		add	sp, sp, #596
 7421              	.LCFI116:
 7422              		.cfi_remember_state
 7423              		.cfi_def_cfa_offset 36
 7424              		@ sp needed
 7425 005a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 7426              	.LVL983:
 7427              	.L1011:
 7428              	.LCFI117:
 7429              		.cfi_restore_state
3691:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
 7430              		.loc 1 3691 0
 7431 005e 0723     		movs	r3, #7
 7432 0060 DDE7     		b	.L1016
 7433              	.L1033:
3693:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)					/* Flush FAT */
 7434              		.loc 1 3693 0
 7435 0062 431C     		adds	r3, r0, #1
 7436 0064 08BF     		it	eq
 7437 0066 0123     		moveq	r3, #1
 7438 0068 D9D0     		beq	.L1016
3695:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
 7439              		.loc 1 3695 0
 7440 006a DDF830A2 		ldr	r10, [sp, #560]
 7441              	.LVL984:
 7442              	.LBB484:
 7443              	.LBB485:
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 7444              		.loc 1 782 0
 7445 006e 9AF80432 		ldrb	r3, [r10, #516]	@ zero_extendqisi2
 7446 0072 002B     		cmp	r3, #0
 7447 0074 40F0D580 		bne	.L1034
 7448              	.LVL985:
 7449              	.L1009:
ARM GAS  /tmp/ccVdKYyy.s 			page 234


 7450              	.LBE485:
 7451              	.LBE484:
 7452              	.LBB487:
 7453              	.LBB488:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 7454              		.loc 1 879 0
 7455 0078 DAF81432 		ldr	r3, [r10, #532]
 878:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 7456              		.loc 1 878 0
 7457 007c BA1E     		subs	r2, r7, #2
 7458              	.LVL986:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 7459              		.loc 1 879 0
 7460 007e 023B     		subs	r3, r3, #2
 7461 0080 9A42     		cmp	r2, r3
 880:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7462              		.loc 1 880 0
 7463 0082 3BBF     		ittet	cc
 7464 0084 9AF80202 		ldrbcc	r0, [r10, #514]	@ zero_extendqisi2
 7465 0088 DAF82832 		ldrcc	r3, [r10, #552]
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 7466              		.loc 1 879 0
 7467 008c 0022     		movcs	r2, #0
 7468              	.LVL987:
 880:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7469              		.loc 1 880 0
 7470 008e 02FB0032 		mlacc	r2, r2, r0, r3
 7471              	.LVL988:
 7472              	.LBE488:
 7473              	.LBE487:
 7474              	.LBB489:
 7475              	.LBB490:
 598:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7476              		.loc 1 598 0
 7477 0092 5446     		mov	r4, r10
 7478 0094 0AF50070 		add	r0, r10, #512
 601:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7479              		.loc 1 601 0
 7480 0098 0023     		movs	r3, #0
 7481              	.LVL989:
 7482              	.L998:
 7483 009a 04F8013B 		strb	r3, [r4], #1
 7484              	.LVL990:
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
 7485              		.loc 1 600 0
 7486 009e 8442     		cmp	r4, r0
 7487 00a0 FBD1     		bne	.L998
 7488 00a2 0AF10B06 		add	r6, r10, #11
 7489 00a6 5346     		mov	r3, r10
 7490              	.LBE490:
 7491              	.LBE489:
 7492              	.LBB491:
 7493              	.LBB492:
 601:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7494              		.loc 1 601 0
 7495 00a8 2020     		movs	r0, #32
 7496              	.L999:
ARM GAS  /tmp/ccVdKYyy.s 			page 235


 7497              	.LVL991:
 7498 00aa 03F8010B 		strb	r0, [r3], #1
 7499              	.LVL992:
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
 7500              		.loc 1 600 0
 7501 00ae B342     		cmp	r3, r6
 7502 00b0 FBD1     		bne	.L999
 7503              	.LVL993:
 7504              	.LBE492:
 7505              	.LBE491:
 7506              	.LBB493:
 7507              	.LBB494:
1331:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7508              		.loc 1 1331 0
 7509 00b2 4FEA1749 		lsr	r9, r7, #16
 7510 00b6 5FFA89F3 		uxtb	r3, r9
 7511              	.LBE494:
 7512              	.LBE493:
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, dcl);
 7513              		.loc 1 3703 0
 7514 00ba C5F30740 		ubfx	r0, r5, #16, #8
 7515              	.LBB504:
 7516              	.LBB495:
1331:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7517              		.loc 1 1331 0
 7518 00be 1946     		mov	r1, r3
 7519              	.LBE495:
 7520              	.LBE504:
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, dcl);
 7521              		.loc 1 3703 0
 7522 00c0 0090     		str	r0, [sp]
 7523              	.LBB505:
 7524              	.LBB496:
1331:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7525              		.loc 1 1331 0
 7526 00c2 0693     		str	r3, [sp, #24]
1330:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusHI, cl >> 16);
 7527              		.loc 1 1330 0
 7528 00c4 F8B2     		uxtb	r0, r7
 7529              	.LBE496:
 7530              	.LBE505:
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, dcl);
 7531              		.loc 1 3703 0
 7532 00c6 C5F30723 		ubfx	r3, r5, #8, #8
 7533              	.LBB506:
 7534              	.LBB497:
1330:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusHI, cl >> 16);
 7535              		.loc 1 1330 0
 7536 00ca 0190     		str	r0, [sp, #4]
 7537              	.LBE497:
 7538              	.LBE506:
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, dcl);
 7539              		.loc 1 3703 0
 7540 00cc 0493     		str	r3, [sp, #16]
 7541              	.LBB507:
 7542              	.LBB498:
1330:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusHI, cl >> 16);
ARM GAS  /tmp/ccVdKYyy.s 			page 236


 7543              		.loc 1 1330 0
 7544 00ce C7F3072E 		ubfx	lr, r7, #8, #8
 7545              	.LBE498:
 7546              	.LBE507:
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, dcl);
 7547              		.loc 1 3703 0
 7548 00d2 8AF81730 		strb	r3, [r10, #23]
 7549 00d6 9DF80030 		ldrb	r3, [sp]	@ zero_extendqisi2
 7550              	.LBB508:
 7551              	.LBB499:
1330:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusHI, cl >> 16);
 7552              		.loc 1 1330 0
 7553 00da CDF808E0 		str	lr, [sp, #8]
 7554              	.LBE499:
 7555              	.LBE508:
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, dcl);
 7556              		.loc 1 3703 0
 7557 00de 8AF81830 		strb	r3, [r10, #24]
 7558              	.LBB509:
 7559              	.LBB500:
1330:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusHI, cl >> 16);
 7560              		.loc 1 1330 0
 7561 00e2 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 7562 00e6 8AF81A30 		strb	r3, [r10, #26]
 7563              	.LBE500:
 7564              	.LBE509:
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, dcl);
 7565              		.loc 1 3703 0
 7566 00ea EEB2     		uxtb	r6, r5
3701:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] = AM_DIR;
 7567              		.loc 1 3701 0
 7568 00ec 4FF02E0C 		mov	ip, #46
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, dcl);
 7569              		.loc 1 3703 0
 7570 00f0 2D0E     		lsrs	r5, r5, #24
 7571              	.LVL994:
 7572              	.LBB510:
 7573              	.LBB501:
1330:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusHI, cl >> 16);
 7574              		.loc 1 1330 0
 7575 00f2 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 7576              	.LBE501:
 7577              	.LBE510:
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, dcl);
 7578              		.loc 1 3703 0
 7579 00f6 0396     		str	r6, [sp, #12]
 7580              	.LBB511:
 7581              	.LBB502:
1331:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7582              		.loc 1 1331 0
 7583 00f8 4FEA1929 		lsr	r9, r9, #8
 7584              	.LBE502:
 7585              	.LBE511:
3702:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);
 7586              		.loc 1 3702 0
 7587 00fc 4FF01008 		mov	r8, #16
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, dcl);
ARM GAS  /tmp/ccVdKYyy.s 			page 237


 7588              		.loc 1 3703 0
 7589 0100 0595     		str	r5, [sp, #20]
 7590 0102 8AF81660 		strb	r6, [r10, #22]
 7591 0106 8AF81950 		strb	r5, [r10, #25]
 7592              	.LBB512:
 7593              	.LBB503:
1330:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusHI, cl >> 16);
 7594              		.loc 1 1330 0
 7595 010a 8AF81B30 		strb	r3, [r10, #27]
1331:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7596              		.loc 1 1331 0
 7597 010e 8AF81410 		strb	r1, [r10, #20]
 7598 0112 8AF81590 		strb	r9, [r10, #21]
 7599              	.LBE503:
 7600              	.LBE512:
3701:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] = AM_DIR;
 7601              		.loc 1 3701 0
 7602 0116 8AF800C0 		strb	ip, [r10]
3705:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[SZ_DIRE + 1] = '.'; pcl = dj.sclust;
 7603              		.loc 1 3705 0
 7604 011a 6046     		mov	r0, ip
3702:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);
 7605              		.loc 1 3702 0
 7606 011c 8AF80B80 		strb	r8, [r10, #11]
3705:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[SZ_DIRE + 1] = '.'; pcl = dj.sclust;
 7607              		.loc 1 3705 0
 7608 0120 0AF12003 		add	r3, r10, #32
 7609              	.LVL995:
 7610 0124 5546     		mov	r5, r10
 7611 0126 0AF14006 		add	r6, r10, #64
 7612 012a 01E0     		b	.L1001
 7613              	.LVL996:
 7614              	.L1035:
 7615 012c 15F8010F 		ldrb	r0, [r5, #1]!	@ zero_extendqisi2
 7616              	.L1001:
 7617              	.LVL997:
 7618              	.LBB513:
 7619              	.LBB514:
 592:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7620              		.loc 1 592 0
 7621 0130 03F8010B 		strb	r0, [r3], #1
 7622              	.LVL998:
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = *s++;
 7623              		.loc 1 591 0
 7624 0134 B342     		cmp	r3, r6
 7625 0136 F9D1     		bne	.L1035
 7626              	.LVL999:
 7627              	.LBE514:
 7628              	.LBE513:
3706:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
 7629              		.loc 1 3706 0
 7630 0138 2E23     		movs	r3, #46
 7631 013a 8AF82130 		strb	r3, [r10, #33]
3707:Middlewares/Third_Party/FatFs/src/ff.c **** 					pcl = 0;
 7632              		.loc 1 3707 0
 7633 013e 8C9B     		ldr	r3, [sp, #560]
3706:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.fs->fs_type == FS_FAT32 && pcl == dj.fs->dirbase)
ARM GAS  /tmp/ccVdKYyy.s 			page 238


 7634              		.loc 1 3706 0
 7635 0140 8E98     		ldr	r0, [sp, #568]
 7636              	.LVL1000:
3707:Middlewares/Third_Party/FatFs/src/ff.c **** 					pcl = 0;
 7637              		.loc 1 3707 0
 7638 0142 93F80052 		ldrb	r5, [r3, #512]	@ zero_extendqisi2
 7639 0146 032D     		cmp	r5, #3
 7640 0148 62D0     		beq	.L1036
 7641              	.L1029:
 7642 014a 030C     		lsrs	r3, r0, #16
 7643 014c DDB2     		uxtb	r5, r3
 7644 014e C6B2     		uxtb	r6, r0
 7645 0150 1B0A     		lsrs	r3, r3, #8
 7646 0152 C0F30720 		ubfx	r0, r0, #8, #8
 7647              	.LVL1001:
 7648              	.L1003:
 7649              	.LBB515:
 7650              	.LBB516:
1330:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusHI, cl >> 16);
 7651              		.loc 1 1330 0
 7652 0156 8AF83A60 		strb	r6, [r10, #58]
 7653 015a 8AF83B00 		strb	r0, [r10, #59]
1331:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7654              		.loc 1 1331 0
 7655 015e 8AF83450 		strb	r5, [r10, #52]
 7656 0162 8AF83530 		strb	r3, [r10, #53]
 7657              	.LBE516:
 7658              	.LBE515:
3710:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.fs->winsect = dsc++;
 7659              		.loc 1 3710 0
 7660 0166 8C98     		ldr	r0, [sp, #560]
 7661 0168 90F80262 		ldrb	r6, [r0, #514]	@ zero_extendqisi2
 7662              	.LVL1002:
 7663 016c CEB1     		cbz	r6, .L1004
 7664 016e 013E     		subs	r6, r6, #1
 7665              	.LVL1003:
 7666 0170 F6B2     		uxtb	r6, r6
 7667              	.LVL1004:
 7668 0172 0136     		adds	r6, r6, #1
 7669 0174 1644     		add	r6, r6, r2
3712:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_window(dj.fs);
 7670              		.loc 1 3712 0
 7671 0176 4FF00108 		mov	r8, #1
 7672              	.LBB517:
 7673              	.LBB518:
 601:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7674              		.loc 1 601 0
 7675 017a 0025     		movs	r5, #0
 7676              	.LVL1005:
 7677              	.L1006:
 7678              	.LBE518:
 7679              	.LBE517:
3711:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.fs->wflag = 1;
 7680              		.loc 1 3711 0
 7681 017c C0F82C22 		str	r2, [r0, #556]
3712:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_window(dj.fs);
 7682              		.loc 1 3712 0
ARM GAS  /tmp/ccVdKYyy.s 			page 239


 7683 0180 80F80482 		strb	r8, [r0, #516]
3711:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.fs->wflag = 1;
 7684              		.loc 1 3711 0
 7685 0184 02F1010B 		add	fp, r2, #1
 7686              	.LVL1006:
 7687              	.LBB520:
 7688              	.LBB521:
 7689 0188 FFF7FEFF 		bl	sync_window.part.4
 7690              	.LVL1007:
 7691              	.LBE521:
 7692              	.LBE520:
3714:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dir, 0, SS(dj.fs));
 7693              		.loc 1 3714 0
 7694 018c 80BB     		cbnz	r0, .L1026
 7695 018e 5346     		mov	r3, r10
 7696              	.L1005:
 7697              	.LVL1008:
 7698              	.LBB522:
 7699              	.LBB519:
 601:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7700              		.loc 1 601 0
 7701 0190 03F8015B 		strb	r5, [r3], #1
 7702              	.LVL1009:
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
 7703              		.loc 1 600 0
 7704 0194 9C42     		cmp	r4, r3
 7705 0196 FBD1     		bne	.L1005
 7706              	.LVL1010:
 7707              	.LBE519:
 7708              	.LBE522:
3710:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.fs->winsect = dsc++;
 7709              		.loc 1 3710 0 discriminator 2
 7710 0198 5E45     		cmp	r6, fp
 7711 019a 02D0     		beq	.L1004
 7712 019c 5A46     		mov	r2, fp
 7713 019e 8C98     		ldr	r0, [sp, #560]
 7714 01a0 ECE7     		b	.L1006
 7715              	.LVL1011:
 7716              	.L1004:
3718:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {
 7717              		.loc 1 3718 0
 7718 01a2 0CA8     		add	r0, sp, #48
 7719 01a4 FFF7FEFF 		bl	dir_register
 7720              	.LVL1012:
3719:Middlewares/Third_Party/FatFs/src/ff.c **** 				remove_chain(dj.fs, dcl);			/* Could not register, remove cluster chain */
 7721              		.loc 1 3719 0
 7722 01a8 0346     		mov	r3, r0
 7723 01aa 10BB     		cbnz	r0, .L996
3722:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir[DIR_Attr] = AM_DIR;				/* Attribute */
 7724              		.loc 1 3722 0
 7725 01ac 919B     		ldr	r3, [sp, #580]
 7726              	.LVL1013:
3724:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_clust(dir, dcl);					/* Table start cluster */
 7727              		.loc 1 3724 0
 7728 01ae 9DF80C10 		ldrb	r1, [sp, #12]	@ zero_extendqisi2
 7729 01b2 9975     		strb	r1, [r3, #22]
 7730 01b4 9DF81010 		ldrb	r1, [sp, #16]	@ zero_extendqisi2
ARM GAS  /tmp/ccVdKYyy.s 			page 240


 7731 01b8 D975     		strb	r1, [r3, #23]
 7732 01ba 9DF80010 		ldrb	r1, [sp]	@ zero_extendqisi2
 7733 01be 1976     		strb	r1, [r3, #24]
 7734 01c0 9DF81410 		ldrb	r1, [sp, #20]	@ zero_extendqisi2
 7735 01c4 5976     		strb	r1, [r3, #25]
 7736              	.LVL1014:
 7737              	.LBB523:
 7738              	.LBB524:
1330:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusHI, cl >> 16);
 7739              		.loc 1 1330 0
 7740 01c6 9DF80410 		ldrb	r1, [sp, #4]	@ zero_extendqisi2
 7741 01ca 9976     		strb	r1, [r3, #26]
 7742 01cc 9DF80810 		ldrb	r1, [sp, #8]	@ zero_extendqisi2
 7743 01d0 D976     		strb	r1, [r3, #27]
 7744              	.LBE524:
 7745              	.LBE523:
3723:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);	/* Created time */
 7746              		.loc 1 3723 0
 7747 01d2 1022     		movs	r2, #16
 7748              	.LBB526:
 7749              	.LBB525:
1331:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7750              		.loc 1 1331 0
 7751 01d4 9DF81810 		ldrb	r1, [sp, #24]	@ zero_extendqisi2
 7752 01d8 1975     		strb	r1, [r3, #20]
 7753 01da 83F81590 		strb	r9, [r3, #21]
 7754              	.LVL1015:
 7755              	.LBE525:
 7756              	.LBE526:
3723:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_DWORD(dir + DIR_WrtTime, tm);	/* Created time */
 7757              		.loc 1 3723 0
 7758 01de DA72     		strb	r2, [r3, #11]
3726:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(dj.fs);
 7759              		.loc 1 3726 0
 7760 01e0 8C98     		ldr	r0, [sp, #560]
 7761              	.LVL1016:
 7762 01e2 0123     		movs	r3, #1
 7763              	.LVL1017:
 7764 01e4 80F80432 		strb	r3, [r0, #516]
3727:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7765              		.loc 1 3727 0
 7766 01e8 FFF7FEFF 		bl	sync_fs
 7767              	.LVL1018:
 7768 01ec 0346     		mov	r3, r0
 7769              	.LVL1019:
 7770 01ee 16E7     		b	.L1016
 7771              	.LVL1020:
 7772              	.L1026:
 7773 01f0 0346     		mov	r3, r0
 7774              	.LVL1021:
 7775              	.L996:
 7776              	.LBB527:
 7777              	.LBB528:
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 7778              		.loc 1 1021 0
 7779 01f2 012F     		cmp	r7, #1
 7780 01f4 7FF613AF 		bls	.L1016
ARM GAS  /tmp/ccVdKYyy.s 			page 241


 7781              	.LBE528:
 7782              	.LBE527:
3720:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 7783              		.loc 1 3720 0
 7784 01f8 8C98     		ldr	r0, [sp, #560]
 7785              	.LBB530:
 7786              	.LBB529:
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;
 7787              		.loc 1 1021 0
 7788 01fa D0F81422 		ldr	r2, [r0, #532]
 7789 01fe 9742     		cmp	r7, r2
 7790 0200 BFF40DAF 		bcs	.L1016
 7791 0204 3946     		mov	r1, r7
 7792 0206 0093     		str	r3, [sp]
 7793 0208 FFF7FEFF 		bl	remove_chain.part.10
 7794              	.LVL1022:
 7795 020c 009B     		ldr	r3, [sp]
 7796 020e 06E7     		b	.L1016
 7797              	.LVL1023:
 7798              	.L1036:
 7799              	.LBE529:
 7800              	.LBE530:
3707:Middlewares/Third_Party/FatFs/src/ff.c **** 					pcl = 0;
 7801              		.loc 1 3707 0 discriminator 1
 7802 0210 D3F82432 		ldr	r3, [r3, #548]
 7803 0214 9842     		cmp	r0, r3
 7804 0216 98D1     		bne	.L1029
 7805 0218 0023     		movs	r3, #0
 7806 021a 1D46     		mov	r5, r3
 7807 021c 1846     		mov	r0, r3
 7808              	.LVL1024:
 7809 021e 1E46     		mov	r6, r3
 7810 0220 99E7     		b	.L1003
 7811              	.LVL1025:
 7812              	.L1034:
 7813              	.LBB531:
 7814              	.LBB486:
 7815 0222 5046     		mov	r0, r10
 7816              	.LVL1026:
 7817 0224 FFF7FEFF 		bl	sync_window.part.4
 7818              	.LVL1027:
 7819              	.LBE486:
 7820              	.LBE531:
3696:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(dj.fs, dcl);
 7821              		.loc 1 3696 0
 7822 0228 0346     		mov	r3, r0
 7823 022a 0028     		cmp	r0, #0
 7824 022c E1D1     		bne	.L996
 7825 022e DDF830A2 		ldr	r10, [sp, #560]
 7826              	.LVL1028:
 7827 0232 21E7     		b	.L1009
 7828              		.cfi_endproc
 7829              	.LFE174:
 7831              		.section	.text.f_chmod,"ax",%progbits
 7832              		.align	1
 7833              		.p2align 2,,3
 7834              		.global	f_chmod
ARM GAS  /tmp/ccVdKYyy.s 			page 242


 7835              		.syntax unified
 7836              		.thumb
 7837              		.thumb_func
 7838              		.fpu fpv4-sp-d16
 7840              	f_chmod:
 7841              	.LFB175:
3748:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7842              		.loc 1 3748 0
 7843              		.cfi_startproc
 7844              		@ args = 0, pretend = 0, frame = 568
 7845              		@ frame_needed = 0, uses_anonymous_args = 0
 7846              	.LVL1029:
 7847 0000 30B5     		push	{r4, r5, lr}
 7848              	.LCFI118:
 7849              		.cfi_def_cfa_offset 12
 7850              		.cfi_offset 4, -12
 7851              		.cfi_offset 5, -8
 7852              		.cfi_offset 14, -4
 7853 0002 ADF50F7D 		sub	sp, sp, #572
 7854              	.LCFI119:
 7855              		.cfi_def_cfa_offset 584
3748:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7856              		.loc 1 3748 0
 7857 0006 0D46     		mov	r5, r1
 7858 0008 1446     		mov	r4, r2
 7859 000a 0190     		str	r0, [sp, #4]
3756:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7860              		.loc 1 3756 0
 7861 000c 01A9     		add	r1, sp, #4
 7862              	.LVL1030:
 7863 000e 0122     		movs	r2, #1
 7864              	.LVL1031:
 7865 0010 86A8     		add	r0, sp, #536
 7866              	.LVL1032:
 7867 0012 FFF7FEFF 		bl	find_volume
 7868              	.LVL1033:
3757:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
 7869              		.loc 1 3757 0
 7870 0016 10B1     		cbz	r0, .L1041
 7871              	.L1038:
3777:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7872              		.loc 1 3777 0
 7873 0018 0DF50F7D 		add	sp, sp, #572
 7874              	.LCFI120:
 7875              		.cfi_remember_state
 7876              		.cfi_def_cfa_offset 12
 7877              		@ sp needed
 7878 001c 30BD     		pop	{r4, r5, pc}
 7879              	.L1041:
 7880              	.LCFI121:
 7881              		.cfi_restore_state
3758:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 7882              		.loc 1 3758 0
 7883 001e 03AB     		add	r3, sp, #12
3759:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
 7884              		.loc 1 3759 0
 7885 0020 0199     		ldr	r1, [sp, #4]
ARM GAS  /tmp/ccVdKYyy.s 			page 243


3758:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 7886              		.loc 1 3758 0
 7887 0022 8C93     		str	r3, [sp, #560]
3759:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
 7888              		.loc 1 3759 0
 7889 0024 06A8     		add	r0, sp, #24
 7890              	.LVL1034:
 7891 0026 FFF7FEFF 		bl	follow_path
 7892              	.LVL1035:
3763:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dj.dir;
 7893              		.loc 1 3763 0
 7894 002a 0028     		cmp	r0, #0
 7895 002c F4D1     		bne	.L1038
3764:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir) {						/* Is it a root directory? */
 7896              		.loc 1 3764 0
 7897 002e 8B9B     		ldr	r3, [sp, #556]
 7898              	.LVL1036:
3765:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 7899              		.loc 1 3765 0
 7900 0030 7BB1     		cbz	r3, .L1039
 7901              	.LVL1037:
3769:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.fs->wflag = 1;
 7902              		.loc 1 3769 0
 7903 0032 DA7A     		ldrb	r2, [r3, #11]	@ zero_extendqisi2
 7904 0034 5540     		eors	r5, r5, r2
 7905 0036 2C40     		ands	r4, r4, r5
 7906              	.LVL1038:
 7907 0038 04F02704 		and	r4, r4, #39
 7908 003c 5440     		eors	r4, r4, r2
 7909 003e DC72     		strb	r4, [r3, #11]
3770:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(dj.fs);
 7910              		.loc 1 3770 0
 7911 0040 8698     		ldr	r0, [sp, #536]
 7912              	.LVL1039:
 7913 0042 0123     		movs	r3, #1
 7914              	.LVL1040:
 7915 0044 80F80432 		strb	r3, [r0, #516]
3771:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7916              		.loc 1 3771 0
 7917 0048 FFF7FEFF 		bl	sync_fs
 7918              	.LVL1041:
3777:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7919              		.loc 1 3777 0
 7920 004c 0DF50F7D 		add	sp, sp, #572
 7921              	.LCFI122:
 7922              		.cfi_remember_state
 7923              		.cfi_def_cfa_offset 12
 7924              		@ sp needed
 7925 0050 30BD     		pop	{r4, r5, pc}
 7926              	.LVL1042:
 7927              	.L1039:
 7928              	.LCFI123:
 7929              		.cfi_restore_state
3766:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {						/* File or sub directory */
 7930              		.loc 1 3766 0
 7931 0052 0620     		movs	r0, #6
 7932              	.LVL1043:
ARM GAS  /tmp/ccVdKYyy.s 			page 244


3777:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7933              		.loc 1 3777 0
 7934 0054 0DF50F7D 		add	sp, sp, #572
 7935              	.LCFI124:
 7936              		.cfi_def_cfa_offset 12
 7937              		@ sp needed
 7938 0058 30BD     		pop	{r4, r5, pc}
 7939              		.cfi_endproc
 7940              	.LFE175:
 7942 005a 00BF     		.section	.text.f_rename,"ax",%progbits
 7943              		.align	1
 7944              		.p2align 2,,3
 7945              		.global	f_rename
 7946              		.syntax unified
 7947              		.thumb
 7948              		.thumb_func
 7949              		.fpu fpv4-sp-d16
 7951              	f_rename:
 7952              	.LFB176:
3790:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7953              		.loc 1 3790 0
 7954              		.cfi_startproc
 7955              		@ args = 0, pretend = 0, frame = 1136
 7956              		@ frame_needed = 0, uses_anonymous_args = 0
 7957              	.LVL1044:
 7958 0000 30B5     		push	{r4, r5, lr}
 7959              	.LCFI125:
 7960              		.cfi_def_cfa_offset 12
 7961              		.cfi_offset 4, -12
 7962              		.cfi_offset 5, -8
 7963              		.cfi_offset 14, -4
 7964 0002 ADF2744D 		subw	sp, sp, #1140
 7965              	.LCFI126:
 7966              		.cfi_def_cfa_offset 1152
3799:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7967              		.loc 1 3799 0
 7968 0006 0122     		movs	r2, #1
3790:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7969              		.loc 1 3790 0
 7970 0008 0190     		str	r0, [sp, #4]
 7971 000a 0091     		str	r1, [sp]
3799:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7972              		.loc 1 3799 0
 7973 000c 8CA8     		add	r0, sp, #560
 7974              	.LVL1045:
 7975 000e 01A9     		add	r1, sp, #4
 7976              	.LVL1046:
 7977 0010 FFF7FEFF 		bl	find_volume
 7978              	.LVL1047:
3800:Middlewares/Third_Party/FatFs/src/ff.c **** 		djn.fs = djo.fs;
 7979              		.loc 1 3800 0
 7980 0014 10B1     		cbz	r0, .L1064
 7981              	.LVL1048:
 7982              	.L1056:
3855:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7983              		.loc 1 3855 0
 7984 0016 0DF2744D 		addw	sp, sp, #1140
ARM GAS  /tmp/ccVdKYyy.s 			page 245


 7985              	.LCFI127:
 7986              		.cfi_remember_state
 7987              		.cfi_def_cfa_offset 12
 7988              		@ sp needed
 7989 001a 30BD     		pop	{r4, r5, pc}
 7990              	.LVL1049:
 7991              	.L1064:
 7992              	.LCFI128:
 7993              		.cfi_restore_state
3801:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(djo);
 7994              		.loc 1 3801 0
 7995 001c 94AC     		add	r4, sp, #592
 7996 001e 8C9B     		ldr	r3, [sp, #560]
 7997 0020 C4F80032 		str	r3, [r4, #512]
3803:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (djo.fn[NSFLAG] & NS_DOT))
 7998              		.loc 1 3803 0
 7999 0024 0199     		ldr	r1, [sp, #4]
3802:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 8000              		.loc 1 3802 0
 8001 0026 03AB     		add	r3, sp, #12
3803:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (djo.fn[NSFLAG] & NS_DOT))
 8002              		.loc 1 3803 0
 8003 0028 0CA8     		add	r0, sp, #48
 8004              	.LVL1050:
3802:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 8005              		.loc 1 3802 0
 8006 002a 9293     		str	r3, [sp, #584]
3803:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (djo.fn[NSFLAG] & NS_DOT))
 8007              		.loc 1 3803 0
 8008 002c FFF7FEFF 		bl	follow_path
 8009              	.LVL1051:
3807:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8010              		.loc 1 3807 0
 8011 0030 0028     		cmp	r0, #0
 8012 0032 F0D1     		bne	.L1056
3807:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8013              		.loc 1 3807 0 is_stmt 0 discriminator 1
 8014 0034 0221     		movs	r1, #2
 8015 0036 0CA8     		add	r0, sp, #48
 8016              	.LVL1052:
 8017 0038 FFF7FEFF 		bl	chk_lock
 8018              	.LVL1053:
3809:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!djo.dir) {						/* Is root dir? */
 8019              		.loc 1 3809 0 is_stmt 1 discriminator 1
 8020 003c 0028     		cmp	r0, #0
 8021 003e EAD1     		bne	.L1056
3810:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_FILE;
 8022              		.loc 1 3810 0
 8023 0040 919B     		ldr	r3, [sp, #580]
 8024 0042 0BB3     		cbz	r3, .L1051
 8025              	.LVL1054:
 8026 0044 03F12000 		add	r0, r3, #32
 8027              	.LVL1055:
 8028 0048 0DF11702 		add	r2, sp, #23
 8029              	.LBB532:
 8030              	.LBB533:
 582:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  /tmp/ccVdKYyy.s 			page 246


 8031              		.loc 1 582 0
 8032 004c 0B33     		adds	r3, r3, #11
 8033              	.LVL1056:
 8034              	.L1044:
 592:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8035              		.loc 1 592 0
 8036 004e 13F8011B 		ldrb	r1, [r3], #1	@ zero_extendqisi2
 8037              	.LVL1057:
 8038 0052 02F8011F 		strb	r1, [r2, #1]!
 8039              	.LVL1058:
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = *s++;
 8040              		.loc 1 591 0
 8041 0056 9842     		cmp	r0, r3
 8042 0058 F9D1     		bne	.L1044
 8043 005a 0DF24F22 		addw	r2, sp, #591
 8044 005e 0CAB     		add	r3, sp, #48
 8045              	.LVL1059:
 8046              	.L1045:
 8047              	.LBE533:
 8048              	.LBE532:
 8049              	.LBB534:
 8050              	.LBB535:
 592:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8051              		.loc 1 592 0
 8052 0060 13F8011B 		ldrb	r1, [r3], #1	@ zero_extendqisi2
 8053              	.LVL1060:
 8054 0064 02F8011F 		strb	r1, [r2, #1]!
 8055              	.LVL1061:
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = *s++;
 8056              		.loc 1 591 0
 8057 0068 A342     		cmp	r3, r4
 8058 006a F9D1     		bne	.L1045
 8059              	.LVL1062:
 8060              	.LBE535:
 8061              	.LBE534:
3815:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = follow_path(&djn, path_new);	/* and make sure if new object name is not conflicting */
 8062              		.loc 1 3815 0
 8063 006c 6846     		mov	r0, sp
 8064 006e FFF7FEFF 		bl	get_ldnumber
 8065              	.LVL1063:
 8066 0072 0028     		cmp	r0, #0
 8067 0074 06DB     		blt	.L1052
3816:Middlewares/Third_Party/FatFs/src/ff.c **** 				else
 8068              		.loc 1 3816 0
 8069 0076 0099     		ldr	r1, [sp]
 8070 0078 2046     		mov	r0, r4
 8071 007a FFF7FEFF 		bl	follow_path
 8072              	.LVL1064:
3819:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) { 				/* It is a valid path and no name collision */
 8073              		.loc 1 3819 0
 8074 007e 28B9     		cbnz	r0, .L1065
 8075 0080 0820     		movs	r0, #8
 8076              	.LVL1065:
 8077 0082 C8E7     		b	.L1056
 8078              	.L1052:
3818:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) res = FR_EXIST;		/* The new object name is already existing */
 8079              		.loc 1 3818 0
ARM GAS  /tmp/ccVdKYyy.s 			page 247


 8080 0084 0B20     		movs	r0, #11
 8081 0086 C6E7     		b	.L1056
 8082              	.LVL1066:
 8083              	.L1051:
3811:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 8084              		.loc 1 3811 0
 8085 0088 0420     		movs	r0, #4
 8086              	.LVL1067:
 8087 008a C4E7     		b	.L1056
 8088              	.LVL1068:
 8089              	.L1065:
3820:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
 8090              		.loc 1 3820 0
 8091 008c 0428     		cmp	r0, #4
 8092 008e C2D1     		bne	.L1056
3821:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
 8093              		.loc 1 3821 0
 8094 0090 2046     		mov	r0, r4
 8095              	.LVL1069:
 8096 0092 FFF7FEFF 		bl	dir_register
 8097              	.LVL1070:
3822:Middlewares/Third_Party/FatFs/src/ff.c **** /* Start of critical section where any interruption can cause a cross-link */
 8098              		.loc 1 3822 0
 8099 0096 0028     		cmp	r0, #0
 8100 0098 BDD1     		bne	.L1056
3824:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(dir + 13, buf + 2, 19);
 8101              		.loc 1 3824 0
 8102 009a D4F81452 		ldr	r5, [r4, #532]
 8103              	.LVL1071:
 8104              	.LBB536:
 8105              	.LBB537:
 582:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8106              		.loc 1 582 0
 8107 009e 0DF11A03 		add	r3, sp, #26
 8108              	.LVL1072:
 8109 00a2 05F10C02 		add	r2, r5, #12
 8110 00a6 0DF12D00 		add	r0, sp, #45
 8111              	.LVL1073:
 8112              	.L1046:
 592:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8113              		.loc 1 592 0
 8114 00aa 13F8011B 		ldrb	r1, [r3], #1	@ zero_extendqisi2
 8115              	.LVL1074:
 8116 00ae 02F8011F 		strb	r1, [r2, #1]!
 8117              	.LVL1075:
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = *s++;
 8118              		.loc 1 591 0
 8119 00b2 8342     		cmp	r3, r0
 8120 00b4 F9D1     		bne	.L1046
 8121              	.LVL1076:
 8122              	.LBE537:
 8123              	.LBE536:
3826:Middlewares/Third_Party/FatFs/src/ff.c **** 						djo.fs->wflag = 1;
 8124              		.loc 1 3826 0
 8125 00b6 9DF81830 		ldrb	r3, [sp, #24]	@ zero_extendqisi2
 8126 00ba 43F02003 		orr	r3, r3, #32
 8127 00be EB72     		strb	r3, [r5, #11]
ARM GAS  /tmp/ccVdKYyy.s 			page 248


3827:Middlewares/Third_Party/FatFs/src/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.sclust != djn.sclust) {	/* Update .. entry in the sub-dir
 8128              		.loc 1 3827 0
 8129 00c0 8C98     		ldr	r0, [sp, #560]
 8130 00c2 0123     		movs	r3, #1
 8131 00c4 80F80432 		strb	r3, [r0, #516]
3828:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(djo.fs, ld_clust(djo.fs, dir));
 8132              		.loc 1 3828 0
 8133 00c8 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
 8134 00ca DB06     		lsls	r3, r3, #27
 8135 00cc 22D5     		bpl	.L1049
3828:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(djo.fs, ld_clust(djo.fs, dir));
 8136              		.loc 1 3828 0 is_stmt 0 discriminator 1
 8137 00ce 8E9A     		ldr	r2, [sp, #568]
 8138 00d0 D4F80832 		ldr	r3, [r4, #520]
 8139 00d4 9A42     		cmp	r2, r3
 8140 00d6 1DD0     		beq	.L1049
 8141              	.LVL1077:
 8142              	.LBB538:
 8143              	.LBB539:
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 8144              		.loc 1 1316 0 is_stmt 1
 8145 00d8 90F80022 		ldrb	r2, [r0, #512]	@ zero_extendqisi2
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 8146              		.loc 1 1315 0
 8147 00dc E97E     		ldrb	r1, [r5, #27]	@ zero_extendqisi2
 8148 00de AB7E     		ldrb	r3, [r5, #26]	@ zero_extendqisi2
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 8149              		.loc 1 1316 0
 8150 00e0 032A     		cmp	r2, #3
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32)
 8151              		.loc 1 1315 0
 8152 00e2 43EA0123 		orr	r3, r3, r1, lsl #8
 8153              	.LVL1078:
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)LD_WORD(dir + DIR_FstClusHI) << 16;
 8154              		.loc 1 1316 0
 8155 00e6 21D0     		beq	.L1066
 8156              	.L1048:
 8157              	.LVL1079:
 8158              	.LBE539:
 8159              	.LBE538:
 8160              	.LBB541:
 8161              	.LBB542:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 8162              		.loc 1 879 0
 8163 00e8 D0F81422 		ldr	r2, [r0, #532]
 878:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 8164              		.loc 1 878 0
 8165 00ec 023B     		subs	r3, r3, #2
 8166              	.LVL1080:
 879:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 8167              		.loc 1 879 0
 8168 00ee 023A     		subs	r2, r2, #2
 8169 00f0 9342     		cmp	r3, r2
 8170 00f2 19D2     		bcs	.L1055
 880:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8171              		.loc 1 880 0
 8172 00f4 90F80222 		ldrb	r2, [r0, #514]	@ zero_extendqisi2
ARM GAS  /tmp/ccVdKYyy.s 			page 249


 8173 00f8 D0F82812 		ldr	r1, [r0, #552]
 8174 00fc 03FB0211 		mla	r1, r3, r2, r1
 8175              	.LVL1081:
 8176              	.LBE542:
 8177              	.LBE541:
3830:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = FR_INT_ERR;
 8178              		.loc 1 3830 0
 8179 0100 91B1     		cbz	r1, .L1055
3833:Middlewares/Third_Party/FatFs/src/ff.c **** 								dir = djo.fs->win.d8 + SZ_DIRE * 1;	/* Ptr to .. entry */
 8180              		.loc 1 3833 0
 8181 0102 FFF7FEFF 		bl	move_window
 8182              	.LVL1082:
3834:Middlewares/Third_Party/FatFs/src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 8183              		.loc 1 3834 0
 8184 0106 8C9B     		ldr	r3, [sp, #560]
 8185              	.LVL1083:
3835:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(dir, djn.sclust);
 8186              		.loc 1 3835 0
 8187 0108 0028     		cmp	r0, #0
 8188 010a 84D1     		bne	.L1056
3835:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(dir, djn.sclust);
 8189              		.loc 1 3835 0 is_stmt 0 discriminator 1
 8190 010c 93F82120 		ldrb	r2, [r3, #33]	@ zero_extendqisi2
 8191 0110 2E2A     		cmp	r2, #46
 8192 0112 12D0     		beq	.L1067
 8193              	.LVL1084:
 8194              	.L1049:
3842:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK)
 8195              		.loc 1 3842 0 is_stmt 1
 8196 0114 0CA8     		add	r0, sp, #48
 8197 0116 FFF7FEFF 		bl	dir_remove
 8198              	.LVL1085:
3843:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = sync_fs(djo.fs);
 8199              		.loc 1 3843 0
 8200 011a 0028     		cmp	r0, #0
 8201 011c 7FF47BAF 		bne	.L1056
3844:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8202              		.loc 1 3844 0
 8203 0120 8C98     		ldr	r0, [sp, #560]
 8204              	.LVL1086:
 8205 0122 FFF7FEFF 		bl	sync_fs
 8206              	.LVL1087:
 8207 0126 76E7     		b	.L1056
 8208              	.LVL1088:
 8209              	.L1055:
3831:Middlewares/Third_Party/FatFs/src/ff.c **** 							} else {
 8210              		.loc 1 3831 0
 8211 0128 0220     		movs	r0, #2
 8212              	.LVL1089:
 8213 012a 74E7     		b	.L1056
 8214              	.LVL1090:
 8215              	.L1066:
 8216              	.LBB543:
 8217              	.LBB540:
1317:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8218              		.loc 1 1317 0
 8219 012c 697D     		ldrb	r1, [r5, #21]	@ zero_extendqisi2
ARM GAS  /tmp/ccVdKYyy.s 			page 250


 8220 012e 2A7D     		ldrb	r2, [r5, #20]	@ zero_extendqisi2
 8221 0130 42EA0122 		orr	r2, r2, r1, lsl #8
 8222 0134 43EA0243 		orr	r3, r3, r2, lsl #16
 8223              	.LVL1091:
 8224 0138 D6E7     		b	.L1048
 8225              	.LVL1092:
 8226              	.L1067:
 8227              	.LBE540:
 8228              	.LBE543:
3836:Middlewares/Third_Party/FatFs/src/ff.c **** 									djo.fs->wflag = 1;
 8229              		.loc 1 3836 0
 8230 013a D4F80822 		ldr	r2, [r4, #520]
 8231              	.LVL1093:
 8232              	.LBB544:
 8233              	.LBB545:
1330:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusHI, cl >> 16);
 8234              		.loc 1 1330 0
 8235 013e 83F83A20 		strb	r2, [r3, #58]
1331:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8236              		.loc 1 1331 0
 8237 0142 110C     		lsrs	r1, r2, #16
 8238 0144 080A     		lsrs	r0, r1, #8
 8239              	.LVL1094:
1330:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(dir + DIR_FstClusHI, cl >> 16);
 8240              		.loc 1 1330 0
 8241 0146 C2F30722 		ubfx	r2, r2, #8, #8
 8242              	.LVL1095:
 8243 014a 83F83B20 		strb	r2, [r3, #59]
1331:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8244              		.loc 1 1331 0
 8245 014e 83F83410 		strb	r1, [r3, #52]
 8246 0152 83F83500 		strb	r0, [r3, #53]
 8247              	.LVL1096:
 8248              	.LBE545:
 8249              	.LBE544:
3837:Middlewares/Third_Party/FatFs/src/ff.c **** 								}
 8250              		.loc 1 3837 0
 8251 0156 8C9B     		ldr	r3, [sp, #560]
 8252              	.LVL1097:
 8253 0158 0122     		movs	r2, #1
 8254 015a 83F80422 		strb	r2, [r3, #516]
 8255 015e D9E7     		b	.L1049
 8256              		.cfi_endproc
 8257              	.LFE176:
 8259              		.section	.text.f_utime,"ax",%progbits
 8260              		.align	1
 8261              		.p2align 2,,3
 8262              		.global	f_utime
 8263              		.syntax unified
 8264              		.thumb
 8265              		.thumb_func
 8266              		.fpu fpv4-sp-d16
 8268              	f_utime:
 8269              	.LFB177:
3868:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8270              		.loc 1 3868 0
 8271              		.cfi_startproc
ARM GAS  /tmp/ccVdKYyy.s 			page 251


 8272              		@ args = 0, pretend = 0, frame = 568
 8273              		@ frame_needed = 0, uses_anonymous_args = 0
 8274              	.LVL1098:
 8275 0000 10B5     		push	{r4, lr}
 8276              	.LCFI129:
 8277              		.cfi_def_cfa_offset 8
 8278              		.cfi_offset 4, -8
 8279              		.cfi_offset 14, -4
 8280 0002 ADF50E7D 		sub	sp, sp, #568
 8281              	.LCFI130:
 8282              		.cfi_def_cfa_offset 576
3868:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8283              		.loc 1 3868 0
 8284 0006 0C46     		mov	r4, r1
 8285 0008 0190     		str	r0, [sp, #4]
3876:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8286              		.loc 1 3876 0
 8287 000a 01A9     		add	r1, sp, #4
 8288              	.LVL1099:
 8289 000c 0122     		movs	r2, #1
 8290 000e 86A8     		add	r0, sp, #536
 8291              	.LVL1100:
 8292 0010 FFF7FEFF 		bl	find_volume
 8293              	.LVL1101:
3877:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_BUF(dj);
 8294              		.loc 1 3877 0
 8295 0014 10B1     		cbz	r0, .L1072
 8296              	.L1069:
3897:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8297              		.loc 1 3897 0
 8298 0016 0DF50E7D 		add	sp, sp, #568
 8299              	.LCFI131:
 8300              		.cfi_remember_state
 8301              		.cfi_def_cfa_offset 8
 8302              		@ sp needed
 8303 001a 10BD     		pop	{r4, pc}
 8304              	.LVL1102:
 8305              	.L1072:
 8306              	.LCFI132:
 8307              		.cfi_restore_state
3878:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 8308              		.loc 1 3878 0
 8309 001c 03AB     		add	r3, sp, #12
3879:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
 8310              		.loc 1 3879 0
 8311 001e 0199     		ldr	r1, [sp, #4]
3878:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 8312              		.loc 1 3878 0
 8313 0020 8C93     		str	r3, [sp, #560]
3879:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_BUF();
 8314              		.loc 1 3879 0
 8315 0022 06A8     		add	r0, sp, #24
 8316              	.LVL1103:
 8317 0024 FFF7FEFF 		bl	follow_path
 8318              	.LVL1104:
3883:Middlewares/Third_Party/FatFs/src/ff.c **** 			dir = dj.dir;
 8319              		.loc 1 3883 0
ARM GAS  /tmp/ccVdKYyy.s 			page 252


 8320 0028 0028     		cmp	r0, #0
 8321 002a F4D1     		bne	.L1069
3884:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!dir) {					/* Root directory */
 8322              		.loc 1 3884 0
 8323 002c 8B9B     		ldr	r3, [sp, #556]
 8324              	.LVL1105:
3885:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 8325              		.loc 1 3885 0
 8326 002e 93B1     		cbz	r3, .L1070
3888:Middlewares/Third_Party/FatFs/src/ff.c **** 				ST_WORD(dir + DIR_WrtDate, fno->fdate);
 8327              		.loc 1 3888 0
 8328 0030 E288     		ldrh	r2, [r4, #6]
 8329 0032 9A75     		strb	r2, [r3, #22]
 8330 0034 E288     		ldrh	r2, [r4, #6]
 8331 0036 120A     		lsrs	r2, r2, #8
 8332 0038 DA75     		strb	r2, [r3, #23]
3889:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.fs->wflag = 1;
 8333              		.loc 1 3889 0
 8334 003a A288     		ldrh	r2, [r4, #4]
 8335 003c 1A76     		strb	r2, [r3, #24]
 8336 003e A288     		ldrh	r2, [r4, #4]
 8337 0040 120A     		lsrs	r2, r2, #8
 8338 0042 5A76     		strb	r2, [r3, #25]
3890:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(dj.fs);
 8339              		.loc 1 3890 0
 8340 0044 8698     		ldr	r0, [sp, #536]
 8341              	.LVL1106:
 8342 0046 0123     		movs	r3, #1
 8343              	.LVL1107:
 8344 0048 80F80432 		strb	r3, [r0, #516]
3891:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8345              		.loc 1 3891 0
 8346 004c FFF7FEFF 		bl	sync_fs
 8347              	.LVL1108:
3897:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8348              		.loc 1 3897 0
 8349 0050 0DF50E7D 		add	sp, sp, #568
 8350              	.LCFI133:
 8351              		.cfi_remember_state
 8352              		.cfi_def_cfa_offset 8
 8353              		@ sp needed
 8354 0054 10BD     		pop	{r4, pc}
 8355              	.LVL1109:
 8356              	.L1070:
 8357              	.LCFI134:
 8358              		.cfi_restore_state
3886:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* File or sub-directory */
 8359              		.loc 1 3886 0
 8360 0056 0620     		movs	r0, #6
 8361              	.LVL1110:
3897:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8362              		.loc 1 3897 0
 8363 0058 0DF50E7D 		add	sp, sp, #568
 8364              	.LCFI135:
 8365              		.cfi_def_cfa_offset 8
 8366              		@ sp needed
 8367 005c 10BD     		pop	{r4, pc}
ARM GAS  /tmp/ccVdKYyy.s 			page 253


 8368              		.cfi_endproc
 8369              	.LFE177:
 8371 005e 00BF     		.section	.text.f_mkfs,"ax",%progbits
 8372              		.align	1
 8373              		.p2align 2,,3
 8374              		.global	f_mkfs
 8375              		.syntax unified
 8376              		.thumb
 8377              		.thumb_func
 8378              		.fpu fpv4-sp-d16
 8380              	f_mkfs:
 8381              	.LFB178:
4143:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const WORD vst[] = { 1024,   512,  256,  128,   64,    32,   16,    8,    4,    2,   0};
 8382              		.loc 1 4143 0
 8383              		.cfi_startproc
 8384              		@ args = 0, pretend = 0, frame = 32
 8385              		@ frame_needed = 0, uses_anonymous_args = 0
 8386              	.LVL1111:
 8387 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 8388              	.LCFI136:
 8389              		.cfi_def_cfa_offset 36
 8390              		.cfi_offset 4, -36
 8391              		.cfi_offset 5, -32
 8392              		.cfi_offset 6, -28
 8393              		.cfi_offset 7, -24
 8394              		.cfi_offset 8, -20
 8395              		.cfi_offset 9, -16
 8396              		.cfi_offset 10, -12
 8397              		.cfi_offset 11, -8
 8398              		.cfi_offset 14, -4
 8399 0004 89B0     		sub	sp, sp, #36
 8400              	.LCFI137:
 8401              		.cfi_def_cfa_offset 72
4160:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&path);
 8402              		.loc 1 4160 0
 8403 0006 0129     		cmp	r1, #1
4143:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const WORD vst[] = { 1024,   512,  256,  128,   64,    32,   16,    8,    4,    2,   0};
 8404              		.loc 1 4143 0
 8405 0008 0590     		str	r0, [sp, #20]
4160:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&path);
 8406              		.loc 1 4160 0
 8407 000a 88BF     		it	hi
 8408 000c 1320     		movhi	r0, #19
 8409              	.LVL1112:
 8410 000e 02D9     		bls	.L1157
 8411              	.LVL1113:
 8412              	.L1146:
4375:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8413              		.loc 1 4375 0
 8414 0010 09B0     		add	sp, sp, #36
 8415              	.LCFI138:
 8416              		.cfi_remember_state
 8417              		.cfi_def_cfa_offset 36
 8418              		@ sp needed
 8419 0012 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 8420              	.LVL1114:
 8421              	.L1157:
ARM GAS  /tmp/ccVdKYyy.s 			page 254


 8422              	.LCFI139:
 8423              		.cfi_restore_state
4161:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 8424              		.loc 1 4161 0
 8425 0016 05A8     		add	r0, sp, #20
 8426              	.LVL1115:
 8427 0018 0F46     		mov	r7, r1
 8428 001a 1646     		mov	r6, r2
 8429 001c FFF7FEFF 		bl	get_ldnumber
 8430              	.LVL1116:
4162:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs = FatFs[vol];
 8431              		.loc 1 4162 0
 8432 0020 0028     		cmp	r0, #0
 8433 0022 0EDB     		blt	.L1124
4163:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;
 8434              		.loc 1 4163 0
 8435 0024 454B     		ldr	r3, .L1165
 8436 0026 53F82040 		ldr	r4, [r3, r0, lsl #2]
 8437              	.LVL1117:
4164:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fs_type = 0;
 8438              		.loc 1 4164 0
 8439 002a 64B1     		cbz	r4, .L1125
4165:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 8440              		.loc 1 4165 0
 8441 002c 0023     		movs	r3, #0
4166:Middlewares/Third_Party/FatFs/src/ff.c **** 	part = LD2PT(vol);	/* Partition (0:auto detect, 1-4:get from partition table)*/
 8442              		.loc 1 4166 0
 8443 002e C5B2     		uxtb	r5, r0
 8444              	.LVL1118:
4170:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
 8445              		.loc 1 4170 0
 8446 0030 2846     		mov	r0, r5
 8447              	.LVL1119:
4165:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 8448              		.loc 1 4165 0
 8449 0032 84F80032 		strb	r3, [r4, #512]
4170:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
 8450              		.loc 1 4170 0
 8451 0036 FFF7FEFF 		bl	disk_initialize
 8452              	.LVL1120:
4171:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 8453              		.loc 1 4171 0
 8454 003a C207     		lsls	r2, r0, #31
 8455 003c 05D5     		bpl	.L1158
 8456 003e 0320     		movs	r0, #3
 8457              	.LVL1121:
 8458 0040 E6E7     		b	.L1146
 8459              	.LVL1122:
 8460              	.L1124:
4162:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs = FatFs[vol];
 8461              		.loc 1 4162 0
 8462 0042 0B20     		movs	r0, #11
 8463              	.LVL1123:
 8464 0044 E4E7     		b	.L1146
 8465              	.LVL1124:
 8466              	.L1125:
4164:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fs_type = 0;
ARM GAS  /tmp/ccVdKYyy.s 			page 255


 8467              		.loc 1 4164 0
 8468 0046 0C20     		movs	r0, #12
 8469              	.LVL1125:
 8470 0048 E2E7     		b	.L1146
 8471              	.LVL1126:
 8472              	.L1158:
4172:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get disk sector size */
 8473              		.loc 1 4172 0
 8474 004a 4307     		lsls	r3, r0, #29
 8475 004c 01D5     		bpl	.L1159
 8476 004e 0A20     		movs	r0, #10
 8477              	.LVL1127:
 8478 0050 DEE7     		b	.L1146
 8479              	.LVL1128:
 8480              	.L1159:
4187:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_DISK_ERR;
 8481              		.loc 1 4187 0
 8482 0052 07AA     		add	r2, sp, #28
 8483 0054 0121     		movs	r1, #1
 8484 0056 2846     		mov	r0, r5
 8485              	.LVL1129:
 8486 0058 FFF7FEFF 		bl	disk_ioctl
 8487              	.LVL1130:
 8488 005c 0028     		cmp	r0, #0
 8489 005e 3BD1     		bne	.L1076
4187:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_DISK_ERR;
 8490              		.loc 1 4187 0 is_stmt 0 discriminator 1
 8491 0060 079A     		ldr	r2, [sp, #28]
 8492 0062 7F2A     		cmp	r2, #127
 8493 0064 38D9     		bls	.L1076
4189:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_vol -= b_vol;				/* Volume size */
 8494              		.loc 1 4189 0 is_stmt 1
 8495 0066 002F     		cmp	r7, #0
 8496 0068 14BF     		ite	ne
 8497 006a 4FF00008 		movne	r8, #0
 8498 006e 4FF03F08 		moveq	r8, #63
 8499              	.LVL1131:
4193:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!au) {						/* AU auto selection */
 8500              		.loc 1 4193 0
 8501 0072 731E     		subs	r3, r6, #1
4190:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8502              		.loc 1 4190 0
 8503 0074 A2EB0802 		sub	r2, r2, r8
4193:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!au) {						/* AU auto selection */
 8504              		.loc 1 4193 0
 8505 0078 3342     		tst	r3, r6
4190:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8506              		.loc 1 4190 0
 8507 007a 0792     		str	r2, [sp, #28]
4193:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!au) {						/* AU auto selection */
 8508              		.loc 1 4193 0
 8509 007c 2ED1     		bne	.L1078
4194:Middlewares/Third_Party/FatFs/src/ff.c **** 		vs = n_vol / (2000 / (SS(fs) / 512));
 8510              		.loc 1 4194 0
 8511 007e 6EB3     		cbz	r6, .L1078
4199:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!au) au = 1;
 8512              		.loc 1 4199 0
ARM GAS  /tmp/ccVdKYyy.s 			page 256


 8513 0080 B6F5007F 		cmp	r6, #512
 8514 0084 00D3     		bcc	.L1083
 8515              	.LVL1132:
 8516              	.L1119:
4199:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!au) au = 1;
 8517              		.loc 1 4199 0 is_stmt 0 discriminator 1
 8518 0086 760A     		lsrs	r6, r6, #9
 8519              	.LVL1133:
 8520              	.L1083:
 8521 0088 802E     		cmp	r6, #128
 8522 008a 28BF     		it	cs
 8523 008c 8026     		movcs	r6, #128
 8524              	.LVL1134:
 8525 008e 0096     		str	r6, [sp]
 8526              	.L1084:
 8527              	.LVL1135:
4206:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
 8528              		.loc 1 4206 0 is_stmt 1
 8529 0090 40F6F571 		movw	r1, #4085
4204:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = FS_FAT12;
 8530              		.loc 1 4204 0
 8531 0094 009B     		ldr	r3, [sp]
 8532 0096 B2FBF3F3 		udiv	r3, r2, r3
 8533              	.LVL1136:
4206:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
 8534              		.loc 1 4206 0
 8535 009a 8B42     		cmp	r3, r1
 8536 009c 45D9     		bls	.L1085
 8537              	.LVL1137:
4207:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8538              		.loc 1 4207 0
 8539 009e 4FF6F571 		movw	r1, #65525
 8540 00a2 8B42     		cmp	r3, r1
 8541 00a4 35D9     		bls	.L1160
 8542              	.LVL1138:
4211:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_rsv = 32;
 8543              		.loc 1 4211 0
 8544 00a6 9E00     		lsls	r6, r3, #2
 8545 00a8 06F20726 		addw	r6, r6, #519
4213:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 8546              		.loc 1 4213 0
 8547 00ac 0023     		movs	r3, #0
 8548              	.LVL1139:
4211:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_rsv = 32;
 8549              		.loc 1 4211 0
 8550 00ae 760A     		lsrs	r6, r6, #9
 8551              	.LVL1140:
4207:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8552              		.loc 1 4207 0
 8553 00b0 4FF00309 		mov	r9, #3
4213:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 8554              		.loc 1 4213 0
 8555 00b4 0193     		str	r3, [sp, #4]
4212:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_dir = 0;
 8556              		.loc 1 4212 0
 8557 00b6 4FF0200A 		mov	r10, #32
 8558              	.LVL1141:
ARM GAS  /tmp/ccVdKYyy.s 			page 257


 8559              	.L1118:
4222:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_vol < b_data + au - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
 8560              		.loc 1 4222 0
 8561 00ba 0199     		ldr	r1, [sp, #4]
4220:Middlewares/Third_Party/FatFs/src/ff.c **** 	b_dir = b_fat + n_fat * N_FATS;		/* Directory area start sector */
 8562              		.loc 1 4220 0
 8563 00bc 0AEB0803 		add	r3, r10, r8
4222:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_vol < b_data + au - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
 8564              		.loc 1 4222 0
 8565 00c0 06EB010B 		add	fp, r6, r1
 8566 00c4 9B44     		add	fp, fp, r3
4220:Middlewares/Third_Party/FatFs/src/ff.c **** 	b_dir = b_fat + n_fat * N_FATS;		/* Directory area start sector */
 8567              		.loc 1 4220 0
 8568 00c6 0393     		str	r3, [sp, #12]
 8569              	.LVL1142:
4223:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8570              		.loc 1 4223 0
 8571 00c8 009B     		ldr	r3, [sp]
 8572              	.LVL1143:
 8573 00ca A3EB0803 		sub	r3, r3, r8
 8574 00ce 5B44     		add	r3, r3, fp
 8575 00d0 9A42     		cmp	r2, r3
 8576 00d2 39D2     		bcs	.L1088
 8577              	.LVL1144:
 8578              	.L1092:
 8579 00d4 0E20     		movs	r0, #14
 8580 00d6 9BE7     		b	.L1146
 8581              	.LVL1145:
 8582              	.L1076:
4188:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (sfd) ? 0 : 63;		/* Volume start sector */
 8583              		.loc 1 4188 0
 8584 00d8 0120     		movs	r0, #1
 8585 00da 99E7     		b	.L1146
 8586              	.LVL1146:
 8587              	.L1078:
4195:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; vs < vst[i]; i++) ;
 8588              		.loc 1 4195 0
 8589 00dc 4FF4FA61 		mov	r1, #2000
 8590 00e0 B2FBF1F1 		udiv	r1, r2, r1
 8591              	.LVL1147:
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 		au = cst[i];
 8592              		.loc 1 4196 0
 8593 00e4 B1F5806F 		cmp	r1, #1024
 8594 00e8 80F06B81 		bcs	.L1080
 8595 00ec 1448     		ldr	r0, .L1165+4
 8596 00ee 0023     		movs	r3, #0
 8597              	.LVL1148:
 8598              	.L1081:
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 		au = cst[i];
 8599              		.loc 1 4196 0 is_stmt 0 discriminator 3
 8600 00f0 30F8026F 		ldrh	r6, [r0, #2]!
 8601 00f4 B142     		cmp	r1, r6
 8602 00f6 03F10103 		add	r3, r3, #1
 8603              	.LVL1149:
 8604 00fa F9D3     		bcc	.L1081
4197:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8605              		.loc 1 4197 0 is_stmt 1
ARM GAS  /tmp/ccVdKYyy.s 			page 258


 8606 00fc 1149     		ldr	r1, .L1165+8
 8607              	.LVL1150:
 8608 00fe 31F81360 		ldrh	r6, [r1, r3, lsl #1]
 8609              	.LVL1151:
4199:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!au) au = 1;
 8610              		.loc 1 4199 0
 8611 0102 B6F5007F 		cmp	r6, #512
 8612 0106 BED2     		bcs	.L1119
4200:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (au > 128) au = 128;
 8613              		.loc 1 4200 0
 8614 0108 002E     		cmp	r6, #0
 8615 010a BDD1     		bne	.L1083
 8616 010c 0123     		movs	r3, #1
 8617              	.LVL1152:
 8618 010e 0093     		str	r3, [sp]
 8619 0110 BEE7     		b	.L1084
 8620              	.LVL1153:
 8621              	.L1160:
4215:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
 8622              		.loc 1 4215 0
 8623 0112 0233     		adds	r3, r3, #2
 8624              	.LVL1154:
 8625 0114 5B00     		lsls	r3, r3, #1
 8626              	.LVL1155:
4206:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_clst >= MIN_FAT32) fmt = FS_FAT32;
 8627              		.loc 1 4206 0
 8628 0116 4FF00209 		mov	r9, #2
 8629              	.LVL1156:
 8630              	.L1122:
4216:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_rsv = 1;
 8631              		.loc 1 4216 0 discriminator 4
 8632 011a 03F2FF13 		addw	r3, r3, #511
 8633              	.LVL1157:
 8634 011e 5E0A     		lsrs	r6, r3, #9
 8635              	.LVL1158:
4218:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8636              		.loc 1 4218 0 discriminator 4
 8637 0120 2023     		movs	r3, #32
 8638 0122 0193     		str	r3, [sp, #4]
4217:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_dir = (DWORD)N_ROOTDIR * SZ_DIRE / SS(fs);
 8639              		.loc 1 4217 0 discriminator 4
 8640 0124 4FF0010A 		mov	r10, #1
 8641 0128 C7E7     		b	.L1118
 8642              	.LVL1159:
 8643              	.L1085:
4215:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_fat = (n_fat + SS(fs) - 1) / SS(fs);
 8644              		.loc 1 4215 0
 8645 012a 03EB4303 		add	r3, r3, r3, lsl #1
 8646              	.LVL1160:
 8647 012e 0133     		adds	r3, r3, #1
 8648 0130 5B08     		lsrs	r3, r3, #1
 8649 0132 0333     		adds	r3, r3, #3
4205:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_clst >= MIN_FAT16) fmt = FS_FAT16;
 8650              		.loc 1 4205 0
 8651 0134 4FF00109 		mov	r9, #1
 8652 0138 EFE7     		b	.L1122
 8653              	.L1166:
ARM GAS  /tmp/ccVdKYyy.s 			page 259


 8654 013a 00BF     		.align	2
 8655              	.L1165:
 8656 013c 00000000 		.word	.LANCHOR1
 8657 0140 00000000 		.word	.LANCHOR4
 8658 0144 00000000 		.word	.LANCHOR5
 8659              	.LVL1161:
 8660              	.L1088:
4226:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 8661              		.loc 1 4226 0
 8662 0148 06AA     		add	r2, sp, #24
 8663              	.LVL1162:
 8664 014a 0321     		movs	r1, #3
 8665              	.LVL1163:
 8666 014c 2846     		mov	r0, r5
 8667 014e FFF7FEFF 		bl	disk_ioctl
 8668              	.LVL1164:
 8669 0152 30B9     		cbnz	r0, .L1089
4226:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = (b_data + n - 1) & ~(n - 1);	/* Next nearest erase block from current data start */
 8670              		.loc 1 4226 0 is_stmt 0 discriminator 2
 8671 0154 DDF818E0 		ldr	lr, [sp, #24]
 8672 0158 0EF1FF33 		add	r3, lr, #-1
 8673 015c B3F5004F 		cmp	r3, #32768
 8674 0160 01D3     		bcc	.L1090
 8675              	.L1089:
 8676 0162 4FF0010E 		mov	lr, #1
 8677              	.L1090:
4227:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = (n - b_data) / N_FATS;
 8678              		.loc 1 4227 0 is_stmt 1
 8679 0166 0EF1FF33 		add	r3, lr, #-1
 8680 016a 5B44     		add	r3, r3, fp
 8681 016c CEF1000E 		rsb	lr, lr, #0
 8682 0170 03EA0E03 		and	r3, r3, lr
4228:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {		/* FAT32: Move FAT offset */
 8683              		.loc 1 4228 0
 8684 0174 A3EB0B03 		sub	r3, r3, fp
4229:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_rsv += n;
 8685              		.loc 1 4229 0
 8686 0178 B9F1030F 		cmp	r9, #3
4228:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {		/* FAT32: Move FAT offset */
 8687              		.loc 1 4228 0
 8688 017c 0693     		str	r3, [sp, #24]
4237:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
 8689              		.loc 1 4237 0
 8690 017e 079A     		ldr	r2, [sp, #28]
4229:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_rsv += n;
 8691              		.loc 1 4229 0
 8692 0180 00F03381 		beq	.L1161
4233:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8693              		.loc 1 4233 0
 8694 0184 1E44     		add	r6, r6, r3
 8695              	.LVL1165:
4237:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
 8696              		.loc 1 4237 0
 8697 0186 0199     		ldr	r1, [sp, #4]
 8698 0188 A2EB0A03 		sub	r3, r2, r10
 8699 018c 9B1B     		subs	r3, r3, r6
4238:Middlewares/Third_Party/FatFs/src/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
ARM GAS  /tmp/ccVdKYyy.s 			page 260


 8700              		.loc 1 4238 0
 8701 018e B9F1020F 		cmp	r9, #2
4237:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
 8702              		.loc 1 4237 0
 8703 0192 A3EB0103 		sub	r3, r3, r1
 8704 0196 0099     		ldr	r1, [sp]
 8705 0198 B3FBF1F3 		udiv	r3, r3, r1
 8706 019c 0493     		str	r3, [sp, #16]
 8707              	.LVL1166:
4238:Middlewares/Third_Party/FatFs/src/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
 8708              		.loc 1 4238 0
 8709 019e 00F01881 		beq	.L1162
4249:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8710              		.loc 1 4249 0 discriminator 1
 8711 01a2 B2F5803F 		cmp	r2, #65536
 8712 01a6 34BF     		ite	cc
 8713 01a8 0121     		movcc	r1, #1
 8714 01aa 0621     		movcs	r1, #6
 8715              	.LVL1167:
 8716              	.L1093:
4261:Middlewares/Third_Party/FatFs/src/ff.c **** 			md = 0xF0;
 8717              		.loc 1 4261 0
 8718 01ac 002F     		cmp	r7, #0
 8719 01ae 40F00B81 		bne	.L1132
 8720              	.LVL1168:
 8721              	.LBB546:
 8722              	.LBB547:
 601:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8723              		.loc 1 601 0
 8724 01b2 3A46     		mov	r2, r7
 8725 01b4 04F5007B 		add	fp, r4, #512
 8726              	.LVL1169:
 598:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8727              		.loc 1 598 0
 8728 01b8 2346     		mov	r3, r4
 8729              	.LVL1170:
 8730              	.L1097:
 601:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8731              		.loc 1 601 0
 8732 01ba 03F8012B 		strb	r2, [r3], #1
 8733              	.LVL1171:
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
 8734              		.loc 1 600 0
 8735 01be 9B45     		cmp	fp, r3
 8736 01c0 FBD1     		bne	.L1097
 8737              	.LVL1172:
 8738              	.LBE547:
 8739              	.LBE546:
4271:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[6] = (BYTE)(n >> 2 | 63);	/* Partition end sector */
 8740              		.loc 1 4271 0
 8741 01c2 079B     		ldr	r3, [sp, #28]
4269:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[5] = 254;					/* Partition end head */
 8742              		.loc 1 4269 0
 8743 01c4 84F8C211 		strb	r1, [r4, #450]
4271:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[6] = (BYTE)(n >> 2 | 63);	/* Partition end sector */
 8744              		.loc 1 4271 0
 8745 01c8 08EB0307 		add	r7, r8, r3
ARM GAS  /tmp/ccVdKYyy.s 			page 261


4275:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_WORD(fs->win.d8 + BS_55AA, 0xAA55);	/* MBR signature */
 8746              		.loc 1 4275 0
 8747 01cc C3F30721 		ubfx	r1, r3, #8, #8
 8748              	.LVL1173:
4271:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[6] = (BYTE)(n >> 2 | 63);	/* Partition end sector */
 8749              		.loc 1 4271 0
 8750 01d0 43F6C160 		movw	r0, #16065
 8751 01d4 B7FBF0F7 		udiv	r7, r7, r0
4272:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[7] = (BYTE)n;				/* End cylinder */
 8752              		.loc 1 4272 0
 8753 01d8 B808     		lsrs	r0, r7, #2
 8754 01da 40F03F00 		orr	r0, r0, #63
4268:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[4] = sys;					/* System type */
 8755              		.loc 1 4268 0
 8756 01de 84F8C121 		strb	r2, [r4, #449]
4274:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 12, n_vol);		/* Partition size in LBA */
 8757              		.loc 1 4274 0
 8758 01e2 84F8C721 		strb	r2, [r4, #455]
 8759 01e6 84F8C821 		strb	r2, [r4, #456]
 8760 01ea 84F8C921 		strb	r2, [r4, #457]
4275:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_WORD(fs->win.d8 + BS_55AA, 0xAA55);	/* MBR signature */
 8761              		.loc 1 4275 0
 8762 01ee 84F8CB11 		strb	r1, [r4, #459]
 8763 01f2 1A0C     		lsrs	r2, r3, #16
4270:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (b_vol + n_vol) / 63 / 255;
 8764              		.loc 1 4270 0
 8765 01f4 FE21     		movs	r1, #254
4275:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_WORD(fs->win.d8 + BS_55AA, 0xAA55);	/* MBR signature */
 8766              		.loc 1 4275 0
 8767 01f6 4FEA136E 		lsr	lr, r3, #24
 8768 01fa 84F8CA31 		strb	r3, [r4, #458]
4272:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[7] = (BYTE)n;				/* End cylinder */
 8769              		.loc 1 4272 0
 8770 01fe 84F8C401 		strb	r0, [r4, #452]
4266:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[2] = 1;						/* Partition start sector */
 8771              		.loc 1 4266 0
 8772 0202 0123     		movs	r3, #1
4276:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, fs->win.d8, 0, 1) != RES_OK)	/* Write it to the MBR */
 8773              		.loc 1 4276 0
 8774 0204 5520     		movs	r0, #85
4275:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_WORD(fs->win.d8 + BS_55AA, 0xAA55);	/* MBR signature */
 8775              		.loc 1 4275 0
 8776 0206 84F8CC21 		strb	r2, [r4, #460]
4270:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (b_vol + n_vol) / 63 / 255;
 8777              		.loc 1 4270 0
 8778 020a 84F8C311 		strb	r1, [r4, #451]
4274:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 12, n_vol);		/* Partition size in LBA */
 8779              		.loc 1 4274 0
 8780 020e 3F22     		movs	r2, #63
4276:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, fs->win.d8, 0, 1) != RES_OK)	/* Write it to the MBR */
 8781              		.loc 1 4276 0
 8782 0210 AA21     		movs	r1, #170
4274:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 12, n_vol);		/* Partition size in LBA */
 8783              		.loc 1 4274 0
 8784 0212 84F8C621 		strb	r2, [r4, #454]
4276:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, fs->win.d8, 0, 1) != RES_OK)	/* Write it to the MBR */
 8785              		.loc 1 4276 0
ARM GAS  /tmp/ccVdKYyy.s 			page 262


 8786 0216 84F8FE01 		strb	r0, [r4, #510]
 8787 021a 84F8FF11 		strb	r1, [r4, #511]
4273:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 8, 63);			/* Partition start in LBA */
 8788              		.loc 1 4273 0
 8789 021e 84F8C571 		strb	r7, [r4, #453]
4275:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_WORD(fs->win.d8 + BS_55AA, 0xAA55);	/* MBR signature */
 8790              		.loc 1 4275 0
 8791 0222 84F8CDE1 		strb	lr, [r4, #461]
4266:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[2] = 1;						/* Partition start sector */
 8792              		.loc 1 4266 0
 8793 0226 84F8BF31 		strb	r3, [r4, #447]
4267:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[3] = 0;						/* Partition start cylinder */
 8794              		.loc 1 4267 0
 8795 022a 84F8C031 		strb	r3, [r4, #448]
4277:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_DISK_ERR;
 8796              		.loc 1 4277 0
 8797 022e 0022     		movs	r2, #0
 8798 0230 2146     		mov	r1, r4
 8799 0232 2846     		mov	r0, r5
4271:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl[6] = (BYTE)(n >> 2 | 63);	/* Partition end sector */
 8800              		.loc 1 4271 0
 8801 0234 0697     		str	r7, [sp, #24]
4277:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_DISK_ERR;
 8802              		.loc 1 4277 0
 8803 0236 FFF7FEFF 		bl	disk_write
 8804              	.LVL1174:
 8805 023a 0028     		cmp	r0, #0
 8806 023c 7FF44CAF 		bne	.L1076
4279:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8807              		.loc 1 4279 0
 8808 0240 F823     		movs	r3, #248
 8809 0242 0293     		str	r3, [sp, #8]
 8810              	.LVL1175:
 8811              	.L1096:
4284:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(tbl, 0, SS(fs));
 8812              		.loc 1 4284 0
 8813 0244 2746     		mov	r7, r4
 8814              	.LBB548:
 8815              	.LBB549:
 601:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8816              		.loc 1 601 0
 8817 0246 0023     		movs	r3, #0
 8818              	.LVL1176:
 8819              	.L1098:
 8820 0248 07F8013B 		strb	r3, [r7], #1
 8821              	.LVL1177:
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
 8822              		.loc 1 600 0
 8823 024c BB45     		cmp	fp, r7
 8824 024e FBD1     		bne	.L1098
 8825 0250 DC4A     		ldr	r2, .L1167
 8826 0252 0023     		movs	r3, #0
 8827              	.L1099:
 8828              	.LVL1178:
 8829              	.LBE549:
 8830              	.LBE548:
 8831              	.LBB550:
ARM GAS  /tmp/ccVdKYyy.s 			page 263


 8832              	.LBB551:
 592:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8833              		.loc 1 592 0
 8834 0254 D15C     		ldrb	r1, [r2, r3]	@ zero_extendqisi2
 8835 0256 E154     		strb	r1, [r4, r3]
 8836              	.LVL1179:
 8837 0258 0133     		adds	r3, r3, #1
 8838              	.LVL1180:
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = *s++;
 8839              		.loc 1 591 0
 8840 025a 0B2B     		cmp	r3, #11
 8841 025c FAD1     		bne	.L1099
 8842              	.LVL1181:
 8843              	.LBE551:
 8844              	.LBE550:
4289:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_RsvdSecCnt, n_rsv);	/* Reserved sectors */
 8845              		.loc 1 4289 0
 8846 025e 9DF80020 		ldrb	r2, [sp]	@ zero_extendqisi2
 8847 0262 6273     		strb	r2, [r4, #13]
4292:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_RootEntCnt, i);
 8848              		.loc 1 4292 0
 8849 0264 B9F1030F 		cmp	r9, #3
 8850              	.LVL1182:
4293:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_vol < 0x10000) {					/* Number of total sectors */
 8851              		.loc 1 4293 0
 8852 0268 14BF     		ite	ne
 8853 026a 0222     		movne	r2, #2
 8854 026c 0022     		moveq	r2, #0
4294:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_TotSec16, n_vol);
 8855              		.loc 1 4294 0
 8856 026e 079B     		ldr	r3, [sp, #28]
4293:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_vol < 0x10000) {					/* Number of total sectors */
 8857              		.loc 1 4293 0
 8858 0270 A274     		strb	r2, [r4, #18]
4288:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl[BPB_SecPerClus] = (BYTE)au;			/* Sectors per cluster */
 8859              		.loc 1 4288 0
 8860 0272 0022     		movs	r2, #0
 8861 0274 E272     		strb	r2, [r4, #11]
4293:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n_vol < 0x10000) {					/* Number of total sectors */
 8862              		.loc 1 4293 0
 8863 0276 6274     		strb	r2, [r4, #17]
4288:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl[BPB_SecPerClus] = (BYTE)au;			/* Sectors per cluster */
 8864              		.loc 1 4288 0
 8865 0278 0222     		movs	r2, #2
4290:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl[BPB_NumFATs] = N_FATS;				/* Number of FATs */
 8866              		.loc 1 4290 0
 8867 027a 84F80EA0 		strb	r10, [r4, #14]
4288:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl[BPB_SecPerClus] = (BYTE)au;			/* Sectors per cluster */
 8868              		.loc 1 4288 0
 8869 027e 2273     		strb	r2, [r4, #12]
4290:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl[BPB_NumFATs] = N_FATS;				/* Number of FATs */
 8870              		.loc 1 4290 0
 8871 0280 CAF3072A 		ubfx	r10, r10, #8, #8
 8872              	.LVL1183:
4291:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = (fmt == FS_FAT32) ? 0 : N_ROOTDIR;	/* Number of root directory entries */
 8873              		.loc 1 4291 0
 8874 0284 0122     		movs	r2, #1
ARM GAS  /tmp/ccVdKYyy.s 			page 264


4294:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_TotSec16, n_vol);
 8875              		.loc 1 4294 0
 8876 0286 B3F5803F 		cmp	r3, #65536
 8877              	.LVL1184:
4290:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl[BPB_NumFATs] = N_FATS;				/* Number of FATs */
 8878              		.loc 1 4290 0
 8879 028a 84F80FA0 		strb	r10, [r4, #15]
4291:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = (fmt == FS_FAT32) ? 0 : N_ROOTDIR;	/* Number of root directory entries */
 8880              		.loc 1 4291 0
 8881 028e 2274     		strb	r2, [r4, #16]
4294:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_TotSec16, n_vol);
 8882              		.loc 1 4294 0
 8883 0290 80F0BF80 		bcs	.L1101
4295:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 8884              		.loc 1 4295 0
 8885 0294 C3F30722 		ubfx	r2, r3, #8, #8
 8886 0298 E374     		strb	r3, [r4, #19]
 8887 029a 2275     		strb	r2, [r4, #20]
 8888              	.L1102:
4300:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_NumHeads, 255);		/* Number of heads */
 8889              		.loc 1 4300 0
 8890 029c 4FF0000A 		mov	r10, #0
 8891 02a0 3F22     		movs	r2, #63
4301:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_DWORD(tbl + BPB_HiddSec, b_vol);		/* Hidden sectors */
 8892              		.loc 1 4301 0
 8893 02a2 FF23     		movs	r3, #255
4299:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_SecPerTrk, 63);		/* Number of sectors per track */
 8894              		.loc 1 4299 0
 8895 02a4 9DF80810 		ldrb	r1, [sp, #8]	@ zero_extendqisi2
 8896 02a8 6175     		strb	r1, [r4, #21]
4302:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = GET_FATTIME();						/* Use current time as VSN */
 8897              		.loc 1 4302 0
 8898 02aa 84F81C80 		strb	r8, [r4, #28]
4300:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_WORD(tbl + BPB_NumHeads, 255);		/* Number of heads */
 8899              		.loc 1 4300 0
 8900 02ae 2276     		strb	r2, [r4, #24]
 8901 02b0 84F819A0 		strb	r10, [r4, #25]
4301:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_DWORD(tbl + BPB_HiddSec, b_vol);		/* Hidden sectors */
 8902              		.loc 1 4301 0
 8903 02b4 84F81BA0 		strb	r10, [r4, #27]
4302:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = GET_FATTIME();						/* Use current time as VSN */
 8904              		.loc 1 4302 0
 8905 02b8 84F81DA0 		strb	r10, [r4, #29]
 8906 02bc 84F81EA0 		strb	r10, [r4, #30]
 8907 02c0 84F81FA0 		strb	r10, [r4, #31]
4301:Middlewares/Third_Party/FatFs/src/ff.c **** 	ST_DWORD(tbl + BPB_HiddSec, b_vol);		/* Hidden sectors */
 8908              		.loc 1 4301 0
 8909 02c4 A376     		strb	r3, [r4, #26]
4303:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
 8910              		.loc 1 4303 0
 8911 02c6 FFF7FEFF 		bl	get_fattime
 8912              	.LVL1185:
4304:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BS_VolID32, n);		/* VSN */
 8913              		.loc 1 4304 0
 8914 02ca B9F1030F 		cmp	r9, #3
4303:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_FAT32) {
 8915              		.loc 1 4303 0
ARM GAS  /tmp/ccVdKYyy.s 			page 265


 8916 02ce 0690     		str	r0, [sp, #24]
4304:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BS_VolID32, n);		/* VSN */
 8917              		.loc 1 4304 0
 8918 02d0 00F0AC80 		beq	.L1163
4314:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_FATSz16, n_fat);	/* Number of sectors per FAT */
 8919              		.loc 1 4314 0
 8920 02d4 C0F30723 		ubfx	r3, r0, #8, #8
 8921 02d8 020C     		lsrs	r2, r0, #16
 8922 02da 84F82700 		strb	r0, [r4, #39]
 8923 02de 000E     		lsrs	r0, r0, #24
 8924 02e0 84F82830 		strb	r3, [r4, #40]
 8925 02e4 84F82920 		strb	r2, [r4, #41]
4315:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_DrvNum] = 0x80;				/* Drive number */
 8926              		.loc 1 4315 0
 8927 02e8 C6F30723 		ubfx	r3, r6, #8, #8
4316:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_BootSig] = 0x29;				/* Extended boot signature */
 8928              		.loc 1 4316 0
 8929 02ec 8021     		movs	r1, #128
4314:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_FATSz16, n_fat);	/* Number of sectors per FAT */
 8930              		.loc 1 4314 0
 8931 02ee 84F82A00 		strb	r0, [r4, #42]
4317:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(tbl + BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
 8932              		.loc 1 4317 0
 8933 02f2 2922     		movs	r2, #41
 8934 02f4 B448     		ldr	r0, .L1167+4
4315:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_DrvNum] = 0x80;				/* Drive number */
 8935              		.loc 1 4315 0
 8936 02f6 E375     		strb	r3, [r4, #23]
 8937 02f8 A675     		strb	r6, [r4, #22]
4316:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_BootSig] = 0x29;				/* Extended boot signature */
 8938              		.loc 1 4316 0
 8939 02fa 84F82410 		strb	r1, [r4, #36]
4317:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(tbl + BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
 8940              		.loc 1 4317 0
 8941 02fe 84F82620 		strb	r2, [r4, #38]
4318:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8942              		.loc 1 4318 0
 8943 0302 04F12B03 		add	r3, r4, #43
 8944              	.LVL1186:
 8945              	.L1106:
 8946              	.LBB552:
 8947              	.LBB553:
 592:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8948              		.loc 1 592 0
 8949 0306 10F80A20 		ldrb	r2, [r0, r10]	@ zero_extendqisi2
 8950 030a 03F80A20 		strb	r2, [r3, r10]
 8951              	.LVL1187:
 8952 030e 0AF1010A 		add	r10, r10, #1
 8953              	.LVL1188:
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = *s++;
 8954              		.loc 1 591 0
 8955 0312 BAF1130F 		cmp	r10, #19
 8956 0316 F6D1     		bne	.L1106
 8957              	.LBE553:
 8958              	.LBE552:
4320:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_write(pdrv, tbl, b_vol, 1) != RES_OK)	/* Write it to the VBR sector */
 8959              		.loc 1 4320 0
ARM GAS  /tmp/ccVdKYyy.s 			page 266


 8960 0318 5522     		movs	r2, #85
 8961 031a AA23     		movs	r3, #170
 8962              	.LVL1189:
 8963 031c 84F8FE21 		strb	r2, [r4, #510]
 8964 0320 84F8FF31 		strb	r3, [r4, #511]
4321:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_DISK_ERR;
 8965              		.loc 1 4321 0
 8966 0324 4246     		mov	r2, r8
 8967 0326 0123     		movs	r3, #1
 8968 0328 2146     		mov	r1, r4
 8969 032a 2846     		mov	r0, r5
 8970 032c FFF7FEFF 		bl	disk_write
 8971              	.LVL1190:
 8972 0330 0028     		cmp	r0, #0
 8973 0332 7FF4D1AE 		bne	.L1076
 8974              	.LVL1191:
 8975              	.L1121:
4318:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8976              		.loc 1 4318 0
 8977 0336 A246     		mov	r10, r4
 8978              	.LBB554:
 8979              	.LBB555:
 601:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8980              		.loc 1 601 0
 8981 0338 0023     		movs	r3, #0
 8982              	.LVL1192:
 8983              	.L1108:
 8984 033a 0AF8013B 		strb	r3, [r10], #1
 8985              	.LVL1193:
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
 8986              		.loc 1 600 0
 8987 033e 5745     		cmp	r7, r10
 8988 0340 FBD1     		bne	.L1108
 8989              	.LVL1194:
 8990              	.LBE555:
 8991              	.LBE554:
4331:Middlewares/Third_Party/FatFs/src/ff.c **** 			n |= (fmt == FS_FAT12) ? 0x00FFFF00 : 0xFFFFFF00;
 8992              		.loc 1 4331 0
 8993 0342 B9F1030F 		cmp	r9, #3
 8994 0346 00F0C680 		beq	.L1109
4332:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 0, n);			/* Reserve cluster #0-1 (FAT12/16) */
 8995              		.loc 1 4332 0
 8996 034a A04B     		ldr	r3, .L1167+8
 8997 034c 029A     		ldr	r2, [sp, #8]
 8998 034e B9F1010F 		cmp	r9, #1
 8999 0352 18BF     		it	ne
 9000 0354 6FF0FF03 		mvnne	r3, #255
 9001 0358 1343     		orrs	r3, r3, r2
 9002 035a 0693     		str	r3, [sp, #24]
4333:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 9003              		.loc 1 4333 0
 9004 035c 2370     		strb	r3, [r4]
 9005 035e BDF81830 		ldrh	r3, [sp, #24]
 9006 0362 1B0A     		lsrs	r3, r3, #8
 9007 0364 6370     		strb	r3, [r4, #1]
 9008 0366 BDF81A30 		ldrh	r3, [sp, #26]
 9009 036a A370     		strb	r3, [r4, #2]
ARM GAS  /tmp/ccVdKYyy.s 			page 267


 9010 036c 9DF81B30 		ldrb	r3, [sp, #27]	@ zero_extendqisi2
 9011 0370 E370     		strb	r3, [r4, #3]
 9012              	.L1111:
4340:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_DISK_ERR;
 9013              		.loc 1 4340 0
 9014 0372 039F     		ldr	r7, [sp, #12]
 9015              	.LVL1195:
 9016 0374 0123     		movs	r3, #1
 9017 0376 3A46     		mov	r2, r7
 9018 0378 2146     		mov	r1, r4
 9019 037a 2846     		mov	r0, r5
 9020 037c FFF7FEFF 		bl	disk_write
 9021              	.LVL1196:
 9022 0380 07F1010C 		add	ip, r7, #1
 9023              	.LVL1197:
 9024 0384 0028     		cmp	r0, #0
 9025 0386 7FF4A7AE 		bne	.L1076
 9026              	.LBB556:
 9027              	.LBB557:
 601:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9028              		.loc 1 601 0
 9029 038a 0246     		mov	r2, r0
 9030              	.LBE557:
 9031              	.LBE556:
 9032 038c 2346     		mov	r3, r4
 9033              	.L1112:
 9034              	.LVL1198:
 9035              	.LBB559:
 9036              	.LBB558:
 9037 038e 03F8012B 		strb	r2, [r3], #1
 9038              	.LVL1199:
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
 9039              		.loc 1 600 0
 9040 0392 9A45     		cmp	r10, r3
 9041 0394 FBD1     		bne	.L1112
 9042              	.LVL1200:
 9043              	.LBE558:
 9044              	.LBE559:
4343:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
 9045              		.loc 1 4343 0
 9046 0396 0123     		movs	r3, #1
 9047 0398 0693     		str	r3, [sp, #24]
 9048 039a 1F46     		mov	r7, r3
 9049              	.L1113:
4344:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_DISK_ERR;
 9050              		.loc 1 4344 0 discriminator 1
 9051 039c 0123     		movs	r3, #1
4343:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
 9052              		.loc 1 4343 0 discriminator 1
 9053 039e B742     		cmp	r7, r6
4344:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_DISK_ERR;
 9054              		.loc 1 4344 0 discriminator 1
 9055 03a0 6246     		mov	r2, ip
 9056 03a2 2146     		mov	r1, r4
 9057 03a4 2846     		mov	r0, r5
 9058 03a6 0CEB030A 		add	r10, ip, r3
 9059              	.LVL1201:
ARM GAS  /tmp/ccVdKYyy.s 			page 268


4343:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
 9060              		.loc 1 4343 0 discriminator 1
 9061 03aa 80F0AE80 		bcs	.L1164
 9062              	.LVL1202:
4344:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_DISK_ERR;
 9063              		.loc 1 4344 0
 9064 03ae FFF7FEFF 		bl	disk_write
 9065              	.LVL1203:
 9066 03b2 0028     		cmp	r0, #0
 9067 03b4 7FF490AE 		bne	.L1076
4343:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
 9068              		.loc 1 4343 0 discriminator 2
 9069 03b8 069F     		ldr	r7, [sp, #24]
 9070 03ba 0137     		adds	r7, r7, #1
4344:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_DISK_ERR;
 9071              		.loc 1 4344 0 discriminator 2
 9072 03bc D446     		mov	ip, r10
4343:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, tbl, wsect++, 1) != RES_OK)
 9073              		.loc 1 4343 0 discriminator 2
 9074 03be 0697     		str	r7, [sp, #24]
 9075 03c0 ECE7     		b	.L1113
 9076              	.LVL1204:
 9077              	.L1080:
4197:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9078              		.loc 1 4197 0
 9079 03c2 4FF40046 		mov	r6, #32768
 9080              	.LVL1205:
 9081 03c6 5EE6     		b	.L1119
 9082              	.LVL1206:
 9083              	.L1132:
4262:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {	/* Create partition table (FDISK) */
 9084              		.loc 1 4262 0
 9085 03c8 F023     		movs	r3, #240
 9086 03ca 0293     		str	r3, [sp, #8]
 9087 03cc 04F5007B 		add	fp, r4, #512
 9088              	.LVL1207:
 9089 03d0 38E7     		b	.L1096
 9090              	.LVL1208:
 9091              	.L1162:
4238:Middlewares/Third_Party/FatFs/src/ff.c **** 		|| (fmt == FS_FAT32 && n_clst < MIN_FAT32))
 9092              		.loc 1 4238 0 discriminator 1
 9093 03d2 0499     		ldr	r1, [sp, #16]
 9094 03d4 40F6F573 		movw	r3, #4085
 9095              	.LVL1209:
 9096 03d8 9942     		cmp	r1, r3
 9097 03da 7FF67BAE 		bls	.L1092
4249:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 9098              		.loc 1 4249 0
 9099 03de B2F5803F 		cmp	r2, #65536
 9100 03e2 34BF     		ite	cc
 9101 03e4 0421     		movcc	r1, #4
 9102 03e6 0621     		movcs	r1, #6
 9103 03e8 E0E6     		b	.L1093
 9104              	.LVL1210:
 9105              	.L1161:
4231:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {					/* FAT12/16: Expand FAT size */
 9106              		.loc 1 4231 0
ARM GAS  /tmp/ccVdKYyy.s 			page 269


 9107 03ea 0398     		ldr	r0, [sp, #12]
4230:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_fat += n;
 9108              		.loc 1 4230 0
 9109 03ec 9A44     		add	r10, r10, r3
 9110              	.LVL1211:
4231:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {					/* FAT12/16: Expand FAT size */
 9111              		.loc 1 4231 0
 9112 03ee 1844     		add	r0, r0, r3
4237:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
 9113              		.loc 1 4237 0
 9114 03f0 A2EB0A02 		sub	r2, r2, r10
 9115 03f4 019B     		ldr	r3, [sp, #4]
4231:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {					/* FAT12/16: Expand FAT size */
 9116              		.loc 1 4231 0
 9117 03f6 0390     		str	r0, [sp, #12]
 9118              	.LVL1212:
4237:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
 9119              		.loc 1 4237 0
 9120 03f8 921B     		subs	r2, r2, r6
4239:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_MKFS_ABORTED;
 9121              		.loc 1 4239 0
 9122 03fa 4FF6F571 		movw	r1, #65525
4237:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
 9123              		.loc 1 4237 0
 9124 03fe D31A     		subs	r3, r2, r3
 9125 0400 009A     		ldr	r2, [sp]
 9126 0402 B3FBF2F3 		udiv	r3, r3, r2
4239:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_MKFS_ABORTED;
 9127              		.loc 1 4239 0
 9128 0406 8B42     		cmp	r3, r1
4237:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   (fmt == FS_FAT16 && n_clst < MIN_FAT16)
 9129              		.loc 1 4237 0
 9130 0408 0493     		str	r3, [sp, #16]
 9131              	.LVL1213:
4239:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_MKFS_ABORTED;
 9132              		.loc 1 4239 0
 9133 040a 7FF663AE 		bls	.L1092
4244:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 9134              		.loc 1 4244 0
 9135 040e 0C21     		movs	r1, #12
 9136 0410 CCE6     		b	.L1093
 9137              	.LVL1214:
 9138              	.L1101:
4297:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9139              		.loc 1 4297 0
 9140 0412 C3F30721 		ubfx	r1, r3, #8, #8
 9141 0416 1A0C     		lsrs	r2, r3, #16
 9142 0418 84F82030 		strb	r3, [r4, #32]
 9143 041c 1B0E     		lsrs	r3, r3, #24
 9144 041e 84F82110 		strb	r1, [r4, #33]
 9145 0422 84F82220 		strb	r2, [r4, #34]
 9146 0426 84F82330 		strb	r3, [r4, #35]
 9147 042a 37E7     		b	.L1102
 9148              	.L1163:
4305:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
 9149              		.loc 1 4305 0
 9150 042c C0F30722 		ubfx	r2, r0, #8, #8
ARM GAS  /tmp/ccVdKYyy.s 			page 270


 9151 0430 030C     		lsrs	r3, r0, #16
4306:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_RootClus, 2);	/* Root directory start cluster (2) */
 9152              		.loc 1 4306 0
 9153 0432 C6F30721 		ubfx	r1, r6, #8, #8
4305:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
 9154              		.loc 1 4305 0
 9155 0436 84F84300 		strb	r0, [r4, #67]
 9156 043a 84F84420 		strb	r2, [r4, #68]
 9157 043e 000E     		lsrs	r0, r0, #24
4306:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_RootClus, 2);	/* Root directory start cluster (2) */
 9158              		.loc 1 4306 0
 9159 0440 320C     		lsrs	r2, r6, #16
4305:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
 9160              		.loc 1 4305 0
 9161 0442 84F84530 		strb	r3, [r4, #69]
4306:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_RootClus, 2);	/* Root directory start cluster (2) */
 9162              		.loc 1 4306 0
 9163 0446 84F82510 		strb	r1, [r4, #37]
 9164 044a 330E     		lsrs	r3, r6, #24
4307:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_FSInfo, 1);		/* FSINFO record offset (VBR + 1) */
 9165              		.loc 1 4307 0
 9166 044c 0221     		movs	r1, #2
4305:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_FATSz32, n_fat);	/* Number of sectors per FAT */
 9167              		.loc 1 4305 0
 9168 044e 84F84600 		strb	r0, [r4, #70]
4306:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_RootClus, 2);	/* Root directory start cluster (2) */
 9169              		.loc 1 4306 0
 9170 0452 84F82620 		strb	r2, [r4, #38]
4308:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_BkBootSec, 6);	/* Backup boot record offset (VBR + 6) */
 9171              		.loc 1 4308 0
 9172 0456 0120     		movs	r0, #1
4306:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_RootClus, 2);	/* Root directory start cluster (2) */
 9173              		.loc 1 4306 0
 9174 0458 84F82730 		strb	r3, [r4, #39]
4309:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_DrvNum32] = 0x80;			/* Drive number */
 9175              		.loc 1 4309 0
 9176 045c 4FF0060E 		mov	lr, #6
4311:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(tbl + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
 9177              		.loc 1 4311 0
 9178 0460 2923     		movs	r3, #41
4307:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_FSInfo, 1);		/* FSINFO record offset (VBR + 1) */
 9179              		.loc 1 4307 0
 9180 0462 84F82C10 		strb	r1, [r4, #44]
4310:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_BootSig32] = 0x29;			/* Extended boot signature */
 9181              		.loc 1 4310 0
 9182 0466 8022     		movs	r2, #128
 9183 0468 5949     		ldr	r1, .L1167+12
4311:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(tbl + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
 9184              		.loc 1 4311 0
 9185 046a 84F84230 		strb	r3, [r4, #66]
4306:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + BPB_RootClus, 2);	/* Root directory start cluster (2) */
 9186              		.loc 1 4306 0
 9187 046e 84F82460 		strb	r6, [r4, #36]
4307:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_FSInfo, 1);		/* FSINFO record offset (VBR + 1) */
 9188              		.loc 1 4307 0
 9189 0472 84F82DA0 		strb	r10, [r4, #45]
 9190 0476 84F82EA0 		strb	r10, [r4, #46]
ARM GAS  /tmp/ccVdKYyy.s 			page 271


 9191 047a 84F82FA0 		strb	r10, [r4, #47]
4308:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_BkBootSec, 6);	/* Backup boot record offset (VBR + 6) */
 9192              		.loc 1 4308 0
 9193 047e 84F831A0 		strb	r10, [r4, #49]
4309:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_DrvNum32] = 0x80;			/* Drive number */
 9194              		.loc 1 4309 0
 9195 0482 84F833A0 		strb	r10, [r4, #51]
4308:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BPB_BkBootSec, 6);	/* Backup boot record offset (VBR + 6) */
 9196              		.loc 1 4308 0
 9197 0486 84F83000 		strb	r0, [r4, #48]
4309:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_DrvNum32] = 0x80;			/* Drive number */
 9198              		.loc 1 4309 0
 9199 048a 84F832E0 		strb	lr, [r4, #50]
4310:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[BS_BootSig32] = 0x29;			/* Extended boot signature */
 9200              		.loc 1 4310 0
 9201 048e 84F84020 		strb	r2, [r4, #64]
4312:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 9202              		.loc 1 4312 0
 9203 0492 04F14703 		add	r3, r4, #71
 9204              	.LVL1215:
 9205              	.L1104:
 9206              	.LBB560:
 9207              	.LBB561:
 592:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9208              		.loc 1 592 0
 9209 0496 11F80A20 		ldrb	r2, [r1, r10]	@ zero_extendqisi2
 9210 049a 03F80A20 		strb	r2, [r3, r10]
 9211              	.LVL1216:
 9212 049e 0AF1010A 		add	r10, r10, #1
 9213              	.LVL1217:
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = *s++;
 9214              		.loc 1 591 0
 9215 04a2 BAF1130F 		cmp	r10, #19
 9216 04a6 F6D1     		bne	.L1104
 9217              	.LBE561:
 9218              	.LBE560:
4320:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_write(pdrv, tbl, b_vol, 1) != RES_OK)	/* Write it to the VBR sector */
 9219              		.loc 1 4320 0
 9220 04a8 5522     		movs	r2, #85
 9221 04aa AA23     		movs	r3, #170
 9222              	.LVL1218:
 9223 04ac 84F8FE21 		strb	r2, [r4, #510]
 9224 04b0 84F8FF31 		strb	r3, [r4, #511]
4321:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_DISK_ERR;
 9225              		.loc 1 4321 0
 9226 04b4 4246     		mov	r2, r8
 9227 04b6 0123     		movs	r3, #1
 9228 04b8 2146     		mov	r1, r4
 9229 04ba 2846     		mov	r0, r5
 9230 04bc FFF7FEFF 		bl	disk_write
 9231              	.LVL1219:
 9232 04c0 0028     		cmp	r0, #0
 9233 04c2 7FF409AE 		bne	.L1076
4324:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9234              		.loc 1 4324 0
 9235 04c6 0123     		movs	r3, #1
 9236 04c8 08F10602 		add	r2, r8, #6
ARM GAS  /tmp/ccVdKYyy.s 			page 272


 9237 04cc 2146     		mov	r1, r4
 9238 04ce 2846     		mov	r0, r5
 9239 04d0 FFF7FEFF 		bl	disk_write
 9240              	.LVL1220:
 9241 04d4 2FE7     		b	.L1121
 9242              	.LVL1221:
 9243              	.L1109:
4335:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 0, n);			/* Reserve cluster #0-1 (FAT32) */
 9244              		.loc 1 4335 0
 9245 04d6 029B     		ldr	r3, [sp, #8]
 9246 04d8 63F0FF03 		orn	r3, r3, #255
 9247 04dc 0693     		str	r3, [sp, #24]
4336:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 4, 0xFFFFFFFF);
 9248              		.loc 1 4336 0
 9249 04de 2370     		strb	r3, [r4]
 9250 04e0 BDF81830 		ldrh	r3, [sp, #24]
 9251 04e4 1B0A     		lsrs	r3, r3, #8
 9252 04e6 6370     		strb	r3, [r4, #1]
 9253 04e8 BDF81A30 		ldrh	r3, [sp, #26]
 9254 04ec A370     		strb	r3, [r4, #2]
 9255 04ee 9DF81B30 		ldrb	r3, [sp, #27]	@ zero_extendqisi2
 9256 04f2 E370     		strb	r3, [r4, #3]
4338:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 9257              		.loc 1 4338 0
 9258 04f4 0F22     		movs	r2, #15
4337:Middlewares/Third_Party/FatFs/src/ff.c **** 			ST_DWORD(tbl + 8, 0x0FFFFFFF);	/* Reserve cluster #2 for root directory */
 9259              		.loc 1 4337 0
 9260 04f6 FF23     		movs	r3, #255
 9261 04f8 2371     		strb	r3, [r4, #4]
 9262 04fa 6371     		strb	r3, [r4, #5]
 9263 04fc A371     		strb	r3, [r4, #6]
 9264 04fe E371     		strb	r3, [r4, #7]
4338:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 9265              		.loc 1 4338 0
 9266 0500 2372     		strb	r3, [r4, #8]
 9267 0502 6372     		strb	r3, [r4, #9]
 9268 0504 A372     		strb	r3, [r4, #10]
 9269 0506 E272     		strb	r2, [r4, #11]
 9270 0508 33E7     		b	.L1111
 9271              	.LVL1222:
 9272              	.L1164:
4350:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
 9273              		.loc 1 4350 0 discriminator 2
 9274 050a 009B     		ldr	r3, [sp]
 9275 050c 019A     		ldr	r2, [sp, #4]
 9276              	.LVL1223:
 9277 050e 6646     		mov	r6, ip
 9278              	.LVL1224:
 9279 0510 B9F1030F 		cmp	r9, #3
 9280 0514 18BF     		it	ne
 9281 0516 1346     		movne	r3, r2
4354:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9282              		.loc 1 4354 0 discriminator 2
 9283 0518 F718     		adds	r7, r6, r3
 9284              	.LVL1225:
 9285              	.L1116:
4352:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_DISK_ERR;
ARM GAS  /tmp/ccVdKYyy.s 			page 273


 9286              		.loc 1 4352 0
 9287 051a 0123     		movs	r3, #1
 9288 051c 3246     		mov	r2, r6
 9289 051e 2146     		mov	r1, r4
 9290 0520 2846     		mov	r0, r5
 9291 0522 1E44     		add	r6, r6, r3
 9292              	.LVL1226:
 9293 0524 FFF7FEFF 		bl	disk_write
 9294              	.LVL1227:
 9295 0528 0028     		cmp	r0, #0
 9296 052a 7FF4D5AD 		bne	.L1076
4354:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9297              		.loc 1 4354 0
 9298 052e BE42     		cmp	r6, r7
 9299 0530 F3D1     		bne	.L1116
4364:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_LeadSig, 0x41615252);
 9300              		.loc 1 4364 0
 9301 0532 B9F1030F 		cmp	r9, #3
 9302 0536 3BD1     		bne	.L1117
4367:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
 9303              		.loc 1 4367 0
 9304 0538 049B     		ldr	r3, [sp, #16]
4368:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BS_55AA, 0xAA55);
 9305              		.loc 1 4368 0
 9306 053a 84F8ED01 		strb	r0, [r4, #493]
4367:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
 9307              		.loc 1 4367 0
 9308 053e 013B     		subs	r3, r3, #1
 9309 0540 C3F30722 		ubfx	r2, r3, #8, #8
 9310 0544 4FEA134E 		lsr	lr, r3, #16
 9311 0548 1F0E     		lsrs	r7, r3, #24
4365:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_StrucSig, 0x61417272);
 9312              		.loc 1 4365 0
 9313 054a 6121     		movs	r1, #97
4367:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
 9314              		.loc 1 4367 0
 9315 054c 84F8E831 		strb	r3, [r4, #488]
4366:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 9316              		.loc 1 4366 0
 9317 0550 7223     		movs	r3, #114
4365:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_StrucSig, 0x61417272);
 9318              		.loc 1 4365 0
 9319 0552 5226     		movs	r6, #82
 9320              	.LVL1228:
4368:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BS_55AA, 0xAA55);
 9321              		.loc 1 4368 0
 9322 0554 84F8EE01 		strb	r0, [r4, #494]
 9323 0558 84F8EF01 		strb	r0, [r4, #495]
4367:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
 9324              		.loc 1 4367 0
 9325 055c 84F8E921 		strb	r2, [r4, #489]
 9326 0560 84F8EB71 		strb	r7, [r4, #491]
4365:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_StrucSig, 0x61417272);
 9327              		.loc 1 4365 0
 9328 0564 4122     		movs	r2, #65
4369:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR + 1) */
 9329              		.loc 1 4369 0
ARM GAS  /tmp/ccVdKYyy.s 			page 274


 9330 0566 5520     		movs	r0, #85
4365:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_StrucSig, 0x61417272);
 9331              		.loc 1 4365 0
 9332 0568 A170     		strb	r1, [r4, #2]
4366:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 9333              		.loc 1 4366 0
 9334 056a 84F8E711 		strb	r1, [r4, #487]
 9335 056e 84F8E431 		strb	r3, [r4, #484]
4369:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR + 1) */
 9336              		.loc 1 4369 0
 9337 0572 AA21     		movs	r1, #170
4366:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 9338              		.loc 1 4366 0
 9339 0574 84F8E531 		strb	r3, [r4, #485]
4368:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BS_55AA, 0xAA55);
 9340              		.loc 1 4368 0
 9341 0578 0227     		movs	r7, #2
4370:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 7, 1);	/* Write backup (VBR + 7) */
 9342              		.loc 1 4370 0
 9343 057a 0123     		movs	r3, #1
4365:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_StrucSig, 0x61417272);
 9344              		.loc 1 4365 0
 9345 057c E270     		strb	r2, [r4, #3]
4366:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 9346              		.loc 1 4366 0
 9347 057e 84F8E621 		strb	r2, [r4, #486]
4369:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR + 1) */
 9348              		.loc 1 4369 0
 9349 0582 84F8FE01 		strb	r0, [r4, #510]
4370:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 7, 1);	/* Write backup (VBR + 7) */
 9350              		.loc 1 4370 0
 9351 0586 08EB0302 		add	r2, r8, r3
4369:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 1, 1);	/* Write original (VBR + 1) */
 9352              		.loc 1 4369 0
 9353 058a 84F8FF11 		strb	r1, [r4, #511]
4367:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
 9354              		.loc 1 4367 0
 9355 058e 84F8EAE1 		strb	lr, [r4, #490]
4370:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 7, 1);	/* Write backup (VBR + 7) */
 9356              		.loc 1 4370 0
 9357 0592 2146     		mov	r1, r4
4365:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_DWORD(tbl + FSI_StrucSig, 0x61417272);
 9358              		.loc 1 4365 0
 9359 0594 2670     		strb	r6, [r4]
 9360 0596 6670     		strb	r6, [r4, #1]
4368:Middlewares/Third_Party/FatFs/src/ff.c **** 		ST_WORD(tbl + BS_55AA, 0xAA55);
 9361              		.loc 1 4368 0
 9362 0598 84F8EC71 		strb	r7, [r4, #492]
4370:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_write(pdrv, tbl, b_vol + 7, 1);	/* Write backup (VBR + 7) */
 9363              		.loc 1 4370 0
 9364 059c 2846     		mov	r0, r5
 9365 059e FFF7FEFF 		bl	disk_write
 9366              	.LVL1229:
4371:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9367              		.loc 1 4371 0
 9368 05a2 08F10702 		add	r2, r8, #7
 9369 05a6 2146     		mov	r1, r4
ARM GAS  /tmp/ccVdKYyy.s 			page 275


 9370 05a8 0123     		movs	r3, #1
 9371 05aa 2846     		mov	r0, r5
 9372 05ac FFF7FEFF 		bl	disk_write
 9373              	.LVL1230:
 9374              	.L1117:
4374:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9375              		.loc 1 4374 0
 9376 05b0 0022     		movs	r2, #0
 9377 05b2 2846     		mov	r0, r5
 9378 05b4 1146     		mov	r1, r2
 9379 05b6 FFF7FEFF 		bl	disk_ioctl
 9380              	.LVL1231:
 9381 05ba 0030     		adds	r0, r0, #0
 9382 05bc 18BF     		it	ne
 9383 05be 0120     		movne	r0, #1
 9384 05c0 26E5     		b	.L1146
 9385              	.L1168:
 9386 05c2 00BF     		.align	2
 9387              	.L1167:
 9388 05c4 00000000 		.word	.LC1
 9389 05c8 20000000 		.word	.LC3
 9390 05cc 00FFFF00 		.word	16776960
 9391 05d0 0C000000 		.word	.LC2
 9392              		.cfi_endproc
 9393              	.LFE178:
 9395              		.section	.text.f_gets,"ax",%progbits
 9396              		.align	1
 9397              		.p2align 2,,3
 9398              		.global	f_gets
 9399              		.syntax unified
 9400              		.thumb
 9401              		.thumb_func
 9402              		.fpu fpv4-sp-d16
 9404              	f_gets:
 9405              	.LFB179:
4462:Middlewares/Third_Party/FatFs/src/ff.c **** 	int n = 0;
 9406              		.loc 1 4462 0
 9407              		.cfi_startproc
 9408              		@ args = 0, pretend = 0, frame = 8
 9409              		@ frame_needed = 0, uses_anonymous_args = 0
 9410              	.LVL1232:
 9411 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 9412              	.LCFI140:
 9413              		.cfi_def_cfa_offset 24
 9414              		.cfi_offset 4, -24
 9415              		.cfi_offset 5, -20
 9416              		.cfi_offset 6, -16
 9417              		.cfi_offset 7, -12
 9418              		.cfi_offset 8, -8
 9419              		.cfi_offset 14, -4
 9420 0004 8046     		mov	r8, r0
 9421              	.LVL1233:
 9422 0006 82B0     		sub	sp, sp, #8
 9423              	.LCFI141:
 9424              		.cfi_def_cfa_offset 32
4462:Middlewares/Third_Party/FatFs/src/ff.c **** 	int n = 0;
 9425              		.loc 1 4462 0
ARM GAS  /tmp/ccVdKYyy.s 			page 276


 9426 0008 1746     		mov	r7, r2
 9427 000a 4E1E     		subs	r6, r1, #1
4464:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE s[2];
 9428              		.loc 1 4464 0
 9429 000c 0546     		mov	r5, r0
4463:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c, *p = buff;
 9430              		.loc 1 4463 0
 9431 000e 0024     		movs	r4, #0
 9432              	.LVL1234:
 9433              	.L1172:
4469:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN && _LFN_UNICODE
 9434              		.loc 1 4469 0
 9435 0010 A642     		cmp	r6, r4
4514:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
 9436              		.loc 1 4514 0
 9437 0012 01AB     		add	r3, sp, #4
 9438 0014 4FF00102 		mov	r2, #1
 9439 0018 6946     		mov	r1, sp
 9440 001a 3846     		mov	r0, r7
4469:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN && _LFN_UNICODE
 9441              		.loc 1 4469 0
 9442 001c 0EDD     		ble	.L1171
 9443              	.LVL1235:
4514:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
 9444              		.loc 1 4514 0
 9445 001e FFF7FEFF 		bl	f_read
 9446              	.LVL1236:
4515:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
 9447              		.loc 1 4515 0
 9448 0022 019B     		ldr	r3, [sp, #4]
 9449 0024 012B     		cmp	r3, #1
 9450 0026 09D1     		bne	.L1171
4516:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 9451              		.loc 1 4516 0
 9452 0028 9DF80030 		ldrb	r3, [sp]	@ zero_extendqisi2
 9453              	.LVL1237:
4518:Middlewares/Third_Party/FatFs/src/ff.c **** 		*p++ = c;
 9454              		.loc 1 4518 0
 9455 002c 0D2B     		cmp	r3, #13
 9456 002e EFD0     		beq	.L1172
4521:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9457              		.loc 1 4521 0
 9458 0030 0A2B     		cmp	r3, #10
4519:Middlewares/Third_Party/FatFs/src/ff.c **** 		n++;
 9459              		.loc 1 4519 0
 9460 0032 05F8013B 		strb	r3, [r5], #1
 9461              	.LVL1238:
4520:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
 9462              		.loc 1 4520 0
 9463 0036 04F10104 		add	r4, r4, #1
 9464              	.LVL1239:
4521:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9465              		.loc 1 4521 0
 9466 003a E9D1     		bne	.L1172
 9467              	.LVL1240:
 9468              	.L1171:
4524:Middlewares/Third_Party/FatFs/src/ff.c **** }
ARM GAS  /tmp/ccVdKYyy.s 			page 277


 9469              		.loc 1 4524 0
 9470 003c 002C     		cmp	r4, #0
4523:Middlewares/Third_Party/FatFs/src/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
 9471              		.loc 1 4523 0
 9472 003e 4FF00003 		mov	r3, #0
4525:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9473              		.loc 1 4525 0
 9474 0042 14BF     		ite	ne
 9475 0044 4046     		movne	r0, r8
 9476 0046 1846     		moveq	r0, r3
4523:Middlewares/Third_Party/FatFs/src/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
 9477              		.loc 1 4523 0
 9478 0048 2B70     		strb	r3, [r5]
4525:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9479              		.loc 1 4525 0
 9480 004a 02B0     		add	sp, sp, #8
 9481              	.LCFI142:
 9482              		.cfi_def_cfa_offset 24
 9483              		@ sp needed
 9484 004c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 9485              		.cfi_endproc
 9486              	.LFE179:
 9488              		.section	.text.f_putc,"ax",%progbits
 9489              		.align	1
 9490              		.p2align 2,,3
 9491              		.global	f_putc
 9492              		.syntax unified
 9493              		.thumb
 9494              		.thumb_func
 9495              		.fpu fpv4-sp-d16
 9497              	f_putc:
 9498              	.LFB181:
4596:Middlewares/Third_Party/FatFs/src/ff.c **** 
4597:Middlewares/Third_Party/FatFs/src/ff.c **** 
4598:Middlewares/Third_Party/FatFs/src/ff.c **** 
4599:Middlewares/Third_Party/FatFs/src/ff.c **** int f_putc (
4600:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c,	/* A character to be output */
4601:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object */
4602:Middlewares/Third_Party/FatFs/src/ff.c **** )
4603:Middlewares/Third_Party/FatFs/src/ff.c **** {
 9499              		.loc 1 4603 0
 9500              		.cfi_startproc
 9501              		@ args = 0, pretend = 0, frame = 80
 9502              		@ frame_needed = 0, uses_anonymous_args = 0
 9503              	.LVL1241:
 9504 0000 00B5     		push	{lr}
 9505              	.LCFI143:
 9506              		.cfi_def_cfa_offset 4
 9507              		.cfi_offset 14, -4
 9508 0002 95B0     		sub	sp, sp, #84
 9509              	.LCFI144:
 9510              		.cfi_def_cfa_offset 88
4604:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff pb;
4605:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nw;
4606:Middlewares/Third_Party/FatFs/src/ff.c **** 
4607:Middlewares/Third_Party/FatFs/src/ff.c **** 
4608:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb.fp = fp;			/* Initialize output buffer */
ARM GAS  /tmp/ccVdKYyy.s 			page 278


4609:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb.nchr = pb.idx = 0;
 9511              		.loc 1 4609 0
 9512 0004 0023     		movs	r3, #0
4608:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb.nchr = pb.idx = 0;
 9513              		.loc 1 4608 0
 9514 0006 0191     		str	r1, [sp, #4]
4610:Middlewares/Third_Party/FatFs/src/ff.c **** 
4611:Middlewares/Third_Party/FatFs/src/ff.c **** 	putc_bfd(&pb, c);	/* Put a character */
 9515              		.loc 1 4611 0
 9516 0008 0146     		mov	r1, r0
 9517              	.LVL1242:
 9518 000a 01A8     		add	r0, sp, #4
 9519              	.LVL1243:
4609:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9520              		.loc 1 4609 0
 9521 000c 0293     		str	r3, [sp, #8]
 9522 000e 0393     		str	r3, [sp, #12]
 9523              		.loc 1 4611 0
 9524 0010 FFF7FEFF 		bl	putc_bfd
 9525              	.LVL1244:
4612:Middlewares/Third_Party/FatFs/src/ff.c **** 
4613:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   pb.idx >= 0	/* Flush buffered characters to the file */
 9526              		.loc 1 4613 0
 9527 0014 029A     		ldr	r2, [sp, #8]
 9528 0016 002A     		cmp	r2, #0
 9529 0018 0DDB     		blt	.L1185
4614:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
 9530              		.loc 1 4614 0
 9531 001a 6B46     		mov	r3, sp
 9532 001c 04A9     		add	r1, sp, #16
 9533 001e 0198     		ldr	r0, [sp, #4]
 9534 0020 FFF7FEFF 		bl	f_write
 9535              	.LVL1245:
 9536 0024 38B9     		cbnz	r0, .L1185
4615:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb.idx == nw) return pb.nchr;
 9537              		.loc 1 4615 0
 9538 0026 029A     		ldr	r2, [sp, #8]
 9539 0028 009B     		ldr	r3, [sp]
 9540 002a 9A42     		cmp	r2, r3
 9541 002c 03D1     		bne	.L1185
 9542              		.loc 1 4615 0 is_stmt 0 discriminator 1
 9543 002e 0398     		ldr	r0, [sp, #12]
4616:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
4617:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9544              		.loc 1 4617 0 is_stmt 1 discriminator 1
 9545 0030 15B0     		add	sp, sp, #84
 9546              	.LCFI145:
 9547              		.cfi_remember_state
 9548              		.cfi_def_cfa_offset 4
 9549              		@ sp needed
 9550 0032 5DF804FB 		ldr	pc, [sp], #4
 9551              	.L1185:
 9552              	.LCFI146:
 9553              		.cfi_restore_state
4616:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
 9554              		.loc 1 4616 0
 9555 0036 4FF0FF30 		mov	r0, #-1
ARM GAS  /tmp/ccVdKYyy.s 			page 279


 9556              		.loc 1 4617 0
 9557 003a 15B0     		add	sp, sp, #84
 9558              	.LCFI147:
 9559              		.cfi_def_cfa_offset 4
 9560              		@ sp needed
 9561 003c 5DF804FB 		ldr	pc, [sp], #4
 9562              		.cfi_endproc
 9563              	.LFE181:
 9565              		.section	.text.f_puts,"ax",%progbits
 9566              		.align	1
 9567              		.p2align 2,,3
 9568              		.global	f_puts
 9569              		.syntax unified
 9570              		.thumb
 9571              		.thumb_func
 9572              		.fpu fpv4-sp-d16
 9574              	f_puts:
 9575              	.LFB182:
4618:Middlewares/Third_Party/FatFs/src/ff.c **** 
4619:Middlewares/Third_Party/FatFs/src/ff.c **** 
4620:Middlewares/Third_Party/FatFs/src/ff.c **** 
4621:Middlewares/Third_Party/FatFs/src/ff.c **** 
4622:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4623:Middlewares/Third_Party/FatFs/src/ff.c **** /* Put a string to the file                                              */
4624:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4625:Middlewares/Third_Party/FatFs/src/ff.c **** 
4626:Middlewares/Third_Party/FatFs/src/ff.c **** int f_puts (
4627:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* str,	/* Pointer to the string to be output */
4628:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp				/* Pointer to the file object */
4629:Middlewares/Third_Party/FatFs/src/ff.c **** )
4630:Middlewares/Third_Party/FatFs/src/ff.c **** {
 9576              		.loc 1 4630 0
 9577              		.cfi_startproc
 9578              		@ args = 0, pretend = 0, frame = 80
 9579              		@ frame_needed = 0, uses_anonymous_args = 0
 9580              	.LVL1246:
 9581 0000 10B5     		push	{r4, lr}
 9582              	.LCFI148:
 9583              		.cfi_def_cfa_offset 8
 9584              		.cfi_offset 4, -8
 9585              		.cfi_offset 14, -4
 9586 0002 0446     		mov	r4, r0
 9587 0004 94B0     		sub	sp, sp, #80
 9588              	.LCFI149:
 9589              		.cfi_def_cfa_offset 88
 9590              		.loc 1 4630 0
 9591 0006 0846     		mov	r0, r1
 9592              	.LVL1247:
4631:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff pb;
4632:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nw;
4633:Middlewares/Third_Party/FatFs/src/ff.c **** 
4634:Middlewares/Third_Party/FatFs/src/ff.c **** 
4635:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb.fp = fp;				/* Initialize output buffer */
4636:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb.nchr = pb.idx = 0;
4637:Middlewares/Third_Party/FatFs/src/ff.c **** 
4638:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (*str)			/* Put the string */
 9593              		.loc 1 4638 0
ARM GAS  /tmp/ccVdKYyy.s 			page 280


 9594 0008 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 9595              	.LVL1248:
4635:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb.nchr = pb.idx = 0;
 9596              		.loc 1 4635 0
 9597 000a 0190     		str	r0, [sp, #4]
4636:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9598              		.loc 1 4636 0
 9599 000c 0023     		movs	r3, #0
 9600 000e 0293     		str	r3, [sp, #8]
 9601 0010 0393     		str	r3, [sp, #12]
 9602              		.loc 1 4638 0
 9603 0012 D1B1     		cbz	r1, .L1193
 9604              	.LVL1249:
 9605              	.L1189:
4639:Middlewares/Third_Party/FatFs/src/ff.c **** 		putc_bfd(&pb, *str++);
 9606              		.loc 1 4639 0
 9607 0014 01A8     		add	r0, sp, #4
 9608 0016 FFF7FEFF 		bl	putc_bfd
 9609              	.LVL1250:
4638:Middlewares/Third_Party/FatFs/src/ff.c **** 		putc_bfd(&pb, *str++);
 9610              		.loc 1 4638 0
 9611 001a 14F8011F 		ldrb	r1, [r4, #1]!	@ zero_extendqisi2
 9612              	.LVL1251:
 9613 001e 0029     		cmp	r1, #0
 9614 0020 F8D1     		bne	.L1189
4640:Middlewares/Third_Party/FatFs/src/ff.c **** 
4641:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   pb.idx >= 0		/* Flush buffered characters to the file */
 9615              		.loc 1 4641 0
 9616 0022 029A     		ldr	r2, [sp, #8]
 9617 0024 002A     		cmp	r2, #0
 9618 0026 0CDB     		blt	.L1192
 9619 0028 0198     		ldr	r0, [sp, #4]
 9620              	.LVL1252:
 9621              	.L1188:
4642:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
 9622              		.loc 1 4642 0
 9623 002a 6B46     		mov	r3, sp
 9624 002c 04A9     		add	r1, sp, #16
 9625 002e FFF7FEFF 		bl	f_write
 9626              	.LVL1253:
 9627 0032 30B9     		cbnz	r0, .L1192
4643:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb.idx == nw) return pb.nchr;
 9628              		.loc 1 4643 0
 9629 0034 029A     		ldr	r2, [sp, #8]
 9630 0036 009B     		ldr	r3, [sp]
 9631 0038 9A42     		cmp	r2, r3
 9632 003a 02D1     		bne	.L1192
 9633              		.loc 1 4643 0 is_stmt 0 discriminator 1
 9634 003c 0398     		ldr	r0, [sp, #12]
4644:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
4645:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9635              		.loc 1 4645 0 is_stmt 1 discriminator 1
 9636 003e 14B0     		add	sp, sp, #80
 9637              	.LCFI150:
 9638              		.cfi_remember_state
 9639              		.cfi_def_cfa_offset 8
 9640              		@ sp needed
ARM GAS  /tmp/ccVdKYyy.s 			page 281


 9641 0040 10BD     		pop	{r4, pc}
 9642              	.L1192:
 9643              	.LCFI151:
 9644              		.cfi_restore_state
4644:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
 9645              		.loc 1 4644 0
 9646 0042 4FF0FF30 		mov	r0, #-1
 9647              		.loc 1 4645 0
 9648 0046 14B0     		add	sp, sp, #80
 9649              	.LCFI152:
 9650              		.cfi_remember_state
 9651              		.cfi_def_cfa_offset 8
 9652              		@ sp needed
 9653 0048 10BD     		pop	{r4, pc}
 9654              	.LVL1254:
 9655              	.L1193:
 9656              	.LCFI153:
 9657              		.cfi_restore_state
4638:Middlewares/Third_Party/FatFs/src/ff.c **** 		putc_bfd(&pb, *str++);
 9658              		.loc 1 4638 0
 9659 004a 0A46     		mov	r2, r1
 9660 004c EDE7     		b	.L1188
 9661              		.cfi_endproc
 9662              	.LFE182:
 9664 004e 00BF     		.section	.text.f_printf,"ax",%progbits
 9665              		.align	1
 9666              		.p2align 2,,3
 9667              		.global	f_printf
 9668              		.syntax unified
 9669              		.thumb
 9670              		.thumb_func
 9671              		.fpu fpv4-sp-d16
 9673              	f_printf:
 9674              	.LFB183:
4646:Middlewares/Third_Party/FatFs/src/ff.c **** 
4647:Middlewares/Third_Party/FatFs/src/ff.c **** 
4648:Middlewares/Third_Party/FatFs/src/ff.c **** 
4649:Middlewares/Third_Party/FatFs/src/ff.c **** 
4650:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4651:Middlewares/Third_Party/FatFs/src/ff.c **** /* Put a formatted string to the file                                    */
4652:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4653:Middlewares/Third_Party/FatFs/src/ff.c **** 
4654:Middlewares/Third_Party/FatFs/src/ff.c **** int f_printf (
4655:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,			/* Pointer to the file object */
4656:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* fmt,	/* Pointer to the format string */
4657:Middlewares/Third_Party/FatFs/src/ff.c **** 	...					/* Optional arguments... */
4658:Middlewares/Third_Party/FatFs/src/ff.c **** )
4659:Middlewares/Third_Party/FatFs/src/ff.c **** {
 9675              		.loc 1 4659 0
 9676              		.cfi_startproc
 9677              		@ args = 4, pretend = 12, frame = 104
 9678              		@ frame_needed = 0, uses_anonymous_args = 1
 9679              	.LVL1255:
 9680 0000 0EB4     		push	{r1, r2, r3}
 9681              	.LCFI154:
 9682              		.cfi_def_cfa_offset 12
 9683              		.cfi_offset 1, -12
ARM GAS  /tmp/ccVdKYyy.s 			page 282


 9684              		.cfi_offset 2, -8
 9685              		.cfi_offset 3, -4
 9686 0002 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 9687              	.LCFI155:
 9688              		.cfi_def_cfa_offset 44
 9689              		.cfi_offset 4, -44
 9690              		.cfi_offset 5, -40
 9691              		.cfi_offset 6, -36
 9692              		.cfi_offset 7, -32
 9693              		.cfi_offset 8, -28
 9694              		.cfi_offset 9, -24
 9695              		.cfi_offset 10, -20
 9696              		.cfi_offset 14, -16
 9697 0006 9BB0     		sub	sp, sp, #108
 9698              	.LCFI156:
 9699              		.cfi_def_cfa_offset 152
 9700              		.loc 1 4659 0
 9701 0008 23AB     		add	r3, sp, #140
4660:Middlewares/Third_Party/FatFs/src/ff.c **** 	va_list arp;
4661:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE f, r;
4662:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nw, i, j, w;
4663:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD v;
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c, d, s[16], *p;
4665:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff pb;
4666:Middlewares/Third_Party/FatFs/src/ff.c **** 
4667:Middlewares/Third_Party/FatFs/src/ff.c **** 
4668:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb.fp = fp;				/* Initialize output buffer */
4669:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb.nchr = pb.idx = 0;
 9702              		.loc 1 4669 0
 9703 000a 0022     		movs	r2, #0
4659:Middlewares/Third_Party/FatFs/src/ff.c **** 	va_list arp;
 9704              		.loc 1 4659 0
 9705 000c 53F8046B 		ldr	r6, [r3], #4
4668:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb.nchr = pb.idx = 0;
 9706              		.loc 1 4668 0
 9707 0010 0790     		str	r0, [sp, #28]
4670:Middlewares/Third_Party/FatFs/src/ff.c **** 
4671:Middlewares/Third_Party/FatFs/src/ff.c **** 	va_start(arp, fmt);
 9708              		.loc 1 4671 0
 9709 0012 0193     		str	r3, [sp, #4]
4669:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9710              		.loc 1 4669 0
 9711 0014 0892     		str	r2, [sp, #32]
 9712 0016 0992     		str	r2, [sp, #36]
 9713              	.LVL1256:
 9714              	.L1197:
4672:Middlewares/Third_Party/FatFs/src/ff.c **** 
4673:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
4674:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = *fmt++;
 9715              		.loc 1 4674 0
 9716 0018 3178     		ldrb	r1, [r6]	@ zero_extendqisi2
 9717              	.LVL1257:
4675:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) break;			/* End of string */
 9718              		.loc 1 4675 0
 9719 001a 41B1     		cbz	r1, .L1198
 9720              	.LVL1258:
 9721              	.L1289:
ARM GAS  /tmp/ccVdKYyy.s 			page 283


4676:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c != '%') {				/* Non escape character */
 9722              		.loc 1 4676 0
 9723 001c 2529     		cmp	r1, #37
 9724 001e 1DD0     		beq	.L1199
4674:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) break;			/* End of string */
 9725              		.loc 1 4674 0
 9726 0020 0136     		adds	r6, r6, #1
4677:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, c);
 9727              		.loc 1 4677 0
 9728 0022 07A8     		add	r0, sp, #28
 9729 0024 FFF7FEFF 		bl	putc_bfd
 9730              	.LVL1259:
4674:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) break;			/* End of string */
 9731              		.loc 1 4674 0
 9732 0028 3178     		ldrb	r1, [r6]	@ zero_extendqisi2
 9733              	.LVL1260:
4675:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c != '%') {				/* Non escape character */
 9734              		.loc 1 4675 0
 9735 002a 0029     		cmp	r1, #0
 9736 002c F6D1     		bne	.L1289
 9737              	.LVL1261:
 9738              	.L1198:
4678:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
4679:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4680:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = f = 0;
4681:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = *fmt++;
4682:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '0') {				/* Flag: '0' padding */
4683:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
4684:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
4685:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c == '-') {			/* Flag: left justified */
4686:Middlewares/Third_Party/FatFs/src/ff.c **** 				f = 2; c = *fmt++;
4687:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4688:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4689:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (IsDigit(c)) {		/* Precision */
4690:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = w * 10 + c - '0';
4691:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = *fmt++;
4692:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4693:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 'l' || c == 'L') {	/* Prefix: Size is long int */
4694:Middlewares/Third_Party/FatFs/src/ff.c **** 			f |= 4; c = *fmt++;
4695:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4696:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!c) break;
4697:Middlewares/Third_Party/FatFs/src/ff.c **** 		d = c;
4698:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsLower(d)) d -= 0x20;
4699:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (d) {				/* Type is... */
4700:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'S' :					/* String */
4701:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = va_arg(arp, TCHAR*);
4702:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (j = 0; p[j]; j++) ;
4703:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(f & 2)) {
4704:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (j++ < w) putc_bfd(&pb, ' ');
4705:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4706:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (*p) putc_bfd(&pb, *p++);
4707:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (j++ < w) putc_bfd(&pb, ' ');
4708:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
4709:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'C' :					/* Character */
4710:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, (TCHAR)va_arg(arp, int)); continue;
4711:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'B' :					/* Binary */
4712:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 2; break;
ARM GAS  /tmp/ccVdKYyy.s 			page 284


4713:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'O' :					/* Octal */
4714:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 8; break;
4715:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'D' :					/* Signed decimal */
4716:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'U' :					/* Unsigned decimal */
4717:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 10; break;
4718:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'X' :					/* Hexdecimal */
4719:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 16; break;
4720:Middlewares/Third_Party/FatFs/src/ff.c **** 		default:					/* Unknown type (pass-through) */
4721:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, c); continue;
4722:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4723:Middlewares/Third_Party/FatFs/src/ff.c **** 
4724:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Get an argument and put it in numeral */
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 		v = (f & 4) ? (DWORD)va_arg(arp, long) : ((d == 'D') ? (DWORD)(long)va_arg(arp, int) : (DWORD)va_
4726:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
4727:Middlewares/Third_Party/FatFs/src/ff.c **** 			v = 0 - v;
4728:Middlewares/Third_Party/FatFs/src/ff.c **** 			f |= 8;
4729:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4730:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = 0;
4731:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
4732:Middlewares/Third_Party/FatFs/src/ff.c **** 			d = (TCHAR)(v % r); v /= r;
4733:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
4734:Middlewares/Third_Party/FatFs/src/ff.c **** 			s[i++] = d + '0';
4735:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (v && i < sizeof s / sizeof s[0]);
4736:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (f & 8) s[i++] = '-';
4737:Middlewares/Third_Party/FatFs/src/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
4738:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (!(f & 2) && j++ < w) putc_bfd(&pb, d);
4739:Middlewares/Third_Party/FatFs/src/ff.c **** 		do putc_bfd(&pb, s[--i]); while (i);
4740:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (j++ < w) putc_bfd(&pb, d);
4741:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4742:Middlewares/Third_Party/FatFs/src/ff.c **** 
4743:Middlewares/Third_Party/FatFs/src/ff.c **** 	va_end(arp);
4744:Middlewares/Third_Party/FatFs/src/ff.c **** 
4745:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   pb.idx >= 0		/* Flush buffered characters to the file */
 9739              		.loc 1 4745 0
 9740 002e 089A     		ldr	r2, [sp, #32]
 9741 0030 002A     		cmp	r2, #0
 9742 0032 C0F24F81 		blt	.L1239
4746:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& f_write(pb.fp, pb.buf, (UINT)pb.idx, &nw) == FR_OK
 9743              		.loc 1 4746 0
 9744 0036 02AB     		add	r3, sp, #8
 9745 0038 0AA9     		add	r1, sp, #40
 9746              	.LVL1262:
 9747 003a 0798     		ldr	r0, [sp, #28]
 9748 003c FFF7FEFF 		bl	f_write
 9749              	.LVL1263:
 9750 0040 0028     		cmp	r0, #0
 9751 0042 40F04781 		bne	.L1239
4747:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb.idx == nw) return pb.nchr;
 9752              		.loc 1 4747 0
 9753 0046 089A     		ldr	r2, [sp, #32]
 9754 0048 029B     		ldr	r3, [sp, #8]
 9755 004a 9A42     		cmp	r2, r3
 9756 004c 40F04281 		bne	.L1239
 9757              		.loc 1 4747 0 is_stmt 0 discriminator 1
 9758 0050 0998     		ldr	r0, [sp, #36]
4748:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
4749:Middlewares/Third_Party/FatFs/src/ff.c **** }
ARM GAS  /tmp/ccVdKYyy.s 			page 285


 9759              		.loc 1 4749 0 is_stmt 1 discriminator 1
 9760 0052 1BB0     		add	sp, sp, #108
 9761              	.LCFI157:
 9762              		.cfi_remember_state
 9763              		.cfi_def_cfa_offset 44
 9764              		@ sp needed
 9765 0054 BDE8F047 		pop	{r4, r5, r6, r7, r8, r9, r10, lr}
 9766              	.LCFI158:
 9767              		.cfi_restore 14
 9768              		.cfi_restore 10
 9769              		.cfi_restore 9
 9770              		.cfi_restore 8
 9771              		.cfi_restore 7
 9772              		.cfi_restore 6
 9773              		.cfi_restore 5
 9774              		.cfi_restore 4
 9775              		.cfi_def_cfa_offset 12
 9776 0058 03B0     		add	sp, sp, #12
 9777              	.LCFI159:
 9778              		.cfi_restore 3
 9779              		.cfi_restore 2
 9780              		.cfi_restore 1
 9781              		.cfi_def_cfa_offset 0
 9782 005a 7047     		bx	lr
 9783              	.LVL1264:
 9784              	.L1199:
 9785              	.LCFI160:
 9786              		.cfi_restore_state
4681:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '0') {				/* Flag: '0' padding */
 9787              		.loc 1 4681 0
 9788 005c 7178     		ldrb	r1, [r6, #1]	@ zero_extendqisi2
 9789              	.LVL1265:
4682:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
 9790              		.loc 1 4682 0
 9791 005e 3029     		cmp	r1, #48
 9792 0060 00F01C81 		beq	.L1290
4685:Middlewares/Third_Party/FatFs/src/ff.c **** 				f = 2; c = *fmt++;
 9793              		.loc 1 4685 0
 9794 0064 2D29     		cmp	r1, #45
 9795 0066 00F01D81 		beq	.L1203
4681:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '0') {				/* Flag: '0' padding */
 9796              		.loc 1 4681 0
 9797 006a 0236     		adds	r6, r6, #2
 9798              	.LVL1266:
4680:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = *fmt++;
 9799              		.loc 1 4680 0
 9800 006c 0027     		movs	r7, #0
 9801              	.LVL1267:
 9802              	.L1202:
4689:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = w * 10 + c - '0';
 9803              		.loc 1 4689 0
 9804 006e A1F13003 		sub	r3, r1, #48
 9805 0072 092B     		cmp	r3, #9
 9806 0074 4FF00004 		mov	r4, #0
 9807 0078 0BD8     		bhi	.L1204
 9808              	.LVL1268:
 9809              	.L1205:
ARM GAS  /tmp/ccVdKYyy.s 			page 286


4690:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = *fmt++;
 9810              		.loc 1 4690 0
 9811 007a 04EB8404 		add	r4, r4, r4, lsl #2
 9812              	.LVL1269:
 9813 007e 01EB4404 		add	r4, r1, r4, lsl #1
4691:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 9814              		.loc 1 4691 0
 9815 0082 16F8011B 		ldrb	r1, [r6], #1	@ zero_extendqisi2
 9816              	.LVL1270:
4689:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = w * 10 + c - '0';
 9817              		.loc 1 4689 0
 9818 0086 A1F13003 		sub	r3, r1, #48
 9819 008a 092B     		cmp	r3, #9
4690:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = *fmt++;
 9820              		.loc 1 4690 0
 9821 008c A4F13004 		sub	r4, r4, #48
 9822              	.LVL1271:
4689:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = w * 10 + c - '0';
 9823              		.loc 1 4689 0
 9824 0090 F3D9     		bls	.L1205
 9825              	.LVL1272:
 9826              	.L1204:
4693:Middlewares/Third_Party/FatFs/src/ff.c **** 			f |= 4; c = *fmt++;
 9827              		.loc 1 4693 0
 9828 0092 01F0DF03 		and	r3, r1, #223
 9829 0096 4C2B     		cmp	r3, #76
 9830 0098 27D0     		beq	.L1291
 9831              	.L1206:
 9832              	.LVL1273:
4696:Middlewares/Third_Party/FatFs/src/ff.c **** 		d = c;
 9833              		.loc 1 4696 0
 9834 009a 0029     		cmp	r1, #0
 9835 009c C7D0     		beq	.L1198
 9836              	.LVL1274:
4698:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (d) {				/* Type is... */
 9837              		.loc 1 4698 0
 9838 009e A1F16103 		sub	r3, r1, #97
 9839 00a2 192B     		cmp	r3, #25
 9840 00a4 9ABF     		itte	ls
 9841 00a6 A1F12003 		subls	r3, r1, #32
 9842 00aa DBB2     		uxtbls	r3, r3
 9843              	.LVL1275:
 9844 00ac 0B46     		movhi	r3, r1
 9845              	.LVL1276:
4699:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'S' :					/* String */
 9846              		.loc 1 4699 0
 9847 00ae A3F14202 		sub	r2, r3, #66
 9848 00b2 162A     		cmp	r2, #22
 9849 00b4 00F2EE80 		bhi	.L1208
 9850 00b8 DFE812F0 		tbh	[pc, r2, lsl #1]
 9851              	.L1210:
 9852 00bc E700     		.2byte	(.L1209-.L1210)/2
 9853 00be DF00     		.2byte	(.L1211-.L1210)/2
 9854 00c0 D100     		.2byte	(.L1212-.L1210)/2
 9855 00c2 EC00     		.2byte	(.L1208-.L1210)/2
 9856 00c4 EC00     		.2byte	(.L1208-.L1210)/2
 9857 00c6 EC00     		.2byte	(.L1208-.L1210)/2
ARM GAS  /tmp/ccVdKYyy.s 			page 287


 9858 00c8 EC00     		.2byte	(.L1208-.L1210)/2
 9859 00ca EC00     		.2byte	(.L1208-.L1210)/2
 9860 00cc EC00     		.2byte	(.L1208-.L1210)/2
 9861 00ce EC00     		.2byte	(.L1208-.L1210)/2
 9862 00d0 EC00     		.2byte	(.L1208-.L1210)/2
 9863 00d2 EC00     		.2byte	(.L1208-.L1210)/2
 9864 00d4 EC00     		.2byte	(.L1208-.L1210)/2
 9865 00d6 1C00     		.2byte	(.L1248-.L1210)/2
 9866 00d8 EC00     		.2byte	(.L1208-.L1210)/2
 9867 00da EC00     		.2byte	(.L1208-.L1210)/2
 9868 00dc EC00     		.2byte	(.L1208-.L1210)/2
 9869 00de 9000     		.2byte	(.L1214-.L1210)/2
 9870 00e0 EC00     		.2byte	(.L1208-.L1210)/2
 9871 00e2 D100     		.2byte	(.L1212-.L1210)/2
 9872 00e4 EC00     		.2byte	(.L1208-.L1210)/2
 9873 00e6 EC00     		.2byte	(.L1208-.L1210)/2
 9874 00e8 8700     		.2byte	(.L1215-.L1210)/2
 9875              	.LVL1277:
 9876              		.p2align 1
 9877              	.L1291:
4694:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 9878              		.loc 1 4694 0
 9879 00ea 3178     		ldrb	r1, [r6]	@ zero_extendqisi2
 9880              	.LVL1278:
 9881 00ec 47F00407 		orr	r7, r7, #4
 9882              	.LVL1279:
 9883 00f0 0136     		adds	r6, r6, #1
 9884              	.LVL1280:
 9885 00f2 D2E7     		b	.L1206
 9886              	.LVL1281:
 9887              	.L1248:
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 9888              		.loc 1 4725 0
 9889 00f4 7807     		lsls	r0, r7, #29
4699:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'S' :					/* String */
 9890              		.loc 1 4699 0
 9891 00f6 4FF00808 		mov	r8, #8
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 9892              		.loc 1 4725 0
 9893 00fa 00F1B580 		bmi	.L1292
 9894              	.L1224:
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 9895              		.loc 1 4725 0 is_stmt 0 discriminator 2
 9896 00fe 442B     		cmp	r3, #68
 9897 0100 67D1     		bne	.L1227
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 9898              		.loc 1 4725 0
 9899 0102 019B     		ldr	r3, [sp, #4]
 9900              	.LVL1282:
 9901 0104 1A1D     		adds	r2, r3, #4
 9902              	.LVL1283:
 9903 0106 1868     		ldr	r0, [r3]
 9904              	.LVL1284:
 9905 0108 0192     		str	r2, [sp, #4]
 9906              	.L1225:
4726:Middlewares/Third_Party/FatFs/src/ff.c **** 			v = 0 - v;
 9907              		.loc 1 4726 0 is_stmt 1 discriminator 1
ARM GAS  /tmp/ccVdKYyy.s 			page 288


 9908 010a 0028     		cmp	r0, #0
4727:Middlewares/Third_Party/FatFs/src/ff.c **** 			f |= 8;
 9909              		.loc 1 4727 0 discriminator 1
 9910 010c BCBF     		itt	lt
 9911 010e 4042     		rsblt	r0, r0, #0
 9912              	.LVL1285:
4728:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 9913              		.loc 1 4728 0 discriminator 1
 9914 0110 47F00807 		orrlt	r7, r7, #8
 9915              	.LVL1286:
 9916              	.L1226:
 9917 0114 7829     		cmp	r1, #120
 9918 0116 0CBF     		ite	eq
 9919 0118 4FF02709 		moveq	r9, #39
 9920 011c 4FF00709 		movne	r9, #7
 9921 0120 0DF10B0C 		add	ip, sp, #11
4730:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 9922              		.loc 1 4730 0
 9923 0124 4FF0000E 		mov	lr, #0
 9924 0128 00E0     		b	.L1230
 9925              	.LVL1287:
 9926              	.L1253:
 9927 012a AE46     		mov	lr, r5
 9928              	.LVL1288:
 9929              	.L1230:
4732:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 9930              		.loc 1 4732 0
 9931 012c B0FBF8F2 		udiv	r2, r0, r8
 9932 0130 08FB1201 		mls	r1, r8, r2, r0
 9933 0134 CBB2     		uxtb	r3, r1
 9934              	.LVL1289:
4733:Middlewares/Third_Party/FatFs/src/ff.c **** 			s[i++] = d + '0';
 9935              		.loc 1 4733 0
 9936 0136 0929     		cmp	r1, #9
 9937 0138 84BF     		itt	hi
 9938 013a 4B44     		addhi	r3, r3, r9
 9939              	.LVL1290:
 9940 013c DBB2     		uxtbhi	r3, r3
4734:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (v && i < sizeof s / sizeof s[0]);
 9941              		.loc 1 4734 0
 9942 013e 3033     		adds	r3, r3, #48
4732:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 9943              		.loc 1 4732 0
 9944 0140 1046     		mov	r0, r2
 9945              	.LVL1291:
4734:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (v && i < sizeof s / sizeof s[0]);
 9946              		.loc 1 4734 0
 9947 0142 0CF8013F 		strb	r3, [ip, #1]!
 9948 0146 0EF10105 		add	r5, lr, #1
 9949              	.LVL1292:
4735:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (f & 8) s[i++] = '-';
 9950              		.loc 1 4735 0
 9951 014a 1AB1     		cbz	r2, .L1229
4735:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (f & 8) s[i++] = '-';
 9952              		.loc 1 4735 0 is_stmt 0 discriminator 1
 9953 014c 102D     		cmp	r5, #16
 9954 014e ECD1     		bne	.L1253
ARM GAS  /tmp/ccVdKYyy.s 			page 289


 9955 0150 4FF00F0E 		mov	lr, #15
 9956              	.L1229:
4736:Middlewares/Third_Party/FatFs/src/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
 9957              		.loc 1 4736 0 is_stmt 1
 9958 0154 3A07     		lsls	r2, r7, #28
 9959 0156 06D5     		bpl	.L1231
 9960              	.LVL1293:
4736:Middlewares/Third_Party/FatFs/src/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
 9961              		.loc 1 4736 0 is_stmt 0 discriminator 1
 9962 0158 1AAB     		add	r3, sp, #104
 9963 015a 2B44     		add	r3, r3, r5
 9964 015c 2D22     		movs	r2, #45
 9965 015e 0EF10205 		add	r5, lr, #2
 9966              	.LVL1294:
 9967 0162 03F85C2C 		strb	r2, [r3, #-92]
 9968              	.L1231:
 9969              	.LVL1295:
4737:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (!(f & 2) && j++ < w) putc_bfd(&pb, d);
 9970              		.loc 1 4737 0 is_stmt 1
 9971 0166 17F0010F 		tst	r7, #1
 9972 016a 0CBF     		ite	eq
 9973 016c 4FF02009 		moveq	r9, #32
 9974 0170 4FF03009 		movne	r9, #48
 9975              	.LVL1296:
4738:Middlewares/Third_Party/FatFs/src/ff.c **** 		do putc_bfd(&pb, s[--i]); while (i);
 9976              		.loc 1 4738 0
 9977 0174 BB07     		lsls	r3, r7, #30
 9978 0176 00F19C80 		bmi	.L1255
 9979 017a A542     		cmp	r5, r4
 9980 017c 05F10108 		add	r8, r5, #1
 9981              	.LVL1297:
 9982 0180 80F09880 		bcs	.L1285
 9983 0184 04F1010A 		add	r10, r4, #1
 9984 0188 07AF     		add	r7, sp, #28
 9985              	.LVL1298:
 9986              	.L1234:
4738:Middlewares/Third_Party/FatFs/src/ff.c **** 		do putc_bfd(&pb, s[--i]); while (i);
 9987              		.loc 1 4738 0 is_stmt 0 discriminator 3
 9988 018a 08F10108 		add	r8, r8, #1
 9989              	.LVL1299:
 9990 018e 4946     		mov	r1, r9
 9991 0190 3846     		mov	r0, r7
 9992 0192 FFF7FEFF 		bl	putc_bfd
 9993              	.LVL1300:
 9994 0196 D045     		cmp	r8, r10
 9995 0198 F7D1     		bne	.L1234
 9996              	.L1233:
 9997 019a 0DF10C0A 		add	r10, sp, #12
 9998 019e 5544     		add	r5, r5, r10
 9999              	.LVL1301:
 10000              	.L1235:
4739:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (j++ < w) putc_bfd(&pb, d);
 10001              		.loc 1 4739 0 is_stmt 1 discriminator 1
 10002 01a0 15F8011D 		ldrb	r1, [r5, #-1]!	@ zero_extendqisi2
 10003              	.LVL1302:
 10004 01a4 3846     		mov	r0, r7
 10005 01a6 FFF7FEFF 		bl	putc_bfd
ARM GAS  /tmp/ccVdKYyy.s 			page 290


 10006              	.LVL1303:
 10007 01aa 5545     		cmp	r5, r10
 10008 01ac F8D1     		bne	.L1235
 10009              	.LVL1304:
4740:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 10010              		.loc 1 4740 0 discriminator 1
 10011 01ae A045     		cmp	r8, r4
 10012 01b0 08F10105 		add	r5, r8, #1
 10013              	.LVL1305:
 10014 01b4 BFF430AF 		bcs	.L1197
 10015 01b8 0134     		adds	r4, r4, #1
 10016              	.L1236:
4740:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 10017              		.loc 1 4740 0 is_stmt 0 discriminator 2
 10018 01ba 0135     		adds	r5, r5, #1
 10019              	.LVL1306:
 10020 01bc 4946     		mov	r1, r9
 10021 01be 3846     		mov	r0, r7
 10022 01c0 FFF7FEFF 		bl	putc_bfd
 10023              	.LVL1307:
 10024 01c4 A542     		cmp	r5, r4
 10025 01c6 F8D1     		bne	.L1236
 10026 01c8 26E7     		b	.L1197
 10027              	.LVL1308:
 10028              	.L1215:
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 10029              		.loc 1 4725 0 is_stmt 1
 10030 01ca 7A07     		lsls	r2, r7, #29
 10031 01cc 74D4     		bmi	.L1243
 10032 01ce 4FF01008 		mov	r8, #16
 10033              	.LVL1309:
 10034              	.L1227:
 10035 01d2 019B     		ldr	r3, [sp, #4]
 10036 01d4 1A1D     		adds	r2, r3, #4
 10037 01d6 0192     		str	r2, [sp, #4]
 10038 01d8 1868     		ldr	r0, [r3]
 10039 01da 9BE7     		b	.L1226
 10040              	.LVL1310:
 10041              	.L1214:
4701:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (j = 0; p[j]; j++) ;
 10042              		.loc 1 4701 0
 10043 01dc 019B     		ldr	r3, [sp, #4]
 10044              	.LVL1311:
 10045 01de D3F80080 		ldr	r8, [r3]
 10046              	.LVL1312:
4702:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(f & 2)) {
 10047              		.loc 1 4702 0
 10048 01e2 98F80010 		ldrb	r1, [r8]	@ zero_extendqisi2
 10049              	.LVL1313:
4701:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (j = 0; p[j]; j++) ;
 10050              		.loc 1 4701 0
 10051 01e6 0433     		adds	r3, r3, #4
 10052 01e8 0193     		str	r3, [sp, #4]
4702:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(f & 2)) {
 10053              		.loc 1 4702 0
 10054 01ea 0029     		cmp	r1, #0
 10055 01ec 79D0     		beq	.L1216
ARM GAS  /tmp/ccVdKYyy.s 			page 291


 10056 01ee 4346     		mov	r3, r8
4702:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(f & 2)) {
 10057              		.loc 1 4702 0 is_stmt 0 discriminator 3
 10058 01f0 0025     		movs	r5, #0
 10059 01f2 00E0     		b	.L1217
 10060              	.LVL1314:
 10061              	.L1249:
4702:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(f & 2)) {
 10062              		.loc 1 4702 0
 10063 01f4 4D46     		mov	r5, r9
 10064              	.LVL1315:
 10065              	.L1217:
4702:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(f & 2)) {
 10066              		.loc 1 4702 0 discriminator 3
 10067 01f6 13F8012F 		ldrb	r2, [r3, #1]!	@ zero_extendqisi2
 10068 01fa 05F10109 		add	r9, r5, #1
 10069              	.LVL1316:
 10070 01fe 002A     		cmp	r2, #0
 10071 0200 F8D1     		bne	.L1249
4703:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (j++ < w) putc_bfd(&pb, ' ');
 10072              		.loc 1 4703 0 is_stmt 1
 10073 0202 BF07     		lsls	r7, r7, #30
 10074              	.LVL1317:
 10075 0204 52D4     		bmi	.L1293
4704:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10076              		.loc 1 4704 0
 10077 0206 A145     		cmp	r9, r4
 10078 0208 05F1020A 		add	r10, r5, #2
 10079 020c 05F10305 		add	r5, r5, #3
 10080              	.LVL1318:
 10081 0210 6CD2     		bcs	.L1294
 10082              	.LVL1319:
 10083              	.L1245:
 10084 0212 07AF     		add	r7, sp, #28
 10085 0214 00E0     		b	.L1220
 10086              	.LVL1320:
 10087              	.L1251:
 10088 0216 CA46     		mov	r10, r9
 10089              	.LVL1321:
 10090              	.L1220:
4704:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10091              		.loc 1 4704 0 is_stmt 0 discriminator 2
 10092 0218 2021     		movs	r1, #32
 10093 021a 3846     		mov	r0, r7
 10094 021c FFF7FEFF 		bl	putc_bfd
 10095              	.LVL1322:
 10096 0220 5445     		cmp	r4, r10
 10097 0222 0AF10109 		add	r9, r10, #1
 10098              	.LVL1323:
 10099 0226 F6D8     		bhi	.L1251
 10100 0228 98F80010 		ldrb	r1, [r8]	@ zero_extendqisi2
 10101 022c 0AF10205 		add	r5, r10, #2
 10102              	.LVL1324:
4706:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (j++ < w) putc_bfd(&pb, ' ');
 10103              		.loc 1 4706 0 is_stmt 1
 10104 0230 31B1     		cbz	r1, .L1221
 10105              	.LVL1325:
ARM GAS  /tmp/ccVdKYyy.s 			page 292


 10106              	.L1222:
4706:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (j++ < w) putc_bfd(&pb, ' ');
 10107              		.loc 1 4706 0 is_stmt 0 discriminator 2
 10108 0232 3846     		mov	r0, r7
 10109 0234 FFF7FEFF 		bl	putc_bfd
 10110              	.LVL1326:
 10111 0238 18F8011F 		ldrb	r1, [r8, #1]!	@ zero_extendqisi2
 10112              	.LVL1327:
 10113 023c 0029     		cmp	r1, #0
 10114 023e F8D1     		bne	.L1222
 10115              	.LVL1328:
 10116              	.L1221:
4707:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
 10117              		.loc 1 4707 0 is_stmt 1 discriminator 1
 10118 0240 4C45     		cmp	r4, r9
 10119 0242 7FF6E9AE 		bls	.L1197
 10120 0246 07AF     		add	r7, sp, #28
 10121 0248 00E0     		b	.L1223
 10122              	.LVL1329:
 10123              	.L1252:
4707:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
 10124              		.loc 1 4707 0 is_stmt 0
 10125 024a 1D46     		mov	r5, r3
 10126              	.LVL1330:
 10127              	.L1223:
4707:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
 10128              		.loc 1 4707 0 discriminator 2
 10129 024c 2021     		movs	r1, #32
 10130 024e 3846     		mov	r0, r7
 10131 0250 FFF7FEFF 		bl	putc_bfd
 10132              	.LVL1331:
 10133 0254 A542     		cmp	r5, r4
 10134 0256 05F10103 		add	r3, r5, #1
 10135              	.LVL1332:
 10136 025a F6D3     		bcc	.L1252
 10137 025c DCE6     		b	.L1197
 10138              	.LVL1333:
 10139              	.L1212:
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 10140              		.loc 1 4725 0 is_stmt 1
 10141 025e 7807     		lsls	r0, r7, #29
4699:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'S' :					/* String */
 10142              		.loc 1 4699 0
 10143 0260 4FF00A08 		mov	r8, #10
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 10144              		.loc 1 4725 0
 10145 0264 7FF54BAF 		bpl	.L1224
 10146              	.L1292:
 10147 0268 019A     		ldr	r2, [sp, #4]
4726:Middlewares/Third_Party/FatFs/src/ff.c **** 			v = 0 - v;
 10148              		.loc 1 4726 0
 10149 026a 442B     		cmp	r3, #68
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 10150              		.loc 1 4725 0
 10151 026c 02F10400 		add	r0, r2, #4
 10152 0270 0190     		str	r0, [sp, #4]
 10153 0272 1068     		ldr	r0, [r2]
ARM GAS  /tmp/ccVdKYyy.s 			page 293


 10154              	.LVL1334:
4726:Middlewares/Third_Party/FatFs/src/ff.c **** 			v = 0 - v;
 10155              		.loc 1 4726 0
 10156 0274 3FF449AF 		beq	.L1225
 10157 0278 4CE7     		b	.L1226
 10158              	.LVL1335:
 10159              	.L1211:
4710:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'B' :					/* Binary */
 10160              		.loc 1 4710 0
 10161 027a 019B     		ldr	r3, [sp, #4]
 10162              	.LVL1336:
 10163 027c 07A8     		add	r0, sp, #28
 10164 027e 1A1D     		adds	r2, r3, #4
 10165              	.LVL1337:
 10166 0280 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 10167              	.LVL1338:
 10168 0282 0192     		str	r2, [sp, #4]
 10169 0284 FFF7FEFF 		bl	putc_bfd
 10170              	.LVL1339:
 10171 0288 C6E6     		b	.L1197
 10172              	.LVL1340:
 10173              	.L1209:
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 10174              		.loc 1 4725 0
 10175 028a 7B07     		lsls	r3, r7, #29
 10176              	.LVL1341:
 10177 028c 1BD4     		bmi	.L1244
 10178 028e 4FF00208 		mov	r8, #2
 10179 0292 9EE7     		b	.L1227
 10180              	.LVL1342:
 10181              	.L1208:
4721:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10182              		.loc 1 4721 0
 10183 0294 07A8     		add	r0, sp, #28
 10184 0296 FFF7FEFF 		bl	putc_bfd
 10185              	.LVL1343:
 10186 029a BDE6     		b	.L1197
 10187              	.LVL1344:
 10188              	.L1290:
4683:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 10189              		.loc 1 4683 0
 10190 029c B178     		ldrb	r1, [r6, #2]	@ zero_extendqisi2
 10191              	.LVL1345:
 10192 029e 0127     		movs	r7, #1
 10193 02a0 0336     		adds	r6, r6, #3
 10194              	.LVL1346:
 10195 02a2 E4E6     		b	.L1202
 10196              	.LVL1347:
 10197              	.L1203:
4686:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10198              		.loc 1 4686 0
 10199 02a4 B178     		ldrb	r1, [r6, #2]	@ zero_extendqisi2
 10200              	.LVL1348:
 10201 02a6 0227     		movs	r7, #2
 10202 02a8 0336     		adds	r6, r6, #3
 10203              	.LVL1349:
 10204 02aa E0E6     		b	.L1202
ARM GAS  /tmp/ccVdKYyy.s 			page 294


 10205              	.LVL1350:
 10206              	.L1293:
 10207 02ac 0235     		adds	r5, r5, #2
 10208 02ae 07AF     		add	r7, sp, #28
 10209 02b0 BFE7     		b	.L1222
 10210              	.LVL1351:
 10211              	.L1255:
4738:Middlewares/Third_Party/FatFs/src/ff.c **** 		do putc_bfd(&pb, s[--i]); while (i);
 10212              		.loc 1 4738 0
 10213 02b2 A846     		mov	r8, r5
 10214              	.LVL1352:
 10215              	.L1285:
 10216 02b4 07AF     		add	r7, sp, #28
 10217              	.LVL1353:
 10218 02b6 70E7     		b	.L1233
 10219              	.LVL1354:
 10220              	.L1243:
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 10221              		.loc 1 4725 0
 10222 02b8 019B     		ldr	r3, [sp, #4]
 10223              	.LVL1355:
 10224 02ba 1A1D     		adds	r2, r3, #4
 10225 02bc 0192     		str	r2, [sp, #4]
 10226 02be 1868     		ldr	r0, [r3]
 10227              	.LVL1356:
 10228 02c0 4FF01008 		mov	r8, #16
 10229 02c4 26E7     		b	.L1226
 10230              	.LVL1357:
 10231              	.L1244:
 10232 02c6 019B     		ldr	r3, [sp, #4]
 10233 02c8 1A1D     		adds	r2, r3, #4
 10234 02ca 0192     		str	r2, [sp, #4]
 10235 02cc 1868     		ldr	r0, [r3]
 10236              	.LVL1358:
 10237 02ce 4FF00208 		mov	r8, #2
 10238 02d2 1FE7     		b	.L1226
 10239              	.LVL1359:
 10240              	.L1239:
4748:Middlewares/Third_Party/FatFs/src/ff.c **** }
 10241              		.loc 1 4748 0
 10242 02d4 4FF0FF30 		mov	r0, #-1
 10243              		.loc 1 4749 0
 10244 02d8 1BB0     		add	sp, sp, #108
 10245              	.LCFI161:
 10246              		.cfi_remember_state
 10247              		.cfi_def_cfa_offset 44
 10248              		@ sp needed
 10249 02da BDE8F047 		pop	{r4, r5, r6, r7, r8, r9, r10, lr}
 10250              	.LCFI162:
 10251              		.cfi_restore 4
 10252              		.cfi_restore 5
 10253              		.cfi_restore 6
 10254              		.cfi_restore 7
 10255              		.cfi_restore 8
 10256              		.cfi_restore 9
 10257              		.cfi_restore 10
 10258              		.cfi_restore 14
ARM GAS  /tmp/ccVdKYyy.s 			page 295


 10259              		.cfi_def_cfa_offset 12
 10260 02de 03B0     		add	sp, sp, #12
 10261              	.LCFI163:
 10262              		.cfi_restore 1
 10263              		.cfi_restore 2
 10264              		.cfi_restore 3
 10265              		.cfi_def_cfa_offset 0
 10266 02e0 7047     		bx	lr
 10267              	.LVL1360:
 10268              	.L1216:
 10269              	.LCFI164:
 10270              		.cfi_restore_state
4703:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (j++ < w) putc_bfd(&pb, ' ');
 10271              		.loc 1 4703 0
 10272 02e2 B807     		lsls	r0, r7, #30
 10273 02e4 05D5     		bpl	.L1242
4702:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(f & 2)) {
 10274              		.loc 1 4702 0
 10275 02e6 8946     		mov	r9, r1
4703:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (j++ < w) putc_bfd(&pb, ' ');
 10276              		.loc 1 4703 0
 10277 02e8 0125     		movs	r5, #1
 10278 02ea A9E7     		b	.L1221
 10279              	.LVL1361:
 10280              	.L1294:
4704:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10281              		.loc 1 4704 0
 10282 02ec D146     		mov	r9, r10
 10283              	.LVL1362:
 10284 02ee 07AF     		add	r7, sp, #28
 10285 02f0 9FE7     		b	.L1222
 10286              	.LVL1363:
 10287              	.L1242:
 10288 02f2 4FF0010A 		mov	r10, #1
 10289 02f6 002C     		cmp	r4, #0
 10290 02f8 8BD1     		bne	.L1245
 10291 02fa 8DE6     		b	.L1197
 10292              		.cfi_endproc
 10293              	.LFE183:
 10295              		.section	.bss.FatFs,"aw",%nobits
 10296              		.align	2
 10297              		.set	.LANCHOR1,. + 0
 10300              	FatFs:
 10301 0000 00000000 		.space	4
 10302              		.section	.bss.Files,"aw",%nobits
 10303              		.align	2
 10304              		.set	.LANCHOR0,. + 0
 10307              	Files:
 10308 0000 00000000 		.space	24
 10308      00000000 
 10308      00000000 
 10308      00000000 
 10308      00000000 
 10309              		.section	.bss.Fsid,"aw",%nobits
 10310              		.align	1
 10311              		.set	.LANCHOR2,. + 0
 10314              	Fsid:
ARM GAS  /tmp/ccVdKYyy.s 			page 296


 10315 0000 0000     		.space	2
 10316              		.section	.rodata.ExCvt,"a",%progbits
 10317              		.align	2
 10318              		.set	.LANCHOR3,. + 0
 10321              	ExCvt:
 10322 0000 80       		.byte	-128
 10323 0001 81       		.byte	-127
 10324 0002 82       		.byte	-126
 10325 0003 83       		.byte	-125
 10326 0004 84       		.byte	-124
 10327 0005 85       		.byte	-123
 10328 0006 86       		.byte	-122
 10329 0007 87       		.byte	-121
 10330 0008 88       		.byte	-120
 10331 0009 89       		.byte	-119
 10332 000a 8A       		.byte	-118
 10333 000b 8B       		.byte	-117
 10334 000c 8C       		.byte	-116
 10335 000d 8D       		.byte	-115
 10336 000e 8E       		.byte	-114
 10337 000f 8F       		.byte	-113
 10338 0010 90       		.byte	-112
 10339 0011 91       		.byte	-111
 10340 0012 92       		.byte	-110
 10341 0013 93       		.byte	-109
 10342 0014 94       		.byte	-108
 10343 0015 95       		.byte	-107
 10344 0016 96       		.byte	-106
 10345 0017 97       		.byte	-105
 10346 0018 98       		.byte	-104
 10347 0019 99       		.byte	-103
 10348 001a AD       		.byte	-83
 10349 001b 9B       		.byte	-101
 10350 001c 8C       		.byte	-116
 10351 001d 9D       		.byte	-99
 10352 001e AE       		.byte	-82
 10353 001f 9F       		.byte	-97
 10354 0020 A0       		.byte	-96
 10355 0021 21       		.byte	33
 10356 0022 A2       		.byte	-94
 10357 0023 A3       		.byte	-93
 10358 0024 A4       		.byte	-92
 10359 0025 A5       		.byte	-91
 10360 0026 A6       		.byte	-90
 10361 0027 A7       		.byte	-89
 10362 0028 A8       		.byte	-88
 10363 0029 A9       		.byte	-87
 10364 002a AA       		.byte	-86
 10365 002b AB       		.byte	-85
 10366 002c AC       		.byte	-84
 10367 002d AD       		.byte	-83
 10368 002e AE       		.byte	-82
 10369 002f AF       		.byte	-81
 10370 0030 B0       		.byte	-80
 10371 0031 B1       		.byte	-79
 10372 0032 B2       		.byte	-78
 10373 0033 B3       		.byte	-77
ARM GAS  /tmp/ccVdKYyy.s 			page 297


 10374 0034 B4       		.byte	-76
 10375 0035 B5       		.byte	-75
 10376 0036 B6       		.byte	-74
 10377 0037 B7       		.byte	-73
 10378 0038 B8       		.byte	-72
 10379 0039 B9       		.byte	-71
 10380 003a BA       		.byte	-70
 10381 003b BB       		.byte	-69
 10382 003c BC       		.byte	-68
 10383 003d BD       		.byte	-67
 10384 003e BE       		.byte	-66
 10385 003f BF       		.byte	-65
 10386 0040 C0       		.byte	-64
 10387 0041 C1       		.byte	-63
 10388 0042 C2       		.byte	-62
 10389 0043 C3       		.byte	-61
 10390 0044 C4       		.byte	-60
 10391 0045 C5       		.byte	-59
 10392 0046 C6       		.byte	-58
 10393 0047 C7       		.byte	-57
 10394 0048 C8       		.byte	-56
 10395 0049 C9       		.byte	-55
 10396 004a CA       		.byte	-54
 10397 004b CB       		.byte	-53
 10398 004c CC       		.byte	-52
 10399 004d CD       		.byte	-51
 10400 004e CE       		.byte	-50
 10401 004f CF       		.byte	-49
 10402 0050 D0       		.byte	-48
 10403 0051 D1       		.byte	-47
 10404 0052 D2       		.byte	-46
 10405 0053 D3       		.byte	-45
 10406 0054 D4       		.byte	-44
 10407 0055 D5       		.byte	-43
 10408 0056 D6       		.byte	-42
 10409 0057 D7       		.byte	-41
 10410 0058 D8       		.byte	-40
 10411 0059 D9       		.byte	-39
 10412 005a DA       		.byte	-38
 10413 005b DB       		.byte	-37
 10414 005c DC       		.byte	-36
 10415 005d DD       		.byte	-35
 10416 005e DE       		.byte	-34
 10417 005f DF       		.byte	-33
 10418 0060 C0       		.byte	-64
 10419 0061 C1       		.byte	-63
 10420 0062 C2       		.byte	-62
 10421 0063 C3       		.byte	-61
 10422 0064 C4       		.byte	-60
 10423 0065 C5       		.byte	-59
 10424 0066 C6       		.byte	-58
 10425 0067 C7       		.byte	-57
 10426 0068 C8       		.byte	-56
 10427 0069 C9       		.byte	-55
 10428 006a CA       		.byte	-54
 10429 006b CB       		.byte	-53
 10430 006c CC       		.byte	-52
ARM GAS  /tmp/ccVdKYyy.s 			page 298


 10431 006d CD       		.byte	-51
 10432 006e CE       		.byte	-50
 10433 006f CF       		.byte	-49
 10434 0070 D0       		.byte	-48
 10435 0071 D1       		.byte	-47
 10436 0072 D2       		.byte	-46
 10437 0073 D3       		.byte	-45
 10438 0074 D4       		.byte	-44
 10439 0075 D5       		.byte	-43
 10440 0076 D6       		.byte	-42
 10441 0077 F7       		.byte	-9
 10442 0078 D8       		.byte	-40
 10443 0079 D9       		.byte	-39
 10444 007a DA       		.byte	-38
 10445 007b DB       		.byte	-37
 10446 007c DC       		.byte	-36
 10447 007d DD       		.byte	-35
 10448 007e DE       		.byte	-34
 10449 007f 9F       		.byte	-97
 10450              		.section	.rodata.cst.9515,"a",%progbits
 10451              		.align	2
 10452              		.set	.LANCHOR5,. + 0
 10455              	cst.9515:
 10456 0000 0080     		.short	-32768
 10457 0002 0040     		.short	16384
 10458 0004 0020     		.short	8192
 10459 0006 0010     		.short	4096
 10460 0008 0008     		.short	2048
 10461 000a 0040     		.short	16384
 10462 000c 0020     		.short	8192
 10463 000e 0010     		.short	4096
 10464 0010 0008     		.short	2048
 10465 0012 0004     		.short	1024
 10466 0014 0002     		.short	512
 10467              		.section	.rodata.f_mkfs.str1.4,"aMS",%progbits,1
 10468              		.align	2
 10469              	.LC1:
 10470 0000 EBFE904D 		.ascii	"\353\376\220MSDOS5.0\000"
 10470      53444F53 
 10470      352E3000 
 10471              	.LC2:
 10472 000c 4E4F204E 		.ascii	"NO NAME    FAT32   \000"
 10472      414D4520 
 10472      20202046 
 10472      41543332 
 10472      20202000 
 10473              	.LC3:
 10474 0020 4E4F204E 		.ascii	"NO NAME    FAT     \000"
 10474      414D4520 
 10474      20202046 
 10474      41542020 
 10474      20202000 
 10475              		.section	.rodata.follow_path.str1.4,"aMS",%progbits,1
 10476              		.align	2
 10477              	.LC0:
 10478 0000 222A2B2C 		.ascii	"\"*+,:;<=>?[]|\177\000"
 10478      3A3B3C3D 
ARM GAS  /tmp/ccVdKYyy.s 			page 299


 10478      3E3F5B5D 
 10478      7C7F00
 10479              		.section	.rodata.vst.9514,"a",%progbits
 10480              		.align	2
 10481              		.set	.LANCHOR4,. + 0
 10484              	vst.9514:
 10485 0000 0004     		.short	1024
 10486 0002 0002     		.short	512
 10487 0004 0001     		.short	256
 10488 0006 8000     		.short	128
 10489 0008 4000     		.short	64
 10490 000a 2000     		.short	32
 10491 000c 1000     		.short	16
 10492 000e 0800     		.short	8
 10493 0010 0400     		.short	4
 10494 0012 0200     		.short	2
 10495 0014 0000     		.short	0
 10496              		.text
 10497              	.Letext0:
 10498              		.file 2 "Middlewares/Third_Party/FatFs/src/integer.h"
 10499              		.file 3 "/usr/arm-none-eabi/include/machine/_default_types.h"
 10500              		.file 4 "/usr/arm-none-eabi/include/sys/_stdint.h"
 10501              		.file 5 "Drivers/CMSIS/Include/core_cm4.h"
 10502              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 10503              		.file 7 "/usr/lib/gcc/arm-none-eabi/6.3.0/include/stdarg.h"
 10504              		.file 8 "/usr/arm-none-eabi/include/sys/lock.h"
 10505              		.file 9 "/usr/arm-none-eabi/include/sys/_types.h"
 10506              		.file 10 "/usr/lib/gcc/arm-none-eabi/6.3.0/include/stddef.h"
 10507              		.file 11 "/usr/arm-none-eabi/include/sys/reent.h"
 10508              		.file 12 "<built-in>"
 10509              		.file 13 "Middlewares/Third_Party/FatFs/src/ff.h"
 10510              		.file 14 "Middlewares/Third_Party/FatFs/src/diskio.h"
ARM GAS  /tmp/ccVdKYyy.s 			page 300


DEFINED SYMBOLS
                            *ABS*:0000000000000000 ff.c
     /tmp/ccVdKYyy.s:18     .text.chk_lock:0000000000000000 $t
     /tmp/ccVdKYyy.s:25     .text.chk_lock:0000000000000000 chk_lock
     /tmp/ccVdKYyy.s:157    .text.chk_lock:000000000000006c $d
     /tmp/ccVdKYyy.s:162    .text.inc_lock:0000000000000000 $t
     /tmp/ccVdKYyy.s:169    .text.inc_lock:0000000000000000 inc_lock
     /tmp/ccVdKYyy.s:330    .text.inc_lock:00000000000000ac $d
     /tmp/ccVdKYyy.s:335    .text.get_ldnumber:0000000000000000 $t
     /tmp/ccVdKYyy.s:342    .text.get_ldnumber:0000000000000000 get_ldnumber
     /tmp/ccVdKYyy.s:445    .text.validate:0000000000000000 $t
     /tmp/ccVdKYyy.s:452    .text.validate:0000000000000000 validate
     /tmp/ccVdKYyy.s:513    .text.get_fileinfo.isra.2:0000000000000000 $t
     /tmp/ccVdKYyy.s:520    .text.get_fileinfo.isra.2:0000000000000000 get_fileinfo.isra.2
     /tmp/ccVdKYyy.s:613    .text.sync_window.part.4:0000000000000000 $t
     /tmp/ccVdKYyy.s:620    .text.sync_window.part.4:0000000000000000 sync_window.part.4
     /tmp/ccVdKYyy.s:699    .text.move_window:0000000000000000 $t
     /tmp/ccVdKYyy.s:706    .text.move_window:0000000000000000 move_window
     /tmp/ccVdKYyy.s:781    .text.sync_fs:0000000000000000 $t
     /tmp/ccVdKYyy.s:788    .text.sync_fs:0000000000000000 sync_fs
     /tmp/ccVdKYyy.s:950    .text.check_fs:0000000000000000 $t
     /tmp/ccVdKYyy.s:957    .text.check_fs:0000000000000000 check_fs
     /tmp/ccVdKYyy.s:1024   .text.check_fs:0000000000000054 $d
     /tmp/ccVdKYyy.s:1029   .text.find_volume:0000000000000000 $t
     /tmp/ccVdKYyy.s:1036   .text.find_volume:0000000000000000 find_volume
     /tmp/ccVdKYyy.s:1601   .text.find_volume:00000000000002cc $d
     /tmp/ccVdKYyy.s:1609   .text.get_fat.part.6:0000000000000000 $t
     /tmp/ccVdKYyy.s:1616   .text.get_fat.part.6:0000000000000000 get_fat.part.6
     /tmp/ccVdKYyy.s:1758   .text.dir_sdi:0000000000000000 $t
     /tmp/ccVdKYyy.s:1765   .text.dir_sdi:0000000000000000 dir_sdi
     /tmp/ccVdKYyy.s:1940   .text.dir_remove:0000000000000000 $t
     /tmp/ccVdKYyy.s:1947   .text.dir_remove:0000000000000000 dir_remove
     /tmp/ccVdKYyy.s:2020   .text.put_fat.part.8:0000000000000000 $t
     /tmp/ccVdKYyy.s:2027   .text.put_fat.part.8:0000000000000000 put_fat.part.8
     /tmp/ccVdKYyy.s:2231   .text.create_chain:0000000000000000 $t
     /tmp/ccVdKYyy.s:2238   .text.create_chain:0000000000000000 create_chain
     /tmp/ccVdKYyy.s:2452   .text.dir_next:0000000000000000 $t
     /tmp/ccVdKYyy.s:2459   .text.dir_next:0000000000000000 dir_next
     /tmp/ccVdKYyy.s:2754   .text.follow_path:0000000000000000 $t
     /tmp/ccVdKYyy.s:2761   .text.follow_path:0000000000000000 follow_path
     /tmp/ccVdKYyy.s:3181   .text.follow_path:0000000000000204 $d
     /tmp/ccVdKYyy.s:3187   .text.remove_chain.part.10:0000000000000000 $t
     /tmp/ccVdKYyy.s:3194   .text.remove_chain.part.10:0000000000000000 remove_chain.part.10
     /tmp/ccVdKYyy.s:3313   .text.dir_read.constprop.14:0000000000000000 $t
     /tmp/ccVdKYyy.s:3320   .text.dir_read.constprop.14:0000000000000000 dir_read.constprop.14
     /tmp/ccVdKYyy.s:3412   .text.dir_register:0000000000000000 $t
     /tmp/ccVdKYyy.s:3419   .text.dir_register:0000000000000000 dir_register
     /tmp/ccVdKYyy.s:3558   .text.clust2sect:0000000000000000 $t
     /tmp/ccVdKYyy.s:3566   .text.clust2sect:0000000000000000 clust2sect
     /tmp/ccVdKYyy.s:3596   .text.get_fat:0000000000000000 $t
     /tmp/ccVdKYyy.s:3604   .text.get_fat:0000000000000000 get_fat
     /tmp/ccVdKYyy.s:3630   .text.put_fat:0000000000000000 $t
     /tmp/ccVdKYyy.s:3638   .text.put_fat:0000000000000000 put_fat
     /tmp/ccVdKYyy.s:3686   .text.f_mount:0000000000000000 $t
     /tmp/ccVdKYyy.s:3694   .text.f_mount:0000000000000000 f_mount
     /tmp/ccVdKYyy.s:3823   .text.f_mount:0000000000000070 $d
     /tmp/ccVdKYyy.s:3829   .text.f_open:0000000000000000 $t
ARM GAS  /tmp/ccVdKYyy.s 			page 301


     /tmp/ccVdKYyy.s:3837   .text.f_open:0000000000000000 f_open
     /tmp/ccVdKYyy.s:4272   .text.f_open:00000000000001fc $d
     /tmp/ccVdKYyy.s:4277   .text.f_read:0000000000000000 $t
     /tmp/ccVdKYyy.s:4285   .text.f_read:0000000000000000 f_read
     /tmp/ccVdKYyy.s:4676   .text.f_write:0000000000000000 $t
     /tmp/ccVdKYyy.s:4684   .text.f_write:0000000000000000 f_write
     /tmp/ccVdKYyy.s:5107   .text.putc_bfd:0000000000000000 $t
     /tmp/ccVdKYyy.s:5114   .text.putc_bfd:0000000000000000 putc_bfd
     /tmp/ccVdKYyy.s:5204   .text.f_sync:0000000000000000 $t
     /tmp/ccVdKYyy.s:5212   .text.f_sync:0000000000000000 f_sync
     /tmp/ccVdKYyy.s:5369   .text.f_close:0000000000000000 $t
     /tmp/ccVdKYyy.s:5377   .text.f_close:0000000000000000 f_close
     /tmp/ccVdKYyy.s:5474   .text.f_close:0000000000000054 $d
     /tmp/ccVdKYyy.s:5481   .text.f_lseek:0000000000000000 $t
     /tmp/ccVdKYyy.s:5489   .text.f_lseek:0000000000000000 f_lseek
     /tmp/ccVdKYyy.s:6093   .text.f_opendir:0000000000000000 $t
     /tmp/ccVdKYyy.s:6101   .text.f_opendir:0000000000000000 f_opendir
     /tmp/ccVdKYyy.s:6282   .text.f_closedir:0000000000000000 $t
     /tmp/ccVdKYyy.s:6290   .text.f_closedir:0000000000000000 f_closedir
     /tmp/ccVdKYyy.s:6377   .text.f_closedir:0000000000000048 $d
     /tmp/ccVdKYyy.s:6384   .text.f_readdir:0000000000000000 $t
     /tmp/ccVdKYyy.s:6392   .text.f_readdir:0000000000000000 f_readdir
     /tmp/ccVdKYyy.s:6493   .text.f_stat:0000000000000000 $t
     /tmp/ccVdKYyy.s:6501   .text.f_stat:0000000000000000 f_stat
     /tmp/ccVdKYyy.s:6592   .text.f_getfree:0000000000000000 $t
     /tmp/ccVdKYyy.s:6600   .text.f_getfree:0000000000000000 f_getfree
     /tmp/ccVdKYyy.s:6830   .text.f_truncate:0000000000000000 $t
     /tmp/ccVdKYyy.s:6838   .text.f_truncate:0000000000000000 f_truncate
     /tmp/ccVdKYyy.s:7064   .text.f_unlink:0000000000000000 $t
     /tmp/ccVdKYyy.s:7072   .text.f_unlink:0000000000000000 f_unlink
     /tmp/ccVdKYyy.s:7317   .text.f_mkdir:0000000000000000 $t
     /tmp/ccVdKYyy.s:7325   .text.f_mkdir:0000000000000000 f_mkdir
     /tmp/ccVdKYyy.s:7832   .text.f_chmod:0000000000000000 $t
     /tmp/ccVdKYyy.s:7840   .text.f_chmod:0000000000000000 f_chmod
     /tmp/ccVdKYyy.s:7943   .text.f_rename:0000000000000000 $t
     /tmp/ccVdKYyy.s:7951   .text.f_rename:0000000000000000 f_rename
     /tmp/ccVdKYyy.s:8260   .text.f_utime:0000000000000000 $t
     /tmp/ccVdKYyy.s:8268   .text.f_utime:0000000000000000 f_utime
     /tmp/ccVdKYyy.s:8372   .text.f_mkfs:0000000000000000 $t
     /tmp/ccVdKYyy.s:8380   .text.f_mkfs:0000000000000000 f_mkfs
     /tmp/ccVdKYyy.s:8656   .text.f_mkfs:000000000000013c $d
     /tmp/ccVdKYyy.s:8662   .text.f_mkfs:0000000000000148 $t
     /tmp/ccVdKYyy.s:9388   .text.f_mkfs:00000000000005c4 $d
     /tmp/ccVdKYyy.s:9396   .text.f_gets:0000000000000000 $t
     /tmp/ccVdKYyy.s:9404   .text.f_gets:0000000000000000 f_gets
     /tmp/ccVdKYyy.s:9489   .text.f_putc:0000000000000000 $t
     /tmp/ccVdKYyy.s:9497   .text.f_putc:0000000000000000 f_putc
     /tmp/ccVdKYyy.s:9566   .text.f_puts:0000000000000000 $t
     /tmp/ccVdKYyy.s:9574   .text.f_puts:0000000000000000 f_puts
     /tmp/ccVdKYyy.s:9665   .text.f_printf:0000000000000000 $t
     /tmp/ccVdKYyy.s:9673   .text.f_printf:0000000000000000 f_printf
     /tmp/ccVdKYyy.s:9852   .text.f_printf:00000000000000bc $d
     /tmp/ccVdKYyy.s:9876   .text.f_printf:00000000000000ea $t
     /tmp/ccVdKYyy.s:10296  .bss.FatFs:0000000000000000 $d
     /tmp/ccVdKYyy.s:10300  .bss.FatFs:0000000000000000 FatFs
     /tmp/ccVdKYyy.s:10303  .bss.Files:0000000000000000 $d
     /tmp/ccVdKYyy.s:10307  .bss.Files:0000000000000000 Files
ARM GAS  /tmp/ccVdKYyy.s 			page 302


     /tmp/ccVdKYyy.s:10310  .bss.Fsid:0000000000000000 $d
     /tmp/ccVdKYyy.s:10314  .bss.Fsid:0000000000000000 Fsid
     /tmp/ccVdKYyy.s:10317  .rodata.ExCvt:0000000000000000 $d
     /tmp/ccVdKYyy.s:10321  .rodata.ExCvt:0000000000000000 ExCvt
     /tmp/ccVdKYyy.s:10451  .rodata.cst.9515:0000000000000000 $d
     /tmp/ccVdKYyy.s:10455  .rodata.cst.9515:0000000000000000 cst.9515
     /tmp/ccVdKYyy.s:10468  .rodata.f_mkfs.str1.4:0000000000000000 $d
     /tmp/ccVdKYyy.s:10469  .rodata.f_mkfs.str1.4:0000000000000000 .LC1
     /tmp/ccVdKYyy.s:10471  .rodata.f_mkfs.str1.4:000000000000000c .LC2
     /tmp/ccVdKYyy.s:10473  .rodata.f_mkfs.str1.4:0000000000000020 .LC3
     /tmp/ccVdKYyy.s:10476  .rodata.follow_path.str1.4:0000000000000000 $d
     /tmp/ccVdKYyy.s:10477  .rodata.follow_path.str1.4:0000000000000000 .LC0
     /tmp/ccVdKYyy.s:10480  .rodata.vst.9514:0000000000000000 $d
     /tmp/ccVdKYyy.s:10484  .rodata.vst.9514:0000000000000000 vst.9514
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
disk_status
disk_write
disk_read
disk_ioctl
disk_initialize
get_fattime
