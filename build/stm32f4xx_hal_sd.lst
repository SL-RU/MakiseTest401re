ARM GAS  /tmp/ccnQ8l0t.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"stm32f4xx_hal_sd.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.SD_CmdResp2Error,"ax",%progbits
  18              		.align	1
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu fpv4-sp-d16
  24              	SD_CmdResp2Error:
  25              	.LFB165:
  26              		.file 1 "Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c"
   1:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
   2:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   ******************************************************************************
   3:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @file    stm32f4xx_hal_sd.c
   4:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @author  MCD Application Team
   5:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @version V1.6.0
   6:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @date    04-November-2016
   7:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief   SD card HAL module driver.
   8:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *          This file provides firmware functions to manage the following 
   9:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *          functionalities of the Secure Digital (SD) peripheral:
  10:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *           + Initialization and de-initialization functions
  11:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *           + IO operation functions
  12:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *           + Peripheral Control functions 
  13:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *           + Peripheral State functions
  14:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         
  15:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   @verbatim
  16:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   ==============================================================================
  17:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                         ##### How to use this driver #####
  18:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   ==============================================================================
  19:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   [..]
  20:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     This driver implements a high level communication layer for read and write from/to 
  21:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     this memory. The needed STM32 hardware resources (SDIO and GPIO) are performed by 
  22:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     the user in HAL_SD_MspInit() function (MSP layer).                             
  23:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     Basically, the MSP layer configuration should be the same as we provide in the 
  24:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     examples.
  25:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     You can easily tailor this configuration according to hardware resources.
  26:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
  27:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   [..]
  28:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     This driver is a generic layered driver for SDIO memories which uses the HAL 
  29:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO driver functions to interface with SD and uSD cards devices. 
  30:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     It is used as follows:
  31:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****  
  32:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (#)Initialize the SDIO low level resources by implement the HAL_SD_MspInit() API:
ARM GAS  /tmp/ccnQ8l0t.s 			page 2


  33:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         (##) Enable the SDIO interface clock using __HAL_RCC_SDIO_CLK_ENABLE(); 
  34:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         (##) SDIO pins configuration for SD card
  35:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             (+++) Enable the clock for the SDIO GPIOs using the functions __HAL_RCC_GPIOx_CLK_ENABL
  36:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             (+++) Configure these SDIO pins as alternate function pull-up using HAL_GPIO_Init()
  37:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                   and according to your pin assignment;
  38:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         (##) DMA Configuration if you need to use DMA process (HAL_SD_ReadBlocks_DMA()
  39:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****              and HAL_SD_WriteBlocks_DMA() APIs).
  40:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             (+++) Enable the DMAx interface clock using __HAL_RCC_DMAx_CLK_ENABLE(); 
  41:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             (+++) Configure the DMA using the function HAL_DMA_Init() with predeclared and filled. 
  42:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         (##) NVIC configuration if you need to use interrupt process when using DMA transfer.
  43:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             (+++) Configure the SDIO and DMA interrupt priorities using functions
  44:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                   HAL_NVIC_SetPriority(); DMA priority is superior to SDIO's priority
  45:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             (+++) Enable the NVIC DMA and SDIO IRQs using function HAL_NVIC_EnableIRQ()
  46:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             (+++) SDIO interrupts are managed using the macros __HAL_SD_SDIO_ENABLE_IT() 
  47:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                   and __HAL_SD_SDIO_DISABLE_IT() inside the communication process.
  48:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             (+++) SDIO interrupts pending bits are managed using the macros __HAL_SD_SDIO_GET_IT()
  49:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                   and __HAL_SD_SDIO_CLEAR_IT()
  50:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (#) At this stage, you can perform SD read/write/erase operations after SD card initialization 
  51:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
  52:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****          
  53:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *** SD Card Initialization and configuration ***
  54:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   ================================================    
  55:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   [..]
  56:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     To initialize the SD Card, use the HAL_SD_Init() function.  It Initializes 
  57:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     the SD Card and put it into Standby State (Ready for data transfer). 
  58:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     This function provide the following operations:
  59:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
  60:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (#) Apply the SD Card initialization process at 400KHz and check the SD Card 
  61:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         type (Standard Capacity or High Capacity). You can change or adapt this 
  62:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         frequency by adjusting the "ClockDiv" field. 
  63:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         The SD Card frequency (SDIO_CK) is computed as follows:
  64:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
  65:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****            SDIO_CK = SDIOCLK / (ClockDiv + 2)
  66:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
  67:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         In initialization mode and according to the SD Card standard, 
  68:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         make sure that the SDIO_CK frequency doesn't exceed 400KHz.
  69:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
  70:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (#) Get the SD CID and CSD data. All these information are managed by the SDCardInfo 
  71:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         structure. This structure provide also ready computed SD Card capacity 
  72:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         and Block size.
  73:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         
  74:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         -@- These information are stored in SD handle structure in case of future use.  
  75:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
  76:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (#) Configure the SD Card Data transfer frequency. By Default, the card transfer 
  77:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         frequency is set to 24MHz. You can change or adapt this frequency by adjusting 
  78:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         the "ClockDiv" field.
  79:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         In transfer mode and according to the SD Card standard, make sure that the 
  80:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         SDIO_CK frequency doesn't exceed 25MHz and 50MHz in High-speed mode switch.
  81:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         To be able to use a frequency higher than 24MHz, you should use the SDIO 
  82:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         peripheral in bypass mode. Refer to the corresponding reference manual 
  83:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         for more details.
  84:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
  85:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (#) Select the corresponding SD Card according to the address read with the step 2.
  86:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
  87:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (#) Configure the SD Card in wide bus mode: 4-bits data.
  88:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
  89:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *** SD Card Read operation ***
ARM GAS  /tmp/ccnQ8l0t.s 			page 3


  90:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   ==============================
  91:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   [..] 
  92:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (+) You can read from SD card in polling mode by using function HAL_SD_ReadBlocks(). 
  93:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         This function support only 512-bytes block length (the block size should be 
  94:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         chosen as 512 bytes).
  95:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         You can choose either one block read operation or multiple block read operation 
  96:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         by adjusting the "NumberOfBlocks" parameter.
  97:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
  98:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (+) You can read from SD card in DMA mode by using function HAL_SD_ReadBlocks_DMA().
  99:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         This function support only 512-bytes block length (the block size should be 
 100:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         chosen as 512 bytes).
 101:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         You can choose either one block read operation or multiple block read operation 
 102:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         by adjusting the "NumberOfBlocks" parameter.
 103:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         After this, you have to call the function HAL_SD_CheckReadOperation(), to insure
 104:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         that the read transfer is done correctly in both DMA and SD sides.
 105:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 106:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *** SD Card Write operation ***
 107:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   =============================== 
 108:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   [..] 
 109:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (+) You can write to SD card in polling mode by using function HAL_SD_WriteBlocks(). 
 110:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         This function support only 512-bytes block length (the block size should be 
 111:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         chosen as 512 bytes).
 112:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         You can choose either one block read operation or multiple block read operation 
 113:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         by adjusting the "NumberOfBlocks" parameter.
 114:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 115:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (+) You can write to SD card in DMA mode by using function HAL_SD_WriteBlocks_DMA().
 116:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         This function support only 512-bytes block length (the block size should be 
 117:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         chosen as 512 byte).
 118:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         You can choose either one block read operation or multiple block read operation 
 119:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         by adjusting the "NumberOfBlocks" parameter.
 120:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         After this, you have to call the function HAL_SD_CheckWriteOperation(), to insure
 121:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         that the write transfer is done correctly in both DMA and SD sides.  
 122:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 123:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *** SD card status ***
 124:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   ====================== 
 125:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   [..]
 126:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (+) At any time, you can check the SD Card status and get the SD card state 
 127:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         by using the HAL_SD_GetStatus() function. This function checks first if the 
 128:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         SD card is still connected and then get the internal SD Card transfer state.     
 129:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (+) You can also get the SD card SD Status register by using the HAL_SD_SendSDStatus() 
 130:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         function.    
 131:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 132:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *** SD HAL driver macros list ***
 133:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   ==================================
 134:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   [..]
 135:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     Below the list of most used macros in SD HAL driver.
 136:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 137:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (+) __HAL_SD_SDIO_ENABLE : Enable the SD device
 138:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (+) __HAL_SD_SDIO_DISABLE : Disable the SD device
 139:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (+) __HAL_SD_SDIO_DMA_ENABLE: Enable the SDIO DMA transfer
 140:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (+) __HAL_SD_SDIO_DMA_DISABLE: Disable the SDIO DMA transfer
 141:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (+) __HAL_SD_SDIO_ENABLE_IT: Enable the SD device interrupt
 142:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (+) __HAL_SD_SDIO_DISABLE_IT: Disable the SD device interrupt
 143:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (+) __HAL_SD_SDIO_GET_FLAG:Check whether the specified SD flag is set or not
 144:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (+) __HAL_SD_SDIO_CLEAR_FLAG: Clear the SD's pending flags
 145:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
 146:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (@) You can refer to the SD HAL driver header file for more useful macros 
ARM GAS  /tmp/ccnQ8l0t.s 			page 4


 147:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
 148:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   @endverbatim
 149:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   ******************************************************************************
 150:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @attention
 151:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *
 152:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * <h2><center>&copy; COPYRIGHT(c) 2016 STMicroelectronics</center></h2>
 153:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *
 154:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * Redistribution and use in source and binary forms, with or without modification,
 155:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * are permitted provided that the following conditions are met:
 156:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *   1. Redistributions of source code must retain the above copyright notice,
 157:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *      this list of conditions and the following disclaimer.
 158:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *   2. Redistributions in binary form must reproduce the above copyright notice,
 159:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *      this list of conditions and the following disclaimer in the documentation
 160:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *      and/or other materials provided with the distribution.
 161:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *   3. Neither the name of STMicroelectronics nor the names of its contributors
 162:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *      may be used to endorse or promote products derived from this software
 163:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *      without specific prior written permission.
 164:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *
 165:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 166:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 167:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 168:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
 169:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 170:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 171:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 172:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 173:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 174:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 175:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *
 176:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   ******************************************************************************
 177:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */ 
 178:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 179:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /* Includes ------------------------------------------------------------------*/
 180:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #include "stm32f4xx_hal.h"
 181:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 182:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #ifdef HAL_SD_MODULE_ENABLED
 183:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #if defined(STM32F405xx) || defined(STM32F415xx) || defined(STM32F407xx) || defined(STM32F417xx) ||
 184:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     defined(STM32F427xx) || defined(STM32F437xx) || defined(STM32F429xx) || defined(STM32F439xx) ||
 185:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     defined(STM32F401xC) || defined(STM32F401xE) || defined(STM32F411xE) || defined(STM32F446xx) ||
 186:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     defined(STM32F469xx) || defined(STM32F479xx) || defined(STM32F412Zx) || defined(STM32F412Vx) ||
 187:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     defined(STM32F412Rx) || defined(STM32F412Cx) || defined(STM32F413xx) || defined(STM32F423xx)
 188:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /** @addtogroup STM32F4xx_HAL_Driver
 189:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @{
 190:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 191:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 192:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /** @addtogroup SD 
 193:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @{
 194:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 195:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 196:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /* Private typedef -----------------------------------------------------------*/
 197:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /* Private define ------------------------------------------------------------*/
 198:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /** @addtogroup SD_Private_Defines
 199:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @{
 200:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 201:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /** 
 202:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  SDIO Data block size 
 203:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */ 
ARM GAS  /tmp/ccnQ8l0t.s 			page 5


 204:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define DATA_BLOCK_SIZE                  ((uint32_t)(9U << 4U))
 205:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /** 
 206:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  SDIO Static flags, Timeout, FIFO Address  
 207:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 208:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SDIO_STATIC_FLAGS               ((uint32_t)(SDIO_FLAG_CCRCFAIL | SDIO_FLAG_DCRCFAIL | SDIO_
 209:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                                     SDIO_FLAG_DTIMEOUT | SDIO_FLAG_TXUNDERR | SDIO_
 210:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                                     SDIO_FLAG_CMDREND  | SDIO_FLAG_CMDSENT  | SDIO_
 211:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                                     SDIO_FLAG_DBCKEND))  
 212:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 213:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SDIO_CMD0TIMEOUT                ((uint32_t)0x00010000U)
 214:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 215:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /** 
 216:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Mask for errors Card Status R1 (OCR Register) 
 217:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 218:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_ADDR_OUT_OF_RANGE        ((uint32_t)0x80000000U)
 219:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_ADDR_MISALIGNED          ((uint32_t)0x40000000U)
 220:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_BLOCK_LEN_ERR            ((uint32_t)0x20000000U)
 221:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_ERASE_SEQ_ERR            ((uint32_t)0x10000000U)
 222:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_BAD_ERASE_PARAM          ((uint32_t)0x08000000U)
 223:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_WRITE_PROT_VIOLATION     ((uint32_t)0x04000000U)
 224:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_LOCK_UNLOCK_FAILED       ((uint32_t)0x01000000U)
 225:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_COM_CRC_FAILED           ((uint32_t)0x00800000U)
 226:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_ILLEGAL_CMD              ((uint32_t)0x00400000U)
 227:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_CARD_ECC_FAILED          ((uint32_t)0x00200000U)
 228:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_CC_ERROR                 ((uint32_t)0x00100000U)
 229:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_GENERAL_UNKNOWN_ERROR    ((uint32_t)0x00080000U)
 230:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_STREAM_READ_UNDERRUN     ((uint32_t)0x00040000U)
 231:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_STREAM_WRITE_OVERRUN     ((uint32_t)0x00020000U)
 232:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_CID_CSD_OVERWRITE        ((uint32_t)0x00010000U)
 233:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_WP_ERASE_SKIP            ((uint32_t)0x00008000U)
 234:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_CARD_ECC_DISABLED        ((uint32_t)0x00004000U)
 235:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_ERASE_RESET              ((uint32_t)0x00002000U)
 236:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_AKE_SEQ_ERROR            ((uint32_t)0x00000008U)
 237:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_OCR_ERRORBITS                ((uint32_t)0xFDFFE008U)
 238:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 239:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /** 
 240:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Masks for R6 Response 
 241:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 242:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_R6_GENERAL_UNKNOWN_ERROR     ((uint32_t)0x00002000U)
 243:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_R6_ILLEGAL_CMD               ((uint32_t)0x00004000U)
 244:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_R6_COM_CRC_FAILED            ((uint32_t)0x00008000U)
 245:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 246:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_VOLTAGE_WINDOW_SD            ((uint32_t)0x80100000U)
 247:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_HIGH_CAPACITY                ((uint32_t)0x40000000U)
 248:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_STD_CAPACITY                 ((uint32_t)0x00000000U)
 249:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_CHECK_PATTERN                ((uint32_t)0x000001AAU)
 250:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 251:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_MAX_VOLT_TRIAL               ((uint32_t)0x0000FFFFU)
 252:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_ALLZERO                      ((uint32_t)0x00000000U)
 253:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 254:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_WIDE_BUS_SUPPORT             ((uint32_t)0x00040000U)
 255:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_SINGLE_BUS_SUPPORT           ((uint32_t)0x00010000U)
 256:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_CARD_LOCKED                  ((uint32_t)0x02000000U)
 257:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 258:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_DATATIMEOUT                  ((uint32_t)0xFFFFFFFFU)
 259:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_0TO7BITS                     ((uint32_t)0x000000FFU)
 260:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_8TO15BITS                    ((uint32_t)0x0000FF00U)
ARM GAS  /tmp/ccnQ8l0t.s 			page 6


 261:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_16TO23BITS                   ((uint32_t)0x00FF0000U)
 262:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_24TO31BITS                   ((uint32_t)0xFF000000U)
 263:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_MAX_DATA_LENGTH              ((uint32_t)0x01FFFFFFU)
 264:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 265:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_HALFFIFO                     ((uint32_t)0x00000008U)
 266:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_HALFFIFOBYTES                ((uint32_t)0x00000020U)
 267:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 268:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /** 
 269:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Command Class Supported 
 270:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 271:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_CCCC_LOCK_UNLOCK             ((uint32_t)0x00000080U)
 272:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_CCCC_WRITE_PROT              ((uint32_t)0x00000040U)
 273:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_CCCC_ERASE                   ((uint32_t)0x00000020U)
 274:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 275:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /** 
 276:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Following commands are SD Card Specific commands.
 277:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         SDIO_APP_CMD should be sent before sending these commands. 
 278:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 279:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #define SD_SDIO_SEND_IF_COND            ((uint32_t)SD_CMD_HS_SEND_EXT_CSD)
 280:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 281:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
 282:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @}
 283:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 284:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 285:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /* Private macro -------------------------------------------------------------*/
 286:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /* Private variables ---------------------------------------------------------*/
 287:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /* Private function prototypes -----------------------------------------------*/
 288:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /** @addtogroup SD_Private_Functions_Prototypes
 289:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @{
 290:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 291:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_Initialize_Cards(SD_HandleTypeDef *hsd);
 292:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_Select_Deselect(SD_HandleTypeDef *hsd, uint64_t addr);
 293:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_PowerON(SD_HandleTypeDef *hsd); 
 294:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_PowerOFF(SD_HandleTypeDef *hsd);
 295:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_SendStatus(SD_HandleTypeDef *hsd, uint32_t *pCardStatus);
 296:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_CardStateTypedef SD_GetState(SD_HandleTypeDef *hsd);
 297:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_IsCardProgramming(SD_HandleTypeDef *hsd, uint8_t *pStatus);
 298:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_CmdError(SD_HandleTypeDef *hsd);
 299:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_CmdResp1Error(SD_HandleTypeDef *hsd, uint8_t SD_CMD);
 300:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_CmdResp7Error(SD_HandleTypeDef *hsd);
 301:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_CmdResp3Error(SD_HandleTypeDef *hsd);
 302:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_CmdResp2Error(SD_HandleTypeDef *hsd);
 303:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_CmdResp6Error(SD_HandleTypeDef *hsd, uint8_t SD_CMD, uint16_t *pRCA);
 304:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_WideBus_Enable(SD_HandleTypeDef *hsd);
 305:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_WideBus_Disable(SD_HandleTypeDef *hsd);
 306:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_FindSCR(SD_HandleTypeDef *hsd, uint32_t *pSCR);  
 307:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static void SD_DMA_RxCplt(DMA_HandleTypeDef *hdma);
 308:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static void SD_DMA_RxError(DMA_HandleTypeDef *hdma);
 309:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static void SD_DMA_TxCplt(DMA_HandleTypeDef *hdma);
 310:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static void SD_DMA_TxError(DMA_HandleTypeDef *hdma);
 311:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
 312:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @}
 313:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 314:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /* Exported functions --------------------------------------------------------*/
 315:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /** @addtogroup SD_Exported_Functions
 316:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @{
 317:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
ARM GAS  /tmp/ccnQ8l0t.s 			page 7


 318:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 319:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /** @addtogroup SD_Exported_Functions_Group1
 320:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****  *  @brief   Initialization and de-initialization functions 
 321:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****  *
 322:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** @verbatim  
 323:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   ==============================================================================
 324:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           ##### Initialization and de-initialization functions #####
 325:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   ==============================================================================
 326:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   [..]  
 327:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     This section provides functions allowing to initialize/de-initialize the SD
 328:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     card device to be ready for use.
 329:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
 330:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****  
 331:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** @endverbatim
 332:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @{
 333:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 334:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 335:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
 336:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Initializes the SD card according to the specified parameters in the 
 337:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             SD_HandleTypeDef and create the associated handle.
 338:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
 339:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  SDCardInfo: HAL_SD_CardInfoTypedef structure for SD card information   
 340:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval HAL SD error state
 341:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 342:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** HAL_SD_ErrorTypedef HAL_SD_Init(SD_HandleTypeDef *hsd, HAL_SD_CardInfoTypedef *SDCardInfo)
 343:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** { 
 344:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __IO HAL_SD_ErrorTypedef errorstate = SD_OK;
 345:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SD_InitTypeDef tmpinit;
 346:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 347:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Allocate lock resource and initialize it */
 348:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->Lock = HAL_UNLOCKED;
 349:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Initialize the low level hardware (MSP) */
 350:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_MspInit(hsd);
 351:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 352:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Default SDIO peripheral configuration for SD card initialization */
 353:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmpinit.ClockEdge           = SDIO_CLOCK_EDGE_RISING;
 354:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmpinit.ClockBypass         = SDIO_CLOCK_BYPASS_DISABLE;
 355:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmpinit.ClockPowerSave      = SDIO_CLOCK_POWER_SAVE_DISABLE;
 356:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmpinit.BusWide             = SDIO_BUS_WIDE_1B;
 357:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmpinit.HardwareFlowControl = SDIO_HARDWARE_FLOW_CONTROL_DISABLE;
 358:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmpinit.ClockDiv            = SDIO_INIT_CLK_DIV;
 359:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 360:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Initialize SDIO peripheral interface with default configuration */
 361:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_Init(hsd->Instance, tmpinit);
 362:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 363:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Identify card operating voltage */
 364:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_PowerON(hsd); 
 365:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 366:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(errorstate != SD_OK)     
 367:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 368:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
 369:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 370:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 371:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Initialize the present SDIO card(s) and put them in idle state */
 372:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_Initialize_Cards(hsd);
 373:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 374:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (errorstate != SD_OK)
ARM GAS  /tmp/ccnQ8l0t.s 			page 8


 375:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 376:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
 377:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 378:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 379:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Read CSD/CID MSD registers */
 380:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = HAL_SD_Get_CardInfo(hsd, SDCardInfo);
 381:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 382:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (errorstate == SD_OK)
 383:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 384:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Select the Card */
 385:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_Select_Deselect(hsd, (uint32_t)(((uint32_t)SDCardInfo->RCA) << 16U));
 386:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 387:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 388:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Configure SDIO peripheral interface */
 389:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_Init(hsd->Instance, hsd->Init);   
 390:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 391:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
 392:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 393:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 394:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
 395:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  De-Initializes the SD card.
 396:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
 397:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval HAL status
 398:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 399:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** HAL_StatusTypeDef HAL_SD_DeInit(SD_HandleTypeDef *hsd)
 400:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
 401:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 402:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Set SD power state to off */ 
 403:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SD_PowerOFF(hsd);
 404:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 405:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* De-Initialize the MSP layer */
 406:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_MspDeInit(hsd);
 407:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 408:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return HAL_OK;
 409:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 410:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 411:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 412:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
 413:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Initializes the SD MSP.
 414:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
 415:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval None
 416:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 417:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** __weak void HAL_SD_MspInit(SD_HandleTypeDef *hsd)
 418:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
 419:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
 420:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   UNUSED(hsd);
 421:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* NOTE : This function Should not be modified, when the callback is needed,
 422:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             the HAL_SD_MspInit could be implemented in the user file
 423:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****    */
 424:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 425:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 426:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
 427:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  De-Initialize SD MSP.
 428:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
 429:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval None
 430:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 431:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** __weak void HAL_SD_MspDeInit(SD_HandleTypeDef *hsd)
ARM GAS  /tmp/ccnQ8l0t.s 			page 9


 432:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
 433:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
 434:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   UNUSED(hsd);
 435:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* NOTE : This function Should not be modified, when the callback is needed,
 436:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             the HAL_SD_MspDeInit could be implemented in the user file
 437:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****    */
 438:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 439:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 440:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
 441:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @}
 442:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 443:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 444:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /** @addtogroup SD_Exported_Functions_Group2
 445:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****  *  @brief   Data transfer functions 
 446:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****  *
 447:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** @verbatim   
 448:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   ==============================================================================
 449:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                         ##### IO operation functions #####
 450:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   ==============================================================================  
 451:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   [..]
 452:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     This subsection provides a set of functions allowing to manage the data 
 453:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     transfer from/to SD card.
 454:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 455:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** @endverbatim
 456:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @{
 457:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 458:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 459:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
 460:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Reads block(s) from a specified address in a card. The Data transfer 
 461:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         is managed by polling mode.  
 462:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
 463:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  pReadBuffer: pointer to the buffer that will contain the received data
 464:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  ReadAddr: Address from where data is to be read  
 465:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  BlockSize: SD card Data block size 
 466:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @note   BlockSize must be 512 bytes.
 467:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  NumberOfBlocks: Number of SD blocks to read   
 468:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
 469:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 470:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** HAL_SD_ErrorTypedef HAL_SD_ReadBlocks(SD_HandleTypeDef *hsd, uint32_t *pReadBuffer, uint64_t ReadAd
 471:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
 472:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef  sdio_cmdinitstructure;
 473:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataInitTypeDef sdio_datainitstructure;
 474:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
 475:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t count = 0U, *tempbuff = (uint32_t *)pReadBuffer;
 476:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 477:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Initialize data control register */
 478:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->Instance->DCTRL = 0U;
 479:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 480:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (hsd->CardType == HIGH_CAPACITY_SD_CARD)
 481:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 482:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     BlockSize = 512U;
 483:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     ReadAddr /= 512U;
 484:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 485:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 486:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Set Block Size for Card */ 
 487:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = (uint32_t) BlockSize;
 488:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SET_BLOCKLEN;
ARM GAS  /tmp/ccnQ8l0t.s 			page 10


 489:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 490:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 491:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 492:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 493:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 494:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
 495:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_CmdResp1Error(hsd, SD_CMD_SET_BLOCKLEN);
 496:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 497:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (errorstate != SD_OK)
 498:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 499:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
 500:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 501:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 502:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Configure the SD DPSM (Data Path State Machine) */
 503:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataTimeOut   = SD_DATATIMEOUT;
 504:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataLength    = NumberOfBlocks * BlockSize;
 505:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataBlockSize = DATA_BLOCK_SIZE;
 506:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferDir   = SDIO_TRANSFER_DIR_TO_SDIO;
 507:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferMode  = SDIO_TRANSFER_MODE_BLOCK;
 508:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DPSM          = SDIO_DPSM_ENABLE;
 509:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataConfig(hsd->Instance, &sdio_datainitstructure);
 510:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 511:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(NumberOfBlocks > 1U)
 512:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 513:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send CMD18 READ_MULT_BLOCK with argument data address */
 514:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex = SD_CMD_READ_MULT_BLOCK;
 515:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 516:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
 517:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 518:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send CMD17 READ_SINGLE_BLOCK */
 519:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex = SD_CMD_READ_SINGLE_BLOCK;    
 520:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 521:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 522:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = (uint32_t)ReadAddr;
 523:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 524:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 525:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Read block(s) in polling mode */
 526:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(NumberOfBlocks > 1U)
 527:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 528:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Check for error conditions */
 529:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp1Error(hsd, SD_CMD_READ_MULT_BLOCK);
 530:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 531:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if (errorstate != SD_OK)
 532:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 533:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
 534:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
 535:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 536:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Poll on SDIO flags */
 537:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #ifdef SDIO_STA_STBITERR
 538:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     while(!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT 
 539:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #else /* SDIO_STA_STBITERR not defined */
 540:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     while(!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT 
 541:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #endif /* SDIO_STA_STBITERR */
 542:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 543:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXFIFOHF))
 544:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       {
 545:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         /* Read data from SDIO Rx FIFO */
ARM GAS  /tmp/ccnQ8l0t.s 			page 11


 546:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         for (count = 0U; count < 8U; count++)
 547:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         {
 548:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           *(tempbuff + count) = SDIO_ReadFIFO(hsd->Instance);
 549:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         }
 550:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         
 551:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         tempbuff += 8U;
 552:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       }
 553:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }      
 554:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 555:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
 556:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 557:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Check for error conditions */
 558:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp1Error(hsd, SD_CMD_READ_SINGLE_BLOCK); 
 559:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 560:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if (errorstate != SD_OK)
 561:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 562:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
 563:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }    
 564:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 565:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* In case of single block transfer, no need of stop transfer at all */
 566:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #ifdef SDIO_STA_STBITERR
 567:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     while(!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT 
 568:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #else /* SDIO_STA_STBITERR not defined */
 569:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     while(!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT 
 570:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #endif /* SDIO_STA_STBITERR */
 571:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 572:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXFIFOHF))
 573:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       {
 574:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         /* Read data from SDIO Rx FIFO */
 575:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         for (count = 0U; count < 8U; count++)
 576:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         {
 577:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           *(tempbuff + count) = SDIO_ReadFIFO(hsd->Instance);
 578:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         }
 579:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         
 580:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         tempbuff += 8U;
 581:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       }
 582:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
 583:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 584:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 585:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Send stop transmission command in case of multiblock read */
 586:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_DATAEND) && (NumberOfBlocks > 1U))
 587:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {    
 588:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if ((hsd->CardType == STD_CAPACITY_SD_CARD_V1_1) ||\
 589:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       (hsd->CardType == STD_CAPACITY_SD_CARD_V2_0) ||\
 590:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         (hsd->CardType == HIGH_CAPACITY_SD_CARD))
 591:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 592:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       /* Send stop transmission command */
 593:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       errorstate = HAL_SD_StopTransfer(hsd);
 594:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
 595:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 596:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 597:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Get error state */
 598:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_DTIMEOUT))
 599:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 600:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_DTIMEOUT);
 601:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 602:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_DATA_TIMEOUT;
ARM GAS  /tmp/ccnQ8l0t.s 			page 12


 603:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 604:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
 605:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 606:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_DCRCFAIL))
 607:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 608:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_DCRCFAIL);
 609:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 610:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_DATA_CRC_FAIL;
 611:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 612:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
 613:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 614:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXOVERR))
 615:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 616:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_RXOVERR);
 617:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 618:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_RX_OVERRUN;
 619:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 620:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
 621:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 622:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #ifdef SDIO_STA_STBITERR
 623:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_STBITERR))
 624:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 625:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_STBITERR);
 626:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 627:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_START_BIT_ERR;
 628:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 629:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
 630:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 631:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #endif /* SDIO_STA_STBITERR */ 
 632:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
 633:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 634:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* No error flag set */
 635:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 636:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 637:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   count = SD_DATATIMEOUT;
 638:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 639:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Empty FIFO if there is still any data */
 640:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while ((__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXDAVL)) && (count > 0U))
 641:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 642:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     *tempbuff = SDIO_ReadFIFO(hsd->Instance);
 643:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tempbuff++;
 644:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     count--;
 645:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 646:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 647:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Clear all the static flags */
 648:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_STATIC_FLAGS);
 649:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 650:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
 651:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 652:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 653:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
 654:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Allows to write block(s) to a specified address in a card. The Data
 655:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         transfer is managed by polling mode.  
 656:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
 657:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  pWriteBuffer: pointer to the buffer that will contain the data to transmit
 658:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  WriteAddr: Address from where data is to be written 
 659:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  BlockSize: SD card Data block size 
ARM GAS  /tmp/ccnQ8l0t.s 			page 13


 660:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @note   BlockSize must be 512 bytes.
 661:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  NumberOfBlocks: Number of SD blocks to write 
 662:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
 663:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 664:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** HAL_SD_ErrorTypedef HAL_SD_WriteBlocks(SD_HandleTypeDef *hsd, uint32_t *pWriteBuffer, uint64_t Writ
 665:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
 666:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef sdio_cmdinitstructure;
 667:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataInitTypeDef sdio_datainitstructure;
 668:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
 669:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t totalnumberofbytes = 0U, bytestransferred = 0U, count = 0U, restwords = 0U;
 670:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t *tempbuff = (uint32_t *)pWriteBuffer;
 671:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint8_t cardstate  = 0U;
 672:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 673:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Initialize data control register */
 674:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->Instance->DCTRL = 0U;
 675:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 676:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (hsd->CardType == HIGH_CAPACITY_SD_CARD)
 677:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 678:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     BlockSize = 512U;
 679:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     WriteAddr /= 512U;
 680:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 681:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 682:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Set Block Size for Card */ 
 683:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = (uint32_t)BlockSize;
 684:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SET_BLOCKLEN;
 685:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 686:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 687:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 688:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 689:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 690:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
 691:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_CmdResp1Error(hsd, SD_CMD_SET_BLOCKLEN);
 692:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 693:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (errorstate != SD_OK)
 694:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 695:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
 696:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 697:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 698:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(NumberOfBlocks > 1U)
 699:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 700:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send CMD25 WRITE_MULT_BLOCK with argument data address */
 701:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex = SD_CMD_WRITE_MULT_BLOCK;
 702:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 703:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
 704:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 705:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send CMD24 WRITE_SINGLE_BLOCK */
 706:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex = SD_CMD_WRITE_SINGLE_BLOCK;
 707:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 708:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 709:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = (uint32_t)WriteAddr;
 710:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 711:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 712:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
 713:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(NumberOfBlocks > 1U)
 714:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 715:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp1Error(hsd, SD_CMD_WRITE_MULT_BLOCK);
 716:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
ARM GAS  /tmp/ccnQ8l0t.s 			page 14


 717:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
 718:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 719:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp1Error(hsd, SD_CMD_WRITE_SINGLE_BLOCK);
 720:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }  
 721:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 722:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (errorstate != SD_OK)
 723:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 724:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
 725:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 726:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 727:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Set total number of bytes to write */
 728:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   totalnumberofbytes = NumberOfBlocks * BlockSize;
 729:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 730:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Configure the SD DPSM (Data Path State Machine) */ 
 731:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataTimeOut   = SD_DATATIMEOUT;
 732:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataLength    = NumberOfBlocks * BlockSize;
 733:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataBlockSize = SDIO_DATABLOCK_SIZE_512B;
 734:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferDir   = SDIO_TRANSFER_DIR_TO_CARD;
 735:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferMode  = SDIO_TRANSFER_MODE_BLOCK;
 736:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DPSM          = SDIO_DPSM_ENABLE;
 737:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataConfig(hsd->Instance, &sdio_datainitstructure);
 738:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 739:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Write block(s) in polling mode */
 740:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(NumberOfBlocks > 1U)
 741:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 742:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #ifdef SDIO_STA_STBITERR
 743:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     while(!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_TXUNDERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT
 744:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #else /* SDIO_STA_STBITERR not defined */
 745:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     while(!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_TXUNDERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT
 746:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #endif /* SDIO_STA_STBITERR */     
 747:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 748:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_TXFIFOHE))
 749:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       {
 750:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         if ((totalnumberofbytes - bytestransferred) < 32U)
 751:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         {
 752:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           restwords = ((totalnumberofbytes - bytestransferred) % 4U == 0U) ? ((totalnumberofbytes -
 753:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           
 754:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           /* Write data to SDIO Tx FIFO */
 755:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           for (count = 0U; count < restwords; count++)
 756:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           {
 757:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             SDIO_WriteFIFO(hsd->Instance, tempbuff);
 758:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             tempbuff++;
 759:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             bytestransferred += 4U;
 760:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           }
 761:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         }
 762:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         else
 763:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         {
 764:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           /* Write data to SDIO Tx FIFO */
 765:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           for (count = 0U; count < 8U; count++)
 766:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           {
 767:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             SDIO_WriteFIFO(hsd->Instance, (tempbuff + count));
 768:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           }
 769:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           
 770:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           tempbuff += 8U;
 771:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           bytestransferred += 32U;
 772:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         }
 773:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       }
ARM GAS  /tmp/ccnQ8l0t.s 			page 15


 774:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }   
 775:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 776:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
 777:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 778:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* In case of single data block transfer no need of stop command at all */
 779:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #ifdef SDIO_STA_STBITERR
 780:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     while(!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_TXUNDERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT
 781:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #else /* SDIO_STA_STBITERR not defined */
 782:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     while(!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_TXUNDERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT
 783:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #endif /* SDIO_STA_STBITERR */
 784:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 785:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_TXFIFOHE))
 786:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       {
 787:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         if ((totalnumberofbytes - bytestransferred) < 32U)
 788:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         {
 789:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           restwords = ((totalnumberofbytes - bytestransferred) % 4U == 0U) ? ((totalnumberofbytes -
 790:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           
 791:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           /* Write data to SDIO Tx FIFO */
 792:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           for (count = 0U; count < restwords; count++)
 793:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           {
 794:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             SDIO_WriteFIFO(hsd->Instance, tempbuff);
 795:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             tempbuff++; 
 796:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             bytestransferred += 4U;
 797:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           }
 798:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         }
 799:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         else
 800:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         {
 801:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           /* Write data to SDIO Tx FIFO */
 802:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           for (count = 0U; count < 8U; count++)
 803:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           {
 804:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             SDIO_WriteFIFO(hsd->Instance, (tempbuff + count));
 805:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           }
 806:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           
 807:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           tempbuff += 8U;
 808:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           bytestransferred += 32U;
 809:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         }
 810:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       }
 811:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }  
 812:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 813:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 814:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Send stop transmission command in case of multiblock write */
 815:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_DATAEND) && (NumberOfBlocks > 1U))
 816:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {    
 817:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if ((hsd->CardType == STD_CAPACITY_SD_CARD_V1_1) || (hsd->CardType == STD_CAPACITY_SD_CARD_V2_0
 818:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       (hsd->CardType == HIGH_CAPACITY_SD_CARD))
 819:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 820:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       /* Send stop transmission command */
 821:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       errorstate = HAL_SD_StopTransfer(hsd);
 822:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
 823:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 824:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 825:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Get error state */
 826:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_DTIMEOUT))
 827:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 828:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_DTIMEOUT);
 829:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 830:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_DATA_TIMEOUT;
ARM GAS  /tmp/ccnQ8l0t.s 			page 16


 831:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 832:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
 833:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 834:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_DCRCFAIL))
 835:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 836:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_DCRCFAIL);
 837:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 838:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_DATA_CRC_FAIL;
 839:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 840:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
 841:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 842:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_TXUNDERR))
 843:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 844:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_TXUNDERR);
 845:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 846:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_TX_UNDERRUN;
 847:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 848:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
 849:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 850:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #ifdef SDIO_STA_STBITERR
 851:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_STBITERR))
 852:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 853:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_STBITERR);
 854:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 855:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_START_BIT_ERR;
 856:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 857:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
 858:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 859:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #endif /* SDIO_STA_STBITERR */
 860:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
 861:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 862:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* No error flag set */
 863:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 864:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 865:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Clear all the static flags */
 866:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_STATIC_FLAGS);
 867:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 868:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Wait till the card is in programming state */
 869:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_IsCardProgramming(hsd, &cardstate);
 870:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 871:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while ((errorstate == SD_OK) && ((cardstate == SD_CARD_PROGRAMMING) || (cardstate == SD_CARD_RECE
 872:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 873:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_IsCardProgramming(hsd, &cardstate);
 874:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 875:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 876:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
 877:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 878:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 879:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
 880:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Reads block(s) from a specified address in a card. The Data transfer 
 881:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         is managed by DMA mode. 
 882:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @note   This API should be followed by the function HAL_SD_CheckReadOperation()
 883:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         to check the completion of the read process   
 884:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle                 
 885:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  pReadBuffer: Pointer to the buffer that will contain the received data
 886:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  ReadAddr: Address from where data is to be read  
 887:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  BlockSize: SD card Data block size 
ARM GAS  /tmp/ccnQ8l0t.s 			page 17


 888:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @note   BlockSize must be 512 bytes.
 889:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  NumberOfBlocks: Number of blocks to read.
 890:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
 891:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
 892:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** HAL_SD_ErrorTypedef HAL_SD_ReadBlocks_DMA(SD_HandleTypeDef *hsd, uint32_t *pReadBuffer, uint64_t Re
 893:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
 894:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef sdio_cmdinitstructure;
 895:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataInitTypeDef sdio_datainitstructure;
 896:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
 897:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 898:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Initialize data control register */
 899:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->Instance->DCTRL = 0U;
 900:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 901:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Initialize handle flags */
 902:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->SdTransferCplt  = 0U;
 903:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->DmaTransferCplt = 0U;
 904:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->SdTransferErr   = SD_OK; 
 905:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 906:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Initialize SD Read operation */
 907:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(NumberOfBlocks > 1U)
 908:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 909:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->SdOperation = SD_READ_MULTIPLE_BLOCK;
 910:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 911:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
 912:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 913:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->SdOperation = SD_READ_SINGLE_BLOCK;
 914:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 915:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 916:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Enable transfer interrupts */
 917:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #ifdef SDIO_STA_STBITERR
 918:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_ENABLE_IT(hsd, (SDIO_IT_DCRCFAIL |\
 919:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_DTIMEOUT |\
 920:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_DATAEND  |\
 921:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_RXOVERR  |\
 922:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_STBITERR));
 923:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #else /* SDIO_STA_STBITERR not defined */
 924:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_ENABLE_IT(hsd, (SDIO_IT_DCRCFAIL |\
 925:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_DTIMEOUT |\
 926:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_DATAEND  |\
 927:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_RXOVERR));
 928:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #endif /* SDIO_STA_STBITERR */
 929:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 930:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Enable SDIO DMA transfer */
 931:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_DMA_ENABLE();
 932:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 933:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Configure DMA user callbacks */
 934:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->hdmarx->XferCpltCallback  = SD_DMA_RxCplt;
 935:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->hdmarx->XferErrorCallback = SD_DMA_RxError;
 936:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 937:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Enable the DMA Stream */
 938:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_DMA_Start_IT(hsd->hdmarx, (uint32_t)&hsd->Instance->FIFO, (uint32_t)pReadBuffer, (uint32_t)(B
 939:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 940:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (hsd->CardType == HIGH_CAPACITY_SD_CARD)
 941:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 942:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     BlockSize = 512U;
 943:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     ReadAddr /= 512U;
 944:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
ARM GAS  /tmp/ccnQ8l0t.s 			page 18


 945:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 946:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Set Block Size for Card */ 
 947:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = (uint32_t)BlockSize;
 948:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SET_BLOCKLEN;
 949:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 950:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 951:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 952:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 953:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 954:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
 955:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_CmdResp1Error(hsd, SD_CMD_SET_BLOCKLEN);
 956:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 957:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (errorstate != SD_OK)
 958:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 959:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
 960:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 961:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 962:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Configure the SD DPSM (Data Path State Machine) */ 
 963:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataTimeOut   = SD_DATATIMEOUT;
 964:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataLength    = BlockSize * NumberOfBlocks;
 965:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataBlockSize = SDIO_DATABLOCK_SIZE_512B;
 966:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferDir   = SDIO_TRANSFER_DIR_TO_SDIO;
 967:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferMode  = SDIO_TRANSFER_MODE_BLOCK;
 968:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DPSM          = SDIO_DPSM_ENABLE;
 969:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataConfig(hsd->Instance, &sdio_datainitstructure);
 970:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 971:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check number of blocks command */
 972:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(NumberOfBlocks > 1U)
 973:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 974:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send CMD18 READ_MULT_BLOCK with argument data address */
 975:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex = SD_CMD_READ_MULT_BLOCK;
 976:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 977:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
 978:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 979:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send CMD17 READ_SINGLE_BLOCK */
 980:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex = SD_CMD_READ_SINGLE_BLOCK;
 981:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 982:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 983:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument = (uint32_t)ReadAddr;
 984:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 985:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 986:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
 987:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(NumberOfBlocks > 1U)
 988:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 989:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp1Error(hsd, SD_CMD_READ_MULT_BLOCK);
 990:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 991:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
 992:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 993:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp1Error(hsd, SD_CMD_READ_SINGLE_BLOCK);
 994:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 995:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 996:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Update the SD transfer error in SD handle */
 997:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->SdTransferErr = errorstate;
 998:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 999:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
1000:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
1001:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
ARM GAS  /tmp/ccnQ8l0t.s 			page 19


1002:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1003:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
1004:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Writes block(s) to a specified address in a card. The Data transfer 
1005:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         is managed by DMA mode. 
1006:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @note   This API should be followed by the function HAL_SD_CheckWriteOperation()
1007:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         to check the completion of the write process (by SD current status polling).  
1008:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
1009:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  pWriteBuffer: pointer to the buffer that will contain the data to transmit
1010:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  WriteAddr: Address from where data is to be read   
1011:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  BlockSize: the SD card Data block size 
1012:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @note   BlockSize must be 512 bytes.
1013:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  NumberOfBlocks: Number of blocks to write
1014:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
1015:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1016:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** HAL_SD_ErrorTypedef HAL_SD_WriteBlocks_DMA(SD_HandleTypeDef *hsd, uint32_t *pWriteBuffer, uint64_t 
1017:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
1018:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef sdio_cmdinitstructure;
1019:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataInitTypeDef sdio_datainitstructure;
1020:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
1021:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1022:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Initialize data control register */
1023:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->Instance->DCTRL = 0U;
1024:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1025:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Initialize handle flags */
1026:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->SdTransferCplt  = 0U;
1027:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->DmaTransferCplt = 0U;
1028:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->SdTransferErr   = SD_OK;
1029:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1030:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Initialize SD Write operation */
1031:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(NumberOfBlocks > 1U)
1032:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1033:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->SdOperation = SD_WRITE_MULTIPLE_BLOCK;
1034:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1035:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
1036:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1037:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->SdOperation = SD_WRITE_SINGLE_BLOCK;
1038:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }  
1039:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1040:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Enable transfer interrupts */
1041:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #ifdef SDIO_STA_STBITERR
1042:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_ENABLE_IT(hsd, (SDIO_IT_DCRCFAIL |\
1043:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_DTIMEOUT |\
1044:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_DATAEND  |\
1045:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_TXUNDERR |\
1046:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_STBITERR));
1047:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #else /* SDIO_STA_STBITERR not defined */
1048:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_ENABLE_IT(hsd, (SDIO_IT_DCRCFAIL |\
1049:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_DTIMEOUT |\
1050:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_DATAEND  |\
1051:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_TXUNDERR));
1052:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #endif /* SDIO_STA_STBITERR */
1053:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1054:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Configure DMA user callbacks */
1055:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->hdmatx->XferCpltCallback  = SD_DMA_TxCplt;
1056:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->hdmatx->XferErrorCallback = SD_DMA_TxError;
1057:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1058:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Enable the DMA Stream */
ARM GAS  /tmp/ccnQ8l0t.s 			page 20


1059:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_DMA_Start_IT(hsd->hdmatx, (uint32_t)pWriteBuffer, (uint32_t)&hsd->Instance->FIFO, (uint32_t)(
1060:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1061:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Enable SDIO DMA transfer */
1062:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_DMA_ENABLE();
1063:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1064:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (hsd->CardType == HIGH_CAPACITY_SD_CARD)
1065:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1066:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     BlockSize = 512U;
1067:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     WriteAddr /= 512U;
1068:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1069:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1070:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Set Block Size for Card */ 
1071:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = (uint32_t)BlockSize;
1072:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SET_BLOCKLEN;
1073:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
1074:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
1075:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
1076:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
1077:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1078:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
1079:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_CmdResp1Error(hsd, SD_CMD_SET_BLOCKLEN);
1080:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1081:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (errorstate != SD_OK)
1082:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1083:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
1084:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1085:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1086:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check number of blocks command */
1087:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(NumberOfBlocks <= 1U)
1088:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1089:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send CMD24 WRITE_SINGLE_BLOCK */
1090:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex = SD_CMD_WRITE_SINGLE_BLOCK;
1091:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1092:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
1093:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1094:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send CMD25 WRITE_MULT_BLOCK with argument data address */
1095:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex = SD_CMD_WRITE_MULT_BLOCK;
1096:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1097:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1098:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = (uint32_t)WriteAddr;
1099:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
1100:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1101:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
1102:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(NumberOfBlocks > 1U)
1103:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1104:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp1Error(hsd, SD_CMD_WRITE_MULT_BLOCK);
1105:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1106:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
1107:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1108:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp1Error(hsd, SD_CMD_WRITE_SINGLE_BLOCK);
1109:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1110:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1111:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (errorstate != SD_OK)
1112:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1113:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
1114:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1115:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
ARM GAS  /tmp/ccnQ8l0t.s 			page 21


1116:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Configure the SD DPSM (Data Path State Machine) */ 
1117:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataTimeOut   = SD_DATATIMEOUT;
1118:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataLength    = BlockSize * NumberOfBlocks;
1119:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataBlockSize = SDIO_DATABLOCK_SIZE_512B;
1120:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferDir   = SDIO_TRANSFER_DIR_TO_CARD;
1121:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferMode  = SDIO_TRANSFER_MODE_BLOCK;
1122:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DPSM          = SDIO_DPSM_ENABLE;
1123:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataConfig(hsd->Instance, &sdio_datainitstructure);
1124:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1125:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->SdTransferErr = errorstate;
1126:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1127:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
1128:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
1129:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1130:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
1131:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  This function waits until the SD DMA data read transfer is finished. 
1132:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         This API should be called after HAL_SD_ReadBlocks_DMA() function
1133:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         to insure that all data sent by the card is already transferred by the 
1134:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         DMA controller.
1135:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
1136:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  Timeout: Timeout duration  
1137:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
1138:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1139:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** HAL_SD_ErrorTypedef HAL_SD_CheckReadOperation(SD_HandleTypeDef *hsd, uint32_t Timeout)
1140:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
1141:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
1142:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t timeout = Timeout;
1143:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t tmp1, tmp2;
1144:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef tmp3;
1145:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1146:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Wait for DMA/SD transfer end or SD error variables to be in SD handle */
1147:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp1 = hsd->DmaTransferCplt; 
1148:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp2 = hsd->SdTransferCplt;
1149:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp3 = (HAL_SD_ErrorTypedef)hsd->SdTransferErr;
1150:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1151:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while ((tmp1 == 0U) && (tmp2 == 0U) && (tmp3 == SD_OK) && (timeout > 0U))
1152:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1153:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp1 = hsd->DmaTransferCplt; 
1154:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp2 = hsd->SdTransferCplt;
1155:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp3 = (HAL_SD_ErrorTypedef)hsd->SdTransferErr;    
1156:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     timeout--;
1157:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1158:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1159:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   timeout = Timeout;
1160:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1161:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Wait until the Rx transfer is no longer active */
1162:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while((__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXACT)) && (timeout > 0U))
1163:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1164:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     timeout--;  
1165:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1166:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1167:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Send stop command in multiblock read */
1168:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (hsd->SdOperation == SD_READ_MULTIPLE_BLOCK)
1169:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1170:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = HAL_SD_StopTransfer(hsd);
1171:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1172:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
ARM GAS  /tmp/ccnQ8l0t.s 			page 22


1173:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if ((timeout == 0U) && (errorstate == SD_OK))
1174:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1175:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_DATA_TIMEOUT;
1176:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1177:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1178:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Clear all the static flags */
1179:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_STATIC_FLAGS);
1180:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1181:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Return error state */
1182:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (hsd->SdTransferErr != SD_OK)
1183:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1184:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return (HAL_SD_ErrorTypedef)(hsd->SdTransferErr);
1185:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1186:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1187:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
1188:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
1189:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1190:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
1191:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  This function waits until the SD DMA data write transfer is finished. 
1192:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         This API should be called after HAL_SD_WriteBlocks_DMA() function
1193:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         to insure that all data sent by the card is already transferred by the 
1194:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         DMA controller.
1195:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
1196:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  Timeout: Timeout duration  
1197:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
1198:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1199:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** HAL_SD_ErrorTypedef HAL_SD_CheckWriteOperation(SD_HandleTypeDef *hsd, uint32_t Timeout)
1200:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
1201:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
1202:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t timeout = Timeout;
1203:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t tmp1, tmp2;
1204:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef tmp3;
1205:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1206:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Wait for DMA/SD transfer end or SD error variables to be in SD handle */
1207:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp1 = hsd->DmaTransferCplt; 
1208:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp2 = hsd->SdTransferCplt;
1209:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp3 = (HAL_SD_ErrorTypedef)hsd->SdTransferErr;
1210:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1211:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while ((tmp1 == 0U) && (tmp2 == 0U) && (tmp3 == SD_OK) && (timeout > 0U))
1212:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1213:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp1 = hsd->DmaTransferCplt; 
1214:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp2 = hsd->SdTransferCplt;
1215:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp3 = (HAL_SD_ErrorTypedef)hsd->SdTransferErr;
1216:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     timeout--;
1217:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1218:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1219:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   timeout = Timeout;
1220:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1221:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Wait until the Tx transfer is no longer active */
1222:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while((__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_TXACT))  && (timeout > 0U))
1223:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1224:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     timeout--;  
1225:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1226:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1227:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Send stop command in multiblock write */
1228:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (hsd->SdOperation == SD_WRITE_MULTIPLE_BLOCK)
1229:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
ARM GAS  /tmp/ccnQ8l0t.s 			page 23


1230:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = HAL_SD_StopTransfer(hsd);
1231:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1232:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1233:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if ((timeout == 0U) && (errorstate == SD_OK))
1234:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1235:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_DATA_TIMEOUT;
1236:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1237:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1238:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Clear all the static flags */
1239:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_STATIC_FLAGS);
1240:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1241:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Return error state */
1242:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (hsd->SdTransferErr != SD_OK)
1243:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1244:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return (HAL_SD_ErrorTypedef)(hsd->SdTransferErr);
1245:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1246:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1247:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Wait until write is complete */
1248:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while(HAL_SD_GetStatus(hsd) != SD_TRANSFER_OK)
1249:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {    
1250:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1251:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1252:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate; 
1253:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
1254:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1255:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
1256:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Erases the specified memory area of the given SD card.
1257:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle 
1258:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  startaddr: Start byte address
1259:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  endaddr: End byte address
1260:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
1261:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1262:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** HAL_SD_ErrorTypedef HAL_SD_Erase(SD_HandleTypeDef *hsd, uint64_t startaddr, uint64_t endaddr)
1263:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
1264:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
1265:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef sdio_cmdinitstructure;
1266:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1267:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t delay         = 0U;
1268:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __IO uint32_t maxdelay = 0U;
1269:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint8_t cardstate      = 0U;
1270:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1271:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check if the card command class supports erase command */
1272:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (((hsd->CSD[1U] >> 20U) & SD_CCCC_ERASE) == 0U)
1273:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1274:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_REQUEST_NOT_APPLICABLE;
1275:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1276:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
1277:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1278:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1279:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Get max delay value */
1280:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   maxdelay = 120000U / (((hsd->Instance->CLKCR) & 0xFFU) + 2U);
1281:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1282:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED) == SD_CARD_LOCKED)
1283:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1284:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_LOCK_UNLOCK_FAILED;
1285:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1286:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
ARM GAS  /tmp/ccnQ8l0t.s 			page 24


1287:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1288:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1289:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Get start and end block for high capacity cards */
1290:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (hsd->CardType == HIGH_CAPACITY_SD_CARD)
1291:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1292:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     startaddr /= 512U;
1293:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     endaddr   /= 512U;
1294:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1295:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1296:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* According to sd-card spec 1.0 ERASE_GROUP_START (CMD32) and erase_group_end(CMD33) */
1297:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if ((hsd->CardType == STD_CAPACITY_SD_CARD_V1_1) || (hsd->CardType == STD_CAPACITY_SD_CARD_V2_0) 
1298:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (hsd->CardType == HIGH_CAPACITY_SD_CARD))
1299:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1300:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send CMD32 SD_ERASE_GRP_START with argument as addr  */
1301:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Argument         =(uint32_t)startaddr;
1302:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_SD_ERASE_GRP_START;
1303:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
1304:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
1305:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
1306:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
1307:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1308:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Check for error conditions */
1309:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp1Error(hsd, SD_CMD_SD_ERASE_GRP_START);
1310:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1311:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if (errorstate != SD_OK)
1312:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
1313:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
1314:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
1315:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1316:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send CMD33 SD_ERASE_GRP_END with argument as addr  */
1317:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Argument         = (uint32_t)endaddr;
1318:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_SD_ERASE_GRP_END;
1319:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
1320:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1321:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Check for error conditions */
1322:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp1Error(hsd, SD_CMD_SD_ERASE_GRP_END);
1323:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1324:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if (errorstate != SD_OK)
1325:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
1326:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
1327:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
1328:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1329:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1330:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Send CMD38 ERASE */
1331:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = 0U;
1332:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_ERASE;
1333:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
1334:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1335:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
1336:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_CmdResp1Error(hsd, SD_CMD_ERASE);
1337:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1338:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (errorstate != SD_OK)
1339:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1340:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
1341:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1342:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1343:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   for (; delay < maxdelay; delay++)
ARM GAS  /tmp/ccnQ8l0t.s 			page 25


1344:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1345:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1346:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1347:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Wait until the card is in programming state */
1348:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_IsCardProgramming(hsd, &cardstate);
1349:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1350:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   delay = SD_DATATIMEOUT;
1351:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1352:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while ((delay > 0U) && (errorstate == SD_OK) && ((cardstate == SD_CARD_PROGRAMMING) || (cardstate
1353:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1354:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_IsCardProgramming(hsd, &cardstate);
1355:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     delay--;
1356:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1357:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1358:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
1359:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
1360:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1361:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
1362:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  This function handles SD card interrupt request.
1363:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
1364:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval None
1365:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1366:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** void HAL_SD_IRQHandler(SD_HandleTypeDef *hsd)
1367:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {  
1368:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for SDIO interrupt flags */
1369:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_IT_DATAEND))
1370:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1371:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_IT_DATAEND);  
1372:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
1373:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* SD transfer is complete */
1374:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->SdTransferCplt = 1U;
1375:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1376:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* No transfer error */ 
1377:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->SdTransferErr  = SD_OK;
1378:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1379:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     HAL_SD_XferCpltCallback(hsd);  
1380:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }  
1381:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_IT_DCRCFAIL))
1382:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1383:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_DCRCFAIL);
1384:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1385:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->SdTransferErr = SD_DATA_CRC_FAIL;
1386:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1387:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     HAL_SD_XferErrorCallback(hsd);
1388:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1389:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1390:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_IT_DTIMEOUT))
1391:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1392:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_DTIMEOUT);
1393:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1394:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->SdTransferErr = SD_DATA_TIMEOUT;
1395:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1396:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     HAL_SD_XferErrorCallback(hsd);
1397:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1398:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_IT_RXOVERR))
1399:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1400:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_RXOVERR);
ARM GAS  /tmp/ccnQ8l0t.s 			page 26


1401:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1402:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->SdTransferErr = SD_RX_OVERRUN;
1403:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1404:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     HAL_SD_XferErrorCallback(hsd);
1405:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1406:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_IT_TXUNDERR))
1407:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1408:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_TXUNDERR);
1409:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1410:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->SdTransferErr = SD_TX_UNDERRUN;
1411:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1412:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     HAL_SD_XferErrorCallback(hsd);
1413:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1414:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #ifdef SDIO_STA_STBITERR
1415:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_IT_STBITERR))
1416:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1417:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_STBITERR);
1418:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1419:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->SdTransferErr = SD_START_BIT_ERR;
1420:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1421:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     HAL_SD_XferErrorCallback(hsd);
1422:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1423:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #endif /* SDIO_STA_STBITERR */
1424:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
1425:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1426:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* No error flag set */
1427:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1428:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1429:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Disable all SDIO peripheral interrupt sources */
1430:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #ifdef SDIO_STA_STBITERR
1431:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_DISABLE_IT(hsd, SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND  |\
1432:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_TXFIFOHE | SDIO_IT_RXFIFOHF | SDIO_IT_TXUNDERR |\
1433:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_RXOVERR  | SDIO_IT_STBITERR);
1434:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #else /* SDIO_STA_STBITERR not defined */
1435:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_DISABLE_IT(hsd, SDIO_IT_DCRCFAIL | SDIO_IT_DTIMEOUT | SDIO_IT_DATAEND  |\
1436:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_TXFIFOHE | SDIO_IT_RXFIFOHF | SDIO_IT_TXUNDERR |\
1437:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_RXOVERR);
1438:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #endif /* SDIO_STA_STBITERR */
1439:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
1440:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1441:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1442:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
1443:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  SD end of transfer callback.
1444:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle 
1445:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval None
1446:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1447:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** __weak void HAL_SD_XferCpltCallback(SD_HandleTypeDef *hsd)
1448:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
1449:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
1450:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   UNUSED(hsd);
1451:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* NOTE : This function Should not be modified, when the callback is needed,
1452:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             the HAL_SD_XferCpltCallback could be implemented in the user file
1453:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****    */ 
1454:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
1455:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1456:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
1457:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  SD Transfer Error callback.
ARM GAS  /tmp/ccnQ8l0t.s 			page 27


1458:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
1459:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval None
1460:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1461:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** __weak void HAL_SD_XferErrorCallback(SD_HandleTypeDef *hsd)
1462:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
1463:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
1464:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   UNUSED(hsd);
1465:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* NOTE : This function Should not be modified, when the callback is needed,
1466:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             the HAL_SD_XferErrorCallback could be implemented in the user file
1467:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****    */ 
1468:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
1469:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1470:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
1471:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  SD Transfer complete Rx callback in non blocking mode.
1472:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
1473:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *                the configuration information for the specified DMA module.
1474:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval None
1475:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1476:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** __weak void HAL_SD_DMA_RxCpltCallback(DMA_HandleTypeDef *hdma)
1477:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
1478:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
1479:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   UNUSED(hdma);
1480:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* NOTE : This function Should not be modified, when the callback is needed,
1481:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             the HAL_SD_DMA_RxCpltCallback could be implemented in the user file
1482:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****    */ 
1483:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }  
1484:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1485:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
1486:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  SD DMA transfer complete Rx error callback.
1487:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
1488:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *                the configuration information for the specified DMA module.
1489:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval None
1490:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1491:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** __weak void HAL_SD_DMA_RxErrorCallback(DMA_HandleTypeDef *hdma)
1492:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
1493:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
1494:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   UNUSED(hdma);
1495:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* NOTE : This function Should not be modified, when the callback is needed,
1496:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             the HAL_SD_DMA_RxErrorCallback could be implemented in the user file
1497:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****    */ 
1498:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
1499:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1500:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
1501:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  SD Transfer complete Tx callback in non blocking mode.
1502:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
1503:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *                the configuration information for the specified DMA module.
1504:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval None
1505:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1506:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** __weak void HAL_SD_DMA_TxCpltCallback(DMA_HandleTypeDef *hdma)
1507:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
1508:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
1509:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   UNUSED(hdma);
1510:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* NOTE : This function Should not be modified, when the callback is needed,
1511:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             the HAL_SD_DMA_TxCpltCallback could be implemented in the user file
1512:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****    */ 
1513:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }  
1514:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
ARM GAS  /tmp/ccnQ8l0t.s 			page 28


1515:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
1516:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  SD DMA transfer complete error Tx callback.
1517:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
1518:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *                the configuration information for the specified DMA module.
1519:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval None
1520:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1521:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** __weak void HAL_SD_DMA_TxErrorCallback(DMA_HandleTypeDef *hdma)
1522:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
1523:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
1524:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   UNUSED(hdma);
1525:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* NOTE : This function Should not be modified, when the callback is needed,
1526:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             the HAL_SD_DMA_TxErrorCallback could be implemented in the user file
1527:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****    */ 
1528:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
1529:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1530:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
1531:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @}
1532:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1533:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1534:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /** @addtogroup SD_Exported_Functions_Group3
1535:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****  *  @brief   management functions 
1536:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****  *
1537:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** @verbatim   
1538:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   ==============================================================================
1539:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                       ##### Peripheral Control functions #####
1540:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   ==============================================================================  
1541:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   [..]
1542:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     This subsection provides a set of functions allowing to control the SD card 
1543:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     operations.
1544:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1545:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** @endverbatim
1546:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @{
1547:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1548:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1549:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
1550:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Returns information about specific card.
1551:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
1552:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  pCardInfo: Pointer to a HAL_SD_CardInfoTypedef structure that  
1553:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         contains all SD cardinformation  
1554:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
1555:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1556:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** HAL_SD_ErrorTypedef HAL_SD_Get_CardInfo(SD_HandleTypeDef *hsd, HAL_SD_CardInfoTypedef *pCardInfo)
1557:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
1558:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
1559:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t tmp = 0U;
1560:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1561:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->CardType = (uint8_t)(hsd->CardType);
1562:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->RCA      = (uint16_t)(hsd->RCA);
1563:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1564:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 0 */
1565:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (hsd->CSD[0U] & 0xFF000000U) >> 24U;
1566:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.CSDStruct      = (uint8_t)((tmp & 0xC0U) >> 6U);
1567:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.SysSpecVersion = (uint8_t)((tmp & 0x3CU) >> 2U);
1568:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.Reserved1      = tmp & 0x03U;
1569:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1570:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 1 */
1571:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (hsd->CSD[0U] & 0x00FF0000U) >> 16U;
ARM GAS  /tmp/ccnQ8l0t.s 			page 29


1572:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.TAAC = (uint8_t)tmp;
1573:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1574:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 2 */
1575:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (hsd->CSD[0U] & 0x0000FF00U) >> 8U;
1576:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.NSAC = (uint8_t)tmp;
1577:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1578:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 3 */
1579:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = hsd->CSD[0U] & 0x000000FFU;
1580:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.MaxBusClkFrec = (uint8_t)tmp;
1581:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1582:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 4 */
1583:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (hsd->CSD[1U] & 0xFF000000U) >> 24U;
1584:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.CardComdClasses = (uint16_t)(tmp << 4U);
1585:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1586:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 5 */
1587:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (hsd->CSD[1U] & 0x00FF0000U) >> 16U;
1588:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.CardComdClasses |= (uint16_t)((tmp & 0xF0) >> 4U);
1589:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.RdBlockLen       = (uint8_t)(tmp & 0x0FU);
1590:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1591:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 6 */
1592:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (hsd->CSD[1U] & 0x0000FF00U) >> 8U;
1593:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.PartBlockRead   = (uint8_t)((tmp & 0x80U) >> 7U);
1594:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.WrBlockMisalign = (uint8_t)((tmp & 0x40U) >> 6U);
1595:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.RdBlockMisalign = (uint8_t)((tmp & 0x20U) >> 5U);
1596:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.DSRImpl         = (uint8_t)((tmp & 0x10U) >> 4U);
1597:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.Reserved2       = 0U; /*!< Reserved */
1598:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1599:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if ((hsd->CardType == STD_CAPACITY_SD_CARD_V1_1) || (hsd->CardType == STD_CAPACITY_SD_CARD_V2_0))
1600:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1601:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.DeviceSize = (tmp & 0x03U) << 10U;
1602:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1603:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Byte 7 */
1604:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp = (uint8_t)(hsd->CSD[1U] & 0x000000FFU);
1605:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.DeviceSize |= (tmp) << 2U;
1606:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1607:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Byte 8 */
1608:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp = (uint8_t)((hsd->CSD[2U] & 0xFF000000U) >> 24U);
1609:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.DeviceSize |= (tmp & 0xC0U) >> 6U;
1610:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1611:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.MaxRdCurrentVDDMin = (tmp & 0x38U) >> 3U;
1612:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.MaxRdCurrentVDDMax = (tmp & 0x07U);
1613:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1614:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Byte 9 */
1615:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp = (uint8_t)((hsd->CSD[2U] & 0x00FF0000U) >> 16U);
1616:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.MaxWrCurrentVDDMin = (tmp & 0xE0U) >> 5U;
1617:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.MaxWrCurrentVDDMax = (tmp & 0x1CU) >> 2U;
1618:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.DeviceSizeMul      = (tmp & 0x03U) << 1U;
1619:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Byte 10 */
1620:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp = (uint8_t)((hsd->CSD[2U] & 0x0000FF00U) >> 8U);
1621:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.DeviceSizeMul |= (tmp & 0x80U) >> 7U;
1622:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1623:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->CardCapacity  = (pCardInfo->SD_csd.DeviceSize + 1U) ;
1624:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->CardCapacity *= (1U << (pCardInfo->SD_csd.DeviceSizeMul + 2U));
1625:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->CardBlockSize = 1U << (pCardInfo->SD_csd.RdBlockLen);
1626:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->CardCapacity *= pCardInfo->CardBlockSize;
1627:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1628:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if (hsd->CardType == HIGH_CAPACITY_SD_CARD)
ARM GAS  /tmp/ccnQ8l0t.s 			page 30


1629:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1630:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Byte 7 */
1631:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp = (uint8_t)(hsd->CSD[1U] & 0x000000FFU);
1632:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.DeviceSize = (tmp & 0x3FU) << 16U;
1633:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1634:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Byte 8 */
1635:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp = (uint8_t)((hsd->CSD[2U] & 0xFF000000U) >> 24U);
1636:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1637:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.DeviceSize |= (tmp << 8U);
1638:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1639:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Byte 9 */
1640:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp = (uint8_t)((hsd->CSD[2U] & 0x00FF0000U) >> 16U);
1641:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1642:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.DeviceSize |= (tmp);
1643:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1644:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Byte 10 */
1645:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp = (uint8_t)((hsd->CSD[2U] & 0x0000FF00U) >> 8U);
1646:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1647:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->CardCapacity = (uint64_t)((((uint64_t)pCardInfo->SD_csd.DeviceSize + 1U)) * 512U * 1
1648:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->CardBlockSize = 512U;    
1649:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1650:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
1651:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1652:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Not supported card type */
1653:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_ERROR;
1654:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1655:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1656:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.EraseGrSize = (tmp & 0x40U) >> 6U;
1657:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.EraseGrMul  = (tmp & 0x3FU) << 1U;
1658:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1659:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 11 */
1660:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)(hsd->CSD[2U] & 0x000000FFU);
1661:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.EraseGrMul     |= (tmp & 0x80U) >> 7U;
1662:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.WrProtectGrSize = (tmp & 0x7FU);
1663:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1664:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 12 */
1665:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)((hsd->CSD[3U] & 0xFF000000U) >> 24U);
1666:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.WrProtectGrEnable = (tmp & 0x80U) >> 7U;
1667:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.ManDeflECC        = (tmp & 0x60U) >> 5U;
1668:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.WrSpeedFact       = (tmp & 0x1CU) >> 2U;
1669:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.MaxWrBlockLen     = (tmp & 0x03U) << 2U;
1670:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1671:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 13 */
1672:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)((hsd->CSD[3U] & 0x00FF0000U) >> 16U);
1673:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.MaxWrBlockLen      |= (tmp & 0xC0U) >> 6U;
1674:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.WriteBlockPaPartial = (tmp & 0x20U) >> 5U;
1675:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.Reserved3           = 0U;
1676:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.ContentProtectAppli = (tmp & 0x01U);
1677:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1678:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 14 */
1679:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)((hsd->CSD[3U] & 0x0000FF00U) >> 8U);
1680:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.FileFormatGrouop = (tmp & 0x80U) >> 7U;
1681:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.CopyFlag         = (tmp & 0x40U) >> 6U;
1682:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.PermWrProtect    = (tmp & 0x20U) >> 5U;
1683:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.TempWrProtect    = (tmp & 0x10U) >> 4U;
1684:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.FileFormat       = (tmp & 0x0CU) >> 2U;
1685:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.ECC              = (tmp & 0x03U);
ARM GAS  /tmp/ccnQ8l0t.s 			page 31


1686:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1687:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 15 */
1688:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)(hsd->CSD[3U] & 0x000000FFU);
1689:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.CSD_CRC   = (tmp & 0xFEU) >> 1U;
1690:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.Reserved4 = 1U;
1691:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1692:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 0 */
1693:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)((hsd->CID[0U] & 0xFF000000U) >> 24U);
1694:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ManufacturerID = tmp;
1695:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1696:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 1 */
1697:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)((hsd->CID[0U] & 0x00FF0000U) >> 16U);
1698:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.OEM_AppliID = tmp << 8U;
1699:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1700:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 2 */
1701:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)((hsd->CID[0U] & 0x0000FF00U) >> 8U);
1702:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.OEM_AppliID |= tmp;
1703:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1704:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 3 */
1705:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)(hsd->CID[0U] & 0x000000FFU);
1706:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ProdName1 = tmp << 24U;
1707:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1708:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 4 */
1709:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)((hsd->CID[1U] & 0xFF000000U) >> 24U);
1710:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ProdName1 |= tmp << 16U;
1711:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1712:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 5 */
1713:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)((hsd->CID[1U] & 0x00FF0000U) >> 16U);
1714:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ProdName1 |= tmp << 8U;
1715:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1716:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 6 */
1717:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)((hsd->CID[1U] & 0x0000FF00U) >> 8U);
1718:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ProdName1 |= tmp;
1719:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1720:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 7 */
1721:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)(hsd->CID[1U] & 0x000000FFU);
1722:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ProdName2 = tmp;
1723:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1724:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 8 */
1725:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)((hsd->CID[2U] & 0xFF000000U) >> 24U);
1726:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ProdRev = tmp;
1727:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1728:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 9 */
1729:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)((hsd->CID[2U] & 0x00FF0000U) >> 16U);
1730:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ProdSN = tmp << 24U;
1731:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1732:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 10 */
1733:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)((hsd->CID[2U] & 0x0000FF00U) >> 8U);
1734:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ProdSN |= tmp << 16U;
1735:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1736:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 11 */
1737:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)(hsd->CID[2U] & 0x000000FFU);
1738:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ProdSN |= tmp << 8U;
1739:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1740:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 12 */
1741:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)((hsd->CID[3U] & 0xFF000000U) >> 24U);
1742:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ProdSN |= tmp;
ARM GAS  /tmp/ccnQ8l0t.s 			page 32


1743:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1744:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 13 */
1745:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)((hsd->CID[3U] & 0x00FF0000U) >> 16U);
1746:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.Reserved1   |= (tmp & 0xF0U) >> 4U;
1747:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ManufactDate = (tmp & 0x0FU) << 8U;
1748:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1749:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 14 */
1750:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)((hsd->CID[3U] & 0x0000FF00U) >> 8U);
1751:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ManufactDate |= tmp;
1752:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1753:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 15 */
1754:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (uint8_t)(hsd->CID[3U] & 0x000000FFU);
1755:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.CID_CRC   = (tmp & 0xFEU) >> 1U;
1756:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.Reserved2 = 1U;
1757:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1758:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
1759:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
1760:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1761:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
1762:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Enables wide bus operation for the requested card if supported by 
1763:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         card.
1764:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle       
1765:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  WideMode: Specifies the SD card wide bus mode 
1766:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *          This parameter can be one of the following values:
1767:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *            @arg SDIO_BUS_WIDE_8B: 8-bit data transfer (Only for MMC)
1768:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *            @arg SDIO_BUS_WIDE_4B: 4-bit data transfer
1769:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *            @arg SDIO_BUS_WIDE_1B: 1-bit data transfer
1770:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
1771:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1772:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** HAL_SD_ErrorTypedef HAL_SD_WideBusOperation_Config(SD_HandleTypeDef *hsd, uint32_t WideMode)
1773:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
1774:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
1775:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_InitTypeDef tmpinit;
1776:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1777:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* MMC Card does not support this feature */
1778:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (hsd->CardType == MULTIMEDIA_CARD)
1779:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1780:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_UNSUPPORTED_FEATURE;
1781:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1782:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
1783:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1784:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if ((hsd->CardType == STD_CAPACITY_SD_CARD_V1_1) || (hsd->CardType == STD_CAPACITY_SD_CARD_V
1785:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (hsd->CardType == HIGH_CAPACITY_SD_CARD))
1786:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1787:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if (WideMode == SDIO_BUS_WIDE_8B)
1788:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
1789:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       errorstate = SD_UNSUPPORTED_FEATURE;
1790:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
1791:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     else if (WideMode == SDIO_BUS_WIDE_4B)
1792:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
1793:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       errorstate = SD_WideBus_Enable(hsd);
1794:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
1795:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     else if (WideMode == SDIO_BUS_WIDE_1B)
1796:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
1797:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       errorstate = SD_WideBus_Disable(hsd);
1798:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
1799:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     else
ARM GAS  /tmp/ccnQ8l0t.s 			page 33


1800:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
1801:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       /* WideMode is not a valid argument*/
1802:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       errorstate = SD_INVALID_PARAMETER;
1803:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
1804:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
1805:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if (errorstate == SD_OK)
1806:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
1807:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       /* Configure the SDIO peripheral */
1808:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       tmpinit.ClockEdge           = hsd->Init.ClockEdge;
1809:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       tmpinit.ClockBypass         = hsd->Init.ClockBypass;
1810:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       tmpinit.ClockPowerSave      = hsd->Init.ClockPowerSave;
1811:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       tmpinit.BusWide             = WideMode;
1812:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       tmpinit.HardwareFlowControl = hsd->Init.HardwareFlowControl;
1813:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       tmpinit.ClockDiv            = hsd->Init.ClockDiv;
1814:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       SDIO_Init(hsd->Instance, tmpinit);
1815:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
1816:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1817:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1818:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
1819:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
1820:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1821:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
1822:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Aborts an ongoing data transfer.
1823:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
1824:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
1825:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1826:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** HAL_SD_ErrorTypedef HAL_SD_StopTransfer(SD_HandleTypeDef *hsd)
1827:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
1828:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef sdio_cmdinitstructure;
1829:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
1830:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1831:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Send CMD12 STOP_TRANSMISSION  */
1832:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = 0U;
1833:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_STOP_TRANSMISSION;
1834:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
1835:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
1836:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
1837:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
1838:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1839:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
1840:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_CmdResp1Error(hsd, SD_CMD_STOP_TRANSMISSION);
1841:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1842:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
1843:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
1844:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1845:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
1846:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Switches the SD card to High Speed mode.
1847:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         This API must be used after "Transfer State"
1848:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @note   This operation should be followed by the configuration 
1849:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         of PLL to have SDIOCK clock between 67 and 75 MHz
1850:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
1851:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
1852:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1853:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** HAL_SD_ErrorTypedef HAL_SD_HighSpeed (SD_HandleTypeDef *hsd)
1854:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
1855:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
1856:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef sdio_cmdinitstructure;
ARM GAS  /tmp/ccnQ8l0t.s 			page 34


1857:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataInitTypeDef sdio_datainitstructure;
1858:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1859:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint8_t SD_hs[64U]  = {0U};
1860:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t SD_scr[2U] = {0U, 0U};
1861:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t SD_SPEC    = 0U;
1862:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t count = 0U, *tempbuff = (uint32_t *)SD_hs;
1863:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1864:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Initialize the Data control register */
1865:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->Instance->DCTRL = 0U;
1866:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1867:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Get SCR Register */
1868:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_FindSCR(hsd, SD_scr);
1869:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1870:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (errorstate != SD_OK)
1871:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1872:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
1873:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1874:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1875:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Test the Version supported by the card*/ 
1876:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SD_SPEC = (SD_scr[1U]  & 0x01000000U) | (SD_scr[1U]  & 0x02000000U);
1877:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1878:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (SD_SPEC != SD_ALLZERO)
1879:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
1880:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Set Block Size for Card */
1881:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Argument         = (uint32_t)64U;
1882:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_SET_BLOCKLEN;
1883:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
1884:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
1885:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
1886:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
1887:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1888:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Check for error conditions */
1889:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp1Error(hsd, SD_CMD_SET_BLOCKLEN);
1890:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1891:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if (errorstate != SD_OK)
1892:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
1893:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
1894:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
1895:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1896:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Configure the SD DPSM (Data Path State Machine) */
1897:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_datainitstructure.DataTimeOut   = SD_DATATIMEOUT;
1898:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_datainitstructure.DataLength    = 64U;
1899:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_datainitstructure.DataBlockSize = SDIO_DATABLOCK_SIZE_64B ;
1900:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_datainitstructure.TransferDir   = SDIO_TRANSFER_DIR_TO_SDIO;
1901:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_datainitstructure.TransferMode  = SDIO_TRANSFER_MODE_BLOCK;
1902:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_datainitstructure.DPSM          = SDIO_DPSM_ENABLE;
1903:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_DataConfig(hsd->Instance, &sdio_datainitstructure);
1904:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1905:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send CMD6 switch mode */
1906:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Argument         = 0x80FFFF01U;
1907:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_HS_SWITCH;
1908:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure); 
1909:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1910:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Check for error conditions */
1911:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp1Error(hsd, SD_CMD_HS_SWITCH);
1912:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1913:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if (errorstate != SD_OK)
ARM GAS  /tmp/ccnQ8l0t.s 			page 35


1914:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
1915:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
1916:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
1917:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #ifdef SDIO_STA_STBITERR        
1918:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     while(!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT 
1919:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #else /* SDIO_STA_STBITERR */
1920:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     while(!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT 
1921:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #endif /* SDIO_STA_STBITERR */
1922:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
1923:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXFIFOHF))
1924:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       {
1925:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         for (count = 0U; count < 8U; count++)
1926:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         {
1927:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           *(tempbuff + count) = SDIO_ReadFIFO(hsd->Instance);
1928:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         }
1929:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         
1930:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         tempbuff += 8U;
1931:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       }
1932:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
1933:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1934:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_DTIMEOUT))
1935:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
1936:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_DTIMEOUT);
1937:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
1938:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       errorstate = SD_DATA_TIMEOUT;
1939:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
1940:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
1941:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
1942:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_DCRCFAIL))
1943:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
1944:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_DCRCFAIL);
1945:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
1946:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       errorstate = SD_DATA_CRC_FAIL;
1947:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
1948:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
1949:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
1950:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXOVERR))
1951:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
1952:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_RXOVERR);
1953:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
1954:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       errorstate = SD_RX_OVERRUN;
1955:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
1956:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
1957:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
1958:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #ifdef SDIO_STA_STBITERR
1959:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_STBITERR))
1960:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
1961:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_STBITERR);
1962:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
1963:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       errorstate = SD_START_BIT_ERR;
1964:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
1965:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
1966:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
1967:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #endif /* SDIO_STA_STBITERR */
1968:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     else
1969:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
1970:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       /* No error flag set */
ARM GAS  /tmp/ccnQ8l0t.s 			page 36


1971:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
1972:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1973:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     count = SD_DATATIMEOUT;
1974:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1975:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     while ((__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXDAVL)) && (count > 0U))
1976:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
1977:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       *tempbuff = SDIO_ReadFIFO(hsd->Instance);
1978:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       tempbuff++;
1979:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       count--;
1980:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
1981:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1982:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Clear all the static flags */
1983:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_STATIC_FLAGS);
1984:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
1985:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Test if the switch mode HS is ok */
1986:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if ((SD_hs[13U]& 2U) != 2U)
1987:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
1988:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       errorstate = SD_UNSUPPORTED_FEATURE;
1989:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     } 
1990:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
1991:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
1992:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
1993:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
1994:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1995:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
1996:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @}
1997:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
1998:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
1999:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /** @addtogroup SD_Exported_Functions_Group4
2000:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****  *  @brief   Peripheral State functions 
2001:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****  *
2002:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** @verbatim   
2003:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   ==============================================================================
2004:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                       ##### Peripheral State functions #####
2005:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   ==============================================================================  
2006:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   [..]
2007:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     This subsection permits to get in runtime the status of the peripheral 
2008:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     and the data flow.
2009:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2010:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** @endverbatim
2011:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @{
2012:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2013:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2014:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2015:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Returns the current SD card's status.
2016:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
2017:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  pSDstatus: Pointer to the buffer that will contain the SD card status 
2018:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         SD Status register)
2019:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
2020:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2021:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** HAL_SD_ErrorTypedef HAL_SD_SendSDStatus(SD_HandleTypeDef *hsd, uint32_t *pSDstatus)
2022:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2023:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef  sdio_cmdinitstructure;
2024:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataInitTypeDef sdio_datainitstructure;
2025:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
2026:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t count = 0U;
2027:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
ARM GAS  /tmp/ccnQ8l0t.s 			page 37


2028:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check SD response */
2029:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if ((SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED) == SD_CARD_LOCKED)
2030:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2031:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_LOCK_UNLOCK_FAILED;
2032:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2033:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2034:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2035:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2036:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Set block size for card if it is not equal to current block size for card */
2037:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = 64U;
2038:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SET_BLOCKLEN;
2039:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
2040:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
2041:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
2042:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
2043:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2044:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
2045:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_CmdResp1Error(hsd, SD_CMD_SET_BLOCKLEN);
2046:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2047:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (errorstate != SD_OK)
2048:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2049:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2050:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2051:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2052:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Send CMD55 */
2053:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = (uint32_t)(hsd->RCA << 16U);
2054:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_APP_CMD;
2055:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
2056:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2057:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
2058:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_CmdResp1Error(hsd, SD_CMD_APP_CMD);
2059:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2060:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (errorstate != SD_OK)
2061:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2062:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2063:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2064:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2065:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Configure the SD DPSM (Data Path State Machine) */ 
2066:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataTimeOut   = SD_DATATIMEOUT;
2067:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataLength    = 64U;
2068:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataBlockSize = SDIO_DATABLOCK_SIZE_64B;
2069:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferDir   = SDIO_TRANSFER_DIR_TO_SDIO;
2070:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferMode  = SDIO_TRANSFER_MODE_BLOCK;
2071:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DPSM          = SDIO_DPSM_ENABLE;
2072:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataConfig(hsd->Instance, &sdio_datainitstructure);
2073:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2074:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Send ACMD13 (SD_APP_STATUS)  with argument as card's RCA */
2075:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = 0U;
2076:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SD_APP_STATUS;
2077:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
2078:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2079:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
2080:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_CmdResp1Error(hsd, SD_CMD_SD_APP_STATUS);
2081:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2082:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (errorstate != SD_OK)
2083:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2084:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
ARM GAS  /tmp/ccnQ8l0t.s 			page 38


2085:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2086:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2087:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Get status data */
2088:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #ifdef SDIO_STA_STBITERR 
2089:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while(!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT | 
2090:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #else /* SDIO_STA_STBITERR not defined */
2091:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while(!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT | 
2092:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #endif /* SDIO_STA_STBITERR */
2093:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2094:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXFIFOHF))
2095:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
2096:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       for (count = 0U; count < 8U; count++)
2097:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       {
2098:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         *(pSDstatus + count) = SDIO_ReadFIFO(hsd->Instance);
2099:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       }
2100:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
2101:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       pSDstatus += 8U;
2102:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
2103:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2104:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2105:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_DTIMEOUT))
2106:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2107:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_DTIMEOUT);
2108:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2109:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_DATA_TIMEOUT;
2110:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2111:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2112:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2113:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_DCRCFAIL))
2114:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2115:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_DCRCFAIL);
2116:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2117:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_DATA_CRC_FAIL;
2118:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2119:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2120:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2121:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXOVERR))
2122:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2123:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_RXOVERR);
2124:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2125:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_RX_OVERRUN;
2126:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2127:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2128:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2129:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #ifdef SDIO_STA_STBITERR
2130:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_STBITERR))
2131:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2132:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_STBITERR);
2133:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2134:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_START_BIT_ERR;
2135:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2136:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2137:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2138:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #endif /* SDIO_STA_STBITERR */
2139:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
2140:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2141:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* No error flag set */
ARM GAS  /tmp/ccnQ8l0t.s 			page 39


2142:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }  
2143:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2144:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   count = SD_DATATIMEOUT;
2145:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while ((__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXDAVL)) && (count > 0U))
2146:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2147:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     *pSDstatus = SDIO_ReadFIFO(hsd->Instance);
2148:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pSDstatus++;
2149:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     count--;
2150:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2151:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2152:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Clear all the static status flags*/
2153:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_STATIC_FLAGS);
2154:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2155:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
2156:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
2157:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2158:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2159:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Gets the current sd card data status.
2160:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
2161:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval Data Transfer state
2162:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2163:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** HAL_SD_TransferStateTypedef HAL_SD_GetStatus(SD_HandleTypeDef *hsd)
2164:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2165:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_CardStateTypedef cardstate =  SD_CARD_TRANSFER;
2166:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2167:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Get SD card state */
2168:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   cardstate = SD_GetState(hsd);
2169:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2170:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Find SD status according to card state*/
2171:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (cardstate == SD_CARD_TRANSFER)
2172:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2173:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return SD_TRANSFER_OK;
2174:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2175:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if(cardstate == SD_CARD_ERROR)
2176:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2177:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return SD_TRANSFER_ERROR;
2178:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2179:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
2180:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2181:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return SD_TRANSFER_BUSY;
2182:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2183:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
2184:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2185:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2186:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Gets the SD card status.
2187:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle      
2188:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  pCardStatus: Pointer to the HAL_SD_CardStatusTypedef structure that 
2189:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         will contain the SD card status information 
2190:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
2191:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2192:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** HAL_SD_ErrorTypedef HAL_SD_GetCardStatus(SD_HandleTypeDef *hsd, HAL_SD_CardStatusTypedef *pCardStat
2193:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2194:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
2195:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t tmp = 0U;
2196:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t sd_status[16U];
2197:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2198:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = HAL_SD_SendSDStatus(hsd, sd_status);
ARM GAS  /tmp/ccnQ8l0t.s 			page 40


2199:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2200:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (errorstate  != SD_OK)
2201:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2202:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2203:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2204:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2205:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 0 */
2206:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (sd_status[0U] & 0xC0U) >> 6U;
2207:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->DAT_BUS_WIDTH = (uint8_t)tmp;
2208:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2209:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 0 */
2210:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (sd_status[0U] & 0x20U) >> 5U;
2211:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->SECURED_MODE = (uint8_t)tmp;
2212:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2213:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 2 */
2214:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (sd_status[2U] & 0xFFU);
2215:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->SD_CARD_TYPE = (uint8_t)(tmp << 8U);
2216:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2217:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 3 */
2218:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (sd_status[3U] & 0xFFU);
2219:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->SD_CARD_TYPE |= (uint8_t)tmp;
2220:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2221:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 4 */
2222:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (sd_status[4U] & 0xFFU);
2223:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->SIZE_OF_PROTECTED_AREA = (uint8_t)(tmp << 24U);
2224:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2225:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 5 */
2226:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (sd_status[5U] & 0xFFU);
2227:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->SIZE_OF_PROTECTED_AREA |= (uint8_t)(tmp << 16U);
2228:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2229:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 6 */
2230:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (sd_status[6U] & 0xFFU);
2231:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->SIZE_OF_PROTECTED_AREA |= (uint8_t)(tmp << 8U);
2232:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2233:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 7 */
2234:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (sd_status[7U] & 0xFFU);
2235:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->SIZE_OF_PROTECTED_AREA |= (uint8_t)tmp;
2236:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2237:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 8 */
2238:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (sd_status[8U] & 0xFFU);
2239:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->SPEED_CLASS = (uint8_t)tmp;
2240:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2241:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 9 */
2242:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (sd_status[9U] & 0xFFU);
2243:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->PERFORMANCE_MOVE = (uint8_t)tmp;
2244:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2245:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 10 */
2246:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (sd_status[10U] & 0xF0U) >> 4U;
2247:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->AU_SIZE = (uint8_t)tmp;
2248:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2249:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 11 */
2250:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (sd_status[11U] & 0xFFU);
2251:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->ERASE_SIZE = (uint8_t)(tmp << 8U);
2252:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2253:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 12 */
2254:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (sd_status[12U] & 0xFFU);
2255:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->ERASE_SIZE |= (uint8_t)tmp;
ARM GAS  /tmp/ccnQ8l0t.s 			page 41


2256:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2257:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 13 */
2258:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (sd_status[13U] & 0xFCU) >> 2U;
2259:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->ERASE_TIMEOUT = (uint8_t)tmp;
2260:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2261:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Byte 13 */
2262:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = (sd_status[13U] & 0x3U);
2263:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->ERASE_OFFSET = (uint8_t)tmp;
2264:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2265:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
2266:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
2267:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****          
2268:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2269:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @}
2270:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2271:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2272:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2273:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @}
2274:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2275:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2276:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /* Private function ----------------------------------------------------------*/  
2277:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /** @addtogroup SD_Private_Functions
2278:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @{
2279:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2280:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2281:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2282:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  SD DMA transfer complete Rx callback.
2283:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
2284:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *                the configuration information for the specified DMA module.
2285:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval None
2286:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2287:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static void SD_DMA_RxCplt(DMA_HandleTypeDef *hdma)
2288:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2289:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SD_HandleTypeDef *hsd = (SD_HandleTypeDef*)((DMA_HandleTypeDef*)hdma)->Parent;
2290:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2291:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* DMA transfer is complete */
2292:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->DmaTransferCplt = 1U;
2293:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2294:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Wait until SD transfer is complete */
2295:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while(hsd->SdTransferCplt == 0U)
2296:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2297:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2298:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2299:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Disable the DMA channel */
2300:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_DMA_Abort(hdma);
2301:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2302:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Transfer complete user callback */
2303:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_DMA_RxCpltCallback(hsd->hdmarx);   
2304:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
2305:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2306:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2307:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  SD DMA transfer Error Rx callback.
2308:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
2309:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *                the configuration information for the specified DMA module.
2310:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval None
2311:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2312:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static void SD_DMA_RxError(DMA_HandleTypeDef *hdma)
ARM GAS  /tmp/ccnQ8l0t.s 			page 42


2313:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2314:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SD_HandleTypeDef *hsd = (SD_HandleTypeDef*)((DMA_HandleTypeDef*)hdma)->Parent;
2315:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2316:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Transfer complete user callback */
2317:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_DMA_RxErrorCallback(hsd->hdmarx);
2318:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
2319:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2320:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2321:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  SD DMA transfer complete Tx callback.
2322:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
2323:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *                the configuration information for the specified DMA module.
2324:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval None
2325:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2326:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static void SD_DMA_TxCplt(DMA_HandleTypeDef *hdma)
2327:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2328:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SD_HandleTypeDef *hsd = (SD_HandleTypeDef*)((DMA_HandleTypeDef*)hdma)->Parent;
2329:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2330:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* DMA transfer is complete */
2331:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->DmaTransferCplt = 1U;
2332:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2333:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Wait until SD transfer is complete */
2334:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while(hsd->SdTransferCplt == 0U)
2335:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2336:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2337:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****  
2338:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Disable the DMA channel */
2339:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_DMA_Abort(hdma);
2340:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2341:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Transfer complete user callback */
2342:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_DMA_TxCpltCallback(hsd->hdmatx);  
2343:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
2344:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2345:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2346:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  SD DMA transfer Error Tx callback.
2347:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
2348:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *                the configuration information for the specified DMA module.
2349:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval None
2350:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2351:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static void SD_DMA_TxError(DMA_HandleTypeDef *hdma)
2352:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2353:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SD_HandleTypeDef *hsd = ( SD_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
2354:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2355:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Transfer complete user callback */
2356:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_DMA_TxErrorCallback(hsd->hdmatx);
2357:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
2358:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2359:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2360:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Returns the SD current state.
2361:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
2362:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD card current state
2363:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2364:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_CardStateTypedef SD_GetState(SD_HandleTypeDef *hsd)
2365:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2366:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t resp1 = 0U;
2367:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2368:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (SD_SendStatus(hsd, &resp1) != SD_OK)
2369:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
ARM GAS  /tmp/ccnQ8l0t.s 			page 43


2370:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return SD_CARD_ERROR;
2371:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2372:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
2373:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2374:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return (HAL_SD_CardStateTypedef)((resp1 >> 9U) & 0x0FU);
2375:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2376:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
2377:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2378:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2379:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Initializes all cards or single card as the case may be Card(s) come 
2380:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         into standby state.
2381:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
2382:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
2383:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2384:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_Initialize_Cards(SD_HandleTypeDef *hsd)
2385:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2386:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef sdio_cmdinitstructure; 
2387:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
2388:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint16_t sd_rca = 1U;
2389:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2390:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(SDIO_GetPowerState(hsd->Instance) == 0U) /* Power off */
2391:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2392:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_REQUEST_NOT_APPLICABLE;
2393:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2394:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2395:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2396:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2397:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(hsd->CardType != SECURE_DIGITAL_IO_CARD)
2398:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2399:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send CMD2 ALL_SEND_CID */
2400:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Argument         = 0U;
2401:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_ALL_SEND_CID;
2402:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Response         = SDIO_RESPONSE_LONG;
2403:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
2404:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
2405:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
2406:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2407:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Check for error conditions */
2408:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp2Error(hsd);
2409:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2410:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if(errorstate != SD_OK)
2411:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
2412:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
2413:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
2414:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2415:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Get Card identification number data */
2416:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->CID[0U] = SDIO_GetResponse(SDIO_RESP1);
2417:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->CID[1U] = SDIO_GetResponse(SDIO_RESP2);
2418:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->CID[2U] = SDIO_GetResponse(SDIO_RESP3);
2419:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->CID[3U] = SDIO_GetResponse(SDIO_RESP4);
2420:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2421:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2422:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((hsd->CardType == STD_CAPACITY_SD_CARD_V1_1)    || (hsd->CardType == STD_CAPACITY_SD_CARD_V2_0
2423:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****      (hsd->CardType == SECURE_DIGITAL_IO_COMBO_CARD) || (hsd->CardType == HIGH_CAPACITY_SD_CARD))
2424:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2425:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send CMD3 SET_REL_ADDR with argument 0 */
2426:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* SD Card publishes its RCA. */
ARM GAS  /tmp/ccnQ8l0t.s 			page 44


2427:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_SET_REL_ADDR;
2428:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
2429:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
2430:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2431:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Check for error conditions */
2432:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp6Error(hsd, SD_CMD_SET_REL_ADDR, &sd_rca);
2433:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2434:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if(errorstate != SD_OK)
2435:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
2436:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
2437:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
2438:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2439:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2440:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (hsd->CardType != SECURE_DIGITAL_IO_CARD)
2441:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2442:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Get the SD card RCA */
2443:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->RCA = sd_rca;
2444:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2445:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send CMD9 SEND_CSD with argument as card's RCA */
2446:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Argument         = (uint32_t)(hsd->RCA << 16U);
2447:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_SEND_CSD;
2448:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Response         = SDIO_RESPONSE_LONG;
2449:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
2450:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2451:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Check for error conditions */
2452:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp2Error(hsd);
2453:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2454:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if(errorstate != SD_OK)
2455:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
2456:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
2457:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
2458:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2459:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Get Card Specific Data */
2460:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->CSD[0U] = SDIO_GetResponse(SDIO_RESP1);
2461:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->CSD[1U] = SDIO_GetResponse(SDIO_RESP2);
2462:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->CSD[2U] = SDIO_GetResponse(SDIO_RESP3);
2463:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->CSD[3U] = SDIO_GetResponse(SDIO_RESP4);
2464:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2465:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2466:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* All cards are initialized */
2467:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
2468:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
2469:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2470:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2471:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Selects of Deselects the corresponding card.
2472:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
2473:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  addr: Address of the card to be selected  
2474:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
2475:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2476:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_Select_Deselect(SD_HandleTypeDef *hsd, uint64_t addr)
2477:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2478:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef sdio_cmdinitstructure;
2479:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
2480:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2481:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Send CMD7 SDIO_SEL_DESEL_CARD */
2482:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = (uint32_t)addr;
2483:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SEL_DESEL_CARD;
ARM GAS  /tmp/ccnQ8l0t.s 			page 45


2484:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
2485:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
2486:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
2487:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
2488:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2489:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
2490:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_CmdResp1Error(hsd, SD_CMD_SEL_DESEL_CARD);
2491:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2492:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
2493:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
2494:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2495:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2496:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Enquires cards about their operating voltage and configures clock
2497:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         controls and stores SD information that will be needed in future
2498:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         in the SD handle.
2499:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
2500:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
2501:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2502:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_PowerON(SD_HandleTypeDef *hsd)
2503:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2504:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef sdio_cmdinitstructure; 
2505:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __IO HAL_SD_ErrorTypedef errorstate = SD_OK; 
2506:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t response = 0U, count = 0U, validvoltage = 0U;
2507:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t sdtype = SD_STD_CAPACITY;
2508:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2509:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Power ON Sequence -------------------------------------------------------*/
2510:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Disable SDIO Clock */
2511:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_DISABLE(); 
2512:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2513:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Set Power State to ON */
2514:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_PowerState_ON(hsd->Instance);
2515:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2516:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* 1ms: required power up waiting time before starting the SD initialization 
2517:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****      sequence */
2518:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_Delay(1);
2519:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2520:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Enable SDIO Clock */
2521:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_ENABLE();
2522:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2523:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* CMD0: GO_IDLE_STATE -----------------------------------------------------*/
2524:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* No CMD response required */
2525:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = 0U;
2526:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_GO_IDLE_STATE;
2527:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_NO;
2528:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
2529:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
2530:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
2531:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2532:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
2533:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_CmdError(hsd);
2534:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2535:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(errorstate != SD_OK)
2536:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2537:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* CMD Response Timeout (wait for CMDSENT flag) */
2538:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2539:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2540:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
ARM GAS  /tmp/ccnQ8l0t.s 			page 46


2541:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* CMD8: SEND_IF_COND ------------------------------------------------------*/
2542:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Send CMD8 to verify SD card interface operating condition */
2543:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Argument: - [31:12]: Reserved (shall be set to '0')
2544:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   - [11:8]: Supply Voltage (VHS) 0x1 (Range: 2.7-3.6 V)
2545:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   - [7:0]: Check Pattern (recommended 0xAA) */
2546:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* CMD Response: R7 */
2547:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = SD_CHECK_PATTERN;
2548:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_SDIO_SEND_IF_COND;
2549:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
2550:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
2551:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2552:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */ 
2553:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_CmdResp7Error(hsd);
2554:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2555:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (errorstate == SD_OK)
2556:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2557:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* SD Card 2.0 */
2558:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->CardType = STD_CAPACITY_SD_CARD_V2_0; 
2559:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdtype        = SD_HIGH_CAPACITY;
2560:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2561:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2562:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Send CMD55 */
2563:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = 0U;
2564:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_APP_CMD;
2565:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
2566:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2567:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
2568:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_CmdResp1Error(hsd, SD_CMD_APP_CMD);
2569:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2570:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* If errorstate is Command Timeout, it is a MMC card */
2571:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* If errorstate is SD_OK it is a SD card: SD card 2.0 (voltage range mismatch)
2572:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****      or SD card 1.x */
2573:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(errorstate == SD_OK)
2574:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2575:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* SD CARD */
2576:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send ACMD41 SD_APP_OP_COND with Argument 0x80100000 */
2577:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     while((!validvoltage) && (count < SD_MAX_VOLT_TRIAL))
2578:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
2579:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
2580:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       /* SEND CMD55 APP_CMD with RCA as 0 */
2581:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.Argument         = 0U;
2582:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.CmdIndex         = SD_CMD_APP_CMD;
2583:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
2584:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
2585:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
2586:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
2587:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
2588:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       /* Check for error conditions */
2589:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       errorstate = SD_CmdResp1Error(hsd, SD_CMD_APP_CMD);
2590:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
2591:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       if(errorstate != SD_OK)
2592:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       {
2593:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         return errorstate;
2594:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       }
2595:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
2596:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       /* Send CMD41 */
2597:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.Argument         = SD_VOLTAGE_WINDOW_SD | sdtype;
ARM GAS  /tmp/ccnQ8l0t.s 			page 47


2598:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.CmdIndex         = SD_CMD_SD_APP_OP_COND;
2599:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
2600:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
2601:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
2602:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
2603:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
2604:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       /* Check for error conditions */
2605:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       errorstate = SD_CmdResp3Error(hsd);
2606:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
2607:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       if(errorstate != SD_OK)
2608:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       {
2609:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         return errorstate;
2610:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       }
2611:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
2612:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       /* Get command response */
2613:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       response = SDIO_GetResponse(SDIO_RESP1);
2614:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
2615:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       /* Get operating voltage*/
2616:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       validvoltage = (((response >> 31U) == 1U) ? 1U : 0U);
2617:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
2618:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       count++;
2619:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
2620:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2621:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if(count >= SD_MAX_VOLT_TRIAL)
2622:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
2623:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       errorstate = SD_INVALID_VOLTRANGE;
2624:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
2625:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
2626:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
2627:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2628:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if((response & SD_HIGH_CAPACITY) == SD_HIGH_CAPACITY) /* (response &= SD_HIGH_CAPACITY) */
2629:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
2630:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       hsd->CardType = HIGH_CAPACITY_SD_CARD;
2631:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
2632:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2633:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   } /* else MMC Card */
2634:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2635:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
2636:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
2637:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2638:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2639:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Turns the SDIO output signals off.
2640:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
2641:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
2642:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2643:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_PowerOFF(SD_HandleTypeDef *hsd)
2644:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2645:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
2646:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2647:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Set Power State to OFF */
2648:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_PowerState_OFF(hsd->Instance);
2649:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2650:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
2651:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
2652:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2653:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2654:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Returns the current card's status.
ARM GAS  /tmp/ccnQ8l0t.s 			page 48


2655:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
2656:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  pCardStatus: pointer to the buffer that will contain the SD card 
2657:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         status (Card Status register)  
2658:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
2659:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2660:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_SendStatus(SD_HandleTypeDef *hsd, uint32_t *pCardStatus)
2661:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2662:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef sdio_cmdinitstructure;
2663:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
2664:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2665:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(pCardStatus == NULL)
2666:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2667:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_INVALID_PARAMETER;
2668:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2669:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2670:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2671:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2672:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Send Status command */
2673:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = (uint32_t)(hsd->RCA << 16U);
2674:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SEND_STATUS;
2675:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
2676:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
2677:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
2678:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
2679:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2680:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
2681:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_CmdResp1Error(hsd, SD_CMD_SEND_STATUS);
2682:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2683:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(errorstate != SD_OK)
2684:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2685:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2686:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2687:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2688:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Get SD card status */
2689:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *pCardStatus = SDIO_GetResponse(SDIO_RESP1);
2690:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2691:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
2692:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
2693:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2694:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2695:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Checks for error conditions for CMD0.
2696:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
2697:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
2698:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2699:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_CmdError(SD_HandleTypeDef *hsd)
2700:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2701:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
2702:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t timeout, tmp;
2703:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2704:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   timeout = SDIO_CMD0TIMEOUT;
2705:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2706:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = __HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CMDSENT);
2707:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2708:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while((timeout > 0U) && (!tmp))
2709:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2710:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp = __HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CMDSENT);
2711:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     timeout--;
ARM GAS  /tmp/ccnQ8l0t.s 			page 49


2712:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2713:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2714:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(timeout == 0U)
2715:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2716:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CMD_RSP_TIMEOUT;
2717:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2718:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2719:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2720:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Clear all the static flags */
2721:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_STATIC_FLAGS);
2722:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2723:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
2724:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
2725:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2726:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2727:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Checks for error conditions for R7 response.
2728:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
2729:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
2730:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2731:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_CmdResp7Error(SD_HandleTypeDef *hsd)
2732:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2733:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_ERROR;
2734:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t timeout = SDIO_CMD0TIMEOUT, tmp;
2735:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2736:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = __HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CMDREND | SDIO_FLAG_CTIMEOUT); 
2737:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2738:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while((!tmp) && (timeout > 0U))
2739:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2740:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp = __HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CMDREND | SDIO_FLAG_CTIMEOUT);
2741:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     timeout--;
2742:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2743:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2744:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp = __HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CTIMEOUT); 
2745:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2746:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((timeout == 0U) || tmp)
2747:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2748:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Card is not V2.0 compliant or card does not support the set voltage range */
2749:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CMD_RSP_TIMEOUT;
2750:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2751:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_CTIMEOUT);
2752:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2753:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2754:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2755:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2756:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CMDREND))
2757:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2758:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Card is SD V2.0 compliant */
2759:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_OK;
2760:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2761:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_CMDREND);
2762:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2763:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2764:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2765:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2766:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
2767:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
2768:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
ARM GAS  /tmp/ccnQ8l0t.s 			page 50


2769:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2770:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Checks for error conditions for R1 response.
2771:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
2772:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  SD_CMD: The sent command index  
2773:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
2774:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2775:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_CmdResp1Error(SD_HandleTypeDef *hsd, uint8_t SD_CMD)
2776:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2777:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
2778:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t response_r1;
2779:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2780:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while(!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CMDREND | SDIO_FLAG_CTIMEOUT))
2781:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2782:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2783:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2784:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CTIMEOUT))
2785:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2786:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CMD_RSP_TIMEOUT;
2787:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2788:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_CTIMEOUT);
2789:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2790:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2791:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2792:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if(__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CCRCFAIL))
2793:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2794:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CMD_CRC_FAIL;
2795:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2796:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_CCRCFAIL);
2797:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2798:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2799:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2800:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2801:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check response received is of desired command */
2802:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(SDIO_GetCommandResponse(hsd->Instance) != SD_CMD)
2803:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2804:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_ILLEGAL_CMD;
2805:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2806:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2807:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2808:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2809:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Clear all the static flags */
2810:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_STATIC_FLAGS);
2811:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2812:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* We have received response, retrieve it for analysis  */
2813:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   response_r1 = SDIO_GetResponse(SDIO_RESP1);
2814:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2815:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_ERRORBITS) == SD_ALLZERO)
2816:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2817:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2818:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2819:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2820:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_ADDR_OUT_OF_RANGE) == SD_OCR_ADDR_OUT_OF_RANGE)
2821:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2822:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_ADDR_OUT_OF_RANGE);
2823:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2824:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2825:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_ADDR_MISALIGNED) == SD_OCR_ADDR_MISALIGNED)
ARM GAS  /tmp/ccnQ8l0t.s 			page 51


2826:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2827:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_ADDR_MISALIGNED);
2828:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2829:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2830:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_BLOCK_LEN_ERR) == SD_OCR_BLOCK_LEN_ERR)
2831:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2832:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_BLOCK_LEN_ERR);
2833:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2834:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2835:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_ERASE_SEQ_ERR) == SD_OCR_ERASE_SEQ_ERR)
2836:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2837:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_ERASE_SEQ_ERR);
2838:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2839:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2840:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_BAD_ERASE_PARAM) == SD_OCR_BAD_ERASE_PARAM)
2841:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2842:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_BAD_ERASE_PARAM);
2843:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2844:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2845:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_WRITE_PROT_VIOLATION) == SD_OCR_WRITE_PROT_VIOLATION)
2846:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2847:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_WRITE_PROT_VIOLATION);
2848:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2849:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2850:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_LOCK_UNLOCK_FAILED) == SD_OCR_LOCK_UNLOCK_FAILED)
2851:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2852:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_LOCK_UNLOCK_FAILED);
2853:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2854:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2855:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_COM_CRC_FAILED) == SD_OCR_COM_CRC_FAILED)
2856:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2857:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_COM_CRC_FAILED);
2858:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2859:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2860:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_ILLEGAL_CMD) == SD_OCR_ILLEGAL_CMD)
2861:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2862:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_ILLEGAL_CMD);
2863:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2864:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2865:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_CARD_ECC_FAILED) == SD_OCR_CARD_ECC_FAILED)
2866:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2867:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_CARD_ECC_FAILED);
2868:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2869:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2870:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_CC_ERROR) == SD_OCR_CC_ERROR)
2871:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2872:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_CC_ERROR);
2873:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2874:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2875:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_GENERAL_UNKNOWN_ERROR) == SD_OCR_GENERAL_UNKNOWN_ERROR)
2876:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2877:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_GENERAL_UNKNOWN_ERROR);
2878:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2879:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2880:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_STREAM_READ_UNDERRUN) == SD_OCR_STREAM_READ_UNDERRUN)
2881:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2882:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_STREAM_READ_UNDERRUN);
ARM GAS  /tmp/ccnQ8l0t.s 			page 52


2883:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2884:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2885:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_STREAM_WRITE_OVERRUN) == SD_OCR_STREAM_WRITE_OVERRUN)
2886:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2887:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_STREAM_WRITE_OVERRUN);
2888:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2889:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2890:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_CID_CSD_OVERWRITE) == SD_OCR_CID_CSD_OVERWRITE)
2891:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2892:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_CID_CSD_OVERWRITE);
2893:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2894:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2895:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_WP_ERASE_SKIP) == SD_OCR_WP_ERASE_SKIP)
2896:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2897:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_WP_ERASE_SKIP);
2898:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2899:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2900:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_CARD_ECC_DISABLED) == SD_OCR_CARD_ECC_DISABLED)
2901:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2902:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_CARD_ECC_DISABLED);
2903:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2904:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2905:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_ERASE_RESET) == SD_OCR_ERASE_RESET)
2906:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2907:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_ERASE_RESET);
2908:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2909:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2910:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_OCR_AKE_SEQ_ERROR) == SD_OCR_AKE_SEQ_ERROR)
2911:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2912:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_AKE_SEQ_ERROR);
2913:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2914:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2915:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
2916:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
2917:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2918:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2919:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Checks for error conditions for R3 (OCR) response.
2920:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
2921:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
2922:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2923:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_CmdResp3Error(SD_HandleTypeDef *hsd)
2924:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2925:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
2926:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2927:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while (!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CMDREND | SDIO_FLAG_CTIMEOUT))
2928:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2929:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2930:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2931:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CTIMEOUT))
2932:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2933:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CMD_RSP_TIMEOUT;
2934:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2935:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_CTIMEOUT);
2936:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2937:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2938:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2939:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
ARM GAS  /tmp/ccnQ8l0t.s 			page 53


2940:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Clear all the static flags */
2941:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_STATIC_FLAGS);
2942:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2943:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
2944:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
2945:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2946:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2947:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Checks for error conditions for R2 (CID or CSD) response.
2948:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
2949:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
2950:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2951:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_CmdResp2Error(SD_HandleTypeDef *hsd)
2952:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
  27              		.loc 1 2952 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              	.LVL0:
2953:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
2954:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2955:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while (!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CMDREND | SDIO_FLAG_CTIMEOUT))
  33              		.loc 1 2955 0
  34 0000 0268     		ldr	r2, [r0]
  35              	.L2:
  36              		.loc 1 2955 0 is_stmt 0 discriminator 1
  37 0002 536B     		ldr	r3, [r2, #52]
  38 0004 13F0450F 		tst	r3, #69
  39 0008 FBD0     		beq	.L2
2956:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2957:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2958:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2959:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CTIMEOUT))
  40              		.loc 1 2959 0 is_stmt 1
  41 000a 536B     		ldr	r3, [r2, #52]
  42 000c 13F0040F 		tst	r3, #4
  43 0010 03D0     		beq	.L3
  44              	.LVL1:
2960:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2961:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CMD_RSP_TIMEOUT;
2962:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2963:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_CTIMEOUT);
  45              		.loc 1 2963 0
  46 0012 0423     		movs	r3, #4
  47 0014 9363     		str	r3, [r2, #56]
2964:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2965:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
  48              		.loc 1 2965 0
  49 0016 0320     		movs	r0, #3
  50              	.LVL2:
  51 0018 7047     		bx	lr
  52              	.LVL3:
  53              	.L3:
2966:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2967:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if (__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CCRCFAIL))
  54              		.loc 1 2967 0
  55 001a 536B     		ldr	r3, [r2, #52]
ARM GAS  /tmp/ccnQ8l0t.s 			page 54


  56 001c 13F0010F 		tst	r3, #1
  57 0020 04D1     		bne	.L7
2968:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2969:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CMD_CRC_FAIL;
2970:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2971:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_CCRCFAIL);
2972:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
2973:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
2974:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2975:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
2976:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
2977:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* No error flag set */
2978:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
2979:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2980:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Clear all the static flags */
2981:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_STATIC_FLAGS);
  58              		.loc 1 2981 0
  59 0022 40F2FF53 		movw	r3, #1535
  60 0026 9363     		str	r3, [r2, #56]
2982:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2983:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
  61              		.loc 1 2983 0
  62 0028 0020     		movs	r0, #0
  63              	.LVL4:
2984:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
  64              		.loc 1 2984 0
  65 002a 7047     		bx	lr
  66              	.LVL5:
  67              	.L7:
2971:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
  68              		.loc 1 2971 0
  69 002c 0120     		movs	r0, #1
  70              	.LVL6:
  71 002e 9063     		str	r0, [r2, #56]
2973:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
  72              		.loc 1 2973 0
  73 0030 7047     		bx	lr
  74              		.cfi_endproc
  75              	.LFE165:
  77              		.section	.text.SD_CmdResp1Error,"ax",%progbits
  78              		.align	1
  79              		.syntax unified
  80              		.thumb
  81              		.thumb_func
  82              		.fpu fpv4-sp-d16
  84              	SD_CmdResp1Error:
  85              	.LFB163:
2776:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
  86              		.loc 1 2776 0
  87              		.cfi_startproc
  88              		@ args = 0, pretend = 0, frame = 0
  89              		@ frame_needed = 0, uses_anonymous_args = 0
  90              	.LVL7:
  91 0000 38B5     		push	{r3, r4, r5, lr}
  92              	.LCFI0:
  93              		.cfi_def_cfa_offset 16
  94              		.cfi_offset 3, -16
ARM GAS  /tmp/ccnQ8l0t.s 			page 55


  95              		.cfi_offset 4, -12
  96              		.cfi_offset 5, -8
  97              		.cfi_offset 14, -4
  98              	.LVL8:
2780:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
  99              		.loc 1 2780 0
 100 0002 0268     		ldr	r2, [r0]
 101              	.L9:
2780:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 102              		.loc 1 2780 0 is_stmt 0 discriminator 1
 103 0004 536B     		ldr	r3, [r2, #52]
 104 0006 13F0450F 		tst	r3, #69
 105 000a FBD0     		beq	.L9
2784:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 106              		.loc 1 2784 0 is_stmt 1
 107 000c 536B     		ldr	r3, [r2, #52]
 108 000e 13F0040F 		tst	r3, #4
 109 0012 03D0     		beq	.L10
 110              	.LVL9:
2788:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 111              		.loc 1 2788 0
 112 0014 0423     		movs	r3, #4
 113 0016 9363     		str	r3, [r2, #56]
2790:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 114              		.loc 1 2790 0
 115 0018 0320     		movs	r0, #3
 116              	.LVL10:
 117 001a 38BD     		pop	{r3, r4, r5, pc}
 118              	.LVL11:
 119              	.L10:
2792:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 120              		.loc 1 2792 0
 121 001c 536B     		ldr	r3, [r2, #52]
 122 001e 13F0010F 		tst	r3, #1
 123 0022 02D0     		beq	.L12
 124              	.LVL12:
2796:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 125              		.loc 1 2796 0
 126 0024 0120     		movs	r0, #1
 127              	.LVL13:
 128 0026 9063     		str	r0, [r2, #56]
2798:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 129              		.loc 1 2798 0
 130 0028 38BD     		pop	{r3, r4, r5, pc}
 131              	.LVL14:
 132              	.L12:
 133 002a 0D46     		mov	r5, r1
 134 002c 0446     		mov	r4, r0
2802:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 135              		.loc 1 2802 0
 136 002e 1046     		mov	r0, r2
 137              	.LVL15:
 138 0030 FFF7FEFF 		bl	SDIO_GetCommandResponse
 139              	.LVL16:
 140 0034 A842     		cmp	r0, r5
 141 0036 01D0     		beq	.L36
2806:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
ARM GAS  /tmp/ccnQ8l0t.s 			page 56


 142              		.loc 1 2806 0
 143 0038 1020     		movs	r0, #16
 144 003a 38BD     		pop	{r3, r4, r5, pc}
 145              	.LVL17:
 146              	.L36:
2810:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 147              		.loc 1 2810 0
 148 003c 2368     		ldr	r3, [r4]
 149 003e 40F2FF52 		movw	r2, #1535
 150 0042 9A63     		str	r2, [r3, #56]
2813:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 151              		.loc 1 2813 0
 152 0044 0020     		movs	r0, #0
 153 0046 FFF7FEFF 		bl	SDIO_GetResponse
 154              	.LVL18:
2815:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 155              		.loc 1 2815 0
 156 004a 334B     		ldr	r3, .L39
 157 004c 0340     		ands	r3, r3, r0
 158 004e 002B     		cmp	r3, #0
 159 0050 3FD0     		beq	.L14
2820:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 160              		.loc 1 2820 0
 161 0052 0028     		cmp	r0, #0
 162 0054 3FDB     		blt	.L15
2825:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 163              		.loc 1 2825 0
 164 0056 10F0804F 		tst	r0, #1073741824
 165 005a 01D0     		beq	.L37
2827:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 166              		.loc 1 2827 0
 167 005c 0920     		movs	r0, #9
 168              	.LVL19:
 169 005e 38BD     		pop	{r3, r4, r5, pc}
 170              	.LVL20:
 171              	.L37:
2830:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 172              		.loc 1 2830 0
 173 0060 10F0005F 		tst	r0, #536870912
 174 0064 01D0     		beq	.L38
2832:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 175              		.loc 1 2832 0
 176 0066 0A20     		movs	r0, #10
 177              	.LVL21:
 178 0068 38BD     		pop	{r3, r4, r5, pc}
 179              	.LVL22:
 180              	.L38:
2835:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 181              		.loc 1 2835 0
 182 006a 10F0805F 		tst	r0, #268435456
 183 006e 34D1     		bne	.L18
2840:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 184              		.loc 1 2840 0
 185 0070 10F0006F 		tst	r0, #134217728
 186 0074 33D1     		bne	.L19
2845:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 187              		.loc 1 2845 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 57


 188 0076 10F0806F 		tst	r0, #67108864
 189 007a 32D1     		bne	.L20
2850:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 190              		.loc 1 2850 0
 191 007c 10F0807F 		tst	r0, #16777216
 192 0080 31D1     		bne	.L21
2855:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 193              		.loc 1 2855 0
 194 0082 10F4000F 		tst	r0, #8388608
 195 0086 30D1     		bne	.L22
2860:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 196              		.loc 1 2860 0
 197 0088 10F4800F 		tst	r0, #4194304
 198 008c 2FD1     		bne	.L23
2865:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 199              		.loc 1 2865 0
 200 008e 10F4001F 		tst	r0, #2097152
 201 0092 2ED1     		bne	.L24
2870:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 202              		.loc 1 2870 0
 203 0094 10F4801F 		tst	r0, #1048576
 204 0098 2DD1     		bne	.L25
2875:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 205              		.loc 1 2875 0
 206 009a 10F4002F 		tst	r0, #524288
 207 009e 2CD1     		bne	.L26
2880:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 208              		.loc 1 2880 0
 209 00a0 10F4802F 		tst	r0, #262144
 210 00a4 2BD1     		bne	.L27
2885:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 211              		.loc 1 2885 0
 212 00a6 10F4003F 		tst	r0, #131072
 213 00aa 2AD1     		bne	.L28
2890:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 214              		.loc 1 2890 0
 215 00ac 10F4803F 		tst	r0, #65536
 216 00b0 29D1     		bne	.L29
2895:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 217              		.loc 1 2895 0
 218 00b2 10F4004F 		tst	r0, #32768
 219 00b6 28D1     		bne	.L30
2900:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 220              		.loc 1 2900 0
 221 00b8 10F4804F 		tst	r0, #16384
 222 00bc 27D1     		bne	.L31
2905:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 223              		.loc 1 2905 0
 224 00be 10F4005F 		tst	r0, #8192
 225 00c2 26D1     		bne	.L32
2910:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 226              		.loc 1 2910 0
 227 00c4 00F00800 		and	r0, r0, #8
 228              	.LVL23:
2915:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 229              		.loc 1 2915 0
 230 00c8 0028     		cmp	r0, #0
ARM GAS  /tmp/ccnQ8l0t.s 			page 58


 231 00ca 14BF     		ite	ne
 232 00cc 1A20     		movne	r0, #26
 233 00ce 0020     		moveq	r0, #0
 234 00d0 38BD     		pop	{r3, r4, r5, pc}
 235              	.LVL24:
 236              	.L14:
2817:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 237              		.loc 1 2817 0
 238 00d2 0020     		movs	r0, #0
 239              	.LVL25:
 240 00d4 38BD     		pop	{r3, r4, r5, pc}
 241              	.LVL26:
 242              	.L15:
2822:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 243              		.loc 1 2822 0
 244 00d6 1C20     		movs	r0, #28
 245              	.LVL27:
 246 00d8 38BD     		pop	{r3, r4, r5, pc}
 247              	.LVL28:
 248              	.L18:
2837:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 249              		.loc 1 2837 0
 250 00da 0B20     		movs	r0, #11
 251              	.LVL29:
 252 00dc 38BD     		pop	{r3, r4, r5, pc}
 253              	.LVL30:
 254              	.L19:
2842:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 255              		.loc 1 2842 0
 256 00de 0C20     		movs	r0, #12
 257              	.LVL31:
 258 00e0 38BD     		pop	{r3, r4, r5, pc}
 259              	.LVL32:
 260              	.L20:
2847:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 261              		.loc 1 2847 0
 262 00e2 0D20     		movs	r0, #13
 263              	.LVL33:
 264 00e4 38BD     		pop	{r3, r4, r5, pc}
 265              	.LVL34:
 266              	.L21:
2852:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 267              		.loc 1 2852 0
 268 00e6 0E20     		movs	r0, #14
 269              	.LVL35:
 270 00e8 38BD     		pop	{r3, r4, r5, pc}
 271              	.LVL36:
 272              	.L22:
2857:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 273              		.loc 1 2857 0
 274 00ea 0F20     		movs	r0, #15
 275              	.LVL37:
 276 00ec 38BD     		pop	{r3, r4, r5, pc}
 277              	.LVL38:
 278              	.L23:
2862:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 279              		.loc 1 2862 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 59


 280 00ee 1020     		movs	r0, #16
 281              	.LVL39:
 282 00f0 38BD     		pop	{r3, r4, r5, pc}
 283              	.LVL40:
 284              	.L24:
2867:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 285              		.loc 1 2867 0
 286 00f2 1120     		movs	r0, #17
 287              	.LVL41:
 288 00f4 38BD     		pop	{r3, r4, r5, pc}
 289              	.LVL42:
 290              	.L25:
2872:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 291              		.loc 1 2872 0
 292 00f6 1220     		movs	r0, #18
 293              	.LVL43:
 294 00f8 38BD     		pop	{r3, r4, r5, pc}
 295              	.LVL44:
 296              	.L26:
2877:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 297              		.loc 1 2877 0
 298 00fa 1320     		movs	r0, #19
 299              	.LVL45:
 300 00fc 38BD     		pop	{r3, r4, r5, pc}
 301              	.LVL46:
 302              	.L27:
2882:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 303              		.loc 1 2882 0
 304 00fe 1420     		movs	r0, #20
 305              	.LVL47:
 306 0100 38BD     		pop	{r3, r4, r5, pc}
 307              	.LVL48:
 308              	.L28:
2887:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 309              		.loc 1 2887 0
 310 0102 1520     		movs	r0, #21
 311              	.LVL49:
 312 0104 38BD     		pop	{r3, r4, r5, pc}
 313              	.LVL50:
 314              	.L29:
2892:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 315              		.loc 1 2892 0
 316 0106 1620     		movs	r0, #22
 317              	.LVL51:
 318 0108 38BD     		pop	{r3, r4, r5, pc}
 319              	.LVL52:
 320              	.L30:
2897:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 321              		.loc 1 2897 0
 322 010a 1720     		movs	r0, #23
 323              	.LVL53:
 324 010c 38BD     		pop	{r3, r4, r5, pc}
 325              	.LVL54:
 326              	.L31:
2902:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 327              		.loc 1 2902 0
 328 010e 1820     		movs	r0, #24
ARM GAS  /tmp/ccnQ8l0t.s 			page 60


 329              	.LVL55:
 330 0110 38BD     		pop	{r3, r4, r5, pc}
 331              	.LVL56:
 332              	.L32:
2907:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 333              		.loc 1 2907 0
 334 0112 1920     		movs	r0, #25
 335              	.LVL57:
2916:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 336              		.loc 1 2916 0
 337 0114 38BD     		pop	{r3, r4, r5, pc}
 338              	.LVL58:
 339              	.L40:
 340 0116 00BF     		.align	2
 341              	.L39:
 342 0118 08E0FFFD 		.word	-33562616
 343              		.cfi_endproc
 344              	.LFE163:
 346              		.section	.text.SD_IsCardProgramming,"ax",%progbits
 347              		.align	1
 348              		.syntax unified
 349              		.thumb
 350              		.thumb_func
 351              		.fpu fpv4-sp-d16
 353              	SD_IsCardProgramming:
 354              	.LFB170:
2985:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
2986:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
2987:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Checks for error conditions for R6 (RCA) response.
2988:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
2989:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  SD_CMD: The sent command index
2990:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  pRCA: Pointer to the variable that will contain the SD card relative 
2991:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *         address RCA   
2992:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
2993:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
2994:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_CmdResp6Error(SD_HandleTypeDef *hsd, uint8_t SD_CMD, uint16_t *pRCA)
2995:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
2996:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
2997:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t response_r1;
2998:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
2999:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while(!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CMDREND | SDIO_FLAG_CTIMEOUT))
3000:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3001:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3002:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3003:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CTIMEOUT))
3004:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3005:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CMD_RSP_TIMEOUT;
3006:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3007:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_CTIMEOUT);
3008:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3009:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3010:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3011:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if(__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CCRCFAIL))
3012:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3013:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CMD_CRC_FAIL;
3014:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3015:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_CCRCFAIL);
ARM GAS  /tmp/ccnQ8l0t.s 			page 61


3016:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3017:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3018:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3019:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
3020:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3021:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* No error flag set */
3022:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3023:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3024:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check response received is of desired command */
3025:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(SDIO_GetCommandResponse(hsd->Instance) != SD_CMD)
3026:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3027:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_ILLEGAL_CMD;
3028:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3029:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3030:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3031:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3032:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Clear all the static flags */
3033:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_STATIC_FLAGS);
3034:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3035:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* We have received response, retrieve it.  */
3036:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   response_r1 = SDIO_GetResponse(SDIO_RESP1);
3037:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3038:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & (SD_R6_GENERAL_UNKNOWN_ERROR | SD_R6_ILLEGAL_CMD | SD_R6_COM_CRC_FAILED)) == SD
3039:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3040:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     *pRCA = (uint16_t) (response_r1 >> 16U);
3041:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3042:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3043:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3044:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3045:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_R6_GENERAL_UNKNOWN_ERROR) == SD_R6_GENERAL_UNKNOWN_ERROR)
3046:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3047:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_GENERAL_UNKNOWN_ERROR);
3048:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3049:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3050:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_R6_ILLEGAL_CMD) == SD_R6_ILLEGAL_CMD)
3051:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3052:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_ILLEGAL_CMD);
3053:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3054:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3055:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((response_r1 & SD_R6_COM_CRC_FAILED) == SD_R6_COM_CRC_FAILED)
3056:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3057:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_COM_CRC_FAILED);
3058:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3059:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3060:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
3061:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
3062:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
3063:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
3064:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Enables the SDIO wide bus mode.
3065:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
3066:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
3067:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
3068:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_WideBus_Enable(SD_HandleTypeDef *hsd)
3069:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
3070:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef sdio_cmdinitstructure;
3071:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
3072:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
ARM GAS  /tmp/ccnQ8l0t.s 			page 62


3073:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t scr[2U] = {0U, 0U};
3074:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3075:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED) == SD_CARD_LOCKED)
3076:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3077:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_LOCK_UNLOCK_FAILED;
3078:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3079:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3080:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3081:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3082:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Get SCR Register */
3083:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_FindSCR(hsd, scr);
3084:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3085:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(errorstate != SD_OK)
3086:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3087:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3088:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3089:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3090:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* If requested card supports wide bus operation */
3091:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((scr[1U] & SD_WIDE_BUS_SUPPORT) != SD_ALLZERO)
3092:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3093:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send CMD55 APP_CMD with argument as card's RCA.*/
3094:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Argument         = (uint32_t)(hsd->RCA << 16U);
3095:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_APP_CMD;
3096:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
3097:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
3098:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
3099:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
3100:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3101:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Check for error conditions */
3102:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp1Error(hsd, SD_CMD_APP_CMD);
3103:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3104:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if(errorstate != SD_OK)
3105:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
3106:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
3107:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
3108:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3109:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send ACMD6 APP_CMD with argument as 2 for wide bus mode */
3110:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Argument         = 2U;
3111:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_APP_SD_SET_BUSWIDTH;
3112:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
3113:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3114:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Check for error conditions */
3115:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp1Error(hsd, SD_CMD_APP_SD_SET_BUSWIDTH);
3116:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3117:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if(errorstate != SD_OK)
3118:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
3119:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
3120:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
3121:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3122:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3123:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3124:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
3125:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3126:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_REQUEST_NOT_APPLICABLE;
3127:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3128:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3129:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
ARM GAS  /tmp/ccnQ8l0t.s 			page 63


3130:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }   
3131:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
3132:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
3133:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Disables the SDIO wide bus mode.
3134:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
3135:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
3136:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
3137:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_WideBus_Disable(SD_HandleTypeDef *hsd)
3138:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
3139:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef sdio_cmdinitstructure;
3140:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
3141:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3142:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t scr[2U] = {0U, 0U};
3143:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3144:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((SDIO_GetResponse(SDIO_RESP1) & SD_CARD_LOCKED) == SD_CARD_LOCKED)
3145:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3146:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_LOCK_UNLOCK_FAILED;
3147:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3148:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3149:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3150:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3151:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Get SCR Register */
3152:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_FindSCR(hsd, scr);
3153:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3154:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(errorstate != SD_OK)
3155:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3156:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3157:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3158:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3159:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* If requested card supports 1 bit mode operation */
3160:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((scr[1U] & SD_SINGLE_BUS_SUPPORT) != SD_ALLZERO)
3161:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3162:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send CMD55 APP_CMD with argument as card's RCA */
3163:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Argument         = (uint32_t)(hsd->RCA << 16U);
3164:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_APP_CMD;
3165:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
3166:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
3167:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
3168:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
3169:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3170:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Check for error conditions */
3171:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp1Error(hsd, SD_CMD_APP_CMD);
3172:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3173:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if(errorstate != SD_OK)
3174:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
3175:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
3176:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
3177:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3178:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Send ACMD6 APP_CMD with argument as 0 for single bus mode */
3179:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Argument         = 0U;
3180:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_APP_SD_SET_BUSWIDTH;
3181:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
3182:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3183:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Check for error conditions */
3184:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CmdResp1Error(hsd, SD_CMD_APP_SD_SET_BUSWIDTH);
3185:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3186:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if(errorstate != SD_OK)
ARM GAS  /tmp/ccnQ8l0t.s 			page 64


3187:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
3188:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       return errorstate;
3189:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
3190:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3191:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3192:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3193:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
3194:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3195:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_REQUEST_NOT_APPLICABLE;
3196:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3197:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3198:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3199:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
3200:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3201:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3202:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
3203:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Finds the SD card SCR register value.
3204:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
3205:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  pSCR: pointer to the buffer that will contain the SCR value  
3206:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
3207:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
3208:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_FindSCR(SD_HandleTypeDef *hsd, uint32_t *pSCR)
3209:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
3210:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef  sdio_cmdinitstructure;
3211:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataInitTypeDef sdio_datainitstructure;
3212:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
3213:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t index = 0U;
3214:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t tempscr[2U] = {0U, 0U};
3215:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3216:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Set Block Size To 8 Bytes */
3217:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Send CMD55 APP_CMD with argument as card's RCA */
3218:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = (uint32_t)8U;
3219:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SET_BLOCKLEN;
3220:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
3221:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
3222:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
3223:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
3224:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3225:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
3226:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_CmdResp1Error(hsd, SD_CMD_SET_BLOCKLEN);
3227:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3228:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(errorstate != SD_OK)
3229:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3230:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3231:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3232:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3233:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Send CMD55 APP_CMD with argument as card's RCA */
3234:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = (uint32_t)((hsd->RCA) << 16U);
3235:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_APP_CMD;
3236:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
3237:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3238:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
3239:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_CmdResp1Error(hsd, SD_CMD_APP_CMD);
3240:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3241:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(errorstate != SD_OK)
3242:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3243:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
ARM GAS  /tmp/ccnQ8l0t.s 			page 65


3244:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3245:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataTimeOut   = SD_DATATIMEOUT;
3246:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataLength    = 8U;
3247:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataBlockSize = SDIO_DATABLOCK_SIZE_8B;
3248:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferDir   = SDIO_TRANSFER_DIR_TO_SDIO;
3249:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferMode  = SDIO_TRANSFER_MODE_BLOCK;
3250:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DPSM          = SDIO_DPSM_ENABLE;
3251:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataConfig(hsd->Instance, &sdio_datainitstructure);
3252:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3253:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Send ACMD51 SD_APP_SEND_SCR with argument as 0 */
3254:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = 0U;
3255:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SD_APP_SEND_SCR;
3256:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
3257:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3258:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for error conditions */
3259:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   errorstate = SD_CmdResp1Error(hsd, SD_CMD_SD_APP_SEND_SCR);
3260:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3261:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(errorstate != SD_OK)
3262:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3263:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3264:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3265:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #ifdef SDIO_STA_STBITERR  
3266:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while(!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT | 
3267:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #else /* SDIO_STA_STBITERR not defined */
3268:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while(!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXOVERR | SDIO_FLAG_DCRCFAIL | SDIO_FLAG_DTIMEOUT | 
3269:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #endif /* SDIO_STA_STBITERR */
3270:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3271:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     if(__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXDAVL))
3272:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
3273:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       *(tempscr + index) = SDIO_ReadFIFO(hsd->Instance);
3274:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       index++;
3275:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
3276:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3277:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3278:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_DTIMEOUT))
3279:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3280:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_DTIMEOUT);
3281:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3282:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_DATA_TIMEOUT;
3283:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3284:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3285:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3286:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if(__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_DCRCFAIL))
3287:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3288:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_DCRCFAIL);
3289:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3290:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_DATA_CRC_FAIL;
3291:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3292:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3293:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3294:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if(__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_RXOVERR))
3295:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3296:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_RXOVERR);
3297:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3298:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_RX_OVERRUN;
3299:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3300:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
ARM GAS  /tmp/ccnQ8l0t.s 			page 66


3301:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3302:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #ifdef SDIO_STA_STBITERR
3303:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if(__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_STBITERR))
3304:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3305:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_STBITERR);
3306:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3307:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_START_BIT_ERR;
3308:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3309:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3310:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3311:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #endif /* SDIO_STA_STBITERR */
3312:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
3313:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3314:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* No error flag set */
3315:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3316:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3317:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Clear all the static flags */
3318:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_STATIC_FLAGS);
3319:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3320:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *(pSCR + 1U) = ((tempscr[0U] & SD_0TO7BITS) << 24U)  | ((tempscr[0U] & SD_8TO15BITS) << 8U) |\
3321:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     ((tempscr[0U] & SD_16TO23BITS) >> 8U) | ((tempscr[0U] & SD_24TO31BITS) >> 24U);
3322:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3323:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *(pSCR) = ((tempscr[1U] & SD_0TO7BITS) << 24U)  | ((tempscr[1U] & SD_8TO15BITS) << 8U) |\
3324:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     ((tempscr[1U] & SD_16TO23BITS) >> 8U) | ((tempscr[1U] & SD_24TO31BITS) >> 24U);
3325:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3326:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
3327:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
3328:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
3329:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** /**
3330:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @brief  Checks if the SD card is in programming state.
3331:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  hsd: SD handle
3332:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @param  pStatus: pointer to the variable that will contain the SD card state  
3333:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   * @retval SD Card error state
3334:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   */
3335:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** static HAL_SD_ErrorTypedef SD_IsCardProgramming(SD_HandleTypeDef *hsd, uint8_t *pStatus)
3336:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** {
 355              		.loc 1 3336 0
 356              		.cfi_startproc
 357              		@ args = 0, pretend = 0, frame = 24
 358              		@ frame_needed = 0, uses_anonymous_args = 0
 359              	.LVL59:
 360 0000 30B5     		push	{r4, r5, lr}
 361              	.LCFI1:
 362              		.cfi_def_cfa_offset 12
 363              		.cfi_offset 4, -12
 364              		.cfi_offset 5, -8
 365              		.cfi_offset 14, -4
 366 0002 87B0     		sub	sp, sp, #28
 367              	.LCFI2:
 368              		.cfi_def_cfa_offset 40
 369 0004 0446     		mov	r4, r0
 370 0006 0D46     		mov	r5, r1
 371              	.LVL60:
3337:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef sdio_cmdinitstructure;
3338:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
3339:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __IO uint32_t responseR1 = 0U;
 372              		.loc 1 3339 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 67


 373 0008 0022     		movs	r2, #0
 374 000a 0092     		str	r2, [sp]
3340:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3341:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Argument         = (uint32_t)(hsd->RCA << 16U);
 375              		.loc 1 3341 0
 376 000c 436A     		ldr	r3, [r0, #36]
 377 000e 1B04     		lsls	r3, r3, #16
 378 0010 0193     		str	r3, [sp, #4]
3342:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SEND_STATUS;
 379              		.loc 1 3342 0
 380 0012 0D23     		movs	r3, #13
 381 0014 0293     		str	r3, [sp, #8]
3343:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 382              		.loc 1 3343 0
 383 0016 4023     		movs	r3, #64
 384 0018 0393     		str	r3, [sp, #12]
3344:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 385              		.loc 1 3344 0
 386 001a 0492     		str	r2, [sp, #16]
3345:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 387              		.loc 1 3345 0
 388 001c 4FF48063 		mov	r3, #1024
 389 0020 0593     		str	r3, [sp, #20]
3346:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 390              		.loc 1 3346 0
 391 0022 01A9     		add	r1, sp, #4
 392              	.LVL61:
 393 0024 0068     		ldr	r0, [r0]
 394              	.LVL62:
 395 0026 FFF7FEFF 		bl	SDIO_SendCommand
 396              	.LVL63:
3347:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3348:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   while(!__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CCRCFAIL | SDIO_FLAG_CMDREND | SDIO_FLAG_CTIMEOUT))
 397              		.loc 1 3348 0
 398 002a 2068     		ldr	r0, [r4]
 399              	.L42:
 400              		.loc 1 3348 0 is_stmt 0 discriminator 1
 401 002c 436B     		ldr	r3, [r0, #52]
 402 002e 13F0450F 		tst	r3, #69
 403 0032 FBD0     		beq	.L42
3349:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3350:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3351:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3352:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if(__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CTIMEOUT))
 404              		.loc 1 3352 0 is_stmt 1
 405 0034 436B     		ldr	r3, [r0, #52]
 406 0036 13F0040F 		tst	r3, #4
 407 003a 04D0     		beq	.L43
 408              	.LVL64:
3353:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3354:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CMD_RSP_TIMEOUT;
3355:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3356:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_CTIMEOUT);
 409              		.loc 1 3356 0
 410 003c 0423     		movs	r3, #4
 411 003e 8363     		str	r3, [r0, #56]
3357:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
ARM GAS  /tmp/ccnQ8l0t.s 			page 68


3358:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
 412              		.loc 1 3358 0
 413 0040 0320     		movs	r0, #3
 414              	.LVL65:
 415              	.L44:
3359:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3360:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else if(__HAL_SD_SDIO_GET_FLAG(hsd, SDIO_FLAG_CCRCFAIL))
3361:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3362:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_CMD_CRC_FAIL;
3363:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3364:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_FLAG_CCRCFAIL);
3365:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3366:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3367:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3368:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   else
3369:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3370:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* No error flag set */
3371:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3372:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3373:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check response received is of desired command */
3374:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((uint32_t)SDIO_GetCommandResponse(hsd->Instance) != SD_CMD_SEND_STATUS)
3375:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3376:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     errorstate = SD_ILLEGAL_CMD;
3377:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
3378:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3379:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3380:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3381:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Clear all the static flags */
3382:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __HAL_SD_SDIO_CLEAR_FLAG(hsd, SDIO_STATIC_FLAGS);
3383:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3384:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3385:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* We have received response, retrieve it for analysis */
3386:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   responseR1 = SDIO_GetResponse(SDIO_RESP1);
3387:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3388:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Find out card status */
3389:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   *pStatus = (uint8_t)((responseR1 >> 9U) & 0x0000000FU);
3390:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3391:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_ERRORBITS) == SD_ALLZERO)
3392:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3393:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return errorstate;
3394:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3395:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3396:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_ADDR_OUT_OF_RANGE) == SD_OCR_ADDR_OUT_OF_RANGE)
3397:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3398:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_ADDR_OUT_OF_RANGE);
3399:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3400:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3401:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_ADDR_MISALIGNED) == SD_OCR_ADDR_MISALIGNED)
3402:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3403:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_ADDR_MISALIGNED);
3404:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3405:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3406:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_BLOCK_LEN_ERR) == SD_OCR_BLOCK_LEN_ERR)
3407:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3408:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_BLOCK_LEN_ERR);
3409:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3410:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
ARM GAS  /tmp/ccnQ8l0t.s 			page 69


3411:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_ERASE_SEQ_ERR) == SD_OCR_ERASE_SEQ_ERR)
3412:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3413:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_ERASE_SEQ_ERR);
3414:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3415:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3416:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_BAD_ERASE_PARAM) == SD_OCR_BAD_ERASE_PARAM)
3417:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3418:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_BAD_ERASE_PARAM);
3419:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3420:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3421:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_WRITE_PROT_VIOLATION) == SD_OCR_WRITE_PROT_VIOLATION)
3422:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3423:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_WRITE_PROT_VIOLATION);
3424:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3425:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3426:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_LOCK_UNLOCK_FAILED) == SD_OCR_LOCK_UNLOCK_FAILED)
3427:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3428:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_LOCK_UNLOCK_FAILED);
3429:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3430:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3431:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_COM_CRC_FAILED) == SD_OCR_COM_CRC_FAILED)
3432:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3433:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_COM_CRC_FAILED);
3434:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3435:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3436:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_ILLEGAL_CMD) == SD_OCR_ILLEGAL_CMD)
3437:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3438:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_ILLEGAL_CMD);
3439:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3440:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3441:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_CARD_ECC_FAILED) == SD_OCR_CARD_ECC_FAILED)
3442:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3443:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_CARD_ECC_FAILED);
3444:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3445:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3446:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_CC_ERROR) == SD_OCR_CC_ERROR)
3447:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3448:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_CC_ERROR);
3449:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3450:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3451:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_GENERAL_UNKNOWN_ERROR) == SD_OCR_GENERAL_UNKNOWN_ERROR)
3452:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3453:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_GENERAL_UNKNOWN_ERROR);
3454:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3455:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3456:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_STREAM_READ_UNDERRUN) == SD_OCR_STREAM_READ_UNDERRUN)
3457:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3458:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_STREAM_READ_UNDERRUN);
3459:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3460:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3461:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_STREAM_WRITE_OVERRUN) == SD_OCR_STREAM_WRITE_OVERRUN)
3462:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3463:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_STREAM_WRITE_OVERRUN);
3464:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3465:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3466:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_CID_CSD_OVERWRITE) == SD_OCR_CID_CSD_OVERWRITE)
3467:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
ARM GAS  /tmp/ccnQ8l0t.s 			page 70


3468:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_CID_CSD_OVERWRITE);
3469:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3470:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3471:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_WP_ERASE_SKIP) == SD_OCR_WP_ERASE_SKIP)
3472:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3473:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_WP_ERASE_SKIP);
3474:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3475:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3476:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_CARD_ECC_DISABLED) == SD_OCR_CARD_ECC_DISABLED)
3477:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3478:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_CARD_ECC_DISABLED);
3479:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3480:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3481:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_ERASE_RESET) == SD_OCR_ERASE_RESET)
3482:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3483:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_ERASE_RESET);
3484:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3485:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3486:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   if((responseR1 & SD_OCR_AKE_SEQ_ERROR) == SD_OCR_AKE_SEQ_ERROR)
3487:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
3488:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     return(SD_AKE_SEQ_ERROR);
3489:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
3490:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
3491:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   return errorstate;
3492:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }   
 416              		.loc 1 3492 0
 417 0042 07B0     		add	sp, sp, #28
 418              	.LCFI3:
 419              		.cfi_remember_state
 420              		.cfi_def_cfa_offset 12
 421              		@ sp needed
 422 0044 30BD     		pop	{r4, r5, pc}
 423              	.LVL66:
 424              	.L43:
 425              	.LCFI4:
 426              		.cfi_restore_state
3360:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 427              		.loc 1 3360 0
 428 0046 436B     		ldr	r3, [r0, #52]
 429 0048 13F0010F 		tst	r3, #1
 430 004c 03D0     		beq	.L45
 431              	.LVL67:
3364:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 432              		.loc 1 3364 0
 433 004e 0123     		movs	r3, #1
 434 0050 8363     		str	r3, [r0, #56]
3366:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 435              		.loc 1 3366 0
 436 0052 1846     		mov	r0, r3
 437 0054 F5E7     		b	.L44
 438              	.LVL68:
 439              	.L45:
3374:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 440              		.loc 1 3374 0
 441 0056 FFF7FEFF 		bl	SDIO_GetCommandResponse
 442              	.LVL69:
 443 005a 0D28     		cmp	r0, #13
ARM GAS  /tmp/ccnQ8l0t.s 			page 71


3378:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 444              		.loc 1 3378 0
 445 005c 18BF     		it	ne
 446 005e 1020     		movne	r0, #16
3374:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 447              		.loc 1 3374 0
 448 0060 EFD1     		bne	.L44
3382:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 449              		.loc 1 3382 0
 450 0062 2368     		ldr	r3, [r4]
 451 0064 40F2FF52 		movw	r2, #1535
 452 0068 9A63     		str	r2, [r3, #56]
3386:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 453              		.loc 1 3386 0
 454 006a 0020     		movs	r0, #0
 455 006c FFF7FEFF 		bl	SDIO_GetResponse
 456              	.LVL70:
 457 0070 0090     		str	r0, [sp]
3389:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 458              		.loc 1 3389 0
 459 0072 009B     		ldr	r3, [sp]
 460 0074 C3F34323 		ubfx	r3, r3, #9, #4
 461 0078 2B70     		strb	r3, [r5]
3391:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 462              		.loc 1 3391 0
 463 007a 009A     		ldr	r2, [sp]
 464 007c 3C4B     		ldr	r3, .L71
 465 007e 1340     		ands	r3, r3, r2
 466 0080 002B     		cmp	r3, #0
 467 0082 52D0     		beq	.L47
3396:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 468              		.loc 1 3396 0
 469 0084 009B     		ldr	r3, [sp]
 470 0086 002B     		cmp	r3, #0
 471 0088 51DB     		blt	.L48
3401:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 472              		.loc 1 3401 0
 473 008a 009B     		ldr	r3, [sp]
 474 008c 13F0804F 		tst	r3, #1073741824
 475 0090 01D0     		beq	.L69
3403:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 476              		.loc 1 3403 0
 477 0092 0920     		movs	r0, #9
 478 0094 D5E7     		b	.L44
 479              	.L69:
3406:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 480              		.loc 1 3406 0
 481 0096 009B     		ldr	r3, [sp]
 482 0098 13F0005F 		tst	r3, #536870912
 483 009c 01D0     		beq	.L70
3408:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 484              		.loc 1 3408 0
 485 009e 0A20     		movs	r0, #10
 486 00a0 CFE7     		b	.L44
 487              	.L70:
3411:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 488              		.loc 1 3411 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 72


 489 00a2 009B     		ldr	r3, [sp]
 490 00a4 13F0805F 		tst	r3, #268435456
 491 00a8 43D1     		bne	.L51
3416:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 492              		.loc 1 3416 0
 493 00aa 009B     		ldr	r3, [sp]
 494 00ac 13F0006F 		tst	r3, #134217728
 495 00b0 41D1     		bne	.L52
3421:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 496              		.loc 1 3421 0
 497 00b2 009B     		ldr	r3, [sp]
 498 00b4 13F0806F 		tst	r3, #67108864
 499 00b8 3FD1     		bne	.L53
3426:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 500              		.loc 1 3426 0
 501 00ba 009B     		ldr	r3, [sp]
 502 00bc 13F0807F 		tst	r3, #16777216
 503 00c0 3DD1     		bne	.L54
3431:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 504              		.loc 1 3431 0
 505 00c2 009B     		ldr	r3, [sp]
 506 00c4 13F4000F 		tst	r3, #8388608
 507 00c8 3BD1     		bne	.L55
3436:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 508              		.loc 1 3436 0
 509 00ca 009B     		ldr	r3, [sp]
 510 00cc 13F4800F 		tst	r3, #4194304
 511 00d0 39D1     		bne	.L56
3441:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 512              		.loc 1 3441 0
 513 00d2 009B     		ldr	r3, [sp]
 514 00d4 13F4001F 		tst	r3, #2097152
 515 00d8 37D1     		bne	.L57
3446:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 516              		.loc 1 3446 0
 517 00da 009B     		ldr	r3, [sp]
 518 00dc 13F4801F 		tst	r3, #1048576
 519 00e0 35D1     		bne	.L58
3451:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 520              		.loc 1 3451 0
 521 00e2 009B     		ldr	r3, [sp]
 522 00e4 13F4002F 		tst	r3, #524288
 523 00e8 33D1     		bne	.L59
3456:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 524              		.loc 1 3456 0
 525 00ea 009B     		ldr	r3, [sp]
 526 00ec 13F4802F 		tst	r3, #262144
 527 00f0 31D1     		bne	.L60
3461:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 528              		.loc 1 3461 0
 529 00f2 009B     		ldr	r3, [sp]
 530 00f4 13F4003F 		tst	r3, #131072
 531 00f8 2FD1     		bne	.L61
3466:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 532              		.loc 1 3466 0
 533 00fa 009B     		ldr	r3, [sp]
 534 00fc 13F4803F 		tst	r3, #65536
ARM GAS  /tmp/ccnQ8l0t.s 			page 73


 535 0100 2DD1     		bne	.L62
3471:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 536              		.loc 1 3471 0
 537 0102 009B     		ldr	r3, [sp]
 538 0104 13F4004F 		tst	r3, #32768
 539 0108 2BD1     		bne	.L63
3476:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 540              		.loc 1 3476 0
 541 010a 009B     		ldr	r3, [sp]
 542 010c 13F4804F 		tst	r3, #16384
 543 0110 29D1     		bne	.L64
3481:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 544              		.loc 1 3481 0
 545 0112 009B     		ldr	r3, [sp]
 546 0114 13F4005F 		tst	r3, #8192
 547 0118 27D1     		bne	.L65
3486:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 548              		.loc 1 3486 0
 549 011a 009B     		ldr	r3, [sp]
 550 011c 03F00803 		and	r3, r3, #8
3491:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }   
 551              		.loc 1 3491 0
 552 0120 002B     		cmp	r3, #0
 553 0122 14BF     		ite	ne
 554 0124 1A20     		movne	r0, #26
 555 0126 0020     		moveq	r0, #0
 556 0128 8BE7     		b	.L44
 557              	.L47:
3393:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 558              		.loc 1 3393 0
 559 012a 0020     		movs	r0, #0
 560 012c 89E7     		b	.L44
 561              	.L48:
3398:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 562              		.loc 1 3398 0
 563 012e 1C20     		movs	r0, #28
 564 0130 87E7     		b	.L44
 565              	.L51:
3413:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 566              		.loc 1 3413 0
 567 0132 0B20     		movs	r0, #11
 568 0134 85E7     		b	.L44
 569              	.L52:
3418:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 570              		.loc 1 3418 0
 571 0136 0C20     		movs	r0, #12
 572 0138 83E7     		b	.L44
 573              	.L53:
3423:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 574              		.loc 1 3423 0
 575 013a 0D20     		movs	r0, #13
 576 013c 81E7     		b	.L44
 577              	.L54:
3428:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 578              		.loc 1 3428 0
 579 013e 0E20     		movs	r0, #14
 580 0140 7FE7     		b	.L44
ARM GAS  /tmp/ccnQ8l0t.s 			page 74


 581              	.L55:
3433:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 582              		.loc 1 3433 0
 583 0142 0F20     		movs	r0, #15
 584 0144 7DE7     		b	.L44
 585              	.L56:
3438:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 586              		.loc 1 3438 0
 587 0146 1020     		movs	r0, #16
 588 0148 7BE7     		b	.L44
 589              	.L57:
3443:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 590              		.loc 1 3443 0
 591 014a 1120     		movs	r0, #17
 592 014c 79E7     		b	.L44
 593              	.L58:
3448:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 594              		.loc 1 3448 0
 595 014e 1220     		movs	r0, #18
 596 0150 77E7     		b	.L44
 597              	.L59:
3453:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 598              		.loc 1 3453 0
 599 0152 1320     		movs	r0, #19
 600 0154 75E7     		b	.L44
 601              	.L60:
3458:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 602              		.loc 1 3458 0
 603 0156 1420     		movs	r0, #20
 604 0158 73E7     		b	.L44
 605              	.L61:
3463:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 606              		.loc 1 3463 0
 607 015a 1520     		movs	r0, #21
 608 015c 71E7     		b	.L44
 609              	.L62:
3468:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 610              		.loc 1 3468 0
 611 015e 1620     		movs	r0, #22
 612 0160 6FE7     		b	.L44
 613              	.L63:
3473:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 614              		.loc 1 3473 0
 615 0162 1720     		movs	r0, #23
 616 0164 6DE7     		b	.L44
 617              	.L64:
3478:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 618              		.loc 1 3478 0
 619 0166 1820     		movs	r0, #24
 620 0168 6BE7     		b	.L44
 621              	.L65:
3483:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 622              		.loc 1 3483 0
 623 016a 1920     		movs	r0, #25
 624 016c 69E7     		b	.L44
 625              	.L72:
 626 016e 00BF     		.align	2
ARM GAS  /tmp/ccnQ8l0t.s 			page 75


 627              	.L71:
 628 0170 08E0FFFD 		.word	-33562616
 629              		.cfi_endproc
 630              	.LFE170:
 632              		.section	.text.SD_FindSCR,"ax",%progbits
 633              		.align	1
 634              		.syntax unified
 635              		.thumb
 636              		.thumb_func
 637              		.fpu fpv4-sp-d16
 639              	SD_FindSCR:
 640              	.LFB169:
3209:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef  sdio_cmdinitstructure;
 641              		.loc 1 3209 0
 642              		.cfi_startproc
 643              		@ args = 0, pretend = 0, frame = 56
 644              		@ frame_needed = 0, uses_anonymous_args = 0
 645              	.LVL71:
 646 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 647              	.LCFI5:
 648              		.cfi_def_cfa_offset 24
 649              		.cfi_offset 4, -24
 650              		.cfi_offset 5, -20
 651              		.cfi_offset 6, -16
 652              		.cfi_offset 7, -12
 653              		.cfi_offset 8, -8
 654              		.cfi_offset 14, -4
 655 0004 8EB0     		sub	sp, sp, #56
 656              	.LCFI6:
 657              		.cfi_def_cfa_offset 80
 658 0006 0446     		mov	r4, r0
 659 0008 0E46     		mov	r6, r1
 660              	.LVL72:
3214:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 661              		.loc 1 3214 0
 662 000a 0023     		movs	r3, #0
 663 000c 0193     		str	r3, [sp, #4]
 664 000e 0293     		str	r3, [sp, #8]
3218:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SET_BLOCKLEN;
 665              		.loc 1 3218 0
 666 0010 0822     		movs	r2, #8
 667 0012 0992     		str	r2, [sp, #36]
3219:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 668              		.loc 1 3219 0
 669 0014 1025     		movs	r5, #16
 670 0016 0A95     		str	r5, [sp, #40]
3220:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 671              		.loc 1 3220 0
 672 0018 4022     		movs	r2, #64
 673 001a 0B92     		str	r2, [sp, #44]
3221:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 674              		.loc 1 3221 0
 675 001c 0C93     		str	r3, [sp, #48]
3222:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 676              		.loc 1 3222 0
 677 001e 4FF48063 		mov	r3, #1024
 678 0022 0D93     		str	r3, [sp, #52]
ARM GAS  /tmp/ccnQ8l0t.s 			page 76


3223:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 679              		.loc 1 3223 0
 680 0024 09A9     		add	r1, sp, #36
 681              	.LVL73:
 682 0026 0068     		ldr	r0, [r0]
 683              	.LVL74:
 684 0028 FFF7FEFF 		bl	SDIO_SendCommand
 685              	.LVL75:
3226:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 686              		.loc 1 3226 0
 687 002c 2946     		mov	r1, r5
 688 002e 2046     		mov	r0, r4
 689 0030 FFF7FEFF 		bl	SD_CmdResp1Error
 690              	.LVL76:
3228:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 691              		.loc 1 3228 0
 692 0034 0546     		mov	r5, r0
 693 0036 18B1     		cbz	r0, .L84
 694              	.LVL77:
 695              	.L74:
3327:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 696              		.loc 1 3327 0
 697 0038 2846     		mov	r0, r5
 698 003a 0EB0     		add	sp, sp, #56
 699              	.LCFI7:
 700              		.cfi_remember_state
 701              		.cfi_def_cfa_offset 24
 702              		@ sp needed
 703 003c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 704              	.LVL78:
 705              	.L84:
 706              	.LCFI8:
 707              		.cfi_restore_state
3234:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_APP_CMD;
 708              		.loc 1 3234 0
 709 0040 636A     		ldr	r3, [r4, #36]
 710 0042 1B04     		lsls	r3, r3, #16
 711 0044 0993     		str	r3, [sp, #36]
3235:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 712              		.loc 1 3235 0
 713 0046 3725     		movs	r5, #55
 714 0048 0A95     		str	r5, [sp, #40]
3236:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 715              		.loc 1 3236 0
 716 004a 09A9     		add	r1, sp, #36
 717 004c 2068     		ldr	r0, [r4]
 718              	.LVL79:
 719 004e FFF7FEFF 		bl	SDIO_SendCommand
 720              	.LVL80:
3239:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 721              		.loc 1 3239 0
 722 0052 2946     		mov	r1, r5
 723 0054 2046     		mov	r0, r4
 724 0056 FFF7FEFF 		bl	SD_CmdResp1Error
 725              	.LVL81:
3241:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 726              		.loc 1 3241 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 77


 727 005a 0546     		mov	r5, r0
 728 005c 0028     		cmp	r0, #0
 729 005e EBD1     		bne	.L74
3245:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataLength    = 8U;
 730              		.loc 1 3245 0
 731 0060 4FF0FF33 		mov	r3, #-1
 732 0064 0393     		str	r3, [sp, #12]
3246:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataBlockSize = SDIO_DATABLOCK_SIZE_8B;
 733              		.loc 1 3246 0
 734 0066 0823     		movs	r3, #8
 735 0068 0493     		str	r3, [sp, #16]
3247:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferDir   = SDIO_TRANSFER_DIR_TO_SDIO;
 736              		.loc 1 3247 0
 737 006a 3023     		movs	r3, #48
 738 006c 0593     		str	r3, [sp, #20]
3248:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferMode  = SDIO_TRANSFER_MODE_BLOCK;
 739              		.loc 1 3248 0
 740 006e 0223     		movs	r3, #2
 741 0070 0693     		str	r3, [sp, #24]
3249:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DPSM          = SDIO_DPSM_ENABLE;
 742              		.loc 1 3249 0
 743 0072 0025     		movs	r5, #0
 744 0074 0795     		str	r5, [sp, #28]
3250:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataConfig(hsd->Instance, &sdio_datainitstructure);
 745              		.loc 1 3250 0
 746 0076 0123     		movs	r3, #1
 747 0078 0893     		str	r3, [sp, #32]
3251:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 748              		.loc 1 3251 0
 749 007a 03A9     		add	r1, sp, #12
 750 007c 2068     		ldr	r0, [r4]
 751              	.LVL82:
 752 007e FFF7FEFF 		bl	SDIO_DataConfig
 753              	.LVL83:
3254:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SD_APP_SEND_SCR;
 754              		.loc 1 3254 0
 755 0082 0995     		str	r5, [sp, #36]
3255:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 756              		.loc 1 3255 0
 757 0084 3325     		movs	r5, #51
 758 0086 0A95     		str	r5, [sp, #40]
3256:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 759              		.loc 1 3256 0
 760 0088 09A9     		add	r1, sp, #36
 761 008a 2068     		ldr	r0, [r4]
 762 008c FFF7FEFF 		bl	SDIO_SendCommand
 763              	.LVL84:
3259:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 764              		.loc 1 3259 0
 765 0090 2946     		mov	r1, r5
 766 0092 2046     		mov	r0, r4
 767 0094 FFF7FEFF 		bl	SD_CmdResp1Error
 768              	.LVL85:
3261:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 769              		.loc 1 3261 0
 770 0098 0546     		mov	r5, r0
 771 009a 0028     		cmp	r0, #0
ARM GAS  /tmp/ccnQ8l0t.s 			page 78


 772 009c CCD1     		bne	.L74
 773 009e 0DF10408 		add	r8, sp, #4
3266:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #else /* SDIO_STA_STBITERR not defined */
 774              		.loc 1 3266 0
 775 00a2 40F22A67 		movw	r7, #1578
 776              	.LVL86:
 777              	.L75:
 778 00a6 2068     		ldr	r0, [r4]
 779              	.L76:
 780 00a8 436B     		ldr	r3, [r0, #52]
 781 00aa 3B42     		tst	r3, r7
 782 00ac 08D1     		bne	.L85
3271:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 783              		.loc 1 3271 0
 784 00ae 436B     		ldr	r3, [r0, #52]
 785 00b0 13F4001F 		tst	r3, #2097152
 786 00b4 F8D0     		beq	.L76
3273:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       index++;
 787              		.loc 1 3273 0
 788 00b6 FFF7FEFF 		bl	SDIO_ReadFIFO
 789              	.LVL87:
 790 00ba 48F8040B 		str	r0, [r8], #4
 791 00be F2E7     		b	.L75
 792              	.L85:
3278:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 793              		.loc 1 3278 0
 794 00c0 436B     		ldr	r3, [r0, #52]
 795 00c2 13F0080F 		tst	r3, #8
 796 00c6 03D0     		beq	.L78
3280:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 797              		.loc 1 3280 0
 798 00c8 0823     		movs	r3, #8
 799 00ca 8363     		str	r3, [r0, #56]
 800              	.LVL88:
3284:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 801              		.loc 1 3284 0
 802 00cc 0425     		movs	r5, #4
 803 00ce B3E7     		b	.L74
 804              	.LVL89:
 805              	.L78:
3286:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 806              		.loc 1 3286 0
 807 00d0 436B     		ldr	r3, [r0, #52]
 808 00d2 13F0020F 		tst	r3, #2
 809 00d6 02D0     		beq	.L79
3288:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 810              		.loc 1 3288 0
 811 00d8 0225     		movs	r5, #2
 812 00da 8563     		str	r5, [r0, #56]
 813              	.LVL90:
3292:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 814              		.loc 1 3292 0
 815 00dc ACE7     		b	.L74
 816              	.LVL91:
 817              	.L79:
3294:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 818              		.loc 1 3294 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 79


 819 00de 436B     		ldr	r3, [r0, #52]
 820 00e0 13F0200F 		tst	r3, #32
 821 00e4 03D0     		beq	.L80
3296:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 822              		.loc 1 3296 0
 823 00e6 2023     		movs	r3, #32
 824 00e8 8363     		str	r3, [r0, #56]
 825              	.LVL92:
3300:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 826              		.loc 1 3300 0
 827 00ea 0625     		movs	r5, #6
 828 00ec A4E7     		b	.L74
 829              	.LVL93:
 830              	.L80:
3303:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 831              		.loc 1 3303 0
 832 00ee 436B     		ldr	r3, [r0, #52]
 833 00f0 13F4007F 		tst	r3, #512
 834 00f4 04D0     		beq	.L81
3305:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 835              		.loc 1 3305 0
 836 00f6 4FF40073 		mov	r3, #512
 837 00fa 8363     		str	r3, [r0, #56]
 838              	.LVL94:
3309:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 839              		.loc 1 3309 0
 840 00fc 0725     		movs	r5, #7
 841 00fe 9BE7     		b	.L74
 842              	.LVL95:
 843              	.L81:
3318:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 844              		.loc 1 3318 0
 845 0100 40F2FF53 		movw	r3, #1535
 846 0104 8363     		str	r3, [r0, #56]
3320:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     ((tempscr[0U] & SD_16TO23BITS) >> 8U) | ((tempscr[0U] & SD_24TO31BITS) >> 24U);
 847              		.loc 1 3320 0
 848 0106 019B     		ldr	r3, [sp, #4]
3321:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 849              		.loc 1 3321 0
 850 0108 1A0E     		lsrs	r2, r3, #24
 851 010a 42EA0362 		orr	r2, r2, r3, lsl #24
3320:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     ((tempscr[0U] & SD_16TO23BITS) >> 8U) | ((tempscr[0U] & SD_24TO31BITS) >> 24U);
 852              		.loc 1 3320 0
 853 010e 1902     		lsls	r1, r3, #8
 854 0110 01F47F01 		and	r1, r1, #16711680
3321:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 855              		.loc 1 3321 0
 856 0114 0A43     		orrs	r2, r2, r1
 857 0116 1B0A     		lsrs	r3, r3, #8
 858 0118 03F47F43 		and	r3, r3, #65280
 859 011c 1343     		orrs	r3, r3, r2
3320:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     ((tempscr[0U] & SD_16TO23BITS) >> 8U) | ((tempscr[0U] & SD_24TO31BITS) >> 24U);
 860              		.loc 1 3320 0
 861 011e 7360     		str	r3, [r6, #4]
3323:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     ((tempscr[1U] & SD_16TO23BITS) >> 8U) | ((tempscr[1U] & SD_24TO31BITS) >> 24U);
 862              		.loc 1 3323 0
 863 0120 029B     		ldr	r3, [sp, #8]
ARM GAS  /tmp/ccnQ8l0t.s 			page 80


3324:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 864              		.loc 1 3324 0
 865 0122 1A0E     		lsrs	r2, r3, #24
 866 0124 42EA0362 		orr	r2, r2, r3, lsl #24
3323:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     ((tempscr[1U] & SD_16TO23BITS) >> 8U) | ((tempscr[1U] & SD_24TO31BITS) >> 24U);
 867              		.loc 1 3323 0
 868 0128 1902     		lsls	r1, r3, #8
 869 012a 01F47F01 		and	r1, r1, #16711680
3324:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 870              		.loc 1 3324 0
 871 012e 0A43     		orrs	r2, r2, r1
 872 0130 1B0A     		lsrs	r3, r3, #8
 873 0132 03F47F43 		and	r3, r3, #65280
 874 0136 1343     		orrs	r3, r3, r2
3323:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     ((tempscr[1U] & SD_16TO23BITS) >> 8U) | ((tempscr[1U] & SD_24TO31BITS) >> 24U);
 875              		.loc 1 3323 0
 876 0138 3360     		str	r3, [r6]
3326:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 877              		.loc 1 3326 0
 878 013a 7DE7     		b	.L74
 879              		.cfi_endproc
 880              	.LFE169:
 882              		.section	.text.HAL_SD_MspInit,"ax",%progbits
 883              		.align	1
 884              		.weak	HAL_SD_MspInit
 885              		.syntax unified
 886              		.thumb
 887              		.thumb_func
 888              		.fpu fpv4-sp-d16
 890              	HAL_SD_MspInit:
 891              	.LFB128:
 418:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
 892              		.loc 1 418 0
 893              		.cfi_startproc
 894              		@ args = 0, pretend = 0, frame = 0
 895              		@ frame_needed = 0, uses_anonymous_args = 0
 896              		@ link register save eliminated.
 897              	.LVL96:
 898 0000 7047     		bx	lr
 899              		.cfi_endproc
 900              	.LFE128:
 902              		.section	.text.HAL_SD_MspDeInit,"ax",%progbits
 903              		.align	1
 904              		.weak	HAL_SD_MspDeInit
 905              		.syntax unified
 906              		.thumb
 907              		.thumb_func
 908              		.fpu fpv4-sp-d16
 910              	HAL_SD_MspDeInit:
 911              	.LFB129:
 432:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
 912              		.loc 1 432 0
 913              		.cfi_startproc
 914              		@ args = 0, pretend = 0, frame = 0
 915              		@ frame_needed = 0, uses_anonymous_args = 0
 916              		@ link register save eliminated.
 917              	.LVL97:
ARM GAS  /tmp/ccnQ8l0t.s 			page 81


 918 0000 7047     		bx	lr
 919              		.cfi_endproc
 920              	.LFE129:
 922              		.section	.text.HAL_SD_DeInit,"ax",%progbits
 923              		.align	1
 924              		.global	HAL_SD_DeInit
 925              		.syntax unified
 926              		.thumb
 927              		.thumb_func
 928              		.fpu fpv4-sp-d16
 930              	HAL_SD_DeInit:
 931              	.LFB127:
 400:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 932              		.loc 1 400 0
 933              		.cfi_startproc
 934              		@ args = 0, pretend = 0, frame = 0
 935              		@ frame_needed = 0, uses_anonymous_args = 0
 936              	.LVL98:
 400:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 937              		.loc 1 400 0
 938 0000 10B5     		push	{r4, lr}
 939              	.LCFI9:
 940              		.cfi_def_cfa_offset 8
 941              		.cfi_offset 4, -8
 942              		.cfi_offset 14, -4
 943 0002 0446     		mov	r4, r0
 944              	.LVL99:
 945              	.LBB4:
 946              	.LBB5:
2648:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 947              		.loc 1 2648 0
 948 0004 0068     		ldr	r0, [r0]
 949              	.LVL100:
 950 0006 FFF7FEFF 		bl	SDIO_PowerState_OFF
 951              	.LVL101:
 952              	.LBE5:
 953              	.LBE4:
 406:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 954              		.loc 1 406 0
 955 000a 2046     		mov	r0, r4
 956 000c FFF7FEFF 		bl	HAL_SD_MspDeInit
 957              	.LVL102:
 409:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 958              		.loc 1 409 0
 959 0010 0020     		movs	r0, #0
 960 0012 10BD     		pop	{r4, pc}
 961              		.cfi_endproc
 962              	.LFE127:
 964              		.section	.text.HAL_SD_ReadBlocks_DMA,"ax",%progbits
 965              		.align	1
 966              		.global	HAL_SD_ReadBlocks_DMA
 967              		.syntax unified
 968              		.thumb
 969              		.thumb_func
 970              		.fpu fpv4-sp-d16
 972              	HAL_SD_ReadBlocks_DMA:
 973              	.LFB132:
ARM GAS  /tmp/ccnQ8l0t.s 			page 82


 893:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef sdio_cmdinitstructure;
 974              		.loc 1 893 0
 975              		.cfi_startproc
 976              		@ args = 8, pretend = 0, frame = 48
 977              		@ frame_needed = 0, uses_anonymous_args = 0
 978              	.LVL103:
 979 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 980              	.LCFI10:
 981              		.cfi_def_cfa_offset 24
 982              		.cfi_offset 4, -24
 983              		.cfi_offset 5, -20
 984              		.cfi_offset 6, -16
 985              		.cfi_offset 7, -12
 986              		.cfi_offset 8, -8
 987              		.cfi_offset 14, -4
 988 0004 8CB0     		sub	sp, sp, #48
 989              	.LCFI11:
 990              		.cfi_def_cfa_offset 72
 991 0006 0446     		mov	r4, r0
 992 0008 1746     		mov	r7, r2
 993 000a 9846     		mov	r8, r3
 994 000c 129D     		ldr	r5, [sp, #72]
 995 000e 139E     		ldr	r6, [sp, #76]
 996              	.LVL104:
 899:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 997              		.loc 1 899 0
 998 0010 0268     		ldr	r2, [r0]
 999              	.LVL105:
 1000 0012 0023     		movs	r3, #0
 1001 0014 D362     		str	r3, [r2, #44]
 902:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->DmaTransferCplt = 0U;
 1002              		.loc 1 902 0
 1003 0016 8364     		str	r3, [r0, #72]
 903:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->SdTransferErr   = SD_OK; 
 1004              		.loc 1 903 0
 1005 0018 0365     		str	r3, [r0, #80]
 904:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1006              		.loc 1 904 0
 1007 001a C364     		str	r3, [r0, #76]
 907:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1008              		.loc 1 907 0
 1009 001c 012E     		cmp	r6, #1
 909:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1010              		.loc 1 909 0
 1011 001e 8CBF     		ite	hi
 1012 0020 0123     		movhi	r3, #1
 913:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1013              		.loc 1 913 0
 1014 0022 0023     		movls	r3, #0
 1015 0024 4365     		str	r3, [r0, #84]
 1016              	.LVL106:
 918:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_DTIMEOUT |\
 1017              		.loc 1 918 0
 1018 0026 0268     		ldr	r2, [r0]
 1019 0028 D36B     		ldr	r3, [r2, #60]
 1020 002a 43F44A73 		orr	r3, r3, #808
 1021 002e 43F00203 		orr	r3, r3, #2
ARM GAS  /tmp/ccnQ8l0t.s 			page 83


 1022 0032 D363     		str	r3, [r2, #60]
 931:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1023              		.loc 1 931 0
 1024 0034 0122     		movs	r2, #1
 1025 0036 2C4B     		ldr	r3, .L100
 1026 0038 1A60     		str	r2, [r3]
 934:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->hdmarx->XferErrorCallback = SD_DMA_RxError;
 1027              		.loc 1 934 0
 1028 003a 836D     		ldr	r3, [r0, #88]
 1029 003c 2B4A     		ldr	r2, .L100+4
 1030 003e DA63     		str	r2, [r3, #60]
 935:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1031              		.loc 1 935 0
 1032 0040 836D     		ldr	r3, [r0, #88]
 1033 0042 2B4A     		ldr	r2, .L100+8
 1034 0044 DA64     		str	r2, [r3, #76]
 938:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1035              		.loc 1 938 0
 1036 0046 05FB06F3 		mul	r3, r5, r6
 1037 004a 0068     		ldr	r0, [r0]
 1038              	.LVL107:
 1039 004c 9B08     		lsrs	r3, r3, #2
 1040 004e 0A46     		mov	r2, r1
 1041 0050 00F18001 		add	r1, r0, #128
 1042              	.LVL108:
 1043 0054 A06D     		ldr	r0, [r4, #88]
 1044 0056 FFF7FEFF 		bl	HAL_DMA_Start_IT
 1045              	.LVL109:
 940:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1046              		.loc 1 940 0
 1047 005a 236A     		ldr	r3, [r4, #32]
 1048 005c 022B     		cmp	r3, #2
 1049 005e 19D0     		beq	.L98
 1050              	.LVL110:
 1051              	.L93:
 947:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SET_BLOCKLEN;
 1052              		.loc 1 947 0
 1053 0060 0795     		str	r5, [sp, #28]
 948:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 1054              		.loc 1 948 0
 1055 0062 4FF01008 		mov	r8, #16
 1056 0066 CDF82080 		str	r8, [sp, #32]
 949:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 1057              		.loc 1 949 0
 1058 006a 4023     		movs	r3, #64
 1059 006c 0993     		str	r3, [sp, #36]
 950:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 1060              		.loc 1 950 0
 1061 006e 0023     		movs	r3, #0
 1062 0070 0A93     		str	r3, [sp, #40]
 951:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 1063              		.loc 1 951 0
 1064 0072 4FF48063 		mov	r3, #1024
 1065 0076 0B93     		str	r3, [sp, #44]
 952:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1066              		.loc 1 952 0
 1067 0078 07A9     		add	r1, sp, #28
ARM GAS  /tmp/ccnQ8l0t.s 			page 84


 1068 007a 2068     		ldr	r0, [r4]
 1069 007c FFF7FEFF 		bl	SDIO_SendCommand
 1070              	.LVL111:
 955:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1071              		.loc 1 955 0
 1072 0080 4146     		mov	r1, r8
 1073 0082 2046     		mov	r0, r4
 1074 0084 FFF7FEFF 		bl	SD_CmdResp1Error
 1075              	.LVL112:
 957:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1076              		.loc 1 957 0
 1077 0088 0346     		mov	r3, r0
 1078 008a 48B1     		cbz	r0, .L99
 1079              	.LVL113:
 1080              	.L94:
1000:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 1081              		.loc 1 1000 0
 1082 008c 1846     		mov	r0, r3
 1083              	.LVL114:
 1084 008e 0CB0     		add	sp, sp, #48
 1085              	.LCFI12:
 1086              		.cfi_remember_state
 1087              		.cfi_def_cfa_offset 24
 1088              		@ sp needed
 1089 0090 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1090              	.LVL115:
 1091              	.L98:
 1092              	.LCFI13:
 1093              		.cfi_restore_state
 943:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1094              		.loc 1 943 0
 1095 0094 7F0A     		lsrs	r7, r7, #9
 1096 0096 47EAC857 		orr	r7, r7, r8, lsl #23
 1097              	.LVL116:
 942:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     ReadAddr /= 512U;
 1098              		.loc 1 942 0
 1099 009a 4FF40075 		mov	r5, #512
 1100 009e DFE7     		b	.L93
 1101              	.LVL117:
 1102              	.L99:
 963:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataLength    = BlockSize * NumberOfBlocks;
 1103              		.loc 1 963 0
 1104 00a0 4FF0FF33 		mov	r3, #-1
 1105 00a4 0193     		str	r3, [sp, #4]
 964:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataBlockSize = SDIO_DATABLOCK_SIZE_512B;
 1106              		.loc 1 964 0
 1107 00a6 06FB05F5 		mul	r5, r6, r5
 1108              	.LVL118:
 1109 00aa 0295     		str	r5, [sp, #8]
 965:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferDir   = SDIO_TRANSFER_DIR_TO_SDIO;
 1110              		.loc 1 965 0
 1111 00ac 9023     		movs	r3, #144
 1112 00ae 0393     		str	r3, [sp, #12]
 966:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferMode  = SDIO_TRANSFER_MODE_BLOCK;
 1113              		.loc 1 966 0
 1114 00b0 0223     		movs	r3, #2
 1115 00b2 0493     		str	r3, [sp, #16]
ARM GAS  /tmp/ccnQ8l0t.s 			page 85


 967:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DPSM          = SDIO_DPSM_ENABLE;
 1116              		.loc 1 967 0
 1117 00b4 0023     		movs	r3, #0
 1118 00b6 0593     		str	r3, [sp, #20]
 968:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataConfig(hsd->Instance, &sdio_datainitstructure);
 1119              		.loc 1 968 0
 1120 00b8 0123     		movs	r3, #1
 1121 00ba 0693     		str	r3, [sp, #24]
 969:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1122              		.loc 1 969 0
 1123 00bc 01A9     		add	r1, sp, #4
 1124 00be 2068     		ldr	r0, [r4]
 1125              	.LVL119:
 1126 00c0 FFF7FEFF 		bl	SDIO_DataConfig
 1127              	.LVL120:
 972:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1128              		.loc 1 972 0
 1129 00c4 012E     		cmp	r6, #1
 975:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1130              		.loc 1 975 0
 1131 00c6 8CBF     		ite	hi
 1132 00c8 1225     		movhi	r5, #18
 980:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1133              		.loc 1 980 0
 1134 00ca 1125     		movls	r5, #17
 1135 00cc 0895     		str	r5, [sp, #32]
 983:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 1136              		.loc 1 983 0
 1137 00ce 0CA9     		add	r1, sp, #48
 1138 00d0 41F8147D 		str	r7, [r1, #-20]!
 984:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1139              		.loc 1 984 0
 1140 00d4 2068     		ldr	r0, [r4]
 1141 00d6 FFF7FEFF 		bl	SDIO_SendCommand
 1142              	.LVL121:
 993:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1143              		.loc 1 993 0
 1144 00da 2946     		mov	r1, r5
 1145 00dc 2046     		mov	r0, r4
 1146 00de FFF7FEFF 		bl	SD_CmdResp1Error
 1147              	.LVL122:
 1148 00e2 0346     		mov	r3, r0
 1149              	.LVL123:
 997:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1150              		.loc 1 997 0
 1151 00e4 E064     		str	r0, [r4, #76]
 999:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 1152              		.loc 1 999 0
 1153 00e6 D1E7     		b	.L94
 1154              	.L101:
 1155              		.align	2
 1156              	.L100:
 1157 00e8 8C852542 		.word	1109755276
 1158 00ec 00000000 		.word	SD_DMA_RxCplt
 1159 00f0 00000000 		.word	SD_DMA_RxError
 1160              		.cfi_endproc
 1161              	.LFE132:
ARM GAS  /tmp/ccnQ8l0t.s 			page 86


 1163              		.section	.text.HAL_SD_WriteBlocks_DMA,"ax",%progbits
 1164              		.align	1
 1165              		.global	HAL_SD_WriteBlocks_DMA
 1166              		.syntax unified
 1167              		.thumb
 1168              		.thumb_func
 1169              		.fpu fpv4-sp-d16
 1171              	HAL_SD_WriteBlocks_DMA:
 1172              	.LFB133:
1017:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef sdio_cmdinitstructure;
 1173              		.loc 1 1017 0
 1174              		.cfi_startproc
 1175              		@ args = 8, pretend = 0, frame = 48
 1176              		@ frame_needed = 0, uses_anonymous_args = 0
 1177              	.LVL124:
 1178 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1179              	.LCFI14:
 1180              		.cfi_def_cfa_offset 24
 1181              		.cfi_offset 4, -24
 1182              		.cfi_offset 5, -20
 1183              		.cfi_offset 6, -16
 1184              		.cfi_offset 7, -12
 1185              		.cfi_offset 8, -8
 1186              		.cfi_offset 14, -4
 1187 0004 8CB0     		sub	sp, sp, #48
 1188              	.LCFI15:
 1189              		.cfi_def_cfa_offset 72
 1190 0006 0446     		mov	r4, r0
 1191 0008 9046     		mov	r8, r2
 1192 000a 1F46     		mov	r7, r3
 1193 000c 129E     		ldr	r6, [sp, #72]
 1194 000e 139D     		ldr	r5, [sp, #76]
 1195              	.LVL125:
1023:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1196              		.loc 1 1023 0
 1197 0010 0268     		ldr	r2, [r0]
 1198              	.LVL126:
 1199 0012 0023     		movs	r3, #0
 1200 0014 D362     		str	r3, [r2, #44]
1026:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->DmaTransferCplt = 0U;
 1201              		.loc 1 1026 0
 1202 0016 8364     		str	r3, [r0, #72]
1027:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->SdTransferErr   = SD_OK;
 1203              		.loc 1 1027 0
 1204 0018 0365     		str	r3, [r0, #80]
1028:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1205              		.loc 1 1028 0
 1206 001a C364     		str	r3, [r0, #76]
1031:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1207              		.loc 1 1031 0
 1208 001c 012D     		cmp	r5, #1
1033:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1209              		.loc 1 1033 0
 1210 001e 8CBF     		ite	hi
 1211 0020 0323     		movhi	r3, #3
1037:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }  
 1212              		.loc 1 1037 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 87


 1213 0022 0223     		movls	r3, #2
 1214 0024 4365     		str	r3, [r0, #84]
 1215              	.LVL127:
1042:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_DTIMEOUT |\
 1216              		.loc 1 1042 0
 1217 0026 0268     		ldr	r2, [r0]
 1218 0028 D36B     		ldr	r3, [r2, #60]
 1219 002a 43F44673 		orr	r3, r3, #792
 1220 002e 43F00203 		orr	r3, r3, #2
 1221 0032 D363     		str	r3, [r2, #60]
1055:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   hsd->hdmatx->XferErrorCallback = SD_DMA_TxError;
 1222              		.loc 1 1055 0
 1223 0034 C36D     		ldr	r3, [r0, #92]
 1224 0036 2B4A     		ldr	r2, .L112
 1225 0038 DA63     		str	r2, [r3, #60]
1056:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1226              		.loc 1 1056 0
 1227 003a C36D     		ldr	r3, [r0, #92]
 1228 003c 2A4A     		ldr	r2, .L112+4
 1229 003e DA64     		str	r2, [r3, #76]
1059:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 1230              		.loc 1 1059 0
 1231 0040 06FB05F3 		mul	r3, r6, r5
 1232 0044 0268     		ldr	r2, [r0]
 1233 0046 9B08     		lsrs	r3, r3, #2
 1234 0048 8032     		adds	r2, r2, #128
 1235 004a C06D     		ldr	r0, [r0, #92]
 1236              	.LVL128:
 1237 004c FFF7FEFF 		bl	HAL_DMA_Start_IT
 1238              	.LVL129:
1062:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1239              		.loc 1 1062 0
 1240 0050 0122     		movs	r2, #1
 1241 0052 264B     		ldr	r3, .L112+8
 1242 0054 1A60     		str	r2, [r3]
1064:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1243              		.loc 1 1064 0
 1244 0056 236A     		ldr	r3, [r4, #32]
 1245 0058 022B     		cmp	r3, #2
 1246 005a 28D0     		beq	.L110
 1247              	.LVL130:
 1248              	.L105:
1071:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SET_BLOCKLEN;
 1249              		.loc 1 1071 0
 1250 005c 0796     		str	r6, [sp, #28]
1072:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 1251              		.loc 1 1072 0
 1252 005e 1027     		movs	r7, #16
 1253 0060 0897     		str	r7, [sp, #32]
1073:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 1254              		.loc 1 1073 0
 1255 0062 4023     		movs	r3, #64
 1256 0064 0993     		str	r3, [sp, #36]
1074:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 1257              		.loc 1 1074 0
 1258 0066 0023     		movs	r3, #0
 1259 0068 0A93     		str	r3, [sp, #40]
ARM GAS  /tmp/ccnQ8l0t.s 			page 88


1075:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 1260              		.loc 1 1075 0
 1261 006a 4FF48063 		mov	r3, #1024
 1262 006e 0B93     		str	r3, [sp, #44]
1076:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 1263              		.loc 1 1076 0
 1264 0070 07A9     		add	r1, sp, #28
 1265 0072 2068     		ldr	r0, [r4]
 1266 0074 FFF7FEFF 		bl	SDIO_SendCommand
 1267              	.LVL131:
1079:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 1268              		.loc 1 1079 0
 1269 0078 3946     		mov	r1, r7
 1270 007a 2046     		mov	r0, r4
 1271 007c FFF7FEFF 		bl	SD_CmdResp1Error
 1272              	.LVL132:
1081:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1273              		.loc 1 1081 0
 1274 0080 0746     		mov	r7, r0
 1275 0082 80B9     		cbnz	r0, .L106
1087:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1276              		.loc 1 1087 0
 1277 0084 012D     		cmp	r5, #1
1090:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1278              		.loc 1 1090 0
 1279 0086 94BF     		ite	ls
 1280 0088 1827     		movls	r7, #24
1095:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1281              		.loc 1 1095 0
 1282 008a 1927     		movhi	r7, #25
 1283 008c 0897     		str	r7, [sp, #32]
1098:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 1284              		.loc 1 1098 0
 1285 008e 0CA9     		add	r1, sp, #48
 1286 0090 41F8148D 		str	r8, [r1, #-20]!
1099:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 1287              		.loc 1 1099 0
 1288 0094 2068     		ldr	r0, [r4]
 1289              	.LVL133:
 1290 0096 FFF7FEFF 		bl	SDIO_SendCommand
 1291              	.LVL134:
1104:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1292              		.loc 1 1104 0
 1293 009a 3946     		mov	r1, r7
 1294 009c 2046     		mov	r0, r4
 1295 009e FFF7FEFF 		bl	SD_CmdResp1Error
 1296              	.LVL135:
 1297 00a2 0746     		mov	r7, r0
 1298              	.LVL136:
1111:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1299              		.loc 1 1111 0
 1300 00a4 50B1     		cbz	r0, .L111
 1301              	.LVL137:
 1302              	.L106:
1128:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 1303              		.loc 1 1128 0
 1304 00a6 3846     		mov	r0, r7
ARM GAS  /tmp/ccnQ8l0t.s 			page 89


 1305 00a8 0CB0     		add	sp, sp, #48
 1306              	.LCFI16:
 1307              		.cfi_remember_state
 1308              		.cfi_def_cfa_offset 24
 1309              		@ sp needed
 1310 00aa BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1311              	.LVL138:
 1312              	.L110:
 1313              	.LCFI17:
 1314              		.cfi_restore_state
1067:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1315              		.loc 1 1067 0
 1316 00ae 4FEA5828 		lsr	r8, r8, #9
 1317 00b2 48EAC758 		orr	r8, r8, r7, lsl #23
 1318              	.LVL139:
1066:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     WriteAddr /= 512U;
 1319              		.loc 1 1066 0
 1320 00b6 4FF40076 		mov	r6, #512
 1321 00ba CFE7     		b	.L105
 1322              	.LVL140:
 1323              	.L111:
1117:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataLength    = BlockSize * NumberOfBlocks;
 1324              		.loc 1 1117 0
 1325 00bc 4FF0FF33 		mov	r3, #-1
 1326 00c0 0193     		str	r3, [sp, #4]
1118:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataBlockSize = SDIO_DATABLOCK_SIZE_512B;
 1327              		.loc 1 1118 0
 1328 00c2 05FB06F5 		mul	r5, r5, r6
 1329 00c6 0295     		str	r5, [sp, #8]
1119:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferDir   = SDIO_TRANSFER_DIR_TO_CARD;
 1330              		.loc 1 1119 0
 1331 00c8 9023     		movs	r3, #144
 1332 00ca 0393     		str	r3, [sp, #12]
1120:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferMode  = SDIO_TRANSFER_MODE_BLOCK;
 1333              		.loc 1 1120 0
 1334 00cc 0025     		movs	r5, #0
 1335 00ce 0495     		str	r5, [sp, #16]
1121:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DPSM          = SDIO_DPSM_ENABLE;
 1336              		.loc 1 1121 0
 1337 00d0 0595     		str	r5, [sp, #20]
1122:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataConfig(hsd->Instance, &sdio_datainitstructure);
 1338              		.loc 1 1122 0
 1339 00d2 0123     		movs	r3, #1
 1340 00d4 0693     		str	r3, [sp, #24]
1123:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1341              		.loc 1 1123 0
 1342 00d6 01A9     		add	r1, sp, #4
 1343 00d8 2068     		ldr	r0, [r4]
 1344              	.LVL141:
 1345 00da FFF7FEFF 		bl	SDIO_DataConfig
 1346              	.LVL142:
1125:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1347              		.loc 1 1125 0
 1348 00de E564     		str	r5, [r4, #76]
1127:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 1349              		.loc 1 1127 0
 1350 00e0 E1E7     		b	.L106
ARM GAS  /tmp/ccnQ8l0t.s 			page 90


 1351              	.L113:
 1352 00e2 00BF     		.align	2
 1353              	.L112:
 1354 00e4 00000000 		.word	SD_DMA_TxCplt
 1355 00e8 00000000 		.word	SD_DMA_TxError
 1356 00ec 8C852542 		.word	1109755276
 1357              		.cfi_endproc
 1358              	.LFE133:
 1360              		.section	.text.HAL_SD_Erase,"ax",%progbits
 1361              		.align	1
 1362              		.global	HAL_SD_Erase
 1363              		.syntax unified
 1364              		.thumb
 1365              		.thumb_func
 1366              		.fpu fpv4-sp-d16
 1368              	HAL_SD_Erase:
 1369              	.LFB136:
1263:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
 1370              		.loc 1 1263 0
 1371              		.cfi_startproc
 1372              		@ args = 8, pretend = 0, frame = 32
 1373              		@ frame_needed = 0, uses_anonymous_args = 0
 1374              	.LVL143:
 1375 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1376              	.LCFI18:
 1377              		.cfi_def_cfa_offset 24
 1378              		.cfi_offset 4, -24
 1379              		.cfi_offset 5, -20
 1380              		.cfi_offset 6, -16
 1381              		.cfi_offset 7, -12
 1382              		.cfi_offset 8, -8
 1383              		.cfi_offset 14, -4
 1384 0004 88B0     		sub	sp, sp, #32
 1385              	.LCFI19:
 1386              		.cfi_def_cfa_offset 56
 1387 0006 9846     		mov	r8, r3
 1388 0008 0E9E     		ldr	r6, [sp, #56]
 1389 000a 0F9F     		ldr	r7, [sp, #60]
 1390              	.LVL144:
1268:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint8_t cardstate      = 0U;
 1391              		.loc 1 1268 0
 1392 000c 0023     		movs	r3, #0
 1393 000e 0293     		str	r3, [sp, #8]
1269:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1394              		.loc 1 1269 0
 1395 0010 8DF80730 		strb	r3, [sp, #7]
1272:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1396              		.loc 1 1272 0
 1397 0014 C36A     		ldr	r3, [r0, #44]
 1398 0016 13F0007F 		tst	r3, #33554432
 1399 001a 04D1     		bne	.L129
1276:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1400              		.loc 1 1276 0
 1401 001c 2523     		movs	r3, #37
 1402              	.LVL145:
 1403              	.L126:
1359:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
ARM GAS  /tmp/ccnQ8l0t.s 			page 91


 1404              		.loc 1 1359 0
 1405 001e 1846     		mov	r0, r3
 1406 0020 08B0     		add	sp, sp, #32
 1407              	.LCFI20:
 1408              		.cfi_remember_state
 1409              		.cfi_def_cfa_offset 24
 1410              		@ sp needed
 1411 0022 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1412              	.LVL146:
 1413              	.L129:
 1414              	.LCFI21:
 1415              		.cfi_restore_state
 1416 0026 0446     		mov	r4, r0
 1417 0028 1546     		mov	r5, r2
1280:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1418              		.loc 1 1280 0
 1419 002a 0368     		ldr	r3, [r0]
 1420 002c 5B68     		ldr	r3, [r3, #4]
 1421 002e DBB2     		uxtb	r3, r3
 1422 0030 0233     		adds	r3, r3, #2
 1423 0032 3C4A     		ldr	r2, .L132
 1424              	.LVL147:
 1425 0034 B2FBF3F3 		udiv	r3, r2, r3
 1426 0038 0293     		str	r3, [sp, #8]
1282:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1427              		.loc 1 1282 0
 1428 003a 0020     		movs	r0, #0
 1429              	.LVL148:
 1430 003c FFF7FEFF 		bl	SDIO_GetResponse
 1431              	.LVL149:
 1432 0040 10F0007F 		tst	r0, #33554432
 1433 0044 01D0     		beq	.L130
1286:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1434              		.loc 1 1286 0
 1435 0046 0E23     		movs	r3, #14
 1436 0048 E9E7     		b	.L126
 1437              	.L130:
1290:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1438              		.loc 1 1290 0
 1439 004a 236A     		ldr	r3, [r4, #32]
 1440 004c 022B     		cmp	r3, #2
 1441 004e 3ED0     		beq	.L131
 1442              	.LVL150:
1297:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (hsd->CardType == HIGH_CAPACITY_SD_CARD))
 1443              		.loc 1 1297 0
 1444 0050 022B     		cmp	r3, #2
 1445 0052 42D9     		bls	.L117
 1446              	.LVL151:
 1447              	.L118:
1331:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_ERASE;
 1448              		.loc 1 1331 0
 1449 0054 0023     		movs	r3, #0
 1450 0056 0393     		str	r3, [sp, #12]
1332:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 1451              		.loc 1 1332 0
 1452 0058 2625     		movs	r5, #38
 1453 005a 0495     		str	r5, [sp, #16]
ARM GAS  /tmp/ccnQ8l0t.s 			page 92


1333:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1454              		.loc 1 1333 0
 1455 005c 03A9     		add	r1, sp, #12
 1456 005e 2068     		ldr	r0, [r4]
 1457 0060 FFF7FEFF 		bl	SDIO_SendCommand
 1458              	.LVL152:
1336:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1459              		.loc 1 1336 0
 1460 0064 2946     		mov	r1, r5
 1461 0066 2046     		mov	r0, r4
 1462 0068 FFF7FEFF 		bl	SD_CmdResp1Error
 1463              	.LVL153:
1338:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1464              		.loc 1 1338 0
 1465 006c 0346     		mov	r3, r0
 1466 006e 0028     		cmp	r0, #0
 1467 0070 D5D1     		bne	.L126
1343:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1468              		.loc 1 1343 0 discriminator 1
 1469 0072 029B     		ldr	r3, [sp, #8]
 1470 0074 23B1     		cbz	r3, .L119
1343:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1471              		.loc 1 1343 0 is_stmt 0
 1472 0076 0023     		movs	r3, #0
 1473              	.LVL154:
 1474              	.L120:
1343:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1475              		.loc 1 1343 0 discriminator 2
 1476 0078 0133     		adds	r3, r3, #1
 1477              	.LVL155:
 1478 007a 029A     		ldr	r2, [sp, #8]
 1479 007c 9A42     		cmp	r2, r3
 1480 007e FBD8     		bhi	.L120
 1481              	.LVL156:
 1482              	.L119:
1348:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1483              		.loc 1 1348 0 is_stmt 1
 1484 0080 0DF10701 		add	r1, sp, #7
 1485 0084 2046     		mov	r0, r4
 1486              	.LVL157:
 1487 0086 FFF7FEFF 		bl	SD_IsCardProgramming
 1488              	.LVL158:
1352:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1489              		.loc 1 1352 0
 1490 008a 0346     		mov	r3, r0
 1491 008c 0028     		cmp	r0, #0
 1492 008e C6D1     		bne	.L126
 1493 0090 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 1494 0094 063A     		subs	r2, r2, #6
 1495 0096 D2B2     		uxtb	r2, r2
 1496 0098 012A     		cmp	r2, #1
 1497 009a C0D8     		bhi	.L126
 1498              	.LVL159:
1354:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     delay--;
 1499              		.loc 1 1354 0
 1500 009c 0DF10701 		add	r1, sp, #7
 1501 00a0 2046     		mov	r0, r4
ARM GAS  /tmp/ccnQ8l0t.s 			page 93


 1502 00a2 FFF7FEFF 		bl	SD_IsCardProgramming
 1503              	.LVL160:
 1504 00a6 0346     		mov	r3, r0
 1505              	.LVL161:
 1506 00a8 6FF00105 		mvn	r5, #1
 1507              	.LVL162:
 1508              	.L123:
1352:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1509              		.loc 1 1352 0 discriminator 1
 1510 00ac 002B     		cmp	r3, #0
 1511 00ae B6D1     		bne	.L126
1352:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1512              		.loc 1 1352 0 is_stmt 0 discriminator 2
 1513 00b0 9DF80720 		ldrb	r2, [sp, #7]	@ zero_extendqisi2
 1514 00b4 063A     		subs	r2, r2, #6
 1515 00b6 D2B2     		uxtb	r2, r2
 1516 00b8 012A     		cmp	r2, #1
 1517 00ba B0D8     		bhi	.L126
 1518              	.LVL163:
1354:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     delay--;
 1519              		.loc 1 1354 0 is_stmt 1
 1520 00bc 0DF10701 		add	r1, sp, #7
 1521 00c0 2046     		mov	r0, r4
 1522 00c2 FFF7FEFF 		bl	SD_IsCardProgramming
 1523              	.LVL164:
 1524 00c6 0346     		mov	r3, r0
 1525              	.LVL165:
1352:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1526              		.loc 1 1352 0
 1527 00c8 013D     		subs	r5, r5, #1
 1528              	.LVL166:
 1529 00ca EFD1     		bne	.L123
 1530 00cc A7E7     		b	.L126
 1531              	.LVL167:
 1532              	.L131:
1292:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     endaddr   /= 512U;
 1533              		.loc 1 1292 0
 1534 00ce 6D0A     		lsrs	r5, r5, #9
 1535 00d0 45EAC855 		orr	r5, r5, r8, lsl #23
 1536              	.LVL168:
1293:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1537              		.loc 1 1293 0
 1538 00d4 760A     		lsrs	r6, r6, #9
 1539 00d6 46EAC756 		orr	r6, r6, r7, lsl #23
 1540              	.LVL169:
 1541              	.L117:
1301:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_SD_ERASE_GRP_START;
 1542              		.loc 1 1301 0
 1543 00da 0395     		str	r5, [sp, #12]
1302:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 1544              		.loc 1 1302 0
 1545 00dc 2025     		movs	r5, #32
 1546 00de 0495     		str	r5, [sp, #16]
1303:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 1547              		.loc 1 1303 0
 1548 00e0 4023     		movs	r3, #64
 1549 00e2 0593     		str	r3, [sp, #20]
ARM GAS  /tmp/ccnQ8l0t.s 			page 94


1304:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 1550              		.loc 1 1304 0
 1551 00e4 0023     		movs	r3, #0
 1552 00e6 0693     		str	r3, [sp, #24]
1305:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 1553              		.loc 1 1305 0
 1554 00e8 4FF48063 		mov	r3, #1024
 1555 00ec 0793     		str	r3, [sp, #28]
1306:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 1556              		.loc 1 1306 0
 1557 00ee 03A9     		add	r1, sp, #12
 1558 00f0 2068     		ldr	r0, [r4]
 1559 00f2 FFF7FEFF 		bl	SDIO_SendCommand
 1560              	.LVL170:
1309:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 1561              		.loc 1 1309 0
 1562 00f6 2946     		mov	r1, r5
 1563 00f8 2046     		mov	r0, r4
 1564 00fa FFF7FEFF 		bl	SD_CmdResp1Error
 1565              	.LVL171:
1311:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 1566              		.loc 1 1311 0
 1567 00fe 0346     		mov	r3, r0
 1568 0100 0028     		cmp	r0, #0
 1569 0102 8CD1     		bne	.L126
1317:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_SD_ERASE_GRP_END;
 1570              		.loc 1 1317 0
 1571 0104 0396     		str	r6, [sp, #12]
1318:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 1572              		.loc 1 1318 0
 1573 0106 2125     		movs	r5, #33
 1574 0108 0495     		str	r5, [sp, #16]
1319:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 1575              		.loc 1 1319 0
 1576 010a 03A9     		add	r1, sp, #12
 1577 010c 2068     		ldr	r0, [r4]
 1578              	.LVL172:
 1579 010e FFF7FEFF 		bl	SDIO_SendCommand
 1580              	.LVL173:
1322:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 1581              		.loc 1 1322 0
 1582 0112 2946     		mov	r1, r5
 1583 0114 2046     		mov	r0, r4
 1584 0116 FFF7FEFF 		bl	SD_CmdResp1Error
 1585              	.LVL174:
1324:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 1586              		.loc 1 1324 0
 1587 011a 0346     		mov	r3, r0
 1588 011c 0028     		cmp	r0, #0
 1589 011e 99D0     		beq	.L118
 1590 0120 7DE7     		b	.L126
 1591              	.L133:
 1592 0122 00BF     		.align	2
 1593              	.L132:
 1594 0124 C0D40100 		.word	120000
 1595              		.cfi_endproc
 1596              	.LFE136:
ARM GAS  /tmp/ccnQ8l0t.s 			page 95


 1598              		.section	.text.HAL_SD_XferCpltCallback,"ax",%progbits
 1599              		.align	1
 1600              		.weak	HAL_SD_XferCpltCallback
 1601              		.syntax unified
 1602              		.thumb
 1603              		.thumb_func
 1604              		.fpu fpv4-sp-d16
 1606              	HAL_SD_XferCpltCallback:
 1607              	.LFB138:
1448:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
 1608              		.loc 1 1448 0
 1609              		.cfi_startproc
 1610              		@ args = 0, pretend = 0, frame = 0
 1611              		@ frame_needed = 0, uses_anonymous_args = 0
 1612              		@ link register save eliminated.
 1613              	.LVL175:
 1614 0000 7047     		bx	lr
 1615              		.cfi_endproc
 1616              	.LFE138:
 1618              		.section	.text.HAL_SD_XferErrorCallback,"ax",%progbits
 1619              		.align	1
 1620              		.weak	HAL_SD_XferErrorCallback
 1621              		.syntax unified
 1622              		.thumb
 1623              		.thumb_func
 1624              		.fpu fpv4-sp-d16
 1626              	HAL_SD_XferErrorCallback:
 1627              	.LFB139:
1462:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
 1628              		.loc 1 1462 0
 1629              		.cfi_startproc
 1630              		@ args = 0, pretend = 0, frame = 0
 1631              		@ frame_needed = 0, uses_anonymous_args = 0
 1632              		@ link register save eliminated.
 1633              	.LVL176:
 1634 0000 7047     		bx	lr
 1635              		.cfi_endproc
 1636              	.LFE139:
 1638              		.section	.text.HAL_SD_IRQHandler,"ax",%progbits
 1639              		.align	1
 1640              		.global	HAL_SD_IRQHandler
 1641              		.syntax unified
 1642              		.thumb
 1643              		.thumb_func
 1644              		.fpu fpv4-sp-d16
 1646              	HAL_SD_IRQHandler:
 1647              	.LFB137:
1367:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for SDIO interrupt flags */
 1648              		.loc 1 1367 0
 1649              		.cfi_startproc
 1650              		@ args = 0, pretend = 0, frame = 0
 1651              		@ frame_needed = 0, uses_anonymous_args = 0
 1652              	.LVL177:
1367:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Check for SDIO interrupt flags */
 1653              		.loc 1 1367 0
 1654 0000 10B5     		push	{r4, lr}
 1655              	.LCFI22:
ARM GAS  /tmp/ccnQ8l0t.s 			page 96


 1656              		.cfi_def_cfa_offset 8
 1657              		.cfi_offset 4, -8
 1658              		.cfi_offset 14, -4
 1659 0002 0446     		mov	r4, r0
1369:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1660              		.loc 1 1369 0
 1661 0004 0368     		ldr	r3, [r0]
 1662 0006 5A6B     		ldr	r2, [r3, #52]
 1663 0008 12F4807F 		tst	r2, #256
 1664 000c 1BD1     		bne	.L144
1381:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1665              		.loc 1 1381 0
 1666 000e 5A6B     		ldr	r2, [r3, #52]
 1667 0010 12F0020F 		tst	r2, #2
 1668 0014 28D1     		bne	.L145
1390:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1669              		.loc 1 1390 0
 1670 0016 5A6B     		ldr	r2, [r3, #52]
 1671 0018 12F0080F 		tst	r2, #8
 1672 001c 2AD1     		bne	.L146
1398:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1673              		.loc 1 1398 0
 1674 001e 5A6B     		ldr	r2, [r3, #52]
 1675 0020 12F0200F 		tst	r2, #32
 1676 0024 2DD1     		bne	.L147
1406:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1677              		.loc 1 1406 0
 1678 0026 5A6B     		ldr	r2, [r3, #52]
 1679 0028 12F0100F 		tst	r2, #16
 1680 002c 30D1     		bne	.L148
1415:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1681              		.loc 1 1415 0
 1682 002e 5A6B     		ldr	r2, [r3, #52]
 1683 0030 12F4007F 		tst	r2, #512
 1684 0034 10D0     		beq	.L138
1417:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 1685              		.loc 1 1417 0
 1686 0036 4FF40072 		mov	r2, #512
 1687 003a 9A63     		str	r2, [r3, #56]
1419:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 1688              		.loc 1 1419 0
 1689 003c 0723     		movs	r3, #7
 1690 003e C364     		str	r3, [r0, #76]
1421:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1691              		.loc 1 1421 0
 1692 0040 FFF7FEFF 		bl	HAL_SD_XferErrorCallback
 1693              	.LVL178:
 1694 0044 08E0     		b	.L138
 1695              	.LVL179:
 1696              	.L144:
1371:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
 1697              		.loc 1 1371 0
 1698 0046 4FF48072 		mov	r2, #256
 1699 004a 9A63     		str	r2, [r3, #56]
1374:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 1700              		.loc 1 1374 0
 1701 004c 0123     		movs	r3, #1
ARM GAS  /tmp/ccnQ8l0t.s 			page 97


 1702 004e 8364     		str	r3, [r0, #72]
1377:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 1703              		.loc 1 1377 0
 1704 0050 0023     		movs	r3, #0
 1705 0052 C364     		str	r3, [r0, #76]
1379:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }  
 1706              		.loc 1 1379 0
 1707 0054 FFF7FEFF 		bl	HAL_SD_XferCpltCallback
 1708              	.LVL180:
 1709              	.L138:
1431:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****                                 SDIO_IT_TXFIFOHE | SDIO_IT_RXFIFOHF | SDIO_IT_TXUNDERR |\
 1710              		.loc 1 1431 0
 1711 0058 2268     		ldr	r2, [r4]
 1712 005a D36B     		ldr	r3, [r2, #60]
 1713 005c 23F44343 		bic	r3, r3, #49920
 1714 0060 23F03A03 		bic	r3, r3, #58
 1715 0064 D363     		str	r3, [r2, #60]
 1716 0066 10BD     		pop	{r4, pc}
 1717              	.LVL181:
 1718              	.L145:
1383:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 1719              		.loc 1 1383 0
 1720 0068 0222     		movs	r2, #2
 1721 006a 9A63     		str	r2, [r3, #56]
1385:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 1722              		.loc 1 1385 0
 1723 006c C264     		str	r2, [r0, #76]
1387:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 1724              		.loc 1 1387 0
 1725 006e FFF7FEFF 		bl	HAL_SD_XferErrorCallback
 1726              	.LVL182:
 1727 0072 F1E7     		b	.L138
 1728              	.LVL183:
 1729              	.L146:
1392:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 1730              		.loc 1 1392 0
 1731 0074 0822     		movs	r2, #8
 1732 0076 9A63     		str	r2, [r3, #56]
1394:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 1733              		.loc 1 1394 0
 1734 0078 0423     		movs	r3, #4
 1735 007a C364     		str	r3, [r0, #76]
1396:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1736              		.loc 1 1396 0
 1737 007c FFF7FEFF 		bl	HAL_SD_XferErrorCallback
 1738              	.LVL184:
 1739 0080 EAE7     		b	.L138
 1740              	.LVL185:
 1741              	.L147:
1400:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 1742              		.loc 1 1400 0
 1743 0082 2022     		movs	r2, #32
 1744 0084 9A63     		str	r2, [r3, #56]
1402:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 1745              		.loc 1 1402 0
 1746 0086 0623     		movs	r3, #6
 1747 0088 C364     		str	r3, [r0, #76]
ARM GAS  /tmp/ccnQ8l0t.s 			page 98


1404:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1748              		.loc 1 1404 0
 1749 008a FFF7FEFF 		bl	HAL_SD_XferErrorCallback
 1750              	.LVL186:
 1751 008e E3E7     		b	.L138
 1752              	.LVL187:
 1753              	.L148:
1408:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 1754              		.loc 1 1408 0
 1755 0090 1022     		movs	r2, #16
 1756 0092 9A63     		str	r2, [r3, #56]
1410:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 1757              		.loc 1 1410 0
 1758 0094 0523     		movs	r3, #5
 1759 0096 C364     		str	r3, [r0, #76]
1412:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 1760              		.loc 1 1412 0
 1761 0098 FFF7FEFF 		bl	HAL_SD_XferErrorCallback
 1762              	.LVL188:
 1763 009c DCE7     		b	.L138
 1764              		.cfi_endproc
 1765              	.LFE137:
 1767              		.section	.text.HAL_SD_DMA_RxCpltCallback,"ax",%progbits
 1768              		.align	1
 1769              		.weak	HAL_SD_DMA_RxCpltCallback
 1770              		.syntax unified
 1771              		.thumb
 1772              		.thumb_func
 1773              		.fpu fpv4-sp-d16
 1775              	HAL_SD_DMA_RxCpltCallback:
 1776              	.LFB140:
1477:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
 1777              		.loc 1 1477 0
 1778              		.cfi_startproc
 1779              		@ args = 0, pretend = 0, frame = 0
 1780              		@ frame_needed = 0, uses_anonymous_args = 0
 1781              		@ link register save eliminated.
 1782              	.LVL189:
 1783 0000 7047     		bx	lr
 1784              		.cfi_endproc
 1785              	.LFE140:
 1787              		.section	.text.SD_DMA_RxCplt,"ax",%progbits
 1788              		.align	1
 1789              		.syntax unified
 1790              		.thumb
 1791              		.thumb_func
 1792              		.fpu fpv4-sp-d16
 1794              	SD_DMA_RxCplt:
 1795              	.LFB151:
2288:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SD_HandleTypeDef *hsd = (SD_HandleTypeDef*)((DMA_HandleTypeDef*)hdma)->Parent;
 1796              		.loc 1 2288 0
 1797              		.cfi_startproc
 1798              		@ args = 0, pretend = 0, frame = 0
 1799              		@ frame_needed = 0, uses_anonymous_args = 0
 1800              	.LVL190:
2288:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SD_HandleTypeDef *hsd = (SD_HandleTypeDef*)((DMA_HandleTypeDef*)hdma)->Parent;
 1801              		.loc 1 2288 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 99


 1802 0000 10B5     		push	{r4, lr}
 1803              	.LCFI23:
 1804              		.cfi_def_cfa_offset 8
 1805              		.cfi_offset 4, -8
 1806              		.cfi_offset 14, -4
2289:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1807              		.loc 1 2289 0
 1808 0002 846B     		ldr	r4, [r0, #56]
 1809              	.LVL191:
2292:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1810              		.loc 1 2292 0
 1811 0004 0123     		movs	r3, #1
 1812 0006 2365     		str	r3, [r4, #80]
 1813              	.L151:
2295:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1814              		.loc 1 2295 0 discriminator 1
 1815 0008 A36C     		ldr	r3, [r4, #72]
 1816 000a 002B     		cmp	r3, #0
 1817 000c FCD0     		beq	.L151
2300:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 1818              		.loc 1 2300 0
 1819 000e FFF7FEFF 		bl	HAL_DMA_Abort
 1820              	.LVL192:
2303:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 1821              		.loc 1 2303 0
 1822 0012 A06D     		ldr	r0, [r4, #88]
 1823 0014 FFF7FEFF 		bl	HAL_SD_DMA_RxCpltCallback
 1824              	.LVL193:
 1825 0018 10BD     		pop	{r4, pc}
 1826              		.cfi_endproc
 1827              	.LFE151:
 1829              		.section	.text.HAL_SD_DMA_RxErrorCallback,"ax",%progbits
 1830              		.align	1
 1831              		.weak	HAL_SD_DMA_RxErrorCallback
 1832              		.syntax unified
 1833              		.thumb
 1834              		.thumb_func
 1835              		.fpu fpv4-sp-d16
 1837              	HAL_SD_DMA_RxErrorCallback:
 1838              	.LFB141:
1492:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
 1839              		.loc 1 1492 0
 1840              		.cfi_startproc
 1841              		@ args = 0, pretend = 0, frame = 0
 1842              		@ frame_needed = 0, uses_anonymous_args = 0
 1843              		@ link register save eliminated.
 1844              	.LVL194:
 1845 0000 7047     		bx	lr
 1846              		.cfi_endproc
 1847              	.LFE141:
 1849              		.section	.text.SD_DMA_RxError,"ax",%progbits
 1850              		.align	1
 1851              		.syntax unified
 1852              		.thumb
 1853              		.thumb_func
 1854              		.fpu fpv4-sp-d16
 1856              	SD_DMA_RxError:
ARM GAS  /tmp/ccnQ8l0t.s 			page 100


 1857              	.LFB152:
2313:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SD_HandleTypeDef *hsd = (SD_HandleTypeDef*)((DMA_HandleTypeDef*)hdma)->Parent;
 1858              		.loc 1 2313 0
 1859              		.cfi_startproc
 1860              		@ args = 0, pretend = 0, frame = 0
 1861              		@ frame_needed = 0, uses_anonymous_args = 0
 1862              	.LVL195:
2313:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SD_HandleTypeDef *hsd = (SD_HandleTypeDef*)((DMA_HandleTypeDef*)hdma)->Parent;
 1863              		.loc 1 2313 0
 1864 0000 08B5     		push	{r3, lr}
 1865              	.LCFI24:
 1866              		.cfi_def_cfa_offset 8
 1867              		.cfi_offset 3, -8
 1868              		.cfi_offset 14, -4
 1869              	.LVL196:
2317:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 1870              		.loc 1 2317 0
 1871 0002 836B     		ldr	r3, [r0, #56]
 1872 0004 986D     		ldr	r0, [r3, #88]
 1873              	.LVL197:
 1874 0006 FFF7FEFF 		bl	HAL_SD_DMA_RxErrorCallback
 1875              	.LVL198:
 1876 000a 08BD     		pop	{r3, pc}
 1877              		.cfi_endproc
 1878              	.LFE152:
 1880              		.section	.text.HAL_SD_DMA_TxCpltCallback,"ax",%progbits
 1881              		.align	1
 1882              		.weak	HAL_SD_DMA_TxCpltCallback
 1883              		.syntax unified
 1884              		.thumb
 1885              		.thumb_func
 1886              		.fpu fpv4-sp-d16
 1888              	HAL_SD_DMA_TxCpltCallback:
 1889              	.LFB142:
1507:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
 1890              		.loc 1 1507 0
 1891              		.cfi_startproc
 1892              		@ args = 0, pretend = 0, frame = 0
 1893              		@ frame_needed = 0, uses_anonymous_args = 0
 1894              		@ link register save eliminated.
 1895              	.LVL199:
 1896 0000 7047     		bx	lr
 1897              		.cfi_endproc
 1898              	.LFE142:
 1900              		.section	.text.SD_DMA_TxCplt,"ax",%progbits
 1901              		.align	1
 1902              		.syntax unified
 1903              		.thumb
 1904              		.thumb_func
 1905              		.fpu fpv4-sp-d16
 1907              	SD_DMA_TxCplt:
 1908              	.LFB153:
2327:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SD_HandleTypeDef *hsd = (SD_HandleTypeDef*)((DMA_HandleTypeDef*)hdma)->Parent;
 1909              		.loc 1 2327 0
 1910              		.cfi_startproc
 1911              		@ args = 0, pretend = 0, frame = 0
 1912              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 101


 1913              	.LVL200:
2327:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SD_HandleTypeDef *hsd = (SD_HandleTypeDef*)((DMA_HandleTypeDef*)hdma)->Parent;
 1914              		.loc 1 2327 0
 1915 0000 10B5     		push	{r4, lr}
 1916              	.LCFI25:
 1917              		.cfi_def_cfa_offset 8
 1918              		.cfi_offset 4, -8
 1919              		.cfi_offset 14, -4
2328:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1920              		.loc 1 2328 0
 1921 0002 846B     		ldr	r4, [r0, #56]
 1922              	.LVL201:
2331:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 1923              		.loc 1 2331 0
 1924 0004 0123     		movs	r3, #1
 1925 0006 2365     		str	r3, [r4, #80]
 1926              	.L159:
2334:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 1927              		.loc 1 2334 0 discriminator 1
 1928 0008 A36C     		ldr	r3, [r4, #72]
 1929 000a 002B     		cmp	r3, #0
 1930 000c FCD0     		beq	.L159
2339:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 1931              		.loc 1 2339 0
 1932 000e FFF7FEFF 		bl	HAL_DMA_Abort
 1933              	.LVL202:
2342:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 1934              		.loc 1 2342 0
 1935 0012 E06D     		ldr	r0, [r4, #92]
 1936 0014 FFF7FEFF 		bl	HAL_SD_DMA_TxCpltCallback
 1937              	.LVL203:
 1938 0018 10BD     		pop	{r4, pc}
 1939              		.cfi_endproc
 1940              	.LFE153:
 1942              		.section	.text.HAL_SD_DMA_TxErrorCallback,"ax",%progbits
 1943              		.align	1
 1944              		.weak	HAL_SD_DMA_TxErrorCallback
 1945              		.syntax unified
 1946              		.thumb
 1947              		.thumb_func
 1948              		.fpu fpv4-sp-d16
 1950              	HAL_SD_DMA_TxErrorCallback:
 1951              	.LFB143:
1522:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Prevent unused argument(s) compilation warning */
 1952              		.loc 1 1522 0
 1953              		.cfi_startproc
 1954              		@ args = 0, pretend = 0, frame = 0
 1955              		@ frame_needed = 0, uses_anonymous_args = 0
 1956              		@ link register save eliminated.
 1957              	.LVL204:
 1958 0000 7047     		bx	lr
 1959              		.cfi_endproc
 1960              	.LFE143:
 1962              		.section	.text.SD_DMA_TxError,"ax",%progbits
 1963              		.align	1
 1964              		.syntax unified
 1965              		.thumb
ARM GAS  /tmp/ccnQ8l0t.s 			page 102


 1966              		.thumb_func
 1967              		.fpu fpv4-sp-d16
 1969              	SD_DMA_TxError:
 1970              	.LFB154:
2352:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SD_HandleTypeDef *hsd = ( SD_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 1971              		.loc 1 2352 0
 1972              		.cfi_startproc
 1973              		@ args = 0, pretend = 0, frame = 0
 1974              		@ frame_needed = 0, uses_anonymous_args = 0
 1975              	.LVL205:
2352:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SD_HandleTypeDef *hsd = ( SD_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 1976              		.loc 1 2352 0
 1977 0000 08B5     		push	{r3, lr}
 1978              	.LCFI26:
 1979              		.cfi_def_cfa_offset 8
 1980              		.cfi_offset 3, -8
 1981              		.cfi_offset 14, -4
 1982              	.LVL206:
2356:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 1983              		.loc 1 2356 0
 1984 0002 836B     		ldr	r3, [r0, #56]
 1985 0004 D86D     		ldr	r0, [r3, #92]
 1986              	.LVL207:
 1987 0006 FFF7FEFF 		bl	HAL_SD_DMA_TxErrorCallback
 1988              	.LVL208:
 1989 000a 08BD     		pop	{r3, pc}
 1990              		.cfi_endproc
 1991              	.LFE154:
 1993              		.section	.text.HAL_SD_Get_CardInfo,"ax",%progbits
 1994              		.align	1
 1995              		.global	HAL_SD_Get_CardInfo
 1996              		.syntax unified
 1997              		.thumb
 1998              		.thumb_func
 1999              		.fpu fpv4-sp-d16
 2001              	HAL_SD_Get_CardInfo:
 2002              	.LFB144:
1557:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
 2003              		.loc 1 1557 0
 2004              		.cfi_startproc
 2005              		@ args = 0, pretend = 0, frame = 0
 2006              		@ frame_needed = 0, uses_anonymous_args = 0
 2007              		@ link register save eliminated.
 2008              	.LVL209:
 2009 0000 F0B4     		push	{r4, r5, r6, r7}
 2010              	.LCFI27:
 2011              		.cfi_def_cfa_offset 16
 2012              		.cfi_offset 4, -16
 2013              		.cfi_offset 5, -12
 2014              		.cfi_offset 6, -8
 2015              		.cfi_offset 7, -4
 2016 0002 0346     		mov	r3, r0
 2017              	.LVL210:
1561:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->RCA      = (uint16_t)(hsd->RCA);
 2018              		.loc 1 1561 0
 2019 0004 026A     		ldr	r2, [r0, #32]
 2020 0006 81F85620 		strb	r2, [r1, #86]
ARM GAS  /tmp/ccnQ8l0t.s 			page 103


1562:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2021              		.loc 1 1562 0
 2022 000a 426A     		ldr	r2, [r0, #36]
 2023 000c A1F85420 		strh	r2, [r1, #84]	@ movhi
1565:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.CSDStruct      = (uint8_t)((tmp & 0xC0U) >> 6U);
 2024              		.loc 1 1565 0
 2025 0010 826A     		ldr	r2, [r0, #40]
 2026              	.LVL211:
1566:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.SysSpecVersion = (uint8_t)((tmp & 0x3CU) >> 2U);
 2027              		.loc 1 1566 0
 2028 0012 900F     		lsrs	r0, r2, #30
 2029              	.LVL212:
 2030 0014 0870     		strb	r0, [r1]
1567:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.Reserved1      = tmp & 0x03U;
 2031              		.loc 1 1567 0
 2032 0016 C2F38360 		ubfx	r0, r2, #26, #4
 2033 001a 4870     		strb	r0, [r1, #1]
1568:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2034              		.loc 1 1568 0
 2035 001c C2F30162 		ubfx	r2, r2, #24, #2
 2036              	.LVL213:
 2037 0020 8A70     		strb	r2, [r1, #2]
 2038              	.LVL214:
1572:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2039              		.loc 1 1572 0
 2040 0022 93F82A20 		ldrb	r2, [r3, #42]	@ zero_extendqisi2
 2041 0026 CA70     		strb	r2, [r1, #3]
 2042              	.LVL215:
1576:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2043              		.loc 1 1576 0
 2044 0028 93F82920 		ldrb	r2, [r3, #41]	@ zero_extendqisi2
 2045 002c 0A71     		strb	r2, [r1, #4]
 2046              	.LVL216:
1580:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2047              		.loc 1 1580 0
 2048 002e 93F82820 		ldrb	r2, [r3, #40]	@ zero_extendqisi2
 2049 0032 4A71     		strb	r2, [r1, #5]
 2050              	.LVL217:
1583:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.CardComdClasses = (uint16_t)(tmp << 4U);
 2051              		.loc 1 1583 0
 2052 0034 93F82F20 		ldrb	r2, [r3, #47]	@ zero_extendqisi2
1584:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2053              		.loc 1 1584 0
 2054 0038 1201     		lsls	r2, r2, #4
 2055 003a CA80     		strh	r2, [r1, #6]	@ movhi
 2056              	.LVL218:
1587:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.CardComdClasses |= (uint16_t)((tmp & 0xF0) >> 4U);
 2057              		.loc 1 1587 0
 2058 003c D86A     		ldr	r0, [r3, #44]
 2059              	.LVL219:
1588:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.RdBlockLen       = (uint8_t)(tmp & 0x0FU);
 2060              		.loc 1 1588 0
 2061 003e CA88     		ldrh	r2, [r1, #6]
 2062 0040 92B2     		uxth	r2, r2
 2063 0042 C0F30354 		ubfx	r4, r0, #20, #4
 2064 0046 2243     		orrs	r2, r2, r4
 2065 0048 CA80     		strh	r2, [r1, #6]	@ movhi
ARM GAS  /tmp/ccnQ8l0t.s 			page 104


1589:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2066              		.loc 1 1589 0
 2067 004a C0F30340 		ubfx	r0, r0, #16, #4
 2068              	.LVL220:
 2069 004e 0872     		strb	r0, [r1, #8]
1592:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.PartBlockRead   = (uint8_t)((tmp & 0x80U) >> 7U);
 2070              		.loc 1 1592 0
 2071 0050 93F82D20 		ldrb	r2, [r3, #45]	@ zero_extendqisi2
 2072              	.LVL221:
1593:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.WrBlockMisalign = (uint8_t)((tmp & 0x40U) >> 6U);
 2073              		.loc 1 1593 0
 2074 0054 D009     		lsrs	r0, r2, #7
 2075 0056 4872     		strb	r0, [r1, #9]
1594:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.RdBlockMisalign = (uint8_t)((tmp & 0x20U) >> 5U);
 2076              		.loc 1 1594 0
 2077 0058 C2F38010 		ubfx	r0, r2, #6, #1
 2078 005c 8872     		strb	r0, [r1, #10]
1595:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.DSRImpl         = (uint8_t)((tmp & 0x10U) >> 4U);
 2079              		.loc 1 1595 0
 2080 005e C2F34010 		ubfx	r0, r2, #5, #1
 2081 0062 C872     		strb	r0, [r1, #11]
1596:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.Reserved2       = 0U; /*!< Reserved */
 2082              		.loc 1 1596 0
 2083 0064 C2F30010 		ubfx	r0, r2, #4, #1
 2084 0068 0873     		strb	r0, [r1, #12]
1597:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2085              		.loc 1 1597 0
 2086 006a 0020     		movs	r0, #0
 2087 006c 4873     		strb	r0, [r1, #13]
1599:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2088              		.loc 1 1599 0
 2089 006e 186A     		ldr	r0, [r3, #32]
 2090 0070 0128     		cmp	r0, #1
 2091 0072 40F2AE80 		bls	.L170
1628:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2092              		.loc 1 1628 0
 2093 0076 0228     		cmp	r0, #2
 2094 0078 00F0EA80 		beq	.L171
1653:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 2095              		.loc 1 1653 0
 2096 007c 2920     		movs	r0, #41
 2097              	.L167:
 2098              	.LVL222:
1656:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.EraseGrMul  = (tmp & 0x3FU) << 1U;
 2099              		.loc 1 1656 0
 2100 007e C2F38014 		ubfx	r4, r2, #6, #1
 2101 0082 4C76     		strb	r4, [r1, #25]
1657:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2102              		.loc 1 1657 0
 2103 0084 5200     		lsls	r2, r2, #1
 2104              	.LVL223:
 2105 0086 02F07E02 		and	r2, r2, #126
 2106 008a 8A76     		strb	r2, [r1, #26]
1660:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.EraseGrMul     |= (tmp & 0x80U) >> 7U;
 2107              		.loc 1 1660 0
 2108 008c 1A6B     		ldr	r2, [r3, #48]
 2109              	.LVL224:
ARM GAS  /tmp/ccnQ8l0t.s 			page 105


1661:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.WrProtectGrSize = (tmp & 0x7FU);
 2110              		.loc 1 1661 0
 2111 008e 8C7E     		ldrb	r4, [r1, #26]	@ zero_extendqisi2
 2112 0090 C2F3C015 		ubfx	r5, r2, #7, #1
 2113 0094 2C43     		orrs	r4, r4, r5
 2114 0096 8C76     		strb	r4, [r1, #26]
1662:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2115              		.loc 1 1662 0
 2116 0098 02F07F02 		and	r2, r2, #127
 2117              	.LVL225:
 2118 009c CA76     		strb	r2, [r1, #27]
1665:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.WrProtectGrEnable = (tmp & 0x80U) >> 7U;
 2119              		.loc 1 1665 0
 2120 009e 5A6B     		ldr	r2, [r3, #52]
 2121              	.LVL226:
1666:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.ManDeflECC        = (tmp & 0x60U) >> 5U;
 2122              		.loc 1 1666 0
 2123 00a0 D40F     		lsrs	r4, r2, #31
 2124 00a2 0C77     		strb	r4, [r1, #28]
1667:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.WrSpeedFact       = (tmp & 0x1CU) >> 2U;
 2125              		.loc 1 1667 0
 2126 00a4 C2F34174 		ubfx	r4, r2, #29, #2
 2127 00a8 4C77     		strb	r4, [r1, #29]
1668:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.MaxWrBlockLen     = (tmp & 0x03U) << 2U;
 2128              		.loc 1 1668 0
 2129 00aa C2F38264 		ubfx	r4, r2, #26, #3
 2130 00ae 8C77     		strb	r4, [r1, #30]
1669:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2131              		.loc 1 1669 0
 2132 00b0 920D     		lsrs	r2, r2, #22
 2133              	.LVL227:
 2134 00b2 02F00C02 		and	r2, r2, #12
 2135 00b6 CA77     		strb	r2, [r1, #31]
1672:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.MaxWrBlockLen      |= (tmp & 0xC0U) >> 6U;
 2136              		.loc 1 1672 0
 2137 00b8 5A6B     		ldr	r2, [r3, #52]
 2138              	.LVL228:
1673:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.WriteBlockPaPartial = (tmp & 0x20U) >> 5U;
 2139              		.loc 1 1673 0
 2140 00ba CC7F     		ldrb	r4, [r1, #31]	@ zero_extendqisi2
 2141 00bc C2F38155 		ubfx	r5, r2, #22, #2
 2142 00c0 2C43     		orrs	r4, r4, r5
 2143 00c2 CC77     		strb	r4, [r1, #31]
1674:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.Reserved3           = 0U;
 2144              		.loc 1 1674 0
 2145 00c4 C2F34054 		ubfx	r4, r2, #21, #1
 2146 00c8 81F82040 		strb	r4, [r1, #32]
1675:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.ContentProtectAppli = (tmp & 0x01U);
 2147              		.loc 1 1675 0
 2148 00cc 0024     		movs	r4, #0
 2149 00ce 81F82140 		strb	r4, [r1, #33]
1676:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2150              		.loc 1 1676 0
 2151 00d2 C2F30042 		ubfx	r2, r2, #16, #1
 2152              	.LVL229:
 2153 00d6 81F82220 		strb	r2, [r1, #34]
1679:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.FileFormatGrouop = (tmp & 0x80U) >> 7U;
ARM GAS  /tmp/ccnQ8l0t.s 			page 106


 2154              		.loc 1 1679 0
 2155 00da 5A6B     		ldr	r2, [r3, #52]
 2156              	.LVL230:
1680:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.CopyFlag         = (tmp & 0x40U) >> 6U;
 2157              		.loc 1 1680 0
 2158 00dc C2F3C034 		ubfx	r4, r2, #15, #1
 2159 00e0 81F82340 		strb	r4, [r1, #35]
1681:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.PermWrProtect    = (tmp & 0x20U) >> 5U;
 2160              		.loc 1 1681 0
 2161 00e4 C2F38034 		ubfx	r4, r2, #14, #1
 2162 00e8 81F82440 		strb	r4, [r1, #36]
1682:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.TempWrProtect    = (tmp & 0x10U) >> 4U;
 2163              		.loc 1 1682 0
 2164 00ec C2F34034 		ubfx	r4, r2, #13, #1
 2165 00f0 81F82540 		strb	r4, [r1, #37]
1683:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.FileFormat       = (tmp & 0x0CU) >> 2U;
 2166              		.loc 1 1683 0
 2167 00f4 C2F30034 		ubfx	r4, r2, #12, #1
 2168 00f8 81F82640 		strb	r4, [r1, #38]
1684:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.ECC              = (tmp & 0x03U);
 2169              		.loc 1 1684 0
 2170 00fc C2F38124 		ubfx	r4, r2, #10, #2
 2171 0100 81F82740 		strb	r4, [r1, #39]
1685:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2172              		.loc 1 1685 0
 2173 0104 C2F30122 		ubfx	r2, r2, #8, #2
 2174              	.LVL231:
 2175 0108 81F82820 		strb	r2, [r1, #40]
 2176              	.LVL232:
1689:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_csd.Reserved4 = 1U;
 2177              		.loc 1 1689 0
 2178 010c 5A6B     		ldr	r2, [r3, #52]
 2179 010e C2F34602 		ubfx	r2, r2, #1, #7
 2180 0112 81F82920 		strb	r2, [r1, #41]
 2181              	.LVL233:
1690:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2182              		.loc 1 1690 0
 2183 0116 0124     		movs	r4, #1
 2184 0118 81F82A40 		strb	r4, [r1, #42]
1693:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ManufacturerID = tmp;
 2185              		.loc 1 1693 0
 2186 011c 93F83B20 		ldrb	r2, [r3, #59]	@ zero_extendqisi2
 2187              	.LVL234:
1694:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2188              		.loc 1 1694 0
 2189 0120 81F82C20 		strb	r2, [r1, #44]
 2190              	.LVL235:
1698:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2191              		.loc 1 1698 0
 2192 0124 93F83A20 		ldrb	r2, [r3, #58]	@ zero_extendqisi2
 2193 0128 1202     		lsls	r2, r2, #8
 2194 012a CA85     		strh	r2, [r1, #46]	@ movhi
 2195              	.LVL236:
1702:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2196              		.loc 1 1702 0
 2197 012c CA8D     		ldrh	r2, [r1, #46]
 2198 012e 92B2     		uxth	r2, r2
ARM GAS  /tmp/ccnQ8l0t.s 			page 107


 2199 0130 93F83950 		ldrb	r5, [r3, #57]	@ zero_extendqisi2
 2200 0134 2A43     		orrs	r2, r2, r5
 2201 0136 CA85     		strh	r2, [r1, #46]	@ movhi
 2202              	.LVL237:
 2203 0138 9A6B     		ldr	r2, [r3, #56]
 2204 013a 1206     		lsls	r2, r2, #24
1706:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2205              		.loc 1 1706 0
 2206 013c 0A63     		str	r2, [r1, #48]
 2207              	.LVL238:
1710:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2208              		.loc 1 1710 0
 2209 013e 0A6B     		ldr	r2, [r1, #48]
1709:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ProdName1 |= tmp << 16U;
 2210              		.loc 1 1709 0
 2211 0140 93F83F50 		ldrb	r5, [r3, #63]	@ zero_extendqisi2
1710:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2212              		.loc 1 1710 0
 2213 0144 42EA0542 		orr	r2, r2, r5, lsl #16
 2214 0148 0A63     		str	r2, [r1, #48]
 2215              	.LVL239:
1714:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2216              		.loc 1 1714 0
 2217 014a 0D6B     		ldr	r5, [r1, #48]
1713:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ProdName1 |= tmp << 8U;
 2218              		.loc 1 1713 0
 2219 014c DA8F     		ldrh	r2, [r3, #62]
1714:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2220              		.loc 1 1714 0
 2221 014e 1202     		lsls	r2, r2, #8
 2222 0150 92B2     		uxth	r2, r2
 2223 0152 2A43     		orrs	r2, r2, r5
 2224 0154 0A63     		str	r2, [r1, #48]
 2225              	.LVL240:
1718:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2226              		.loc 1 1718 0
 2227 0156 0D6B     		ldr	r5, [r1, #48]
 2228 0158 93F83D20 		ldrb	r2, [r3, #61]	@ zero_extendqisi2
 2229 015c 2A43     		orrs	r2, r2, r5
 2230 015e 0A63     		str	r2, [r1, #48]
 2231              	.LVL241:
1721:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ProdName2 = tmp;
 2232              		.loc 1 1721 0
 2233 0160 93F83C20 		ldrb	r2, [r3, #60]	@ zero_extendqisi2
 2234              	.LVL242:
1722:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2235              		.loc 1 1722 0
 2236 0164 81F83420 		strb	r2, [r1, #52]
 2237              	.LVL243:
1725:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ProdRev = tmp;
 2238              		.loc 1 1725 0
 2239 0168 93F84320 		ldrb	r2, [r3, #67]	@ zero_extendqisi2
 2240              	.LVL244:
1726:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2241              		.loc 1 1726 0
 2242 016c 81F83520 		strb	r2, [r1, #53]
 2243              	.LVL245:
ARM GAS  /tmp/ccnQ8l0t.s 			page 108


1729:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ProdSN = tmp << 24U;
 2244              		.loc 1 1729 0
 2245 0170 B3F84220 		ldrh	r2, [r3, #66]
 2246 0174 1206     		lsls	r2, r2, #24
1730:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2247              		.loc 1 1730 0
 2248 0176 8A63     		str	r2, [r1, #56]
 2249              	.LVL246:
1734:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2250              		.loc 1 1734 0
 2251 0178 8D6B     		ldr	r5, [r1, #56]
1733:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ProdSN |= tmp << 16U;
 2252              		.loc 1 1733 0
 2253 017a 1A6C     		ldr	r2, [r3, #64]
1734:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2254              		.loc 1 1734 0
 2255 017c 1202     		lsls	r2, r2, #8
 2256 017e 02F47F02 		and	r2, r2, #16711680
 2257 0182 2A43     		orrs	r2, r2, r5
 2258 0184 8A63     		str	r2, [r1, #56]
 2259              	.LVL247:
1738:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2260              		.loc 1 1738 0
 2261 0186 8D6B     		ldr	r5, [r1, #56]
 2262 0188 1A6C     		ldr	r2, [r3, #64]
 2263 018a 1202     		lsls	r2, r2, #8
 2264 018c 92B2     		uxth	r2, r2
 2265 018e 2A43     		orrs	r2, r2, r5
 2266 0190 8A63     		str	r2, [r1, #56]
 2267              	.LVL248:
1742:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2268              		.loc 1 1742 0
 2269 0192 8D6B     		ldr	r5, [r1, #56]
1741:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ProdSN |= tmp;
 2270              		.loc 1 1741 0
 2271 0194 93F84720 		ldrb	r2, [r3, #71]	@ zero_extendqisi2
1742:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2272              		.loc 1 1742 0
 2273 0198 2A43     		orrs	r2, r2, r5
 2274 019a 8A63     		str	r2, [r1, #56]
 2275              	.LVL249:
1745:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.Reserved1   |= (tmp & 0xF0U) >> 4U;
 2276              		.loc 1 1745 0
 2277 019c 5A6C     		ldr	r2, [r3, #68]
 2278              	.LVL250:
1746:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.ManufactDate = (tmp & 0x0FU) << 8U;
 2279              		.loc 1 1746 0
 2280 019e 91F83C50 		ldrb	r5, [r1, #60]	@ zero_extendqisi2
 2281 01a2 C2F30356 		ubfx	r6, r2, #20, #4
 2282 01a6 3543     		orrs	r5, r5, r6
 2283 01a8 81F83C50 		strb	r5, [r1, #60]
1747:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2284              		.loc 1 1747 0
 2285 01ac 120A     		lsrs	r2, r2, #8
 2286              	.LVL251:
 2287 01ae 02F47062 		and	r2, r2, #3840
 2288 01b2 CA87     		strh	r2, [r1, #62]	@ movhi
ARM GAS  /tmp/ccnQ8l0t.s 			page 109


 2289              	.LVL252:
1751:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2290              		.loc 1 1751 0
 2291 01b4 CA8F     		ldrh	r2, [r1, #62]
 2292 01b6 92B2     		uxth	r2, r2
 2293 01b8 93F84550 		ldrb	r5, [r3, #69]	@ zero_extendqisi2
 2294 01bc 2A43     		orrs	r2, r2, r5
 2295 01be CA87     		strh	r2, [r1, #62]	@ movhi
 2296              	.LVL253:
1755:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardInfo->SD_cid.Reserved2 = 1U;
 2297              		.loc 1 1755 0
 2298 01c0 5B6C     		ldr	r3, [r3, #68]
 2299              	.LVL254:
 2300 01c2 C3F34603 		ubfx	r3, r3, #1, #7
 2301              	.LVL255:
 2302 01c6 81F84030 		strb	r3, [r1, #64]
 2303              	.LVL256:
1756:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2304              		.loc 1 1756 0
 2305 01ca 81F84140 		strb	r4, [r1, #65]
1759:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 2306              		.loc 1 1759 0
 2307 01ce F0BC     		pop	{r4, r5, r6, r7}
 2308              	.LCFI28:
 2309              		.cfi_remember_state
 2310              		.cfi_restore 7
 2311              		.cfi_restore 6
 2312              		.cfi_restore 5
 2313              		.cfi_restore 4
 2314              		.cfi_def_cfa_offset 0
 2315 01d0 7047     		bx	lr
 2316              	.LVL257:
 2317              	.L170:
 2318              	.LCFI29:
 2319              		.cfi_restore_state
1601:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2320              		.loc 1 1601 0
 2321 01d2 9202     		lsls	r2, r2, #10
 2322              	.LVL258:
 2323 01d4 02F44062 		and	r2, r2, #3072
 2324 01d8 0A61     		str	r2, [r1, #16]
 2325              	.LVL259:
1605:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2326              		.loc 1 1605 0
 2327 01da 0869     		ldr	r0, [r1, #16]
 2328 01dc DA6A     		ldr	r2, [r3, #44]
 2329 01de 9200     		lsls	r2, r2, #2
 2330 01e0 02F47F72 		and	r2, r2, #1020
 2331 01e4 0243     		orrs	r2, r2, r0
 2332 01e6 0A61     		str	r2, [r1, #16]
 2333              	.LVL260:
1608:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.DeviceSize |= (tmp & 0xC0U) >> 6U;
 2334              		.loc 1 1608 0
 2335 01e8 1A6B     		ldr	r2, [r3, #48]
 2336              	.LVL261:
1609:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2337              		.loc 1 1609 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 110


 2338 01ea 0869     		ldr	r0, [r1, #16]
 2339 01ec 40EA9270 		orr	r0, r0, r2, lsr #30
 2340 01f0 0861     		str	r0, [r1, #16]
1611:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.MaxRdCurrentVDDMax = (tmp & 0x07U);
 2341              		.loc 1 1611 0
 2342 01f2 C2F3C260 		ubfx	r0, r2, #27, #3
 2343 01f6 0875     		strb	r0, [r1, #20]
1612:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2344              		.loc 1 1612 0
 2345 01f8 C2F30262 		ubfx	r2, r2, #24, #3
 2346              	.LVL262:
 2347 01fc 4A75     		strb	r2, [r1, #21]
1615:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.MaxWrCurrentVDDMin = (tmp & 0xE0U) >> 5U;
 2348              		.loc 1 1615 0
 2349 01fe 1A6B     		ldr	r2, [r3, #48]
 2350              	.LVL263:
1616:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.MaxWrCurrentVDDMax = (tmp & 0x1CU) >> 2U;
 2351              		.loc 1 1616 0
 2352 0200 C2F34250 		ubfx	r0, r2, #21, #3
 2353 0204 8875     		strb	r0, [r1, #22]
1617:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.DeviceSizeMul      = (tmp & 0x03U) << 1U;
 2354              		.loc 1 1617 0
 2355 0206 C2F38240 		ubfx	r0, r2, #18, #3
 2356 020a C875     		strb	r0, [r1, #23]
1618:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     /* Byte 10 */
 2357              		.loc 1 1618 0
 2358 020c D20B     		lsrs	r2, r2, #15
 2359              	.LVL264:
 2360 020e 02F00602 		and	r2, r2, #6
 2361 0212 0A76     		strb	r2, [r1, #24]
1620:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->SD_csd.DeviceSizeMul |= (tmp & 0x80U) >> 7U;
 2362              		.loc 1 1620 0
 2363 0214 186B     		ldr	r0, [r3, #48]
 2364 0216 C0F30722 		ubfx	r2, r0, #8, #8
 2365              	.LVL265:
1621:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2366              		.loc 1 1621 0
 2367 021a 0C7E     		ldrb	r4, [r1, #24]	@ zero_extendqisi2
 2368 021c C0F3C030 		ubfx	r0, r0, #15, #1
 2369 0220 2043     		orrs	r0, r0, r4
 2370 0222 0876     		strb	r0, [r1, #24]
1623:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->CardCapacity *= (1U << (pCardInfo->SD_csd.DeviceSizeMul + 2U));
 2371              		.loc 1 1623 0
 2372 0224 0C69     		ldr	r4, [r1, #16]
1624:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->CardBlockSize = 1U << (pCardInfo->SD_csd.RdBlockLen);
 2373              		.loc 1 1624 0
 2374 0226 0F7E     		ldrb	r7, [r1, #24]	@ zero_extendqisi2
1625:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->CardCapacity *= pCardInfo->CardBlockSize;
 2375              		.loc 1 1625 0
 2376 0228 087A     		ldrb	r0, [r1, #8]	@ zero_extendqisi2
 2377 022a C0B2     		uxtb	r0, r0
 2378 022c 0126     		movs	r6, #1
 2379 022e 06FA00F0 		lsl	r0, r6, r0
 2380 0232 0865     		str	r0, [r1, #80]
1623:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->CardCapacity *= (1U << (pCardInfo->SD_csd.DeviceSizeMul + 2U));
 2381              		.loc 1 1623 0
 2382 0234 3444     		add	r4, r4, r6
ARM GAS  /tmp/ccnQ8l0t.s 			page 111


1626:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 2383              		.loc 1 1626 0
 2384 0236 A4FB0045 		umull	r4, r5, r4, r0
1624:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->CardBlockSize = 1U << (pCardInfo->SD_csd.RdBlockLen);
 2385              		.loc 1 1624 0
 2386 023a B81C     		adds	r0, r7, #2
 2387 023c 06FA00F0 		lsl	r0, r6, r0
1626:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 2388              		.loc 1 1626 0
 2389 0240 A4FB0067 		umull	r6, r7, r4, r0
 2390 0244 00FB0577 		mla	r7, r0, r5, r7
 2391 0248 C1E91267 		strd	r6, [r1, #72]
1558:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t tmp = 0U;
 2392              		.loc 1 1558 0
 2393 024c 0020     		movs	r0, #0
 2394 024e 16E7     		b	.L167
 2395              	.L171:
 2396              	.LVL266:
1632:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2397              		.loc 1 1632 0
 2398 0250 DA6A     		ldr	r2, [r3, #44]
 2399 0252 1204     		lsls	r2, r2, #16
 2400 0254 02F47C12 		and	r2, r2, #4128768
 2401 0258 0A61     		str	r2, [r1, #16]
 2402              	.LVL267:
1637:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2403              		.loc 1 1637 0
 2404 025a 0A69     		ldr	r2, [r1, #16]
1635:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2405              		.loc 1 1635 0
 2406 025c 93F83300 		ldrb	r0, [r3, #51]	@ zero_extendqisi2
1637:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2407              		.loc 1 1637 0
 2408 0260 42EA0022 		orr	r2, r2, r0, lsl #8
 2409 0264 0A61     		str	r2, [r1, #16]
 2410              	.LVL268:
1642:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2411              		.loc 1 1642 0
 2412 0266 0869     		ldr	r0, [r1, #16]
 2413 0268 93F83220 		ldrb	r2, [r3, #50]	@ zero_extendqisi2
 2414 026c 0243     		orrs	r2, r2, r0
 2415 026e 0A61     		str	r2, [r1, #16]
 2416              	.LVL269:
 2417 0270 93F83120 		ldrb	r2, [r3, #49]	@ zero_extendqisi2
 2418              	.LVL270:
1647:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pCardInfo->CardBlockSize = 512U;    
 2419              		.loc 1 1647 0
 2420 0274 0C69     		ldr	r4, [r1, #16]
 2421 0276 0025     		movs	r5, #0
 2422 0278 0134     		adds	r4, r4, #1
 2423 027a 45F10005 		adc	r5, r5, #0
 2424 027e E804     		lsls	r0, r5, #19
 2425 0280 40EA5430 		orr	r0, r0, r4, lsr #13
 2426 0284 E404     		lsls	r4, r4, #19
 2427 0286 8C64     		str	r4, [r1, #72]
 2428 0288 C864     		str	r0, [r1, #76]
1648:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
ARM GAS  /tmp/ccnQ8l0t.s 			page 112


 2429              		.loc 1 1648 0
 2430 028a 4FF40070 		mov	r0, #512
 2431 028e 0865     		str	r0, [r1, #80]
1558:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t tmp = 0U;
 2432              		.loc 1 1558 0
 2433 0290 0020     		movs	r0, #0
 2434 0292 F4E6     		b	.L167
 2435              		.cfi_endproc
 2436              	.LFE144:
 2438              		.section	.text.HAL_SD_Init,"ax",%progbits
 2439              		.align	1
 2440              		.global	HAL_SD_Init
 2441              		.syntax unified
 2442              		.thumb
 2443              		.thumb_func
 2444              		.fpu fpv4-sp-d16
 2446              	HAL_SD_Init:
 2447              	.LFB126:
 343:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   __IO HAL_SD_ErrorTypedef errorstate = SD_OK;
 2448              		.loc 1 343 0
 2449              		.cfi_startproc
 2450              		@ args = 0, pretend = 0, frame = 56
 2451              		@ frame_needed = 0, uses_anonymous_args = 0
 2452              	.LVL271:
 2453 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 2454              	.LCFI30:
 2455              		.cfi_def_cfa_offset 28
 2456              		.cfi_offset 4, -28
 2457              		.cfi_offset 5, -24
 2458              		.cfi_offset 6, -20
 2459              		.cfi_offset 7, -16
 2460              		.cfi_offset 8, -12
 2461              		.cfi_offset 9, -8
 2462              		.cfi_offset 14, -4
 2463 0004 93B0     		sub	sp, sp, #76
 2464              	.LCFI31:
 2465              		.cfi_def_cfa_offset 104
 2466 0006 0446     		mov	r4, r0
 2467 0008 8946     		mov	r9, r1
 344:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SD_InitTypeDef tmpinit;
 2468              		.loc 1 344 0
 2469 000a 0026     		movs	r6, #0
 2470 000c 8DF84760 		strb	r6, [sp, #71]
 348:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   /* Initialize the low level hardware (MSP) */
 2471              		.loc 1 348 0
 2472 0010 0677     		strb	r6, [r0, #28]
 350:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2473              		.loc 1 350 0
 2474 0012 FFF7FEFF 		bl	HAL_SD_MspInit
 2475              	.LVL272:
 353:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmpinit.ClockBypass         = SDIO_CLOCK_BYPASS_DISABLE;
 2476              		.loc 1 353 0
 2477 0016 0B96     		str	r6, [sp, #44]
 354:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmpinit.ClockPowerSave      = SDIO_CLOCK_POWER_SAVE_DISABLE;
 2478              		.loc 1 354 0
 2479 0018 0C96     		str	r6, [sp, #48]
 355:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmpinit.BusWide             = SDIO_BUS_WIDE_1B;
ARM GAS  /tmp/ccnQ8l0t.s 			page 113


 2480              		.loc 1 355 0
 2481 001a 0D96     		str	r6, [sp, #52]
 356:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmpinit.HardwareFlowControl = SDIO_HARDWARE_FLOW_CONTROL_DISABLE;
 2482              		.loc 1 356 0
 2483 001c 0E96     		str	r6, [sp, #56]
 357:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmpinit.ClockDiv            = SDIO_INIT_CLK_DIV;
 2484              		.loc 1 357 0
 2485 001e 0F96     		str	r6, [sp, #60]
 358:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2486              		.loc 1 358 0
 2487 0020 7623     		movs	r3, #118
 2488 0022 1093     		str	r3, [sp, #64]
 361:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2489              		.loc 1 361 0
 2490 0024 0EAB     		add	r3, sp, #56
 2491 0026 93E80700 		ldm	r3, {r0, r1, r2}
 2492 002a 8DE80700 		stm	sp, {r0, r1, r2}
 2493 002e 0BAB     		add	r3, sp, #44
 2494 0030 0ECB     		ldm	r3, {r1, r2, r3}
 2495 0032 2068     		ldr	r0, [r4]
 2496 0034 FFF7FEFF 		bl	SDIO_Init
 2497              	.LVL273:
 2498              	.LBB20:
 2499              	.LBB21:
2505:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t response = 0U, count = 0U, validvoltage = 0U;
 2500              		.loc 1 2505 0
 2501 0038 8DF81760 		strb	r6, [sp, #23]
 2502              	.LVL274:
2511:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2503              		.loc 1 2511 0
 2504 003c AB4F     		ldr	r7, .L235
 2505 003e 3E60     		str	r6, [r7]
2514:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2506              		.loc 1 2514 0
 2507 0040 2068     		ldr	r0, [r4]
 2508 0042 FFF7FEFF 		bl	SDIO_PowerState_ON
 2509              	.LVL275:
2518:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2510              		.loc 1 2518 0
 2511 0046 0120     		movs	r0, #1
 2512 0048 FFF7FEFF 		bl	HAL_Delay
 2513              	.LVL276:
2521:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2514              		.loc 1 2521 0
 2515 004c 0123     		movs	r3, #1
 2516 004e 3B60     		str	r3, [r7]
2525:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_GO_IDLE_STATE;
 2517              		.loc 1 2525 0
 2518 0050 0696     		str	r6, [sp, #24]
2526:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_NO;
 2519              		.loc 1 2526 0
 2520 0052 0796     		str	r6, [sp, #28]
2527:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 2521              		.loc 1 2527 0
 2522 0054 0896     		str	r6, [sp, #32]
2528:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 2523              		.loc 1 2528 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 114


 2524 0056 0996     		str	r6, [sp, #36]
2529:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 2525              		.loc 1 2529 0
 2526 0058 4FF48063 		mov	r3, #1024
 2527 005c 0A93     		str	r3, [sp, #40]
2530:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2528              		.loc 1 2530 0
 2529 005e 06A9     		add	r1, sp, #24
 2530 0060 2068     		ldr	r0, [r4]
 2531 0062 FFF7FEFF 		bl	SDIO_SendCommand
 2532              	.LVL277:
 2533              	.LBB22:
 2534              	.LBB23:
2706:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2535              		.loc 1 2706 0
 2536 0066 2168     		ldr	r1, [r4]
 2537 0068 4B6B     		ldr	r3, [r1, #52]
 2538              	.LVL278:
2708:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2539              		.loc 1 2708 0
 2540 006a 13F0800F 		tst	r3, #128
 2541 006e 40F09981 		bne	.L174
 2542              	.LVL279:
2710:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     timeout--;
 2543              		.loc 1 2710 0
 2544 0072 4B6B     		ldr	r3, [r1, #52]
 2545 0074 C3F3C013 		ubfx	r3, r3, #7, #1
 2546              	.LVL280:
 2547 0078 4FF6FF72 		movw	r2, #65535
 2548              	.LVL281:
 2549              	.L211:
2708:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2550              		.loc 1 2708 0
 2551 007c 002B     		cmp	r3, #0
 2552 007e 40F09181 		bne	.L174
 2553              	.LVL282:
2710:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     timeout--;
 2554              		.loc 1 2710 0
 2555 0082 4B6B     		ldr	r3, [r1, #52]
 2556 0084 C3F3C013 		ubfx	r3, r3, #7, #1
 2557              	.LVL283:
2708:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2558              		.loc 1 2708 0
 2559 0088 013A     		subs	r2, r2, #1
 2560              	.LVL284:
 2561 008a F7D1     		bne	.L211
2717:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 2562              		.loc 1 2717 0
 2563 008c 0323     		movs	r3, #3
 2564              	.LVL285:
 2565 008e 8DE1     		b	.L175
 2566              	.LVL286:
 2567              	.L177:
 2568              	.LBE23:
 2569              	.LBE22:
2547:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_SDIO_SEND_IF_COND;
 2570              		.loc 1 2547 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 115


 2571 0090 4FF4D573 		mov	r3, #426
 2572 0094 0693     		str	r3, [sp, #24]
2548:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 2573              		.loc 1 2548 0
 2574 0096 0823     		movs	r3, #8
 2575 0098 0793     		str	r3, [sp, #28]
2549:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 2576              		.loc 1 2549 0
 2577 009a 4023     		movs	r3, #64
 2578 009c 0893     		str	r3, [sp, #32]
2550:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2579              		.loc 1 2550 0
 2580 009e 06A9     		add	r1, sp, #24
 2581 00a0 2068     		ldr	r0, [r4]
 2582 00a2 FFF7FEFF 		bl	SDIO_SendCommand
 2583              	.LVL287:
 2584              	.LBB25:
 2585              	.LBB26:
2736:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2586              		.loc 1 2736 0
 2587 00a6 2168     		ldr	r1, [r4]
 2588 00a8 4B6B     		ldr	r3, [r1, #52]
 2589              	.LVL288:
2738:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2590              		.loc 1 2738 0
 2591 00aa 13F0450F 		tst	r3, #69
 2592 00ae 40F09481 		bne	.L179
 2593 00b2 4FF48033 		mov	r3, #65536
 2594              	.LVL289:
 2595              	.L181:
2740:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     timeout--;
 2596              		.loc 1 2740 0
 2597 00b6 4A6B     		ldr	r2, [r1, #52]
 2598              	.LVL290:
2741:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 2599              		.loc 1 2741 0
 2600 00b8 013B     		subs	r3, r3, #1
 2601              	.LVL291:
2738:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2602              		.loc 1 2738 0
 2603 00ba 12F0450F 		tst	r2, #69
 2604 00be 03D1     		bne	.L180
 2605 00c0 002B     		cmp	r3, #0
 2606 00c2 F8D1     		bne	.L181
2744:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2607              		.loc 1 2744 0
 2608 00c4 4B6B     		ldr	r3, [r1, #52]
 2609              	.LVL292:
 2610 00c6 01E0     		b	.L183
 2611              	.LVL293:
 2612              	.L180:
 2613 00c8 4A6B     		ldr	r2, [r1, #52]
 2614              	.LVL294:
2746:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2615              		.loc 1 2746 0
 2616 00ca 2BBB     		cbnz	r3, .L230
 2617              	.LVL295:
ARM GAS  /tmp/ccnQ8l0t.s 			page 116


 2618              	.L183:
2751:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2619              		.loc 1 2751 0
 2620 00cc 0423     		movs	r3, #4
 2621 00ce 8B63     		str	r3, [r1, #56]
2753:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 2622              		.loc 1 2753 0
 2623 00d0 0323     		movs	r3, #3
 2624              	.LVL296:
 2625              	.L185:
 2626              	.LBE26:
 2627              	.LBE25:
2553:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2628              		.loc 1 2553 0
 2629 00d2 8DF81730 		strb	r3, [sp, #23]
2555:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2630              		.loc 1 2555 0
 2631 00d6 9DF81730 		ldrb	r3, [sp, #23]	@ zero_extendqisi2
 2632 00da 53BB     		cbnz	r3, .L214
2558:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdtype        = SD_HIGH_CAPACITY;
 2633              		.loc 1 2558 0
 2634 00dc 0123     		movs	r3, #1
 2635 00de 2362     		str	r3, [r4, #32]
 2636              	.LVL297:
2559:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 2637              		.loc 1 2559 0
 2638 00e0 4FF08045 		mov	r5, #1073741824
 2639              	.LVL298:
 2640              	.L186:
2563:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_APP_CMD;
 2641              		.loc 1 2563 0
 2642 00e4 0023     		movs	r3, #0
 2643 00e6 0693     		str	r3, [sp, #24]
2564:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 2644              		.loc 1 2564 0
 2645 00e8 3726     		movs	r6, #55
 2646 00ea 0796     		str	r6, [sp, #28]
2565:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2647              		.loc 1 2565 0
 2648 00ec 06A9     		add	r1, sp, #24
 2649 00ee 2068     		ldr	r0, [r4]
 2650 00f0 FFF7FEFF 		bl	SDIO_SendCommand
 2651              	.LVL299:
2568:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2652              		.loc 1 2568 0
 2653 00f4 3146     		mov	r1, r6
 2654 00f6 2046     		mov	r0, r4
 2655 00f8 FFF7FEFF 		bl	SD_CmdResp1Error
 2656              	.LVL300:
 2657 00fc 8DF81700 		strb	r0, [sp, #23]
2573:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2658              		.loc 1 2573 0
 2659 0100 9DF81730 		ldrb	r3, [sp, #23]	@ zero_extendqisi2
 2660 0104 002B     		cmp	r3, #0
 2661 0106 6DD1     		bne	.L187
 2662 0108 4FF00008 		mov	r8, #0
2581:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.CmdIndex         = SD_CMD_APP_CMD;
ARM GAS  /tmp/ccnQ8l0t.s 			page 117


 2663              		.loc 1 2581 0
 2664 010c 4646     		mov	r6, r8
2597:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.CmdIndex         = SD_CMD_SD_APP_OP_COND;
 2665              		.loc 1 2597 0
 2666 010e 45F00045 		orr	r5, r5, #-2147483648
 2667              	.LVL301:
 2668 0112 45F48015 		orr	r5, r5, #1048576
 2669 0116 27E0     		b	.L194
 2670              	.LVL302:
 2671              	.L230:
 2672              	.LBB29:
 2673              	.LBB27:
2744:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2674              		.loc 1 2744 0
 2675 0118 02F00402 		and	r2, r2, #4
 2676              	.LVL303:
 2677              	.L210:
2746:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2678              		.loc 1 2746 0
 2679 011c 002A     		cmp	r2, #0
 2680 011e D5D1     		bne	.L183
2756:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2681              		.loc 1 2756 0
 2682 0120 4B6B     		ldr	r3, [r1, #52]
 2683 0122 13F0400F 		tst	r3, #64
 2684              	.LVL304:
2761:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2685              		.loc 1 2761 0
 2686 0126 1DBF     		ittte	ne
 2687 0128 4023     		movne	r3, #64
 2688 012a 8B63     		strne	r3, [r1, #56]
2763:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 2689              		.loc 1 2763 0
 2690 012c 0023     		movne	r3, #0
2766:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 2691              		.loc 1 2766 0
 2692 012e 2923     		moveq	r3, #41
 2693 0130 CFE7     		b	.L185
 2694              	.LVL305:
 2695              	.L214:
 2696              	.LBE27:
 2697              	.LBE29:
2507:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2698              		.loc 1 2507 0
 2699 0132 0025     		movs	r5, #0
 2700 0134 D6E7     		b	.L186
 2701              	.LVL306:
 2702              	.L232:
2593:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       }
 2703              		.loc 1 2593 0
 2704 0136 9DF81730 		ldrb	r3, [sp, #23]	@ zero_extendqisi2
 2705 013a DBB2     		uxtb	r3, r3
 2706 013c 40E1     		b	.L178
 2707              	.LVL307:
 2708              	.L190:
 2709              	.LBB30:
 2710              	.LBB31:
ARM GAS  /tmp/ccnQ8l0t.s 			page 118


2941:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2711              		.loc 1 2941 0
 2712 013e 40F2FF53 		movw	r3, #1535
 2713 0142 9363     		str	r3, [r2, #56]
2943:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 2714              		.loc 1 2943 0
 2715 0144 3346     		mov	r3, r6
 2716              	.LVL308:
 2717              	.L191:
 2718              	.LBE31:
 2719              	.LBE30:
2605:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
 2720              		.loc 1 2605 0
 2721 0146 8DF81730 		strb	r3, [sp, #23]
2607:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       {
 2722              		.loc 1 2607 0
 2723 014a 9DF81730 		ldrb	r3, [sp, #23]	@ zero_extendqisi2
 2724 014e 002B     		cmp	r3, #0
 2725 0150 3BD1     		bne	.L231
2613:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
 2726              		.loc 1 2613 0
 2727 0152 3046     		mov	r0, r6
 2728 0154 FFF7FEFF 		bl	SDIO_GetResponse
 2729              	.LVL309:
2618:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
 2730              		.loc 1 2618 0
 2731 0158 08F10108 		add	r8, r8, #1
 2732              	.LVL310:
2577:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 2733              		.loc 1 2577 0
 2734 015c 0028     		cmp	r0, #0
 2735 015e 38DB     		blt	.L193
 2736 0160 4FF6FF73 		movw	r3, #65535
 2737 0164 9845     		cmp	r8, r3
 2738 0166 41D0     		beq	.L195
 2739              	.LVL311:
 2740              	.L194:
2581:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.CmdIndex         = SD_CMD_APP_CMD;
 2741              		.loc 1 2581 0
 2742 0168 0696     		str	r6, [sp, #24]
2582:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 2743              		.loc 1 2582 0
 2744 016a 3727     		movs	r7, #55
 2745 016c 0797     		str	r7, [sp, #28]
2583:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 2746              		.loc 1 2583 0
 2747 016e 4023     		movs	r3, #64
 2748 0170 0893     		str	r3, [sp, #32]
2584:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 2749              		.loc 1 2584 0
 2750 0172 0996     		str	r6, [sp, #36]
2585:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 2751              		.loc 1 2585 0
 2752 0174 4FF48063 		mov	r3, #1024
 2753 0178 0A93     		str	r3, [sp, #40]
2586:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
 2754              		.loc 1 2586 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 119


 2755 017a 06A9     		add	r1, sp, #24
 2756 017c 2068     		ldr	r0, [r4]
 2757 017e FFF7FEFF 		bl	SDIO_SendCommand
 2758              	.LVL312:
2589:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
 2759              		.loc 1 2589 0
 2760 0182 3946     		mov	r1, r7
 2761 0184 2046     		mov	r0, r4
 2762 0186 FFF7FEFF 		bl	SD_CmdResp1Error
 2763              	.LVL313:
 2764 018a 8DF81700 		strb	r0, [sp, #23]
2591:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       {
 2765              		.loc 1 2591 0
 2766 018e 9DF81730 		ldrb	r3, [sp, #23]	@ zero_extendqisi2
 2767 0192 002B     		cmp	r3, #0
 2768 0194 CFD1     		bne	.L232
2597:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.CmdIndex         = SD_CMD_SD_APP_OP_COND;
 2769              		.loc 1 2597 0
 2770 0196 0695     		str	r5, [sp, #24]
2598:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 2771              		.loc 1 2598 0
 2772 0198 2923     		movs	r3, #41
 2773 019a 0793     		str	r3, [sp, #28]
2599:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 2774              		.loc 1 2599 0
 2775 019c 4023     		movs	r3, #64
 2776 019e 0893     		str	r3, [sp, #32]
2600:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 2777              		.loc 1 2600 0
 2778 01a0 0996     		str	r6, [sp, #36]
2601:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 2779              		.loc 1 2601 0
 2780 01a2 4FF48063 		mov	r3, #1024
 2781 01a6 0A93     		str	r3, [sp, #40]
2602:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
 2782              		.loc 1 2602 0
 2783 01a8 06A9     		add	r1, sp, #24
 2784 01aa 2068     		ldr	r0, [r4]
 2785 01ac FFF7FEFF 		bl	SDIO_SendCommand
 2786              	.LVL314:
 2787              	.LBB33:
 2788              	.LBB32:
2927:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2789              		.loc 1 2927 0
 2790 01b0 2268     		ldr	r2, [r4]
 2791              	.L189:
 2792 01b2 536B     		ldr	r3, [r2, #52]
 2793 01b4 13F0450F 		tst	r3, #69
 2794 01b8 FBD0     		beq	.L189
2931:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2795              		.loc 1 2931 0
 2796 01ba 536B     		ldr	r3, [r2, #52]
 2797 01bc 13F0040F 		tst	r3, #4
 2798 01c0 BDD0     		beq	.L190
 2799              	.LVL315:
2935:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2800              		.loc 1 2935 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 120


 2801 01c2 0423     		movs	r3, #4
 2802 01c4 9363     		str	r3, [r2, #56]
2937:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 2803              		.loc 1 2937 0
 2804 01c6 0323     		movs	r3, #3
 2805 01c8 BDE7     		b	.L191
 2806              	.LVL316:
 2807              	.L231:
 2808              	.LBE32:
 2809              	.LBE33:
2609:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       }
 2810              		.loc 1 2609 0
 2811 01ca 9DF81730 		ldrb	r3, [sp, #23]	@ zero_extendqisi2
 2812 01ce DBB2     		uxtb	r3, r3
 2813 01d0 F6E0     		b	.L178
 2814              	.LVL317:
 2815              	.L193:
2621:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 2816              		.loc 1 2621 0
 2817 01d2 4FF6FE73 		movw	r3, #65534
 2818 01d6 9845     		cmp	r8, r3
 2819 01d8 08D8     		bhi	.L195
2628:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 2820              		.loc 1 2628 0
 2821 01da 10F0804F 		tst	r0, #1073741824
2630:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
 2822              		.loc 1 2630 0
 2823 01de 1CBF     		itt	ne
 2824 01e0 0223     		movne	r3, #2
 2825 01e2 2362     		strne	r3, [r4, #32]
 2826              	.LVL318:
 2827              	.L187:
2635:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 2828              		.loc 1 2635 0
 2829 01e4 9DF81730 		ldrb	r3, [sp, #23]	@ zero_extendqisi2
 2830 01e8 DBB2     		uxtb	r3, r3
 2831 01ea E9E0     		b	.L178
 2832              	.LVL319:
 2833              	.L195:
2623:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
 2834              		.loc 1 2623 0
 2835 01ec 1B23     		movs	r3, #27
 2836 01ee 8DF81730 		strb	r3, [sp, #23]
2625:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
 2837              		.loc 1 2625 0
 2838 01f2 9DF81730 		ldrb	r3, [sp, #23]	@ zero_extendqisi2
 2839 01f6 DBB2     		uxtb	r3, r3
 2840 01f8 E2E0     		b	.L178
 2841              	.LVL320:
 2842              	.L197:
 2843              	.LBE21:
 2844              	.LBE20:
 2845              	.LBB38:
 2846              	.LBB39:
2390:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2847              		.loc 1 2390 0
 2848 01fa 2068     		ldr	r0, [r4]
ARM GAS  /tmp/ccnQ8l0t.s 			page 121


 2849 01fc FFF7FEFF 		bl	SDIO_GetPowerState
 2850              	.LVL321:
 2851 0200 58B9     		cbnz	r0, .L233
2394:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 2852              		.loc 1 2394 0
 2853 0202 2526     		movs	r6, #37
 2854              	.LVL322:
 2855              	.L199:
 2856              	.LBE39:
 2857              	.LBE38:
 372:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2858              		.loc 1 372 0
 2859 0204 8DF84760 		strb	r6, [sp, #71]
 374:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2860              		.loc 1 374 0
 2861 0208 9DF84730 		ldrb	r3, [sp, #71]	@ zero_extendqisi2
 2862 020c 002B     		cmp	r3, #0
 2863 020e 00F09780 		beq	.L208
 376:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 2864              		.loc 1 376 0
 2865 0212 9DF84700 		ldrb	r0, [sp, #71]	@ zero_extendqisi2
 2866 0216 C0B2     		uxtb	r0, r0
 2867 0218 DCE0     		b	.L228
 2868              	.LVL323:
 2869              	.L233:
 2870              	.LBB46:
 2871              	.LBB44:
2397:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2872              		.loc 1 2397 0
 2873 021a 236A     		ldr	r3, [r4, #32]
 2874 021c 042B     		cmp	r3, #4
 2875 021e 00F08D80 		beq	.L216
2400:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_ALL_SEND_CID;
 2876              		.loc 1 2400 0
 2877 0222 0023     		movs	r3, #0
 2878 0224 0693     		str	r3, [sp, #24]
2401:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Response         = SDIO_RESPONSE_LONG;
 2879              		.loc 1 2401 0
 2880 0226 0222     		movs	r2, #2
 2881 0228 0792     		str	r2, [sp, #28]
2402:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 2882              		.loc 1 2402 0
 2883 022a C022     		movs	r2, #192
 2884 022c 0892     		str	r2, [sp, #32]
2403:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 2885              		.loc 1 2403 0
 2886 022e 0993     		str	r3, [sp, #36]
2404:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 2887              		.loc 1 2404 0
 2888 0230 4FF48063 		mov	r3, #1024
 2889 0234 0A93     		str	r3, [sp, #40]
2405:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2890              		.loc 1 2405 0
 2891 0236 06A9     		add	r1, sp, #24
 2892 0238 2068     		ldr	r0, [r4]
 2893 023a FFF7FEFF 		bl	SDIO_SendCommand
 2894              	.LVL324:
ARM GAS  /tmp/ccnQ8l0t.s 			page 122


2408:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2895              		.loc 1 2408 0
 2896 023e 2046     		mov	r0, r4
 2897 0240 FFF7FEFF 		bl	SD_CmdResp2Error
 2898              	.LVL325:
2410:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 2899              		.loc 1 2410 0
 2900 0244 0646     		mov	r6, r0
 2901 0246 0028     		cmp	r0, #0
 2902 0248 DCD1     		bne	.L199
2416:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->CID[1U] = SDIO_GetResponse(SDIO_RESP2);
 2903              		.loc 1 2416 0
 2904 024a FFF7FEFF 		bl	SDIO_GetResponse
 2905              	.LVL326:
 2906 024e A063     		str	r0, [r4, #56]
2417:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->CID[2U] = SDIO_GetResponse(SDIO_RESP3);
 2907              		.loc 1 2417 0
 2908 0250 0420     		movs	r0, #4
 2909 0252 FFF7FEFF 		bl	SDIO_GetResponse
 2910              	.LVL327:
 2911 0256 E063     		str	r0, [r4, #60]
2418:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->CID[3U] = SDIO_GetResponse(SDIO_RESP4);
 2912              		.loc 1 2418 0
 2913 0258 0820     		movs	r0, #8
 2914 025a FFF7FEFF 		bl	SDIO_GetResponse
 2915              	.LVL328:
 2916 025e 2064     		str	r0, [r4, #64]
2419:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 2917              		.loc 1 2419 0
 2918 0260 0C20     		movs	r0, #12
 2919 0262 FFF7FEFF 		bl	SDIO_GetResponse
 2920              	.LVL329:
 2921 0266 6064     		str	r0, [r4, #68]
 2922              	.LVL330:
2422:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****      (hsd->CardType == SECURE_DIGITAL_IO_COMBO_CARD) || (hsd->CardType == HIGH_CAPACITY_SD_CARD))
 2923              		.loc 1 2422 0
 2924 0268 236A     		ldr	r3, [r4, #32]
 2925 026a 022B     		cmp	r3, #2
 2926 026c 01D9     		bls	.L200
 2927 026e 062B     		cmp	r3, #6
 2928 0270 3ED1     		bne	.L217
 2929              	.L200:
2427:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 2930              		.loc 1 2427 0
 2931 0272 0323     		movs	r3, #3
 2932 0274 0793     		str	r3, [sp, #28]
2428:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 2933              		.loc 1 2428 0
 2934 0276 4023     		movs	r3, #64
 2935 0278 0893     		str	r3, [sp, #32]
2429:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2936              		.loc 1 2429 0
 2937 027a 06A9     		add	r1, sp, #24
 2938 027c 2068     		ldr	r0, [r4]
 2939 027e FFF7FEFF 		bl	SDIO_SendCommand
 2940              	.LVL331:
 2941              	.LBB40:
ARM GAS  /tmp/ccnQ8l0t.s 			page 123


 2942              	.LBB41:
2999:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2943              		.loc 1 2999 0
 2944 0282 2068     		ldr	r0, [r4]
 2945              	.L202:
 2946 0284 436B     		ldr	r3, [r0, #52]
 2947 0286 13F0450F 		tst	r3, #69
 2948 028a FBD0     		beq	.L202
3003:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2949              		.loc 1 3003 0
 2950 028c 436B     		ldr	r3, [r0, #52]
 2951 028e 13F0040F 		tst	r3, #4
 2952 0292 03D0     		beq	.L203
 2953              	.LVL332:
3007:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2954              		.loc 1 3007 0
 2955 0294 0423     		movs	r3, #4
 2956 0296 8363     		str	r3, [r0, #56]
3009:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 2957              		.loc 1 3009 0
 2958 0298 0326     		movs	r6, #3
 2959 029a B3E7     		b	.L199
 2960              	.LVL333:
 2961              	.L203:
3011:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2962              		.loc 1 3011 0
 2963 029c 436B     		ldr	r3, [r0, #52]
 2964 029e 13F0010F 		tst	r3, #1
 2965 02a2 02D0     		beq	.L205
 2966              	.LVL334:
3015:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2967              		.loc 1 3015 0
 2968 02a4 0126     		movs	r6, #1
 2969 02a6 8663     		str	r6, [r0, #56]
 2970 02a8 ACE7     		b	.L199
 2971              	.LVL335:
 2972              	.L205:
3025:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2973              		.loc 1 3025 0
 2974 02aa FFF7FEFF 		bl	SDIO_GetCommandResponse
 2975              	.LVL336:
 2976 02ae 0328     		cmp	r0, #3
3029:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 2977              		.loc 1 3029 0
 2978 02b0 18BF     		it	ne
 2979 02b2 1026     		movne	r6, #16
3025:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2980              		.loc 1 3025 0
 2981 02b4 A6D1     		bne	.L199
3033:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2982              		.loc 1 3033 0
 2983 02b6 2368     		ldr	r3, [r4]
 2984 02b8 40F2FF52 		movw	r2, #1535
 2985 02bc 9A63     		str	r2, [r3, #56]
3036:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 2986              		.loc 1 3036 0
 2987 02be 0020     		movs	r0, #0
ARM GAS  /tmp/ccnQ8l0t.s 			page 124


 2988 02c0 FFF7FEFF 		bl	SDIO_GetResponse
 2989              	.LVL337:
3038:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2990              		.loc 1 3038 0
 2991 02c4 10F4604F 		tst	r0, #57344
 2992 02c8 01D1     		bne	.L206
3040:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 2993              		.loc 1 3040 0
 2994 02ca 000C     		lsrs	r0, r0, #16
 2995              	.LVL338:
 2996 02cc 11E0     		b	.L201
 2997              	.LVL339:
 2998              	.L206:
3045:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 2999              		.loc 1 3045 0
 3000 02ce 10F4005F 		tst	r0, #8192
 3001 02d2 40F08680 		bne	.L219
3050:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3002              		.loc 1 3050 0
 3003 02d6 10F4804F 		tst	r0, #16384
 3004 02da 40F08480 		bne	.L220
3055:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3005              		.loc 1 3055 0
 3006 02de 10F4004F 		tst	r0, #32768
 3007 02e2 40F08280 		bne	.L221
 3008              	.LBE41:
 3009              	.LBE40:
2388:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3010              		.loc 1 2388 0
 3011 02e6 0120     		movs	r0, #1
 3012              	.LVL340:
 3013 02e8 03E0     		b	.L201
 3014              	.L236:
 3015 02ea 00BF     		.align	2
 3016              	.L235:
 3017 02ec A0802542 		.word	1109754016
 3018              	.LVL341:
 3019              	.L217:
 3020 02f0 0120     		movs	r0, #1
 3021              	.LVL342:
 3022              	.L201:
2440:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3023              		.loc 1 2440 0
 3024 02f2 236A     		ldr	r3, [r4, #32]
 3025 02f4 042B     		cmp	r3, #4
 3026 02f6 85D0     		beq	.L199
2443:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 3027              		.loc 1 2443 0
 3028 02f8 6062     		str	r0, [r4, #36]
2446:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_SEND_CSD;
 3029              		.loc 1 2446 0
 3030 02fa 0004     		lsls	r0, r0, #16
 3031              	.LVL343:
 3032 02fc 0690     		str	r0, [sp, #24]
2447:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Response         = SDIO_RESPONSE_LONG;
 3033              		.loc 1 2447 0
 3034 02fe 0923     		movs	r3, #9
ARM GAS  /tmp/ccnQ8l0t.s 			page 125


 3035 0300 0793     		str	r3, [sp, #28]
2448:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 3036              		.loc 1 2448 0
 3037 0302 C023     		movs	r3, #192
 3038 0304 0893     		str	r3, [sp, #32]
2449:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 3039              		.loc 1 2449 0
 3040 0306 06A9     		add	r1, sp, #24
 3041 0308 2068     		ldr	r0, [r4]
 3042 030a FFF7FEFF 		bl	SDIO_SendCommand
 3043              	.LVL344:
2452:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 3044              		.loc 1 2452 0
 3045 030e 2046     		mov	r0, r4
 3046 0310 FFF7FEFF 		bl	SD_CmdResp2Error
 3047              	.LVL345:
2454:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 3048              		.loc 1 2454 0
 3049 0314 0646     		mov	r6, r0
 3050 0316 0028     		cmp	r0, #0
 3051 0318 7FF474AF 		bne	.L199
2460:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->CSD[1U] = SDIO_GetResponse(SDIO_RESP2);
 3052              		.loc 1 2460 0
 3053 031c FFF7FEFF 		bl	SDIO_GetResponse
 3054              	.LVL346:
 3055 0320 A062     		str	r0, [r4, #40]
2461:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->CSD[2U] = SDIO_GetResponse(SDIO_RESP3);
 3056              		.loc 1 2461 0
 3057 0322 0420     		movs	r0, #4
 3058 0324 FFF7FEFF 		bl	SDIO_GetResponse
 3059              	.LVL347:
 3060 0328 E062     		str	r0, [r4, #44]
2462:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     hsd->CSD[3U] = SDIO_GetResponse(SDIO_RESP4);
 3061              		.loc 1 2462 0
 3062 032a 0820     		movs	r0, #8
 3063 032c FFF7FEFF 		bl	SDIO_GetResponse
 3064              	.LVL348:
 3065 0330 2063     		str	r0, [r4, #48]
2463:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3066              		.loc 1 2463 0
 3067 0332 0C20     		movs	r0, #12
 3068 0334 FFF7FEFF 		bl	SDIO_GetResponse
 3069              	.LVL349:
 3070 0338 6063     		str	r0, [r4, #52]
 3071 033a 63E7     		b	.L199
 3072              	.LVL350:
 3073              	.L216:
2397:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3074              		.loc 1 2397 0
 3075 033c 0026     		movs	r6, #0
 3076 033e 61E7     		b	.L199
 3077              	.LVL351:
 3078              	.L208:
 3079              	.LBE44:
 3080              	.LBE46:
 380:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3081              		.loc 1 380 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 126


 3082 0340 4946     		mov	r1, r9
 3083 0342 2046     		mov	r0, r4
 3084 0344 FFF7FEFF 		bl	HAL_SD_Get_CardInfo
 3085              	.LVL352:
 3086 0348 8DF84700 		strb	r0, [sp, #71]
 382:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3087              		.loc 1 382 0
 3088 034c 9DF84730 		ldrb	r3, [sp, #71]	@ zero_extendqisi2
 3089 0350 83B1     		cbz	r3, .L234
 3090              	.L209:
 389:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3091              		.loc 1 389 0
 3092 0352 2346     		mov	r3, r4
 3093 0354 53F8105B 		ldr	r5, [r3], #16
 3094 0358 93E80700 		ldm	r3, {r0, r1, r2}
 3095 035c 8DE80700 		stm	sp, {r0, r1, r2}
 3096 0360 0434     		adds	r4, r4, #4
 3097              	.LVL353:
 3098 0362 94E80E00 		ldm	r4, {r1, r2, r3}
 3099 0366 2846     		mov	r0, r5
 3100 0368 FFF7FEFF 		bl	SDIO_Init
 3101              	.LVL354:
 391:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 3102              		.loc 1 391 0
 3103 036c 9DF84700 		ldrb	r0, [sp, #71]	@ zero_extendqisi2
 3104 0370 C0B2     		uxtb	r0, r0
 3105 0372 2FE0     		b	.L228
 3106              	.LVL355:
 3107              	.L234:
 385:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3108              		.loc 1 385 0
 3109 0374 B9F85430 		ldrh	r3, [r9, #84]
 3110 0378 1B04     		lsls	r3, r3, #16
 3111              	.LBB47:
 3112              	.LBB48:
2482:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SEL_DESEL_CARD;
 3113              		.loc 1 2482 0
 3114 037a 0693     		str	r3, [sp, #24]
2483:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 3115              		.loc 1 2483 0
 3116 037c 0725     		movs	r5, #7
 3117 037e 0795     		str	r5, [sp, #28]
2484:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 3118              		.loc 1 2484 0
 3119 0380 4023     		movs	r3, #64
 3120 0382 0893     		str	r3, [sp, #32]
2485:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 3121              		.loc 1 2485 0
 3122 0384 0023     		movs	r3, #0
 3123 0386 0993     		str	r3, [sp, #36]
2486:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 3124              		.loc 1 2486 0
 3125 0388 4FF48063 		mov	r3, #1024
 3126 038c 0A93     		str	r3, [sp, #40]
2487:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3127              		.loc 1 2487 0
 3128 038e 06A9     		add	r1, sp, #24
ARM GAS  /tmp/ccnQ8l0t.s 			page 127


 3129 0390 2068     		ldr	r0, [r4]
 3130 0392 FFF7FEFF 		bl	SDIO_SendCommand
 3131              	.LVL356:
2490:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3132              		.loc 1 2490 0
 3133 0396 2946     		mov	r1, r5
 3134 0398 2046     		mov	r0, r4
 3135 039a FFF7FEFF 		bl	SD_CmdResp1Error
 3136              	.LVL357:
 3137              	.LBE48:
 3138              	.LBE47:
 385:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3139              		.loc 1 385 0
 3140 039e 8DF84700 		strb	r0, [sp, #71]
 3141 03a2 D6E7     		b	.L209
 3142              	.LVL358:
 3143              	.L174:
 3144              	.LBB49:
 3145              	.LBB36:
 3146              	.LBB34:
 3147              	.LBB24:
2721:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3148              		.loc 1 2721 0
 3149 03a4 40F2FF53 		movw	r3, #1535
 3150 03a8 8B63     		str	r3, [r1, #56]
2723:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 3151              		.loc 1 2723 0
 3152 03aa 0023     		movs	r3, #0
 3153              	.L175:
 3154              	.LVL359:
 3155              	.LBE24:
 3156              	.LBE34:
2533:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3157              		.loc 1 2533 0
 3158 03ac 8DF81730 		strb	r3, [sp, #23]
2535:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3159              		.loc 1 2535 0
 3160 03b0 9DF81730 		ldrb	r3, [sp, #23]	@ zero_extendqisi2
 3161 03b4 002B     		cmp	r3, #0
 3162 03b6 3FF46BAE 		beq	.L177
2538:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3163              		.loc 1 2538 0
 3164 03ba 9DF81730 		ldrb	r3, [sp, #23]	@ zero_extendqisi2
 3165 03be DBB2     		uxtb	r3, r3
 3166              	.LVL360:
 3167              	.L178:
 3168              	.LBE36:
 3169              	.LBE49:
 364:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3170              		.loc 1 364 0
 3171 03c0 8DF84730 		strb	r3, [sp, #71]
 366:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3172              		.loc 1 366 0
 3173 03c4 9DF84730 		ldrb	r3, [sp, #71]	@ zero_extendqisi2
 3174 03c8 002B     		cmp	r3, #0
 3175 03ca 3FF416AF 		beq	.L197
 368:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
ARM GAS  /tmp/ccnQ8l0t.s 			page 128


 3176              		.loc 1 368 0
 3177 03ce 9DF84700 		ldrb	r0, [sp, #71]	@ zero_extendqisi2
 3178 03d2 C0B2     		uxtb	r0, r0
 3179              	.LVL361:
 3180              	.L228:
 392:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 3181              		.loc 1 392 0
 3182 03d4 13B0     		add	sp, sp, #76
 3183              	.LCFI32:
 3184              		.cfi_remember_state
 3185              		.cfi_def_cfa_offset 28
 3186              		@ sp needed
 3187 03d6 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 3188              	.LVL362:
 3189              	.L179:
 3190              	.LCFI33:
 3191              		.cfi_restore_state
 3192              	.LBB50:
 3193              	.LBB37:
 3194              	.LBB35:
 3195              	.LBB28:
2744:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3196              		.loc 1 2744 0
 3197 03da 4A6B     		ldr	r2, [r1, #52]
 3198 03dc 02F00402 		and	r2, r2, #4
 3199              	.LVL363:
 3200 03e0 9CE6     		b	.L210
 3201              	.LVL364:
 3202              	.L219:
 3203              	.LBE28:
 3204              	.LBE35:
 3205              	.LBE37:
 3206              	.LBE50:
 3207              	.LBB51:
 3208              	.LBB45:
 3209              	.LBB43:
 3210              	.LBB42:
3047:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3211              		.loc 1 3047 0
 3212 03e2 1326     		movs	r6, #19
 3213 03e4 0EE7     		b	.L199
 3214              	.L220:
3052:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3215              		.loc 1 3052 0
 3216 03e6 1026     		movs	r6, #16
 3217 03e8 0CE7     		b	.L199
 3218              	.L221:
3057:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3219              		.loc 1 3057 0
 3220 03ea 0F26     		movs	r6, #15
 3221              	.LVL365:
 3222 03ec 0AE7     		b	.L199
 3223              	.LBE42:
 3224              	.LBE43:
 3225              	.LBE45:
 3226              	.LBE51:
 3227              		.cfi_endproc
ARM GAS  /tmp/ccnQ8l0t.s 			page 129


 3228              	.LFE126:
 3230 03ee 00BF     		.section	.text.HAL_SD_WideBusOperation_Config,"ax",%progbits
 3231              		.align	1
 3232              		.global	HAL_SD_WideBusOperation_Config
 3233              		.syntax unified
 3234              		.thumb
 3235              		.thumb_func
 3236              		.fpu fpv4-sp-d16
 3238              	HAL_SD_WideBusOperation_Config:
 3239              	.LFB145:
1773:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
 3240              		.loc 1 1773 0
 3241              		.cfi_startproc
 3242              		@ args = 0, pretend = 0, frame = 56
 3243              		@ frame_needed = 0, uses_anonymous_args = 0
 3244              	.LVL366:
 3245 0000 70B5     		push	{r4, r5, r6, lr}
 3246              	.LCFI34:
 3247              		.cfi_def_cfa_offset 16
 3248              		.cfi_offset 4, -16
 3249              		.cfi_offset 5, -12
 3250              		.cfi_offset 6, -8
 3251              		.cfi_offset 14, -4
 3252 0002 92B0     		sub	sp, sp, #72
 3253              	.LCFI35:
 3254              		.cfi_def_cfa_offset 88
 3255              	.LVL367:
1778:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3256              		.loc 1 1778 0
 3257 0004 036A     		ldr	r3, [r0, #32]
 3258 0006 032B     		cmp	r3, #3
 3259 0008 00F09F80 		beq	.L244
1784:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     (hsd->CardType == HIGH_CAPACITY_SD_CARD))
 3260              		.loc 1 1784 0
 3261 000c 022B     		cmp	r3, #2
 3262 000e 00F2A080 		bhi	.L245
1787:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 3263              		.loc 1 1787 0
 3264 0012 B1F5805F 		cmp	r1, #4096
 3265 0016 00F09E80 		beq	.L246
 3266 001a 0D46     		mov	r5, r1
 3267 001c 0446     		mov	r4, r0
1791:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 3268              		.loc 1 1791 0
 3269 001e B1F5006F 		cmp	r1, #2048
 3270 0022 03D0     		beq	.L254
1795:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 3271              		.loc 1 1795 0
 3272 0024 0029     		cmp	r1, #0
 3273 0026 3CD0     		beq	.L255
1802:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
 3274              		.loc 1 1802 0
 3275 0028 2626     		movs	r6, #38
 3276              	.LVL368:
 3277 002a 8FE0     		b	.L252
 3278              	.LVL369:
 3279              	.L254:
ARM GAS  /tmp/ccnQ8l0t.s 			page 130


 3280              	.LBB56:
 3281              	.LBB57:
3073:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3282              		.loc 1 3073 0
 3283 002c 0020     		movs	r0, #0
 3284              	.LVL370:
 3285 002e 0590     		str	r0, [sp, #20]
 3286 0030 0690     		str	r0, [sp, #24]
3075:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3287              		.loc 1 3075 0
 3288 0032 FFF7FEFF 		bl	SDIO_GetResponse
 3289              	.LVL371:
 3290 0036 10F0007F 		tst	r0, #33554432
 3291 003a 01D0     		beq	.L256
3079:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3292              		.loc 1 3079 0
 3293 003c 0E26     		movs	r6, #14
 3294 003e 39E0     		b	.L242
 3295              	.L256:
3083:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3296              		.loc 1 3083 0
 3297 0040 05A9     		add	r1, sp, #20
 3298 0042 2046     		mov	r0, r4
 3299 0044 FFF7FEFF 		bl	SD_FindSCR
 3300              	.LVL372:
3085:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3301              		.loc 1 3085 0
 3302 0048 0646     		mov	r6, r0
 3303 004a 0028     		cmp	r0, #0
 3304 004c 32D1     		bne	.L242
3091:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3305              		.loc 1 3091 0
 3306 004e 069B     		ldr	r3, [sp, #24]
 3307 0050 13F4802F 		tst	r3, #262144
 3308 0054 01D1     		bne	.L257
3128:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3309              		.loc 1 3128 0
 3310 0056 2526     		movs	r6, #37
 3311              	.LVL373:
 3312 0058 2CE0     		b	.L242
 3313              	.LVL374:
 3314              	.L257:
3094:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_APP_CMD;
 3315              		.loc 1 3094 0
 3316 005a 636A     		ldr	r3, [r4, #36]
 3317 005c 1B04     		lsls	r3, r3, #16
 3318 005e 0793     		str	r3, [sp, #28]
3095:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 3319              		.loc 1 3095 0
 3320 0060 3726     		movs	r6, #55
 3321 0062 0896     		str	r6, [sp, #32]
3096:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 3322              		.loc 1 3096 0
 3323 0064 4023     		movs	r3, #64
 3324 0066 0993     		str	r3, [sp, #36]
3097:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 3325              		.loc 1 3097 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 131


 3326 0068 0023     		movs	r3, #0
 3327 006a 0A93     		str	r3, [sp, #40]
3098:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 3328              		.loc 1 3098 0
 3329 006c 4FF48063 		mov	r3, #1024
 3330 0070 0B93     		str	r3, [sp, #44]
3099:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 3331              		.loc 1 3099 0
 3332 0072 07A9     		add	r1, sp, #28
 3333 0074 2068     		ldr	r0, [r4]
 3334              	.LVL375:
 3335 0076 FFF7FEFF 		bl	SDIO_SendCommand
 3336              	.LVL376:
3102:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 3337              		.loc 1 3102 0
 3338 007a 3146     		mov	r1, r6
 3339 007c 2046     		mov	r0, r4
 3340 007e FFF7FEFF 		bl	SD_CmdResp1Error
 3341              	.LVL377:
3104:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 3342              		.loc 1 3104 0
 3343 0082 0646     		mov	r6, r0
 3344 0084 B0B9     		cbnz	r0, .L242
3110:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_APP_SD_SET_BUSWIDTH;
 3345              		.loc 1 3110 0
 3346 0086 0223     		movs	r3, #2
 3347 0088 0793     		str	r3, [sp, #28]
3111:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 3348              		.loc 1 3111 0
 3349 008a 0626     		movs	r6, #6
 3350 008c 0896     		str	r6, [sp, #32]
3112:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 3351              		.loc 1 3112 0
 3352 008e 07A9     		add	r1, sp, #28
 3353 0090 2068     		ldr	r0, [r4]
 3354              	.LVL378:
 3355 0092 FFF7FEFF 		bl	SDIO_SendCommand
 3356              	.LVL379:
3115:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 3357              		.loc 1 3115 0
 3358 0096 3146     		mov	r1, r6
 3359 0098 2046     		mov	r0, r4
 3360 009a FFF7FEFF 		bl	SD_CmdResp1Error
 3361              	.LVL380:
 3362 009e 0646     		mov	r6, r0
 3363              	.LVL381:
 3364 00a0 08E0     		b	.L242
 3365              	.LVL382:
 3366              	.L255:
 3367              	.LBE57:
 3368              	.LBE56:
 3369              	.LBB58:
 3370              	.LBB59:
3142:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3371              		.loc 1 3142 0
 3372 00a2 0020     		movs	r0, #0
 3373              	.LVL383:
ARM GAS  /tmp/ccnQ8l0t.s 			page 132


 3374 00a4 0590     		str	r0, [sp, #20]
 3375 00a6 0690     		str	r0, [sp, #24]
3144:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3376              		.loc 1 3144 0
 3377 00a8 FFF7FEFF 		bl	SDIO_GetResponse
 3378              	.LVL384:
 3379 00ac 10F0007F 		tst	r0, #33554432
 3380 00b0 19D0     		beq	.L258
3148:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3381              		.loc 1 3148 0
 3382 00b2 0E26     		movs	r6, #14
 3383              	.LVL385:
 3384              	.L242:
 3385              	.LBE59:
 3386              	.LBE58:
1805:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 3387              		.loc 1 1805 0
 3388 00b4 002E     		cmp	r6, #0
 3389 00b6 49D1     		bne	.L252
1808:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       tmpinit.ClockBypass         = hsd->Init.ClockBypass;
 3390              		.loc 1 1808 0
 3391 00b8 6368     		ldr	r3, [r4, #4]
 3392 00ba 0C93     		str	r3, [sp, #48]
1809:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       tmpinit.ClockPowerSave      = hsd->Init.ClockPowerSave;
 3393              		.loc 1 1809 0
 3394 00bc A368     		ldr	r3, [r4, #8]
 3395 00be 0D93     		str	r3, [sp, #52]
1810:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       tmpinit.BusWide             = WideMode;
 3396              		.loc 1 1810 0
 3397 00c0 E368     		ldr	r3, [r4, #12]
 3398 00c2 0E93     		str	r3, [sp, #56]
1811:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       tmpinit.HardwareFlowControl = hsd->Init.HardwareFlowControl;
 3399              		.loc 1 1811 0
 3400 00c4 0F95     		str	r5, [sp, #60]
1812:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       tmpinit.ClockDiv            = hsd->Init.ClockDiv;
 3401              		.loc 1 1812 0
 3402 00c6 6369     		ldr	r3, [r4, #20]
 3403 00c8 1093     		str	r3, [sp, #64]
1813:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       SDIO_Init(hsd->Instance, tmpinit);
 3404              		.loc 1 1813 0
 3405 00ca A369     		ldr	r3, [r4, #24]
 3406 00cc 1193     		str	r3, [sp, #68]
1814:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
 3407              		.loc 1 1814 0
 3408 00ce 2468     		ldr	r4, [r4]
 3409              	.LVL386:
 3410 00d0 12AB     		add	r3, sp, #72
 3411 00d2 13E90700 		ldmdb	r3, {r0, r1, r2}
 3412 00d6 8DE80700 		stm	sp, {r0, r1, r2}
 3413 00da 0CAB     		add	r3, sp, #48
 3414 00dc 0ECB     		ldm	r3, {r1, r2, r3}
 3415 00de 2046     		mov	r0, r4
 3416 00e0 FFF7FEFF 		bl	SDIO_Init
 3417              	.LVL387:
 3418 00e4 32E0     		b	.L252
 3419              	.LVL388:
 3420              	.L258:
ARM GAS  /tmp/ccnQ8l0t.s 			page 133


 3421              	.LBB61:
 3422              	.LBB60:
3152:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3423              		.loc 1 3152 0
 3424 00e6 05A9     		add	r1, sp, #20
 3425 00e8 2046     		mov	r0, r4
 3426 00ea FFF7FEFF 		bl	SD_FindSCR
 3427              	.LVL389:
3154:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3428              		.loc 1 3154 0
 3429 00ee 0646     		mov	r6, r0
 3430 00f0 0028     		cmp	r0, #0
 3431 00f2 DFD1     		bne	.L242
3160:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3432              		.loc 1 3160 0
 3433 00f4 069B     		ldr	r3, [sp, #24]
 3434 00f6 13F4803F 		tst	r3, #65536
 3435 00fa 01D1     		bne	.L259
3197:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3436              		.loc 1 3197 0
 3437 00fc 2526     		movs	r6, #37
 3438              	.LVL390:
 3439 00fe D9E7     		b	.L242
 3440              	.LVL391:
 3441              	.L259:
3163:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_APP_CMD;
 3442              		.loc 1 3163 0
 3443 0100 636A     		ldr	r3, [r4, #36]
 3444 0102 1B04     		lsls	r3, r3, #16
 3445 0104 0793     		str	r3, [sp, #28]
3164:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 3446              		.loc 1 3164 0
 3447 0106 3726     		movs	r6, #55
 3448 0108 0896     		str	r6, [sp, #32]
3165:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 3449              		.loc 1 3165 0
 3450 010a 4023     		movs	r3, #64
 3451 010c 0993     		str	r3, [sp, #36]
3166:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 3452              		.loc 1 3166 0
 3453 010e 0023     		movs	r3, #0
 3454 0110 0A93     		str	r3, [sp, #40]
3167:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 3455              		.loc 1 3167 0
 3456 0112 4FF48063 		mov	r3, #1024
 3457 0116 0B93     		str	r3, [sp, #44]
3168:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 3458              		.loc 1 3168 0
 3459 0118 07A9     		add	r1, sp, #28
 3460 011a 2068     		ldr	r0, [r4]
 3461              	.LVL392:
 3462 011c FFF7FEFF 		bl	SDIO_SendCommand
 3463              	.LVL393:
3171:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 3464              		.loc 1 3171 0
 3465 0120 3146     		mov	r1, r6
 3466 0122 2046     		mov	r0, r4
ARM GAS  /tmp/ccnQ8l0t.s 			page 134


 3467 0124 FFF7FEFF 		bl	SD_CmdResp1Error
 3468              	.LVL394:
3173:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 3469              		.loc 1 3173 0
 3470 0128 0646     		mov	r6, r0
 3471 012a 0028     		cmp	r0, #0
 3472 012c C2D1     		bne	.L242
3179:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_APP_SD_SET_BUSWIDTH;
 3473              		.loc 1 3179 0
 3474 012e 0023     		movs	r3, #0
 3475 0130 0793     		str	r3, [sp, #28]
3180:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 3476              		.loc 1 3180 0
 3477 0132 0626     		movs	r6, #6
 3478 0134 0896     		str	r6, [sp, #32]
3181:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 3479              		.loc 1 3181 0
 3480 0136 07A9     		add	r1, sp, #28
 3481 0138 2068     		ldr	r0, [r4]
 3482              	.LVL395:
 3483 013a FFF7FEFF 		bl	SDIO_SendCommand
 3484              	.LVL396:
3184:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 3485              		.loc 1 3184 0
 3486 013e 3146     		mov	r1, r6
 3487 0140 2046     		mov	r0, r4
 3488 0142 FFF7FEFF 		bl	SD_CmdResp1Error
 3489              	.LVL397:
 3490 0146 0646     		mov	r6, r0
 3491              	.LVL398:
 3492 0148 B4E7     		b	.L242
 3493              	.LVL399:
 3494              	.L244:
 3495              	.LBE60:
 3496              	.LBE61:
1782:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3497              		.loc 1 1782 0
 3498 014a 2726     		movs	r6, #39
 3499              	.LVL400:
 3500              	.L252:
1819:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 3501              		.loc 1 1819 0
 3502 014c 3046     		mov	r0, r6
 3503 014e 12B0     		add	sp, sp, #72
 3504              	.LCFI36:
 3505              		.cfi_remember_state
 3506              		.cfi_def_cfa_offset 16
 3507              		@ sp needed
 3508 0150 70BD     		pop	{r4, r5, r6, pc}
 3509              	.LVL401:
 3510              	.L245:
 3511              	.LCFI37:
 3512              		.cfi_restore_state
1774:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_InitTypeDef tmpinit;
 3513              		.loc 1 1774 0
 3514 0152 0026     		movs	r6, #0
 3515 0154 FAE7     		b	.L252
ARM GAS  /tmp/ccnQ8l0t.s 			page 135


 3516              	.L246:
1789:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
 3517              		.loc 1 1789 0
 3518 0156 2726     		movs	r6, #39
 3519 0158 F8E7     		b	.L252
 3520              		.cfi_endproc
 3521              	.LFE145:
 3523              		.section	.text.HAL_SD_StopTransfer,"ax",%progbits
 3524              		.align	1
 3525              		.global	HAL_SD_StopTransfer
 3526              		.syntax unified
 3527              		.thumb
 3528              		.thumb_func
 3529              		.fpu fpv4-sp-d16
 3531              	HAL_SD_StopTransfer:
 3532              	.LFB146:
1827:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef sdio_cmdinitstructure;
 3533              		.loc 1 1827 0
 3534              		.cfi_startproc
 3535              		@ args = 0, pretend = 0, frame = 24
 3536              		@ frame_needed = 0, uses_anonymous_args = 0
 3537              	.LVL402:
 3538 0000 30B5     		push	{r4, r5, lr}
 3539              	.LCFI38:
 3540              		.cfi_def_cfa_offset 12
 3541              		.cfi_offset 4, -12
 3542              		.cfi_offset 5, -8
 3543              		.cfi_offset 14, -4
 3544 0002 87B0     		sub	sp, sp, #28
 3545              	.LCFI39:
 3546              		.cfi_def_cfa_offset 40
 3547 0004 0446     		mov	r4, r0
 3548              	.LVL403:
1832:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_STOP_TRANSMISSION;
 3549              		.loc 1 1832 0
 3550 0006 0023     		movs	r3, #0
 3551 0008 0193     		str	r3, [sp, #4]
1833:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 3552              		.loc 1 1833 0
 3553 000a 0C25     		movs	r5, #12
 3554 000c 0295     		str	r5, [sp, #8]
1834:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 3555              		.loc 1 1834 0
 3556 000e 4022     		movs	r2, #64
 3557 0010 0392     		str	r2, [sp, #12]
1835:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 3558              		.loc 1 1835 0
 3559 0012 0493     		str	r3, [sp, #16]
1836:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 3560              		.loc 1 1836 0
 3561 0014 4FF48063 		mov	r3, #1024
 3562 0018 0593     		str	r3, [sp, #20]
1837:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3563              		.loc 1 1837 0
 3564 001a 01A9     		add	r1, sp, #4
 3565 001c 0068     		ldr	r0, [r0]
 3566              	.LVL404:
ARM GAS  /tmp/ccnQ8l0t.s 			page 136


 3567 001e FFF7FEFF 		bl	SDIO_SendCommand
 3568              	.LVL405:
1840:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3569              		.loc 1 1840 0
 3570 0022 2946     		mov	r1, r5
 3571 0024 2046     		mov	r0, r4
 3572 0026 FFF7FEFF 		bl	SD_CmdResp1Error
 3573              	.LVL406:
1843:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 3574              		.loc 1 1843 0
 3575 002a 07B0     		add	sp, sp, #28
 3576              	.LCFI40:
 3577              		.cfi_def_cfa_offset 12
 3578              		@ sp needed
 3579 002c 30BD     		pop	{r4, r5, pc}
 3580              		.cfi_endproc
 3581              	.LFE146:
 3583              		.section	.text.HAL_SD_ReadBlocks,"ax",%progbits
 3584              		.align	1
 3585              		.global	HAL_SD_ReadBlocks
 3586              		.syntax unified
 3587              		.thumb
 3588              		.thumb_func
 3589              		.fpu fpv4-sp-d16
 3591              	HAL_SD_ReadBlocks:
 3592              	.LFB130:
 471:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef  sdio_cmdinitstructure;
 3593              		.loc 1 471 0
 3594              		.cfi_startproc
 3595              		@ args = 8, pretend = 0, frame = 48
 3596              		@ frame_needed = 0, uses_anonymous_args = 0
 3597              	.LVL407:
 3598 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 3599              	.LCFI41:
 3600              		.cfi_def_cfa_offset 28
 3601              		.cfi_offset 4, -28
 3602              		.cfi_offset 5, -24
 3603              		.cfi_offset 6, -20
 3604              		.cfi_offset 7, -16
 3605              		.cfi_offset 8, -12
 3606              		.cfi_offset 9, -8
 3607              		.cfi_offset 14, -4
 3608 0004 8DB0     		sub	sp, sp, #52
 3609              	.LCFI42:
 3610              		.cfi_def_cfa_offset 80
 3611 0006 0446     		mov	r4, r0
 3612 0008 8846     		mov	r8, r1
 3613 000a 9146     		mov	r9, r2
 3614 000c 149D     		ldr	r5, [sp, #80]
 3615              	.LVL408:
 478:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3616              		.loc 1 478 0
 3617 000e 0268     		ldr	r2, [r0]
 3618              	.LVL409:
 3619 0010 0021     		movs	r1, #0
 3620              	.LVL410:
 3621 0012 D162     		str	r1, [r2, #44]
ARM GAS  /tmp/ccnQ8l0t.s 			page 137


 480:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3622              		.loc 1 480 0
 3623 0014 026A     		ldr	r2, [r0, #32]
 3624 0016 022A     		cmp	r2, #2
 3625 0018 17D0     		beq	.L294
 3626              	.LVL411:
 3627              	.L263:
 487:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SET_BLOCKLEN;
 3628              		.loc 1 487 0
 3629 001a 0795     		str	r5, [sp, #28]
 488:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 3630              		.loc 1 488 0
 3631 001c 1026     		movs	r6, #16
 3632 001e 0896     		str	r6, [sp, #32]
 489:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 3633              		.loc 1 489 0
 3634 0020 4023     		movs	r3, #64
 3635 0022 0993     		str	r3, [sp, #36]
 490:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 3636              		.loc 1 490 0
 3637 0024 0023     		movs	r3, #0
 3638 0026 0A93     		str	r3, [sp, #40]
 491:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 3639              		.loc 1 491 0
 3640 0028 4FF48063 		mov	r3, #1024
 3641 002c 0B93     		str	r3, [sp, #44]
 492:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3642              		.loc 1 492 0
 3643 002e 07A9     		add	r1, sp, #28
 3644 0030 2068     		ldr	r0, [r4]
 3645              	.LVL412:
 3646 0032 FFF7FEFF 		bl	SDIO_SendCommand
 3647              	.LVL413:
 495:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3648              		.loc 1 495 0
 3649 0036 3146     		mov	r1, r6
 3650 0038 2046     		mov	r0, r4
 3651 003a FFF7FEFF 		bl	SD_CmdResp1Error
 3652              	.LVL414:
 497:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3653              		.loc 1 497 0
 3654 003e 0746     		mov	r7, r0
 3655 0040 50B1     		cbz	r0, .L295
 3656              	.LVL415:
 3657              	.L285:
 651:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 3658              		.loc 1 651 0
 3659 0042 3846     		mov	r0, r7
 3660 0044 0DB0     		add	sp, sp, #52
 3661              	.LCFI43:
 3662              		.cfi_remember_state
 3663              		.cfi_def_cfa_offset 28
 3664              		@ sp needed
 3665 0046 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 3666              	.LVL416:
 3667              	.L294:
 3668              	.LCFI44:
ARM GAS  /tmp/ccnQ8l0t.s 			page 138


 3669              		.cfi_restore_state
 483:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3670              		.loc 1 483 0
 3671 004a 4FEA5929 		lsr	r9, r9, #9
 3672 004e 49EAC359 		orr	r9, r9, r3, lsl #23
 3673              	.LVL417:
 482:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     ReadAddr /= 512U;
 3674              		.loc 1 482 0
 3675 0052 4FF40075 		mov	r5, #512
 3676 0056 E0E7     		b	.L263
 3677              	.LVL418:
 3678              	.L295:
 503:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataLength    = NumberOfBlocks * BlockSize;
 3679              		.loc 1 503 0
 3680 0058 4FF0FF33 		mov	r3, #-1
 3681 005c 0193     		str	r3, [sp, #4]
 504:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataBlockSize = DATA_BLOCK_SIZE;
 3682              		.loc 1 504 0
 3683 005e 159B     		ldr	r3, [sp, #84]
 3684 0060 03FB05F5 		mul	r5, r3, r5
 3685              	.LVL419:
 3686 0064 0295     		str	r5, [sp, #8]
 505:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferDir   = SDIO_TRANSFER_DIR_TO_SDIO;
 3687              		.loc 1 505 0
 3688 0066 9023     		movs	r3, #144
 3689 0068 0393     		str	r3, [sp, #12]
 506:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferMode  = SDIO_TRANSFER_MODE_BLOCK;
 3690              		.loc 1 506 0
 3691 006a 0223     		movs	r3, #2
 3692 006c 0493     		str	r3, [sp, #16]
 507:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DPSM          = SDIO_DPSM_ENABLE;
 3693              		.loc 1 507 0
 3694 006e 0023     		movs	r3, #0
 3695 0070 0593     		str	r3, [sp, #20]
 508:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataConfig(hsd->Instance, &sdio_datainitstructure);
 3696              		.loc 1 508 0
 3697 0072 0123     		movs	r3, #1
 3698 0074 0693     		str	r3, [sp, #24]
 509:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3699              		.loc 1 509 0
 3700 0076 01A9     		add	r1, sp, #4
 3701 0078 2068     		ldr	r0, [r4]
 3702              	.LVL420:
 3703 007a FFF7FEFF 		bl	SDIO_DataConfig
 3704              	.LVL421:
 511:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3705              		.loc 1 511 0
 3706 007e 159B     		ldr	r3, [sp, #84]
 3707 0080 012B     		cmp	r3, #1
 3708 0082 26D9     		bls	.L265
 514:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3709              		.loc 1 514 0
 3710 0084 1225     		movs	r5, #18
 3711 0086 0895     		str	r5, [sp, #32]
 522:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 3712              		.loc 1 522 0
 3713 0088 0CA9     		add	r1, sp, #48
ARM GAS  /tmp/ccnQ8l0t.s 			page 139


 3714 008a 41F8149D 		str	r9, [r1, #-20]!
 523:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3715              		.loc 1 523 0
 3716 008e 2068     		ldr	r0, [r4]
 3717 0090 FFF7FEFF 		bl	SDIO_SendCommand
 3718              	.LVL422:
 529:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 3719              		.loc 1 529 0
 3720 0094 2946     		mov	r1, r5
 3721 0096 2046     		mov	r0, r4
 3722 0098 FFF7FEFF 		bl	SD_CmdResp1Error
 3723              	.LVL423:
 531:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 3724              		.loc 1 531 0
 3725 009c 0746     		mov	r7, r0
 3726 009e 0028     		cmp	r0, #0
 3727 00a0 CFD1     		bne	.L285
 538:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #else /* SDIO_STA_STBITERR not defined */
 3728              		.loc 1 538 0
 3729 00a2 40F22A36 		movw	r6, #810
 3730              	.LVL424:
 3731              	.L266:
 3732 00a6 2368     		ldr	r3, [r4]
 3733              	.LVL425:
 3734              	.L268:
 3735 00a8 5A6B     		ldr	r2, [r3, #52]
 3736 00aa 3242     		tst	r2, r6
 3737 00ac 70D1     		bne	.L296
 543:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       {
 3738              		.loc 1 543 0
 3739 00ae 5A6B     		ldr	r2, [r3, #52]
 3740 00b0 12F4004F 		tst	r2, #32768
 3741 00b4 F8D0     		beq	.L268
 3742 00b6 A8F10405 		sub	r5, r8, #4
 3743 00ba 08F11C09 		add	r9, r8, #28
 3744              	.L269:
 548:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         }
 3745              		.loc 1 548 0 discriminator 3
 3746 00be 2068     		ldr	r0, [r4]
 3747 00c0 FFF7FEFF 		bl	SDIO_ReadFIFO
 3748              	.LVL426:
 3749 00c4 45F8040F 		str	r0, [r5, #4]!
 546:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         {
 3750              		.loc 1 546 0 discriminator 3
 3751 00c8 A945     		cmp	r9, r5
 3752 00ca F8D1     		bne	.L269
 551:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       }
 3753              		.loc 1 551 0
 3754 00cc 08F12008 		add	r8, r8, #32
 3755              	.LVL427:
 3756 00d0 E9E7     		b	.L266
 3757              	.LVL428:
 3758              	.L265:
 519:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3759              		.loc 1 519 0
 3760 00d2 1125     		movs	r5, #17
 3761 00d4 0895     		str	r5, [sp, #32]
ARM GAS  /tmp/ccnQ8l0t.s 			page 140


 522:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 3762              		.loc 1 522 0
 3763 00d6 0CA9     		add	r1, sp, #48
 3764 00d8 41F8149D 		str	r9, [r1, #-20]!
 523:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3765              		.loc 1 523 0
 3766 00dc 2068     		ldr	r0, [r4]
 3767 00de FFF7FEFF 		bl	SDIO_SendCommand
 3768              	.LVL429:
 558:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 3769              		.loc 1 558 0
 3770 00e2 2946     		mov	r1, r5
 3771 00e4 2046     		mov	r0, r4
 3772 00e6 FFF7FEFF 		bl	SD_CmdResp1Error
 3773              	.LVL430:
 560:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 3774              		.loc 1 560 0
 3775 00ea 0746     		mov	r7, r0
 3776 00ec 0028     		cmp	r0, #0
 3777 00ee A8D1     		bne	.L285
 567:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #else /* SDIO_STA_STBITERR not defined */
 3778              		.loc 1 567 0
 3779 00f0 40F22A66 		movw	r6, #1578
 3780              	.LVL431:
 3781              	.L267:
 3782 00f4 2368     		ldr	r3, [r4]
 3783              	.LVL432:
 3784              	.L272:
 3785 00f6 5A6B     		ldr	r2, [r3, #52]
 3786 00f8 3242     		tst	r2, r6
 3787 00fa 3FD1     		bne	.L297
 572:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       {
 3788              		.loc 1 572 0
 3789 00fc 5A6B     		ldr	r2, [r3, #52]
 3790 00fe 12F4004F 		tst	r2, #32768
 3791 0102 F8D0     		beq	.L272
 3792 0104 A8F10405 		sub	r5, r8, #4
 3793 0108 08F11C09 		add	r9, r8, #28
 3794              	.L273:
 577:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         }
 3795              		.loc 1 577 0 discriminator 3
 3796 010c 2068     		ldr	r0, [r4]
 3797 010e FFF7FEFF 		bl	SDIO_ReadFIFO
 3798              	.LVL433:
 3799 0112 45F8040F 		str	r0, [r5, #4]!
 575:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         {
 3800              		.loc 1 575 0 discriminator 3
 3801 0116 4D45     		cmp	r5, r9
 3802 0118 F8D1     		bne	.L273
 580:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       }
 3803              		.loc 1 580 0
 3804 011a 08F12008 		add	r8, r8, #32
 3805              	.LVL434:
 3806 011e E9E7     		b	.L267
 3807              	.LVL435:
 3808              	.L277:
 606:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
ARM GAS  /tmp/ccnQ8l0t.s 			page 141


 3809              		.loc 1 606 0
 3810 0120 436B     		ldr	r3, [r0, #52]
 3811 0122 13F0020F 		tst	r3, #2
 3812 0126 02D0     		beq	.L278
 608:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 3813              		.loc 1 608 0
 3814 0128 0227     		movs	r7, #2
 3815              	.LVL436:
 3816 012a 8763     		str	r7, [r0, #56]
 3817              	.LVL437:
 612:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3818              		.loc 1 612 0
 3819 012c 89E7     		b	.L285
 3820              	.LVL438:
 3821              	.L278:
 614:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3822              		.loc 1 614 0
 3823 012e 436B     		ldr	r3, [r0, #52]
 3824 0130 13F0200F 		tst	r3, #32
 3825 0134 03D0     		beq	.L279
 616:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 3826              		.loc 1 616 0
 3827 0136 2023     		movs	r3, #32
 3828 0138 8363     		str	r3, [r0, #56]
 3829              	.LVL439:
 620:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3830              		.loc 1 620 0
 3831 013a 0627     		movs	r7, #6
 3832 013c 81E7     		b	.L285
 3833              	.LVL440:
 3834              	.L279:
 623:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3835              		.loc 1 623 0
 3836 013e 436B     		ldr	r3, [r0, #52]
 3837 0140 13F4007F 		tst	r3, #512
 3838 0144 04D0     		beq	.L298
 625:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 3839              		.loc 1 625 0
 3840 0146 4FF40073 		mov	r3, #512
 3841 014a 8363     		str	r3, [r0, #56]
 3842              	.LVL441:
 629:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3843              		.loc 1 629 0
 3844 014c 0727     		movs	r7, #7
 3845 014e 78E7     		b	.L285
 3846              	.LVL442:
 3847              	.L298:
 640:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3848              		.loc 1 640 0
 3849 0150 436B     		ldr	r3, [r0, #52]
 3850 0152 13F4001F 		tst	r3, #2097152
 3851 0156 18BF     		it	ne
 3852 0158 4FF0FF35 		movne	r5, #-1
 3853 015c 0AD0     		beq	.L282
 3854              	.LVL443:
 3855              	.L281:
 642:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tempbuff++;
ARM GAS  /tmp/ccnQ8l0t.s 			page 142


 3856              		.loc 1 642 0
 3857 015e FFF7FEFF 		bl	SDIO_ReadFIFO
 3858              	.LVL444:
 3859 0162 48F8040B 		str	r0, [r8], #4
 3860              	.LVL445:
 640:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3861              		.loc 1 640 0
 3862 0166 2068     		ldr	r0, [r4]
 3863 0168 436B     		ldr	r3, [r0, #52]
 3864 016a 13F4001F 		tst	r3, #2097152
 3865 016e 01D0     		beq	.L282
 640:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3866              		.loc 1 640 0 is_stmt 0 discriminator 1
 3867 0170 013D     		subs	r5, r5, #1
 3868              	.LVL446:
 3869 0172 F4D1     		bne	.L281
 3870              	.LVL447:
 3871              	.L282:
 648:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3872              		.loc 1 648 0 is_stmt 1
 3873 0174 40F2FF53 		movw	r3, #1535
 3874 0178 8363     		str	r3, [r0, #56]
 650:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 3875              		.loc 1 650 0
 3876 017a 62E7     		b	.L285
 3877              	.LVL448:
 3878              	.L297:
 586:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {    
 3879              		.loc 1 586 0
 3880 017c 5B6B     		ldr	r3, [r3, #52]
 3881              	.LVL449:
 3882              	.L276:
 598:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3883              		.loc 1 598 0
 3884 017e 2068     		ldr	r0, [r4]
 3885 0180 436B     		ldr	r3, [r0, #52]
 3886 0182 13F0080F 		tst	r3, #8
 3887 0186 CBD0     		beq	.L277
 600:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 3888              		.loc 1 600 0
 3889 0188 0823     		movs	r3, #8
 3890 018a 8363     		str	r3, [r0, #56]
 3891              	.LVL450:
 604:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3892              		.loc 1 604 0
 3893 018c 0427     		movs	r7, #4
 3894 018e 58E7     		b	.L285
 3895              	.LVL451:
 3896              	.L296:
 586:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {    
 3897              		.loc 1 586 0
 3898 0190 5B6B     		ldr	r3, [r3, #52]
 3899 0192 13F4807F 		tst	r3, #256
 3900 0196 F2D0     		beq	.L276
 588:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       (hsd->CardType == STD_CAPACITY_SD_CARD_V2_0) ||\
 3901              		.loc 1 588 0
 3902 0198 236A     		ldr	r3, [r4, #32]
ARM GAS  /tmp/ccnQ8l0t.s 			page 143


 3903 019a 022B     		cmp	r3, #2
 3904 019c EFD8     		bhi	.L276
 593:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
 3905              		.loc 1 593 0
 3906 019e 2046     		mov	r0, r4
 3907 01a0 FFF7FEFF 		bl	HAL_SD_StopTransfer
 3908              	.LVL452:
 3909 01a4 0746     		mov	r7, r0
 3910              	.LVL453:
 3911 01a6 EAE7     		b	.L276
 3912              		.cfi_endproc
 3913              	.LFE130:
 3915              		.section	.text.HAL_SD_WriteBlocks,"ax",%progbits
 3916              		.align	1
 3917              		.global	HAL_SD_WriteBlocks
 3918              		.syntax unified
 3919              		.thumb
 3920              		.thumb_func
 3921              		.fpu fpv4-sp-d16
 3923              	HAL_SD_WriteBlocks:
 3924              	.LFB131:
 665:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef sdio_cmdinitstructure;
 3925              		.loc 1 665 0
 3926              		.cfi_startproc
 3927              		@ args = 8, pretend = 0, frame = 48
 3928              		@ frame_needed = 0, uses_anonymous_args = 0
 3929              	.LVL454:
 3930 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 3931              	.LCFI45:
 3932              		.cfi_def_cfa_offset 36
 3933              		.cfi_offset 4, -36
 3934              		.cfi_offset 5, -32
 3935              		.cfi_offset 6, -28
 3936              		.cfi_offset 7, -24
 3937              		.cfi_offset 8, -20
 3938              		.cfi_offset 9, -16
 3939              		.cfi_offset 10, -12
 3940              		.cfi_offset 11, -8
 3941              		.cfi_offset 14, -4
 3942 0004 8DB0     		sub	sp, sp, #52
 3943              	.LCFI46:
 3944              		.cfi_def_cfa_offset 88
 3945 0006 0446     		mov	r4, r0
 3946 0008 0F46     		mov	r7, r1
 3947 000a 1646     		mov	r6, r2
 3948 000c 169D     		ldr	r5, [sp, #88]
 3949              	.LVL455:
 671:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3950              		.loc 1 671 0
 3951 000e 0022     		movs	r2, #0
 3952              	.LVL456:
 3953 0010 8DF80320 		strb	r2, [sp, #3]
 674:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3954              		.loc 1 674 0
 3955 0014 0168     		ldr	r1, [r0]
 3956              	.LVL457:
 3957 0016 CA62     		str	r2, [r1, #44]
ARM GAS  /tmp/ccnQ8l0t.s 			page 144


 676:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3958              		.loc 1 676 0
 3959 0018 026A     		ldr	r2, [r0, #32]
 3960 001a 022A     		cmp	r2, #2
 3961 001c 2ED0     		beq	.L344
 3962              	.LVL458:
 3963              	.L300:
 683:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SET_BLOCKLEN;
 3964              		.loc 1 683 0
 3965 001e 0795     		str	r5, [sp, #28]
 684:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 3966              		.loc 1 684 0
 3967 0020 4FF01008 		mov	r8, #16
 3968 0024 CDF82080 		str	r8, [sp, #32]
 685:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 3969              		.loc 1 685 0
 3970 0028 4023     		movs	r3, #64
 3971 002a 0993     		str	r3, [sp, #36]
 686:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 3972              		.loc 1 686 0
 3973 002c 0023     		movs	r3, #0
 3974 002e 0A93     		str	r3, [sp, #40]
 687:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 3975              		.loc 1 687 0
 3976 0030 4FF48063 		mov	r3, #1024
 3977 0034 0B93     		str	r3, [sp, #44]
 688:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3978              		.loc 1 688 0
 3979 0036 07A9     		add	r1, sp, #28
 3980 0038 2068     		ldr	r0, [r4]
 3981              	.LVL459:
 3982 003a FFF7FEFF 		bl	SDIO_SendCommand
 3983              	.LVL460:
 691:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 3984              		.loc 1 691 0
 3985 003e 4146     		mov	r1, r8
 3986 0040 2046     		mov	r0, r4
 3987 0042 FFF7FEFF 		bl	SD_CmdResp1Error
 3988              	.LVL461:
 693:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3989              		.loc 1 693 0
 3990 0046 0346     		mov	r3, r0
 3991 0048 A0B9     		cbnz	r0, .L332
 698:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 3992              		.loc 1 698 0
 3993 004a 179B     		ldr	r3, [sp, #92]
 3994 004c 012B     		cmp	r3, #1
 701:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3995              		.loc 1 701 0
 3996 004e 8CBF     		ite	hi
 3997 0050 4FF01908 		movhi	r8, #25
 706:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 3998              		.loc 1 706 0
 3999 0054 4FF01808 		movls	r8, #24
 4000 0058 CDF82080 		str	r8, [sp, #32]
 709:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 4001              		.loc 1 709 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 145


 4002 005c 0CA9     		add	r1, sp, #48
 4003 005e 41F8146D 		str	r6, [r1, #-20]!
 710:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 4004              		.loc 1 710 0
 4005 0062 2068     		ldr	r0, [r4]
 4006              	.LVL462:
 4007 0064 FFF7FEFF 		bl	SDIO_SendCommand
 4008              	.LVL463:
 719:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }  
 4009              		.loc 1 719 0
 4010 0068 4146     		mov	r1, r8
 4011 006a 2046     		mov	r0, r4
 4012 006c FFF7FEFF 		bl	SD_CmdResp1Error
 4013              	.LVL464:
 4014 0070 0346     		mov	r3, r0
 4015              	.LVL465:
 722:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4016              		.loc 1 722 0
 4017 0072 50B1     		cbz	r0, .L345
 4018              	.LVL466:
 4019              	.L332:
 877:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 4020              		.loc 1 877 0
 4021 0074 1846     		mov	r0, r3
 4022 0076 0DB0     		add	sp, sp, #52
 4023              	.LCFI47:
 4024              		.cfi_remember_state
 4025              		.cfi_def_cfa_offset 36
 4026              		@ sp needed
 4027 0078 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4028              	.LVL467:
 4029              	.L344:
 4030              	.LCFI48:
 4031              		.cfi_restore_state
 679:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 4032              		.loc 1 679 0
 4033 007c 4FEA5629 		lsr	r9, r6, #9
 4034 0080 49EAC356 		orr	r6, r9, r3, lsl #23
 4035              	.LVL468:
 678:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     WriteAddr /= 512U;
 4036              		.loc 1 678 0
 4037 0084 4FF40075 		mov	r5, #512
 4038 0088 C9E7     		b	.L300
 4039              	.LVL469:
 4040              	.L345:
 728:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 4041              		.loc 1 728 0
 4042 008a 179B     		ldr	r3, [sp, #92]
 4043 008c 03FB05F8 		mul	r8, r3, r5
 4044              	.LVL470:
 731:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataLength    = NumberOfBlocks * BlockSize;
 4045              		.loc 1 731 0
 4046 0090 4FF0FF33 		mov	r3, #-1
 4047 0094 0193     		str	r3, [sp, #4]
 732:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataBlockSize = SDIO_DATABLOCK_SIZE_512B;
 4048              		.loc 1 732 0
 4049 0096 CDF80880 		str	r8, [sp, #8]
ARM GAS  /tmp/ccnQ8l0t.s 			page 146


 733:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferDir   = SDIO_TRANSFER_DIR_TO_CARD;
 4050              		.loc 1 733 0
 4051 009a 9023     		movs	r3, #144
 4052 009c 0393     		str	r3, [sp, #12]
 734:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferMode  = SDIO_TRANSFER_MODE_BLOCK;
 4053              		.loc 1 734 0
 4054 009e 0023     		movs	r3, #0
 4055 00a0 0493     		str	r3, [sp, #16]
 735:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DPSM          = SDIO_DPSM_ENABLE;
 4056              		.loc 1 735 0
 4057 00a2 0593     		str	r3, [sp, #20]
 736:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataConfig(hsd->Instance, &sdio_datainitstructure);
 4058              		.loc 1 736 0
 4059 00a4 0123     		movs	r3, #1
 4060 00a6 0693     		str	r3, [sp, #24]
 737:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 4061              		.loc 1 737 0
 4062 00a8 01A9     		add	r1, sp, #4
 4063 00aa 2068     		ldr	r0, [r4]
 4064              	.LVL471:
 4065 00ac FFF7FEFF 		bl	SDIO_DataConfig
 4066              	.LVL472:
 740:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4067              		.loc 1 740 0
 4068 00b0 179B     		ldr	r3, [sp, #92]
 4069 00b2 012B     		cmp	r3, #1
 4070 00b4 2CD9     		bls	.L346
 4071 00b6 0026     		movs	r6, #0
 743:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #else /* SDIO_STA_STBITERR not defined */
 4072              		.loc 1 743 0
 4073 00b8 40F21A35 		movw	r5, #794
 4074              	.LVL473:
 4075              	.L304:
 4076 00bc 2368     		ldr	r3, [r4]
 4077              	.L306:
 4078 00be 5A6B     		ldr	r2, [r3, #52]
 4079 00c0 2A42     		tst	r2, r5
 4080 00c2 40F0AE80 		bne	.L347
 748:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       {
 4081              		.loc 1 748 0
 4082 00c6 5A6B     		ldr	r2, [r3, #52]
 4083 00c8 12F4804F 		tst	r2, #16384
 4084 00cc F7D0     		beq	.L306
 750:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         {
 4085              		.loc 1 750 0
 4086 00ce A8EB060B 		sub	fp, r8, r6
 4087 00d2 BBF11F0F 		cmp	fp, #31
 4088 00d6 48D8     		bhi	.L307
 752:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           
 4089              		.loc 1 752 0
 4090 00d8 1BF0030F 		tst	fp, #3
 4091 00dc 4FEA9B0B 		lsr	fp, fp, #2
 4092 00e0 18BF     		it	ne
 4093 00e2 0BF1010B 		addne	fp, fp, #1
 4094              	.LVL474:
 755:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           {
 4095              		.loc 1 755 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 147


 4096 00e6 BBF1000F 		cmp	fp, #0
 4097 00ea E7D0     		beq	.L304
 4098 00ec BA46     		mov	r10, r7
 4099 00ee 4FF00009 		mov	r9, #0
 4100              	.LVL475:
 4101              	.L311:
 757:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             tempbuff++;
 4102              		.loc 1 757 0 discriminator 3
 4103 00f2 5146     		mov	r1, r10
 4104 00f4 2068     		ldr	r0, [r4]
 4105 00f6 FFF7FEFF 		bl	SDIO_WriteFIFO
 4106              	.LVL476:
 758:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             bytestransferred += 4U;
 4107              		.loc 1 758 0 discriminator 3
 4108 00fa 0AF1040A 		add	r10, r10, #4
 4109              	.LVL477:
 755:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           {
 4110              		.loc 1 755 0 discriminator 3
 4111 00fe 09F10109 		add	r9, r9, #1
 4112              	.LVL478:
 4113 0102 CB45     		cmp	fp, r9
 4114 0104 F5D1     		bne	.L311
 4115 0106 4FEA8909 		lsl	r9, r9, #2
 4116              	.LVL479:
 4117 010a 4F44     		add	r7, r7, r9
 4118 010c 4E44     		add	r6, r6, r9
 4119 010e D5E7     		b	.L304
 4120              	.LVL480:
 4121              	.L346:
 4122 0110 0026     		movs	r6, #0
 780:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #else /* SDIO_STA_STBITERR not defined */
 4123              		.loc 1 780 0
 4124 0112 40F21A65 		movw	r5, #1562
 4125              	.LVL481:
 4126              	.L305:
 4127 0116 2368     		ldr	r3, [r4]
 4128              	.L315:
 4129 0118 5A6B     		ldr	r2, [r3, #52]
 4130 011a 2A42     		tst	r2, r5
 4131 011c 40F08E80 		bne	.L348
 785:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       {
 4132              		.loc 1 785 0
 4133 0120 5A6B     		ldr	r2, [r3, #52]
 4134 0122 12F4804F 		tst	r2, #16384
 4135 0126 F7D0     		beq	.L315
 787:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         {
 4136              		.loc 1 787 0
 4137 0128 A8EB060B 		sub	fp, r8, r6
 4138 012c BBF11F0F 		cmp	fp, #31
 4139 0130 28D8     		bhi	.L316
 789:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           
 4140              		.loc 1 789 0
 4141 0132 1BF0030F 		tst	fp, #3
 4142 0136 4FEA9B0B 		lsr	fp, fp, #2
 4143 013a 18BF     		it	ne
 4144 013c 0BF1010B 		addne	fp, fp, #1
 4145              	.LVL482:
ARM GAS  /tmp/ccnQ8l0t.s 			page 148


 792:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           {
 4146              		.loc 1 792 0
 4147 0140 BBF1000F 		cmp	fp, #0
 4148 0144 E7D0     		beq	.L305
 4149 0146 BA46     		mov	r10, r7
 4150 0148 4FF00009 		mov	r9, #0
 4151              	.LVL483:
 4152              	.L320:
 794:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             tempbuff++; 
 4153              		.loc 1 794 0 discriminator 3
 4154 014c 5146     		mov	r1, r10
 4155 014e 2068     		ldr	r0, [r4]
 4156 0150 FFF7FEFF 		bl	SDIO_WriteFIFO
 4157              	.LVL484:
 795:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****             bytestransferred += 4U;
 4158              		.loc 1 795 0 discriminator 3
 4159 0154 0AF1040A 		add	r10, r10, #4
 4160              	.LVL485:
 792:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           {
 4161              		.loc 1 792 0 discriminator 3
 4162 0158 09F10109 		add	r9, r9, #1
 4163              	.LVL486:
 4164 015c CB45     		cmp	fp, r9
 4165 015e F5D1     		bne	.L320
 4166 0160 4FEA8909 		lsl	r9, r9, #2
 4167              	.LVL487:
 4168 0164 4F44     		add	r7, r7, r9
 4169 0166 4E44     		add	r6, r6, r9
 4170 0168 D5E7     		b	.L305
 4171              	.LVL488:
 4172              	.L307:
 4173 016a B946     		mov	r9, r7
 4174 016c 2037     		adds	r7, r7, #32
 4175 016e BA46     		mov	r10, r7
 4176              	.L312:
 767:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           }
 4177              		.loc 1 767 0 discriminator 3
 4178 0170 4946     		mov	r1, r9
 4179 0172 2068     		ldr	r0, [r4]
 4180 0174 FFF7FEFF 		bl	SDIO_WriteFIFO
 4181              	.LVL489:
 4182 0178 09F10409 		add	r9, r9, #4
 765:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           {
 4183              		.loc 1 765 0 discriminator 3
 4184 017c D145     		cmp	r9, r10
 4185 017e F7D1     		bne	.L312
 4186              	.LVL490:
 771:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         }
 4187              		.loc 1 771 0
 4188 0180 2036     		adds	r6, r6, #32
 4189              	.LVL491:
 4190 0182 9BE7     		b	.L304
 4191              	.LVL492:
 4192              	.L316:
 4193 0184 B946     		mov	r9, r7
 4194 0186 2037     		adds	r7, r7, #32
 4195 0188 BA46     		mov	r10, r7
ARM GAS  /tmp/ccnQ8l0t.s 			page 149


 4196              	.L321:
 804:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           }
 4197              		.loc 1 804 0 discriminator 3
 4198 018a 4946     		mov	r1, r9
 4199 018c 2068     		ldr	r0, [r4]
 4200 018e FFF7FEFF 		bl	SDIO_WriteFIFO
 4201              	.LVL493:
 4202 0192 09F10409 		add	r9, r9, #4
 802:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****           {
 4203              		.loc 1 802 0 discriminator 3
 4204 0196 D145     		cmp	r9, r10
 4205 0198 F7D1     		bne	.L321
 4206              	.LVL494:
 808:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         }
 4207              		.loc 1 808 0
 4208 019a 2036     		adds	r6, r6, #32
 4209              	.LVL495:
 4210 019c BBE7     		b	.L305
 4211              	.LVL496:
 4212              	.L330:
 817:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       (hsd->CardType == HIGH_CAPACITY_SD_CARD))
 4213              		.loc 1 817 0
 4214 019e 236A     		ldr	r3, [r4, #32]
 4215 01a0 022B     		cmp	r3, #2
 4216 01a2 42D8     		bhi	.L324
 821:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
 4217              		.loc 1 821 0
 4218 01a4 2046     		mov	r0, r4
 4219 01a6 FFF7FEFF 		bl	HAL_SD_StopTransfer
 4220              	.LVL497:
 4221 01aa 3EE0     		b	.L324
 4222              	.L325:
 834:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4223              		.loc 1 834 0
 4224 01ac 536B     		ldr	r3, [r2, #52]
 4225 01ae 13F0020F 		tst	r3, #2
 4226 01b2 02D0     		beq	.L326
 836:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 4227              		.loc 1 836 0
 4228 01b4 0223     		movs	r3, #2
 4229 01b6 9363     		str	r3, [r2, #56]
 4230              	.LVL498:
 840:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 4231              		.loc 1 840 0
 4232 01b8 5CE7     		b	.L332
 4233              	.LVL499:
 4234              	.L326:
 842:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4235              		.loc 1 842 0
 4236 01ba 536B     		ldr	r3, [r2, #52]
 4237 01bc 13F0100F 		tst	r3, #16
 4238 01c0 03D0     		beq	.L327
 844:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 4239              		.loc 1 844 0
 4240 01c2 1023     		movs	r3, #16
 4241 01c4 9363     		str	r3, [r2, #56]
 4242              	.LVL500:
ARM GAS  /tmp/ccnQ8l0t.s 			page 150


 848:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 4243              		.loc 1 848 0
 4244 01c6 0523     		movs	r3, #5
 4245 01c8 54E7     		b	.L332
 4246              	.LVL501:
 4247              	.L327:
 851:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4248              		.loc 1 851 0
 4249 01ca 536B     		ldr	r3, [r2, #52]
 4250 01cc 13F4007F 		tst	r3, #512
 4251 01d0 04D0     		beq	.L328
 853:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 4252              		.loc 1 853 0
 4253 01d2 4FF40073 		mov	r3, #512
 4254 01d6 9363     		str	r3, [r2, #56]
 4255              	.LVL502:
 857:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 4256              		.loc 1 857 0
 4257 01d8 0723     		movs	r3, #7
 4258 01da 4BE7     		b	.L332
 4259              	.LVL503:
 4260              	.L328:
 866:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 4261              		.loc 1 866 0
 4262 01dc 40F2FF53 		movw	r3, #1535
 4263 01e0 9363     		str	r3, [r2, #56]
 869:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 4264              		.loc 1 869 0
 4265 01e2 0DF10301 		add	r1, sp, #3
 4266 01e6 2046     		mov	r0, r4
 4267 01e8 FFF7FEFF 		bl	SD_IsCardProgramming
 4268              	.LVL504:
 871:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4269              		.loc 1 871 0
 4270 01ec 0346     		mov	r3, r0
 4271 01ee 0028     		cmp	r0, #0
 4272 01f0 7FF440AF 		bne	.L332
 4273 01f4 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 4274 01f8 063A     		subs	r2, r2, #6
 4275 01fa D2B2     		uxtb	r2, r2
 4276 01fc 012A     		cmp	r2, #1
 4277 01fe 3FF639AF 		bhi	.L332
 4278              	.L333:
 4279              	.LVL505:
 873:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 4280              		.loc 1 873 0
 4281 0202 0DF10301 		add	r1, sp, #3
 4282 0206 2046     		mov	r0, r4
 4283 0208 FFF7FEFF 		bl	SD_IsCardProgramming
 4284              	.LVL506:
 871:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4285              		.loc 1 871 0
 4286 020c 0346     		mov	r3, r0
 4287 020e 0028     		cmp	r0, #0
 4288 0210 7FF430AF 		bne	.L332
 871:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4289              		.loc 1 871 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccnQ8l0t.s 			page 151


 4290 0214 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 4291 0218 063A     		subs	r2, r2, #6
 4292 021a D2B2     		uxtb	r2, r2
 4293 021c 012A     		cmp	r2, #1
 4294 021e F0D9     		bls	.L333
 4295 0220 28E7     		b	.L332
 4296              	.LVL507:
 4297              	.L347:
 815:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {    
 4298              		.loc 1 815 0 is_stmt 1
 4299 0222 5B6B     		ldr	r3, [r3, #52]
 4300 0224 13F4807F 		tst	r3, #256
 4301 0228 B9D1     		bne	.L330
 4302              	.L324:
 826:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4303              		.loc 1 826 0
 4304 022a 2268     		ldr	r2, [r4]
 4305 022c 536B     		ldr	r3, [r2, #52]
 4306 022e 13F0080F 		tst	r3, #8
 4307 0232 BBD0     		beq	.L325
 828:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 4308              		.loc 1 828 0
 4309 0234 0823     		movs	r3, #8
 4310 0236 9363     		str	r3, [r2, #56]
 4311              	.LVL508:
 832:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 4312              		.loc 1 832 0
 4313 0238 0423     		movs	r3, #4
 4314 023a 1BE7     		b	.L332
 4315              	.LVL509:
 4316              	.L348:
 815:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {    
 4317              		.loc 1 815 0
 4318 023c 5B6B     		ldr	r3, [r3, #52]
 4319 023e F4E7     		b	.L324
 4320              		.cfi_endproc
 4321              	.LFE131:
 4323              		.section	.text.HAL_SD_CheckReadOperation,"ax",%progbits
 4324              		.align	1
 4325              		.global	HAL_SD_CheckReadOperation
 4326              		.syntax unified
 4327              		.thumb
 4328              		.thumb_func
 4329              		.fpu fpv4-sp-d16
 4331              	HAL_SD_CheckReadOperation:
 4332              	.LFB134:
1140:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
 4333              		.loc 1 1140 0
 4334              		.cfi_startproc
 4335              		@ args = 0, pretend = 0, frame = 0
 4336              		@ frame_needed = 0, uses_anonymous_args = 0
 4337              	.LVL510:
 4338 0000 38B5     		push	{r3, r4, r5, lr}
 4339              	.LCFI49:
 4340              		.cfi_def_cfa_offset 16
 4341              		.cfi_offset 3, -16
 4342              		.cfi_offset 4, -12
ARM GAS  /tmp/ccnQ8l0t.s 			page 152


 4343              		.cfi_offset 5, -8
 4344              		.cfi_offset 14, -4
 4345 0002 0446     		mov	r4, r0
 4346 0004 0D46     		mov	r5, r1
 4347              	.LVL511:
1147:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp2 = hsd->SdTransferCplt;
 4348              		.loc 1 1147 0
 4349 0006 026D     		ldr	r2, [r0, #80]
 4350              	.LVL512:
1148:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp3 = (HAL_SD_ErrorTypedef)hsd->SdTransferErr;
 4351              		.loc 1 1148 0
 4352 0008 816C     		ldr	r1, [r0, #72]
 4353              	.LVL513:
1149:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 4354              		.loc 1 1149 0
 4355 000a C36C     		ldr	r3, [r0, #76]
 4356              	.LVL514:
1151:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4357              		.loc 1 1151 0
 4358 000c 5ABB     		cbnz	r2, .L350
 4359 000e DBB2     		uxtb	r3, r3
 4360 0010 49BB     		cbnz	r1, .L350
 4361 0012 43BB     		cbnz	r3, .L350
 4362 0014 3DB3     		cbz	r5, .L350
 4363 0016 2A46     		mov	r2, r5
 4364              	.LVL515:
 4365              	.L355:
1153:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp2 = hsd->SdTransferCplt;
 4366              		.loc 1 1153 0
 4367 0018 216D     		ldr	r1, [r4, #80]
 4368              	.LVL516:
1154:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp3 = (HAL_SD_ErrorTypedef)hsd->SdTransferErr;    
 4369              		.loc 1 1154 0
 4370 001a A06C     		ldr	r0, [r4, #72]
 4371              	.LVL517:
1155:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     timeout--;
 4372              		.loc 1 1155 0
 4373 001c E36C     		ldr	r3, [r4, #76]
 4374 001e DBB2     		uxtb	r3, r3
 4375              	.LVL518:
1156:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 4376              		.loc 1 1156 0
 4377 0020 013A     		subs	r2, r2, #1
 4378              	.LVL519:
1151:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4379              		.loc 1 1151 0
 4380 0022 19B9     		cbnz	r1, .L352
1151:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4381              		.loc 1 1151 0 is_stmt 0 discriminator 1
 4382 0024 10B9     		cbnz	r0, .L352
1151:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4383              		.loc 1 1151 0 discriminator 2
 4384 0026 0BB9     		cbnz	r3, .L352
1151:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4385              		.loc 1 1151 0 discriminator 3
 4386 0028 002A     		cmp	r2, #0
 4387 002a F5D1     		bne	.L355
ARM GAS  /tmp/ccnQ8l0t.s 			page 153


 4388              	.L352:
 4389              	.LVL520:
1162:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4390              		.loc 1 1162 0 is_stmt 1
 4391 002c 2268     		ldr	r2, [r4]
 4392 002e 536B     		ldr	r3, [r2, #52]
 4393              	.LVL521:
 4394 0030 13F4005F 		tst	r3, #8192
 4395 0034 06D0     		beq	.L353
 4396              	.LVL522:
 4397              	.L356:
1164:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 4398              		.loc 1 1164 0
 4399 0036 013D     		subs	r5, r5, #1
 4400              	.LVL523:
1162:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4401              		.loc 1 1162 0
 4402 0038 536B     		ldr	r3, [r2, #52]
 4403 003a 13F4005F 		tst	r3, #8192
 4404 003e 01D0     		beq	.L353
1162:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4405              		.loc 1 1162 0 is_stmt 0 discriminator 1
 4406 0040 002D     		cmp	r5, #0
 4407 0042 F8D1     		bne	.L356
 4408              	.L353:
1168:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4409              		.loc 1 1168 0 is_stmt 1
 4410 0044 636D     		ldr	r3, [r4, #84]
 4411 0046 012B     		cmp	r3, #1
 4412 0048 15D0     		beq	.L365
1141:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t timeout = Timeout;
 4413              		.loc 1 1141 0
 4414 004a 0020     		movs	r0, #0
 4415              	.LVL524:
 4416              	.L357:
1173:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4417              		.loc 1 1173 0
 4418 004c 15B9     		cbnz	r5, .L358
1175:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 4419              		.loc 1 1175 0 discriminator 1
 4420 004e 0028     		cmp	r0, #0
 4421 0050 08BF     		it	eq
 4422 0052 0420     		moveq	r0, #4
 4423              	.LVL525:
 4424              	.L358:
1179:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 4425              		.loc 1 1179 0
 4426 0054 2368     		ldr	r3, [r4]
 4427 0056 40F2FF52 		movw	r2, #1535
 4428 005a 9A63     		str	r2, [r3, #56]
1182:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4429              		.loc 1 1182 0
 4430 005c E36C     		ldr	r3, [r4, #76]
 4431 005e 73B1     		cbz	r3, .L361
1184:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 4432              		.loc 1 1184 0
 4433 0060 E06C     		ldr	r0, [r4, #76]
ARM GAS  /tmp/ccnQ8l0t.s 			page 154


 4434              	.LVL526:
 4435 0062 C0B2     		uxtb	r0, r0
 4436 0064 38BD     		pop	{r3, r4, r5, pc}
 4437              	.LVL527:
 4438              	.L350:
1162:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4439              		.loc 1 1162 0
 4440 0066 2268     		ldr	r2, [r4]
 4441              	.LVL528:
 4442 0068 536B     		ldr	r3, [r2, #52]
 4443 006a 13F4005F 		tst	r3, #8192
 4444 006e E9D0     		beq	.L353
 4445 0070 002D     		cmp	r5, #0
 4446 0072 E7D0     		beq	.L353
 4447 0074 DFE7     		b	.L356
 4448              	.LVL529:
 4449              	.L365:
1170:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 4450              		.loc 1 1170 0
 4451 0076 2046     		mov	r0, r4
 4452 0078 FFF7FEFF 		bl	HAL_SD_StopTransfer
 4453              	.LVL530:
 4454 007c E6E7     		b	.L357
 4455              	.L361:
1188:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 4456              		.loc 1 1188 0
 4457 007e 38BD     		pop	{r3, r4, r5, pc}
 4458              		.cfi_endproc
 4459              	.LFE134:
 4461              		.section	.text.HAL_SD_HighSpeed,"ax",%progbits
 4462              		.align	1
 4463              		.global	HAL_SD_HighSpeed
 4464              		.syntax unified
 4465              		.thumb
 4466              		.thumb_func
 4467              		.fpu fpv4-sp-d16
 4469              	HAL_SD_HighSpeed:
 4470              	.LFB147:
1854:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
 4471              		.loc 1 1854 0
 4472              		.cfi_startproc
 4473              		@ args = 0, pretend = 0, frame = 120
 4474              		@ frame_needed = 0, uses_anonymous_args = 0
 4475              	.LVL531:
 4476 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 4477              	.LCFI50:
 4478              		.cfi_def_cfa_offset 28
 4479              		.cfi_offset 4, -28
 4480              		.cfi_offset 5, -24
 4481              		.cfi_offset 6, -20
 4482              		.cfi_offset 7, -16
 4483              		.cfi_offset 8, -12
 4484              		.cfi_offset 9, -8
 4485              		.cfi_offset 14, -4
 4486 0004 9FB0     		sub	sp, sp, #124
 4487              	.LCFI51:
 4488              		.cfi_def_cfa_offset 152
ARM GAS  /tmp/ccnQ8l0t.s 			page 155


 4489 0006 0446     		mov	r4, r0
 4490              	.LVL532:
1859:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t SD_scr[2U] = {0U, 0U};
 4491              		.loc 1 1859 0
 4492 0008 4022     		movs	r2, #64
 4493 000a 0021     		movs	r1, #0
 4494 000c 03A8     		add	r0, sp, #12
 4495              	.LVL533:
 4496 000e FFF7FEFF 		bl	memset
 4497              	.LVL534:
1860:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t SD_SPEC    = 0U;
 4498              		.loc 1 1860 0
 4499 0012 0023     		movs	r3, #0
 4500 0014 0193     		str	r3, [sp, #4]
 4501 0016 0293     		str	r3, [sp, #8]
 4502              	.LVL535:
1865:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 4503              		.loc 1 1865 0
 4504 0018 2268     		ldr	r2, [r4]
 4505 001a D362     		str	r3, [r2, #44]
1868:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 4506              		.loc 1 1868 0
 4507 001c 01A9     		add	r1, sp, #4
 4508 001e 2046     		mov	r0, r4
 4509 0020 FFF7FEFF 		bl	SD_FindSCR
 4510              	.LVL536:
1870:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4511              		.loc 1 1870 0
 4512 0024 0546     		mov	r5, r0
 4513 0026 18B9     		cbnz	r0, .L367
 4514              	.LVL537:
1878:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4515              		.loc 1 1878 0
 4516 0028 029B     		ldr	r3, [sp, #8]
 4517 002a 13F0407F 		tst	r3, #50331648
 4518 002e 03D1     		bne	.L383
 4519              	.LVL538:
 4520              	.L367:
1993:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 4521              		.loc 1 1993 0
 4522 0030 2846     		mov	r0, r5
 4523 0032 1FB0     		add	sp, sp, #124
 4524              	.LCFI52:
 4525              		.cfi_remember_state
 4526              		.cfi_def_cfa_offset 28
 4527              		@ sp needed
 4528 0034 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 4529              	.LVL539:
 4530              	.L383:
 4531              	.LCFI53:
 4532              		.cfi_restore_state
1881:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_SET_BLOCKLEN;
 4533              		.loc 1 1881 0
 4534 0038 4023     		movs	r3, #64
 4535              	.LVL540:
 4536 003a 1993     		str	r3, [sp, #100]
1882:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
ARM GAS  /tmp/ccnQ8l0t.s 			page 156


 4537              		.loc 1 1882 0
 4538 003c 1025     		movs	r5, #16
 4539 003e 1A95     		str	r5, [sp, #104]
1883:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 4540              		.loc 1 1883 0
 4541 0040 1B93     		str	r3, [sp, #108]
1884:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 4542              		.loc 1 1884 0
 4543 0042 0023     		movs	r3, #0
 4544 0044 1C93     		str	r3, [sp, #112]
1885:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 4545              		.loc 1 1885 0
 4546 0046 4FF48063 		mov	r3, #1024
 4547 004a 1D93     		str	r3, [sp, #116]
1886:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 4548              		.loc 1 1886 0
 4549 004c 19A9     		add	r1, sp, #100
 4550 004e 2068     		ldr	r0, [r4]
 4551              	.LVL541:
 4552 0050 FFF7FEFF 		bl	SDIO_SendCommand
 4553              	.LVL542:
1889:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 4554              		.loc 1 1889 0
 4555 0054 2946     		mov	r1, r5
 4556 0056 2046     		mov	r0, r4
 4557 0058 FFF7FEFF 		bl	SD_CmdResp1Error
 4558              	.LVL543:
1891:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 4559              		.loc 1 1891 0
 4560 005c 0546     		mov	r5, r0
 4561 005e 0028     		cmp	r0, #0
 4562 0060 E6D1     		bne	.L367
1897:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_datainitstructure.DataLength    = 64U;
 4563              		.loc 1 1897 0
 4564 0062 4FF0FF33 		mov	r3, #-1
 4565 0066 1393     		str	r3, [sp, #76]
1898:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_datainitstructure.DataBlockSize = SDIO_DATABLOCK_SIZE_64B ;
 4566              		.loc 1 1898 0
 4567 0068 4023     		movs	r3, #64
 4568 006a 1493     		str	r3, [sp, #80]
1899:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_datainitstructure.TransferDir   = SDIO_TRANSFER_DIR_TO_SDIO;
 4569              		.loc 1 1899 0
 4570 006c 6023     		movs	r3, #96
 4571 006e 1593     		str	r3, [sp, #84]
1900:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_datainitstructure.TransferMode  = SDIO_TRANSFER_MODE_BLOCK;
 4572              		.loc 1 1900 0
 4573 0070 0223     		movs	r3, #2
 4574 0072 1693     		str	r3, [sp, #88]
1901:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_datainitstructure.DPSM          = SDIO_DPSM_ENABLE;
 4575              		.loc 1 1901 0
 4576 0074 0023     		movs	r3, #0
 4577 0076 1793     		str	r3, [sp, #92]
1902:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_DataConfig(hsd->Instance, &sdio_datainitstructure);
 4578              		.loc 1 1902 0
 4579 0078 0123     		movs	r3, #1
 4580 007a 1893     		str	r3, [sp, #96]
1903:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
ARM GAS  /tmp/ccnQ8l0t.s 			page 157


 4581              		.loc 1 1903 0
 4582 007c 13A9     		add	r1, sp, #76
 4583 007e 2068     		ldr	r0, [r4]
 4584              	.LVL544:
 4585 0080 FFF7FEFF 		bl	SDIO_DataConfig
 4586              	.LVL545:
1906:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     sdio_cmdinitstructure.CmdIndex         = SD_CMD_HS_SWITCH;
 4587              		.loc 1 1906 0
 4588 0084 324B     		ldr	r3, .L386
 4589 0086 1993     		str	r3, [sp, #100]
1907:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure); 
 4590              		.loc 1 1907 0
 4591 0088 0625     		movs	r5, #6
 4592 008a 1A95     		str	r5, [sp, #104]
1908:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 4593              		.loc 1 1908 0
 4594 008c 19A9     		add	r1, sp, #100
 4595 008e 2068     		ldr	r0, [r4]
 4596 0090 FFF7FEFF 		bl	SDIO_SendCommand
 4597              	.LVL546:
1911:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 4598              		.loc 1 1911 0
 4599 0094 2946     		mov	r1, r5
 4600 0096 2046     		mov	r0, r4
 4601 0098 FFF7FEFF 		bl	SD_CmdResp1Error
 4602              	.LVL547:
1913:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 4603              		.loc 1 1913 0
 4604 009c 0546     		mov	r5, r0
 4605 009e 0028     		cmp	r0, #0
 4606 00a0 C6D1     		bne	.L367
 4607 00a2 0DF10C08 		add	r8, sp, #12
 4608              	.LVL548:
1918:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #else /* SDIO_STA_STBITERR */
 4609              		.loc 1 1918 0
 4610 00a6 40F22A67 		movw	r7, #1578
 4611              	.LVL549:
 4612              	.L368:
 4613 00aa 2068     		ldr	r0, [r4]
 4614              	.LVL550:
 4615              	.L369:
 4616 00ac 436B     		ldr	r3, [r0, #52]
 4617 00ae 3B42     		tst	r3, r7
 4618 00b0 11D1     		bne	.L384
1923:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       {
 4619              		.loc 1 1923 0
 4620 00b2 436B     		ldr	r3, [r0, #52]
 4621 00b4 13F4004F 		tst	r3, #32768
 4622 00b8 F8D0     		beq	.L369
 4623 00ba A8F10406 		sub	r6, r8, #4
 4624 00be 08F11C09 		add	r9, r8, #28
 4625              	.L370:
1927:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         }
 4626              		.loc 1 1927 0 discriminator 3
 4627 00c2 2068     		ldr	r0, [r4]
 4628 00c4 FFF7FEFF 		bl	SDIO_ReadFIFO
 4629              	.LVL551:
ARM GAS  /tmp/ccnQ8l0t.s 			page 158


 4630 00c8 46F8040F 		str	r0, [r6, #4]!
1925:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****         {
 4631              		.loc 1 1925 0 discriminator 3
 4632 00cc 4E45     		cmp	r6, r9
 4633 00ce F8D1     		bne	.L370
1930:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       }
 4634              		.loc 1 1930 0
 4635 00d0 08F12008 		add	r8, r8, #32
 4636              	.LVL552:
 4637 00d4 E9E7     		b	.L368
 4638              	.LVL553:
 4639              	.L384:
1934:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 4640              		.loc 1 1934 0
 4641 00d6 436B     		ldr	r3, [r0, #52]
 4642 00d8 13F0080F 		tst	r3, #8
 4643 00dc 03D0     		beq	.L372
1936:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
 4644              		.loc 1 1936 0
 4645 00de 0823     		movs	r3, #8
 4646 00e0 8363     		str	r3, [r0, #56]
 4647              	.LVL554:
1940:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
 4648              		.loc 1 1940 0
 4649 00e2 0425     		movs	r5, #4
 4650 00e4 A4E7     		b	.L367
 4651              	.LVL555:
 4652              	.L372:
1942:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 4653              		.loc 1 1942 0
 4654 00e6 436B     		ldr	r3, [r0, #52]
 4655 00e8 13F0020F 		tst	r3, #2
 4656 00ec 02D0     		beq	.L373
1944:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
 4657              		.loc 1 1944 0
 4658 00ee 0225     		movs	r5, #2
 4659 00f0 8563     		str	r5, [r0, #56]
 4660              	.LVL556:
1948:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
 4661              		.loc 1 1948 0
 4662 00f2 9DE7     		b	.L367
 4663              	.LVL557:
 4664              	.L373:
1950:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 4665              		.loc 1 1950 0
 4666 00f4 436B     		ldr	r3, [r0, #52]
 4667 00f6 13F0200F 		tst	r3, #32
 4668 00fa 03D0     		beq	.L374
1952:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
 4669              		.loc 1 1952 0
 4670 00fc 2023     		movs	r3, #32
 4671 00fe 8363     		str	r3, [r0, #56]
 4672              	.LVL558:
1956:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
 4673              		.loc 1 1956 0
 4674 0100 0625     		movs	r5, #6
 4675 0102 95E7     		b	.L367
ARM GAS  /tmp/ccnQ8l0t.s 			page 159


 4676              	.LVL559:
 4677              	.L374:
1959:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 4678              		.loc 1 1959 0
 4679 0104 436B     		ldr	r3, [r0, #52]
 4680 0106 13F4007F 		tst	r3, #512
 4681 010a 04D0     		beq	.L385
1961:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       
 4682              		.loc 1 1961 0
 4683 010c 4FF40073 		mov	r3, #512
 4684 0110 8363     		str	r3, [r0, #56]
 4685              	.LVL560:
1965:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
 4686              		.loc 1 1965 0
 4687 0112 0725     		movs	r5, #7
 4688 0114 8CE7     		b	.L367
 4689              	.LVL561:
 4690              	.L385:
1975:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 4691              		.loc 1 1975 0
 4692 0116 436B     		ldr	r3, [r0, #52]
 4693 0118 13F4001F 		tst	r3, #2097152
 4694 011c 18BF     		it	ne
 4695 011e 4FF0FF36 		movne	r6, #-1
 4696 0122 0AD0     		beq	.L377
 4697              	.LVL562:
 4698              	.L376:
1977:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       tempbuff++;
 4699              		.loc 1 1977 0
 4700 0124 FFF7FEFF 		bl	SDIO_ReadFIFO
 4701              	.LVL563:
 4702 0128 48F8040B 		str	r0, [r8], #4
 4703              	.LVL564:
1975:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 4704              		.loc 1 1975 0
 4705 012c 2068     		ldr	r0, [r4]
 4706 012e 436B     		ldr	r3, [r0, #52]
 4707 0130 13F4001F 		tst	r3, #2097152
 4708 0134 01D0     		beq	.L377
1975:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 4709              		.loc 1 1975 0 is_stmt 0 discriminator 1
 4710 0136 013E     		subs	r6, r6, #1
 4711              	.LVL565:
 4712 0138 F4D1     		bne	.L376
 4713              	.LVL566:
 4714              	.L377:
1983:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 4715              		.loc 1 1983 0 is_stmt 1
 4716 013a 40F2FF53 		movw	r3, #1535
 4717 013e 8363     		str	r3, [r0, #56]
1986:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 4718              		.loc 1 1986 0
 4719 0140 9DF81930 		ldrb	r3, [sp, #25]	@ zero_extendqisi2
 4720 0144 03F00203 		and	r3, r3, #2
1988:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     } 
 4721              		.loc 1 1988 0
 4722 0148 002B     		cmp	r3, #0
ARM GAS  /tmp/ccnQ8l0t.s 			page 160


 4723 014a 08BF     		it	eq
 4724 014c 2725     		moveq	r5, #39
 4725 014e 6FE7     		b	.L367
 4726              	.L387:
 4727              		.align	2
 4728              	.L386:
 4729 0150 01FFFF80 		.word	-2130706687
 4730              		.cfi_endproc
 4731              	.LFE147:
 4733              		.section	.text.HAL_SD_SendSDStatus,"ax",%progbits
 4734              		.align	1
 4735              		.global	HAL_SD_SendSDStatus
 4736              		.syntax unified
 4737              		.thumb
 4738              		.thumb_func
 4739              		.fpu fpv4-sp-d16
 4741              	HAL_SD_SendSDStatus:
 4742              	.LFB148:
2022:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_CmdInitTypeDef  sdio_cmdinitstructure;
 4743              		.loc 1 2022 0
 4744              		.cfi_startproc
 4745              		@ args = 0, pretend = 0, frame = 48
 4746              		@ frame_needed = 0, uses_anonymous_args = 0
 4747              	.LVL567:
 4748 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 4749              	.LCFI54:
 4750              		.cfi_def_cfa_offset 28
 4751              		.cfi_offset 4, -28
 4752              		.cfi_offset 5, -24
 4753              		.cfi_offset 6, -20
 4754              		.cfi_offset 7, -16
 4755              		.cfi_offset 8, -12
 4756              		.cfi_offset 9, -8
 4757              		.cfi_offset 14, -4
 4758 0004 8DB0     		sub	sp, sp, #52
 4759              	.LCFI55:
 4760              		.cfi_def_cfa_offset 80
 4761 0006 0546     		mov	r5, r0
 4762 0008 0E46     		mov	r6, r1
 4763              	.LVL568:
2029:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4764              		.loc 1 2029 0
 4765 000a 0020     		movs	r0, #0
 4766              	.LVL569:
 4767 000c FFF7FEFF 		bl	SDIO_GetResponse
 4768              	.LVL570:
 4769 0010 10F0007F 		tst	r0, #33554432
 4770 0014 04D0     		beq	.L406
2033:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 4771              		.loc 1 2033 0
 4772 0016 0E24     		movs	r4, #14
 4773              	.LVL571:
 4774              	.L389:
2156:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 4775              		.loc 1 2156 0
 4776 0018 2046     		mov	r0, r4
 4777 001a 0DB0     		add	sp, sp, #52
ARM GAS  /tmp/ccnQ8l0t.s 			page 161


 4778              	.LCFI56:
 4779              		.cfi_remember_state
 4780              		.cfi_def_cfa_offset 28
 4781              		@ sp needed
 4782 001c BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 4783              	.LVL572:
 4784              	.L406:
 4785              	.LCFI57:
 4786              		.cfi_restore_state
2037:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SET_BLOCKLEN;
 4787              		.loc 1 2037 0
 4788 0020 4023     		movs	r3, #64
 4789 0022 0793     		str	r3, [sp, #28]
2038:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 4790              		.loc 1 2038 0
 4791 0024 1024     		movs	r4, #16
 4792 0026 0894     		str	r4, [sp, #32]
2039:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 4793              		.loc 1 2039 0
 4794 0028 0993     		str	r3, [sp, #36]
2040:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 4795              		.loc 1 2040 0
 4796 002a 0023     		movs	r3, #0
 4797 002c 0A93     		str	r3, [sp, #40]
2041:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 4798              		.loc 1 2041 0
 4799 002e 4FF48063 		mov	r3, #1024
 4800 0032 0B93     		str	r3, [sp, #44]
2042:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 4801              		.loc 1 2042 0
 4802 0034 07A9     		add	r1, sp, #28
 4803 0036 2868     		ldr	r0, [r5]
 4804 0038 FFF7FEFF 		bl	SDIO_SendCommand
 4805              	.LVL573:
2045:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 4806              		.loc 1 2045 0
 4807 003c 2146     		mov	r1, r4
 4808 003e 2846     		mov	r0, r5
 4809 0040 FFF7FEFF 		bl	SD_CmdResp1Error
 4810              	.LVL574:
2047:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4811              		.loc 1 2047 0
 4812 0044 0446     		mov	r4, r0
 4813 0046 0028     		cmp	r0, #0
 4814 0048 E6D1     		bne	.L389
2053:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_APP_CMD;
 4815              		.loc 1 2053 0
 4816 004a 6B6A     		ldr	r3, [r5, #36]
 4817 004c 1B04     		lsls	r3, r3, #16
 4818 004e 0793     		str	r3, [sp, #28]
2054:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 4819              		.loc 1 2054 0
 4820 0050 3724     		movs	r4, #55
 4821 0052 0894     		str	r4, [sp, #32]
2055:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 4822              		.loc 1 2055 0
 4823 0054 07A9     		add	r1, sp, #28
ARM GAS  /tmp/ccnQ8l0t.s 			page 162


 4824 0056 2868     		ldr	r0, [r5]
 4825              	.LVL575:
 4826 0058 FFF7FEFF 		bl	SDIO_SendCommand
 4827              	.LVL576:
2058:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 4828              		.loc 1 2058 0
 4829 005c 2146     		mov	r1, r4
 4830 005e 2846     		mov	r0, r5
 4831 0060 FFF7FEFF 		bl	SD_CmdResp1Error
 4832              	.LVL577:
2060:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4833              		.loc 1 2060 0
 4834 0064 0446     		mov	r4, r0
 4835 0066 0028     		cmp	r0, #0
 4836 0068 D6D1     		bne	.L389
2066:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataLength    = 64U;
 4837              		.loc 1 2066 0
 4838 006a 4FF0FF33 		mov	r3, #-1
 4839 006e 0193     		str	r3, [sp, #4]
2067:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DataBlockSize = SDIO_DATABLOCK_SIZE_64B;
 4840              		.loc 1 2067 0
 4841 0070 4023     		movs	r3, #64
 4842 0072 0293     		str	r3, [sp, #8]
2068:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferDir   = SDIO_TRANSFER_DIR_TO_SDIO;
 4843              		.loc 1 2068 0
 4844 0074 6023     		movs	r3, #96
 4845 0076 0393     		str	r3, [sp, #12]
2069:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.TransferMode  = SDIO_TRANSFER_MODE_BLOCK;
 4846              		.loc 1 2069 0
 4847 0078 0223     		movs	r3, #2
 4848 007a 0493     		str	r3, [sp, #16]
2070:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_datainitstructure.DPSM          = SDIO_DPSM_ENABLE;
 4849              		.loc 1 2070 0
 4850 007c 0024     		movs	r4, #0
 4851 007e 0594     		str	r4, [sp, #20]
2071:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_DataConfig(hsd->Instance, &sdio_datainitstructure);
 4852              		.loc 1 2071 0
 4853 0080 0123     		movs	r3, #1
 4854 0082 0693     		str	r3, [sp, #24]
2072:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 4855              		.loc 1 2072 0
 4856 0084 01A9     		add	r1, sp, #4
 4857 0086 2868     		ldr	r0, [r5]
 4858              	.LVL578:
 4859 0088 FFF7FEFF 		bl	SDIO_DataConfig
 4860              	.LVL579:
2075:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SD_APP_STATUS;
 4861              		.loc 1 2075 0
 4862 008c 0794     		str	r4, [sp, #28]
2076:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 4863              		.loc 1 2076 0
 4864 008e 0D24     		movs	r4, #13
 4865 0090 0894     		str	r4, [sp, #32]
2077:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 4866              		.loc 1 2077 0
 4867 0092 07A9     		add	r1, sp, #28
 4868 0094 2868     		ldr	r0, [r5]
ARM GAS  /tmp/ccnQ8l0t.s 			page 163


 4869 0096 FFF7FEFF 		bl	SDIO_SendCommand
 4870              	.LVL580:
2080:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 4871              		.loc 1 2080 0
 4872 009a 2146     		mov	r1, r4
 4873 009c 2846     		mov	r0, r5
 4874 009e FFF7FEFF 		bl	SD_CmdResp1Error
 4875              	.LVL581:
2082:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4876              		.loc 1 2082 0
 4877 00a2 0446     		mov	r4, r0
 4878 00a4 0028     		cmp	r0, #0
 4879 00a6 B7D1     		bne	.L389
2089:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** #else /* SDIO_STA_STBITERR not defined */
 4880              		.loc 1 2089 0
 4881 00a8 40F22A68 		movw	r8, #1578
 4882              	.LVL582:
 4883              	.L390:
 4884 00ac 2868     		ldr	r0, [r5]
 4885              	.LVL583:
 4886              	.L391:
 4887 00ae 436B     		ldr	r3, [r0, #52]
 4888 00b0 13EA080F 		tst	r3, r8
 4889 00b4 0FD1     		bne	.L407
2094:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     {
 4890              		.loc 1 2094 0
 4891 00b6 436B     		ldr	r3, [r0, #52]
 4892 00b8 13F4004F 		tst	r3, #32768
 4893 00bc F7D0     		beq	.L391
 4894 00be 371F     		subs	r7, r6, #4
 4895 00c0 06F11C09 		add	r9, r6, #28
 4896              	.L392:
2098:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       }
 4897              		.loc 1 2098 0 discriminator 3
 4898 00c4 2868     		ldr	r0, [r5]
 4899 00c6 FFF7FEFF 		bl	SDIO_ReadFIFO
 4900              	.LVL584:
 4901 00ca 47F8040F 		str	r0, [r7, #4]!
2096:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****       {
 4902              		.loc 1 2096 0 discriminator 3
 4903 00ce 4F45     		cmp	r7, r9
 4904 00d0 F8D1     		bne	.L392
2101:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     }
 4905              		.loc 1 2101 0
 4906 00d2 2036     		adds	r6, r6, #32
 4907              	.LVL585:
 4908 00d4 EAE7     		b	.L390
 4909              	.LVL586:
 4910              	.L407:
2105:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4911              		.loc 1 2105 0
 4912 00d6 436B     		ldr	r3, [r0, #52]
 4913 00d8 13F0080F 		tst	r3, #8
 4914 00dc 03D0     		beq	.L394
2107:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 4915              		.loc 1 2107 0
 4916 00de 0823     		movs	r3, #8
ARM GAS  /tmp/ccnQ8l0t.s 			page 164


 4917 00e0 8363     		str	r3, [r0, #56]
 4918              	.LVL587:
2111:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 4919              		.loc 1 2111 0
 4920 00e2 0424     		movs	r4, #4
 4921 00e4 98E7     		b	.L389
 4922              	.LVL588:
 4923              	.L394:
2113:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4924              		.loc 1 2113 0
 4925 00e6 436B     		ldr	r3, [r0, #52]
 4926 00e8 13F0020F 		tst	r3, #2
 4927 00ec 02D0     		beq	.L395
2115:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 4928              		.loc 1 2115 0
 4929 00ee 0224     		movs	r4, #2
 4930 00f0 8463     		str	r4, [r0, #56]
 4931              	.LVL589:
2119:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 4932              		.loc 1 2119 0
 4933 00f2 91E7     		b	.L389
 4934              	.LVL590:
 4935              	.L395:
2121:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4936              		.loc 1 2121 0
 4937 00f4 436B     		ldr	r3, [r0, #52]
 4938 00f6 13F0200F 		tst	r3, #32
 4939 00fa 03D0     		beq	.L396
2123:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 4940              		.loc 1 2123 0
 4941 00fc 2023     		movs	r3, #32
 4942 00fe 8363     		str	r3, [r0, #56]
 4943              	.LVL591:
2127:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 4944              		.loc 1 2127 0
 4945 0100 0624     		movs	r4, #6
 4946 0102 89E7     		b	.L389
 4947              	.LVL592:
 4948              	.L396:
2130:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4949              		.loc 1 2130 0
 4950 0104 436B     		ldr	r3, [r0, #52]
 4951 0106 13F4007F 		tst	r3, #512
 4952 010a 04D0     		beq	.L408
2132:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 4953              		.loc 1 2132 0
 4954 010c 4FF40073 		mov	r3, #512
 4955 0110 8363     		str	r3, [r0, #56]
 4956              	.LVL593:
2136:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 4957              		.loc 1 2136 0
 4958 0112 0724     		movs	r4, #7
 4959 0114 80E7     		b	.L389
 4960              	.LVL594:
 4961              	.L408:
2145:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4962              		.loc 1 2145 0
ARM GAS  /tmp/ccnQ8l0t.s 			page 165


 4963 0116 436B     		ldr	r3, [r0, #52]
 4964 0118 13F4001F 		tst	r3, #2097152
 4965 011c 18BF     		it	ne
 4966 011e 4FF0FF37 		movne	r7, #-1
 4967 0122 0AD0     		beq	.L399
 4968              	.LVL595:
 4969              	.L398:
2147:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     pSDstatus++;
 4970              		.loc 1 2147 0
 4971 0124 FFF7FEFF 		bl	SDIO_ReadFIFO
 4972              	.LVL596:
 4973 0128 46F8040B 		str	r0, [r6], #4
 4974              	.LVL597:
2145:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4975              		.loc 1 2145 0
 4976 012c 2868     		ldr	r0, [r5]
 4977 012e 436B     		ldr	r3, [r0, #52]
 4978 0130 13F4001F 		tst	r3, #2097152
 4979 0134 01D0     		beq	.L399
2145:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 4980              		.loc 1 2145 0 is_stmt 0 discriminator 1
 4981 0136 013F     		subs	r7, r7, #1
 4982              	.LVL598:
 4983 0138 F4D1     		bne	.L398
 4984              	.LVL599:
 4985              	.L399:
2153:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 4986              		.loc 1 2153 0 is_stmt 1
 4987 013a 40F2FF53 		movw	r3, #1535
 4988 013e 8363     		str	r3, [r0, #56]
2155:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** }
 4989              		.loc 1 2155 0
 4990 0140 6AE7     		b	.L389
 4991              		.cfi_endproc
 4992              	.LFE148:
 4994              		.section	.text.HAL_SD_GetStatus,"ax",%progbits
 4995              		.align	1
 4996              		.global	HAL_SD_GetStatus
 4997              		.syntax unified
 4998              		.thumb
 4999              		.thumb_func
 5000              		.fpu fpv4-sp-d16
 5002              	HAL_SD_GetStatus:
 5003              	.LFB149:
2164:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_CardStateTypedef cardstate =  SD_CARD_TRANSFER;
 5004              		.loc 1 2164 0
 5005              		.cfi_startproc
 5006              		@ args = 0, pretend = 0, frame = 24
 5007              		@ frame_needed = 0, uses_anonymous_args = 0
 5008              	.LVL600:
 5009 0000 30B5     		push	{r4, r5, lr}
 5010              	.LCFI58:
 5011              		.cfi_def_cfa_offset 12
 5012              		.cfi_offset 4, -12
 5013              		.cfi_offset 5, -8
 5014              		.cfi_offset 14, -4
 5015 0002 87B0     		sub	sp, sp, #28
ARM GAS  /tmp/ccnQ8l0t.s 			page 166


 5016              	.LCFI59:
 5017              		.cfi_def_cfa_offset 40
 5018 0004 0446     		mov	r4, r0
 5019              	.LVL601:
 5020              	.LBB66:
 5021              	.LBB67:
 5022              	.LBB68:
 5023              	.LBB69:
2673:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CmdIndex         = SD_CMD_SEND_STATUS;
 5024              		.loc 1 2673 0
 5025 0006 436A     		ldr	r3, [r0, #36]
 5026 0008 1B04     		lsls	r3, r3, #16
 5027 000a 0193     		str	r3, [sp, #4]
2674:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.Response         = SDIO_RESPONSE_SHORT;
 5028              		.loc 1 2674 0
 5029 000c 0D25     		movs	r5, #13
 5030 000e 0295     		str	r5, [sp, #8]
2675:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.WaitForInterrupt = SDIO_WAIT_NO;
 5031              		.loc 1 2675 0
 5032 0010 4023     		movs	r3, #64
 5033 0012 0393     		str	r3, [sp, #12]
2676:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   sdio_cmdinitstructure.CPSM             = SDIO_CPSM_ENABLE;
 5034              		.loc 1 2676 0
 5035 0014 0023     		movs	r3, #0
 5036 0016 0493     		str	r3, [sp, #16]
2677:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   SDIO_SendCommand(hsd->Instance, &sdio_cmdinitstructure);
 5037              		.loc 1 2677 0
 5038 0018 4FF48063 		mov	r3, #1024
 5039 001c 0593     		str	r3, [sp, #20]
2678:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5040              		.loc 1 2678 0
 5041 001e 01A9     		add	r1, sp, #4
 5042 0020 0068     		ldr	r0, [r0]
 5043              	.LVL602:
 5044 0022 FFF7FEFF 		bl	SDIO_SendCommand
 5045              	.LVL603:
2681:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5046              		.loc 1 2681 0
 5047 0026 2946     		mov	r1, r5
 5048 0028 2046     		mov	r0, r4
 5049 002a FFF7FEFF 		bl	SD_CmdResp1Error
 5050              	.LVL604:
2683:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 5051              		.loc 1 2683 0
 5052 002e 10B1     		cbz	r0, .L414
 5053              	.LVL605:
 5054              	.LBE69:
 5055              	.LBE68:
 5056              	.LBE67:
 5057              	.LBE66:
2177:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 5058              		.loc 1 2177 0
 5059 0030 0220     		movs	r0, #2
 5060              	.L412:
2183:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 5061              		.loc 1 2183 0
 5062 0032 07B0     		add	sp, sp, #28
ARM GAS  /tmp/ccnQ8l0t.s 			page 167


 5063              	.LCFI60:
 5064              		.cfi_remember_state
 5065              		.cfi_def_cfa_offset 12
 5066              		@ sp needed
 5067 0034 30BD     		pop	{r4, r5, pc}
 5068              	.LVL606:
 5069              	.L414:
 5070              	.LCFI61:
 5071              		.cfi_restore_state
 5072              	.LBB73:
 5073              	.LBB72:
 5074              	.LBB71:
 5075              	.LBB70:
2689:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5076              		.loc 1 2689 0
 5077 0036 FFF7FEFF 		bl	SDIO_GetResponse
 5078              	.LVL607:
 5079              	.LBE70:
 5080              	.LBE71:
 5081              	.LBE72:
 5082              	.LBE73:
2171:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 5083              		.loc 1 2171 0
 5084 003a C0F34320 		ubfx	r0, r0, #9, #4
2173:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 5085              		.loc 1 2173 0
 5086 003e 0438     		subs	r0, r0, #4
 5087 0040 18BF     		it	ne
 5088 0042 0120     		movne	r0, #1
 5089 0044 F5E7     		b	.L412
 5090              		.cfi_endproc
 5091              	.LFE149:
 5093              		.section	.text.HAL_SD_CheckWriteOperation,"ax",%progbits
 5094              		.align	1
 5095              		.global	HAL_SD_CheckWriteOperation
 5096              		.syntax unified
 5097              		.thumb
 5098              		.thumb_func
 5099              		.fpu fpv4-sp-d16
 5101              	HAL_SD_CheckWriteOperation:
 5102              	.LFB135:
1200:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
 5103              		.loc 1 1200 0
 5104              		.cfi_startproc
 5105              		@ args = 0, pretend = 0, frame = 0
 5106              		@ frame_needed = 0, uses_anonymous_args = 0
 5107              	.LVL608:
 5108 0000 70B5     		push	{r4, r5, r6, lr}
 5109              	.LCFI62:
 5110              		.cfi_def_cfa_offset 16
 5111              		.cfi_offset 4, -16
 5112              		.cfi_offset 5, -12
 5113              		.cfi_offset 6, -8
 5114              		.cfi_offset 14, -4
 5115 0002 0446     		mov	r4, r0
 5116 0004 0D46     		mov	r5, r1
 5117              	.LVL609:
ARM GAS  /tmp/ccnQ8l0t.s 			page 168


1207:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp2 = hsd->SdTransferCplt;
 5118              		.loc 1 1207 0
 5119 0006 026D     		ldr	r2, [r0, #80]
 5120              	.LVL610:
1208:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   tmp3 = (HAL_SD_ErrorTypedef)hsd->SdTransferErr;
 5121              		.loc 1 1208 0
 5122 0008 816C     		ldr	r1, [r0, #72]
 5123              	.LVL611:
1209:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     
 5124              		.loc 1 1209 0
 5125 000a C36C     		ldr	r3, [r0, #76]
 5126              	.LVL612:
1211:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 5127              		.loc 1 1211 0
 5128 000c 002A     		cmp	r2, #0
 5129 000e 30D1     		bne	.L416
 5130 0010 DBB2     		uxtb	r3, r3
 5131 0012 0029     		cmp	r1, #0
 5132 0014 2DD1     		bne	.L416
 5133 0016 63BB     		cbnz	r3, .L416
 5134 0018 5DB3     		cbz	r5, .L416
 5135 001a 2A46     		mov	r2, r5
 5136              	.LVL613:
 5137              	.L421:
1213:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp2 = hsd->SdTransferCplt;
 5138              		.loc 1 1213 0
 5139 001c 216D     		ldr	r1, [r4, #80]
 5140              	.LVL614:
1214:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     tmp3 = (HAL_SD_ErrorTypedef)hsd->SdTransferErr;
 5141              		.loc 1 1214 0
 5142 001e A06C     		ldr	r0, [r4, #72]
 5143              	.LVL615:
1215:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****     timeout--;
 5144              		.loc 1 1215 0
 5145 0020 E36C     		ldr	r3, [r4, #76]
 5146 0022 DBB2     		uxtb	r3, r3
 5147              	.LVL616:
1216:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 5148              		.loc 1 1216 0
 5149 0024 013A     		subs	r2, r2, #1
 5150              	.LVL617:
1211:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 5151              		.loc 1 1211 0
 5152 0026 19B9     		cbnz	r1, .L418
1211:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 5153              		.loc 1 1211 0 is_stmt 0 discriminator 1
 5154 0028 10B9     		cbnz	r0, .L418
1211:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 5155              		.loc 1 1211 0 discriminator 2
 5156 002a 0BB9     		cbnz	r3, .L418
1211:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 5157              		.loc 1 1211 0 discriminator 3
 5158 002c 002A     		cmp	r2, #0
 5159 002e F5D1     		bne	.L421
 5160              	.L418:
 5161              	.LVL618:
1222:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
ARM GAS  /tmp/ccnQ8l0t.s 			page 169


 5162              		.loc 1 1222 0 is_stmt 1
 5163 0030 2268     		ldr	r2, [r4]
 5164 0032 536B     		ldr	r3, [r2, #52]
 5165              	.LVL619:
 5166 0034 13F4805F 		tst	r3, #4096
 5167 0038 06D0     		beq	.L419
 5168              	.LVL620:
 5169              	.L422:
1224:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 5170              		.loc 1 1224 0
 5171 003a 013D     		subs	r5, r5, #1
 5172              	.LVL621:
1222:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 5173              		.loc 1 1222 0
 5174 003c 536B     		ldr	r3, [r2, #52]
 5175 003e 13F4805F 		tst	r3, #4096
 5176 0042 01D0     		beq	.L419
1222:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 5177              		.loc 1 1222 0 is_stmt 0 discriminator 1
 5178 0044 002D     		cmp	r5, #0
 5179 0046 F8D1     		bne	.L422
 5180              	.L419:
1228:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 5181              		.loc 1 1228 0 is_stmt 1
 5182 0048 636D     		ldr	r3, [r4, #84]
 5183 004a 032B     		cmp	r3, #3
 5184 004c 19D0     		beq	.L434
1201:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   uint32_t timeout = Timeout;
 5185              		.loc 1 1201 0
 5186 004e 0026     		movs	r6, #0
 5187              	.LVL622:
 5188              	.L423:
1233:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 5189              		.loc 1 1233 0
 5190 0050 15B9     		cbnz	r5, .L424
1235:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 5191              		.loc 1 1235 0 discriminator 1
 5192 0052 002E     		cmp	r6, #0
 5193 0054 08BF     		it	eq
 5194 0056 0426     		moveq	r6, #4
 5195              	.LVL623:
 5196              	.L424:
1239:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5197              		.loc 1 1239 0
 5198 0058 2368     		ldr	r3, [r4]
 5199 005a 40F2FF52 		movw	r2, #1535
 5200 005e 9A63     		str	r2, [r3, #56]
1242:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 5201              		.loc 1 1242 0
 5202 0060 E36C     		ldr	r3, [r4, #76]
 5203 0062 9BB9     		cbnz	r3, .L435
 5204              	.L428:
1248:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {    
 5205              		.loc 1 1248 0 discriminator 1
 5206 0064 2046     		mov	r0, r4
 5207 0066 FFF7FEFF 		bl	HAL_SD_GetStatus
 5208              	.LVL624:
ARM GAS  /tmp/ccnQ8l0t.s 			page 170


 5209 006a 0028     		cmp	r0, #0
 5210 006c FAD1     		bne	.L428
 5211              	.LVL625:
 5212              	.L432:
1253:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c **** 
 5213              		.loc 1 1253 0
 5214 006e 3046     		mov	r0, r6
 5215 0070 70BD     		pop	{r4, r5, r6, pc}
 5216              	.LVL626:
 5217              	.L416:
1222:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 5218              		.loc 1 1222 0
 5219 0072 2268     		ldr	r2, [r4]
 5220              	.LVL627:
 5221 0074 536B     		ldr	r3, [r2, #52]
 5222 0076 13F4805F 		tst	r3, #4096
 5223 007a E5D0     		beq	.L419
 5224 007c 002D     		cmp	r5, #0
 5225 007e E3D0     		beq	.L419
 5226 0080 DBE7     		b	.L422
 5227              	.LVL628:
 5228              	.L434:
1230:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 5229              		.loc 1 1230 0
 5230 0082 2046     		mov	r0, r4
 5231 0084 FFF7FEFF 		bl	HAL_SD_StopTransfer
 5232              	.LVL629:
 5233 0088 0646     		mov	r6, r0
 5234              	.LVL630:
 5235 008a E1E7     		b	.L423
 5236              	.L435:
1244:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   }
 5237              		.loc 1 1244 0
 5238 008c E66C     		ldr	r6, [r4, #76]
 5239              	.LVL631:
 5240 008e F6B2     		uxtb	r6, r6
 5241 0090 EDE7     		b	.L432
 5242              		.cfi_endproc
 5243              	.LFE135:
 5245              		.section	.text.HAL_SD_GetCardStatus,"ax",%progbits
 5246              		.align	1
 5247              		.global	HAL_SD_GetCardStatus
 5248              		.syntax unified
 5249              		.thumb
 5250              		.thumb_func
 5251              		.fpu fpv4-sp-d16
 5253              	HAL_SD_GetCardStatus:
 5254              	.LFB150:
2193:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   HAL_SD_ErrorTypedef errorstate = SD_OK;
 5255              		.loc 1 2193 0
 5256              		.cfi_startproc
 5257              		@ args = 0, pretend = 0, frame = 64
 5258              		@ frame_needed = 0, uses_anonymous_args = 0
 5259              	.LVL632:
 5260 0000 10B5     		push	{r4, lr}
 5261              	.LCFI63:
 5262              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccnQ8l0t.s 			page 171


 5263              		.cfi_offset 4, -8
 5264              		.cfi_offset 14, -4
 5265 0002 90B0     		sub	sp, sp, #64
 5266              	.LCFI64:
 5267              		.cfi_def_cfa_offset 72
 5268 0004 0C46     		mov	r4, r1
 5269              	.LVL633:
2198:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5270              		.loc 1 2198 0
 5271 0006 6946     		mov	r1, sp
 5272              	.LVL634:
 5273 0008 FFF7FEFF 		bl	HAL_SD_SendSDStatus
 5274              	.LVL635:
2200:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   {
 5275              		.loc 1 2200 0
 5276 000c 0146     		mov	r1, r0
 5277 000e 0028     		cmp	r0, #0
 5278 0010 30D1     		bne	.L437
2206:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->DAT_BUS_WIDTH = (uint8_t)tmp;
 5279              		.loc 1 2206 0
 5280 0012 009B     		ldr	r3, [sp]
 5281              	.LVL636:
2207:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5282              		.loc 1 2207 0
 5283 0014 C3F38112 		ubfx	r2, r3, #6, #2
 5284 0018 2270     		strb	r2, [r4]
 5285              	.LVL637:
2211:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5286              		.loc 1 2211 0
 5287 001a C3F34013 		ubfx	r3, r3, #5, #1
 5288              	.LVL638:
 5289 001e 6370     		strb	r3, [r4, #1]
 5290              	.LVL639:
2215:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5291              		.loc 1 2215 0
 5292 0020 0022     		movs	r2, #0
 5293 0022 6280     		strh	r2, [r4, #2]	@ movhi
 5294              	.LVL640:
2219:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5295              		.loc 1 2219 0
 5296 0024 6388     		ldrh	r3, [r4, #2]
 5297 0026 9BB2     		uxth	r3, r3
 5298 0028 9DF80C00 		ldrb	r0, [sp, #12]	@ zero_extendqisi2
 5299              	.LVL641:
 5300 002c 0343     		orrs	r3, r3, r0
 5301 002e 6380     		strh	r3, [r4, #2]	@ movhi
 5302              	.LVL642:
2223:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5303              		.loc 1 2223 0
 5304 0030 6260     		str	r2, [r4, #4]
 5305              	.LVL643:
2227:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5306              		.loc 1 2227 0
 5307 0032 6368     		ldr	r3, [r4, #4]
 5308 0034 6360     		str	r3, [r4, #4]
 5309              	.LVL644:
2231:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
ARM GAS  /tmp/ccnQ8l0t.s 			page 172


 5310              		.loc 1 2231 0
 5311 0036 6368     		ldr	r3, [r4, #4]
 5312 0038 6360     		str	r3, [r4, #4]
 5313              	.LVL645:
2235:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5314              		.loc 1 2235 0
 5315 003a 6068     		ldr	r0, [r4, #4]
2234:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->SIZE_OF_PROTECTED_AREA |= (uint8_t)tmp;
 5316              		.loc 1 2234 0
 5317 003c 9DF81C30 		ldrb	r3, [sp, #28]	@ zero_extendqisi2
2235:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5318              		.loc 1 2235 0
 5319 0040 0343     		orrs	r3, r3, r0
 5320 0042 6360     		str	r3, [r4, #4]
 5321              	.LVL646:
2239:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5322              		.loc 1 2239 0
 5323 0044 9DF82030 		ldrb	r3, [sp, #32]	@ zero_extendqisi2
 5324 0048 2372     		strb	r3, [r4, #8]
 5325              	.LVL647:
2243:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5326              		.loc 1 2243 0
 5327 004a 9DF82430 		ldrb	r3, [sp, #36]	@ zero_extendqisi2
 5328 004e 6372     		strb	r3, [r4, #9]
 5329              	.LVL648:
2247:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5330              		.loc 1 2247 0
 5331 0050 0A9B     		ldr	r3, [sp, #40]
 5332 0052 C3F30313 		ubfx	r3, r3, #4, #4
 5333 0056 A372     		strb	r3, [r4, #10]
 5334              	.LVL649:
2251:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5335              		.loc 1 2251 0
 5336 0058 A281     		strh	r2, [r4, #12]	@ movhi
 5337              	.LVL650:
2255:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5338              		.loc 1 2255 0
 5339 005a A389     		ldrh	r3, [r4, #12]
 5340 005c 9BB2     		uxth	r3, r3
 5341 005e 9DF83020 		ldrb	r2, [sp, #48]	@ zero_extendqisi2
 5342 0062 1343     		orrs	r3, r3, r2
 5343 0064 A381     		strh	r3, [r4, #12]	@ movhi
2258:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   pCardStatus->ERASE_TIMEOUT = (uint8_t)tmp;
 5344              		.loc 1 2258 0
 5345 0066 0D9B     		ldr	r3, [sp, #52]
 5346              	.LVL651:
2259:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5347              		.loc 1 2259 0
 5348 0068 C3F38502 		ubfx	r2, r3, #2, #6
 5349 006c A273     		strb	r2, [r4, #14]
 5350              	.LVL652:
2263:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****   
 5351              		.loc 1 2263 0
 5352 006e 03F00303 		and	r3, r3, #3
 5353              	.LVL653:
 5354 0072 E373     		strb	r3, [r4, #15]
 5355              	.LVL654:
ARM GAS  /tmp/ccnQ8l0t.s 			page 173


 5356              	.L437:
2266:Drivers/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_sd.c ****          
 5357              		.loc 1 2266 0
 5358 0074 0846     		mov	r0, r1
 5359 0076 10B0     		add	sp, sp, #64
 5360              	.LCFI65:
 5361              		.cfi_def_cfa_offset 8
 5362              		@ sp needed
 5363 0078 10BD     		pop	{r4, pc}
 5364              		.cfi_endproc
 5365              	.LFE150:
 5367              		.text
 5368              	.Letext0:
 5369              		.file 2 "/usr/arm-none-eabi/include/machine/_default_types.h"
 5370              		.file 3 "/usr/arm-none-eabi/include/sys/_stdint.h"
 5371              		.file 4 "Drivers/CMSIS/Include/core_cm4.h"
 5372              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 5373              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f401xe.h"
 5374              		.file 7 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 5375              		.file 8 "/usr/arm-none-eabi/include/sys/lock.h"
 5376              		.file 9 "/usr/arm-none-eabi/include/sys/_types.h"
 5377              		.file 10 "/usr/lib/gcc/arm-none-eabi/6.3.0/include/stddef.h"
 5378              		.file 11 "/usr/arm-none-eabi/include/sys/reent.h"
 5379              		.file 12 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 5380              		.file 13 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 5381              		.file 14 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_ll_sdmmc.h"
 5382              		.file 15 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_sd.h"
 5383              		.file 16 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
ARM GAS  /tmp/ccnQ8l0t.s 			page 174


DEFINED SYMBOLS
                            *ABS*:0000000000000000 stm32f4xx_hal_sd.c
     /tmp/ccnQ8l0t.s:18     .text.SD_CmdResp2Error:0000000000000000 $t
     /tmp/ccnQ8l0t.s:24     .text.SD_CmdResp2Error:0000000000000000 SD_CmdResp2Error
     /tmp/ccnQ8l0t.s:78     .text.SD_CmdResp1Error:0000000000000000 $t
     /tmp/ccnQ8l0t.s:84     .text.SD_CmdResp1Error:0000000000000000 SD_CmdResp1Error
     /tmp/ccnQ8l0t.s:342    .text.SD_CmdResp1Error:0000000000000118 $d
     /tmp/ccnQ8l0t.s:347    .text.SD_IsCardProgramming:0000000000000000 $t
     /tmp/ccnQ8l0t.s:353    .text.SD_IsCardProgramming:0000000000000000 SD_IsCardProgramming
     /tmp/ccnQ8l0t.s:628    .text.SD_IsCardProgramming:0000000000000170 $d
     /tmp/ccnQ8l0t.s:633    .text.SD_FindSCR:0000000000000000 $t
     /tmp/ccnQ8l0t.s:639    .text.SD_FindSCR:0000000000000000 SD_FindSCR
     /tmp/ccnQ8l0t.s:883    .text.HAL_SD_MspInit:0000000000000000 $t
     /tmp/ccnQ8l0t.s:890    .text.HAL_SD_MspInit:0000000000000000 HAL_SD_MspInit
     /tmp/ccnQ8l0t.s:903    .text.HAL_SD_MspDeInit:0000000000000000 $t
     /tmp/ccnQ8l0t.s:910    .text.HAL_SD_MspDeInit:0000000000000000 HAL_SD_MspDeInit
     /tmp/ccnQ8l0t.s:923    .text.HAL_SD_DeInit:0000000000000000 $t
     /tmp/ccnQ8l0t.s:930    .text.HAL_SD_DeInit:0000000000000000 HAL_SD_DeInit
     /tmp/ccnQ8l0t.s:965    .text.HAL_SD_ReadBlocks_DMA:0000000000000000 $t
     /tmp/ccnQ8l0t.s:972    .text.HAL_SD_ReadBlocks_DMA:0000000000000000 HAL_SD_ReadBlocks_DMA
     /tmp/ccnQ8l0t.s:1157   .text.HAL_SD_ReadBlocks_DMA:00000000000000e8 $d
     /tmp/ccnQ8l0t.s:1794   .text.SD_DMA_RxCplt:0000000000000000 SD_DMA_RxCplt
     /tmp/ccnQ8l0t.s:1856   .text.SD_DMA_RxError:0000000000000000 SD_DMA_RxError
     /tmp/ccnQ8l0t.s:1164   .text.HAL_SD_WriteBlocks_DMA:0000000000000000 $t
     /tmp/ccnQ8l0t.s:1171   .text.HAL_SD_WriteBlocks_DMA:0000000000000000 HAL_SD_WriteBlocks_DMA
     /tmp/ccnQ8l0t.s:1354   .text.HAL_SD_WriteBlocks_DMA:00000000000000e4 $d
     /tmp/ccnQ8l0t.s:1907   .text.SD_DMA_TxCplt:0000000000000000 SD_DMA_TxCplt
     /tmp/ccnQ8l0t.s:1969   .text.SD_DMA_TxError:0000000000000000 SD_DMA_TxError
     /tmp/ccnQ8l0t.s:1361   .text.HAL_SD_Erase:0000000000000000 $t
     /tmp/ccnQ8l0t.s:1368   .text.HAL_SD_Erase:0000000000000000 HAL_SD_Erase
     /tmp/ccnQ8l0t.s:1594   .text.HAL_SD_Erase:0000000000000124 $d
     /tmp/ccnQ8l0t.s:1599   .text.HAL_SD_XferCpltCallback:0000000000000000 $t
     /tmp/ccnQ8l0t.s:1606   .text.HAL_SD_XferCpltCallback:0000000000000000 HAL_SD_XferCpltCallback
     /tmp/ccnQ8l0t.s:1619   .text.HAL_SD_XferErrorCallback:0000000000000000 $t
     /tmp/ccnQ8l0t.s:1626   .text.HAL_SD_XferErrorCallback:0000000000000000 HAL_SD_XferErrorCallback
     /tmp/ccnQ8l0t.s:1639   .text.HAL_SD_IRQHandler:0000000000000000 $t
     /tmp/ccnQ8l0t.s:1646   .text.HAL_SD_IRQHandler:0000000000000000 HAL_SD_IRQHandler
     /tmp/ccnQ8l0t.s:1768   .text.HAL_SD_DMA_RxCpltCallback:0000000000000000 $t
     /tmp/ccnQ8l0t.s:1775   .text.HAL_SD_DMA_RxCpltCallback:0000000000000000 HAL_SD_DMA_RxCpltCallback
     /tmp/ccnQ8l0t.s:1788   .text.SD_DMA_RxCplt:0000000000000000 $t
     /tmp/ccnQ8l0t.s:1830   .text.HAL_SD_DMA_RxErrorCallback:0000000000000000 $t
     /tmp/ccnQ8l0t.s:1837   .text.HAL_SD_DMA_RxErrorCallback:0000000000000000 HAL_SD_DMA_RxErrorCallback
     /tmp/ccnQ8l0t.s:1850   .text.SD_DMA_RxError:0000000000000000 $t
     /tmp/ccnQ8l0t.s:1881   .text.HAL_SD_DMA_TxCpltCallback:0000000000000000 $t
     /tmp/ccnQ8l0t.s:1888   .text.HAL_SD_DMA_TxCpltCallback:0000000000000000 HAL_SD_DMA_TxCpltCallback
     /tmp/ccnQ8l0t.s:1901   .text.SD_DMA_TxCplt:0000000000000000 $t
     /tmp/ccnQ8l0t.s:1943   .text.HAL_SD_DMA_TxErrorCallback:0000000000000000 $t
     /tmp/ccnQ8l0t.s:1950   .text.HAL_SD_DMA_TxErrorCallback:0000000000000000 HAL_SD_DMA_TxErrorCallback
     /tmp/ccnQ8l0t.s:1963   .text.SD_DMA_TxError:0000000000000000 $t
     /tmp/ccnQ8l0t.s:1994   .text.HAL_SD_Get_CardInfo:0000000000000000 $t
     /tmp/ccnQ8l0t.s:2001   .text.HAL_SD_Get_CardInfo:0000000000000000 HAL_SD_Get_CardInfo
     /tmp/ccnQ8l0t.s:2439   .text.HAL_SD_Init:0000000000000000 $t
     /tmp/ccnQ8l0t.s:2446   .text.HAL_SD_Init:0000000000000000 HAL_SD_Init
     /tmp/ccnQ8l0t.s:3017   .text.HAL_SD_Init:00000000000002ec $d
     /tmp/ccnQ8l0t.s:3020   .text.HAL_SD_Init:00000000000002f0 $t
     /tmp/ccnQ8l0t.s:3231   .text.HAL_SD_WideBusOperation_Config:0000000000000000 $t
     /tmp/ccnQ8l0t.s:3238   .text.HAL_SD_WideBusOperation_Config:0000000000000000 HAL_SD_WideBusOperation_Config
ARM GAS  /tmp/ccnQ8l0t.s 			page 175


     /tmp/ccnQ8l0t.s:3524   .text.HAL_SD_StopTransfer:0000000000000000 $t
     /tmp/ccnQ8l0t.s:3531   .text.HAL_SD_StopTransfer:0000000000000000 HAL_SD_StopTransfer
     /tmp/ccnQ8l0t.s:3584   .text.HAL_SD_ReadBlocks:0000000000000000 $t
     /tmp/ccnQ8l0t.s:3591   .text.HAL_SD_ReadBlocks:0000000000000000 HAL_SD_ReadBlocks
     /tmp/ccnQ8l0t.s:3916   .text.HAL_SD_WriteBlocks:0000000000000000 $t
     /tmp/ccnQ8l0t.s:3923   .text.HAL_SD_WriteBlocks:0000000000000000 HAL_SD_WriteBlocks
     /tmp/ccnQ8l0t.s:4324   .text.HAL_SD_CheckReadOperation:0000000000000000 $t
     /tmp/ccnQ8l0t.s:4331   .text.HAL_SD_CheckReadOperation:0000000000000000 HAL_SD_CheckReadOperation
     /tmp/ccnQ8l0t.s:4462   .text.HAL_SD_HighSpeed:0000000000000000 $t
     /tmp/ccnQ8l0t.s:4469   .text.HAL_SD_HighSpeed:0000000000000000 HAL_SD_HighSpeed
     /tmp/ccnQ8l0t.s:4729   .text.HAL_SD_HighSpeed:0000000000000150 $d
     /tmp/ccnQ8l0t.s:4734   .text.HAL_SD_SendSDStatus:0000000000000000 $t
     /tmp/ccnQ8l0t.s:4741   .text.HAL_SD_SendSDStatus:0000000000000000 HAL_SD_SendSDStatus
     /tmp/ccnQ8l0t.s:4995   .text.HAL_SD_GetStatus:0000000000000000 $t
     /tmp/ccnQ8l0t.s:5002   .text.HAL_SD_GetStatus:0000000000000000 HAL_SD_GetStatus
     /tmp/ccnQ8l0t.s:5094   .text.HAL_SD_CheckWriteOperation:0000000000000000 $t
     /tmp/ccnQ8l0t.s:5101   .text.HAL_SD_CheckWriteOperation:0000000000000000 HAL_SD_CheckWriteOperation
     /tmp/ccnQ8l0t.s:5246   .text.HAL_SD_GetCardStatus:0000000000000000 $t
     /tmp/ccnQ8l0t.s:5253   .text.HAL_SD_GetCardStatus:0000000000000000 HAL_SD_GetCardStatus
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
SDIO_GetCommandResponse
SDIO_GetResponse
SDIO_SendCommand
SDIO_DataConfig
SDIO_ReadFIFO
SDIO_PowerState_OFF
HAL_DMA_Start_IT
HAL_DMA_Abort
SDIO_Init
SDIO_PowerState_ON
HAL_Delay
SDIO_GetPowerState
SDIO_WriteFIFO
memset
